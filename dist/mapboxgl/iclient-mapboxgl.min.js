/*!
 * 
 *          iclient-mapboxgl
 *          CopyrightÂ© 2000 - 2023 SuperMap Software Co.Ltd
 *          license: Apache-2.0
 *          version: v11.1.0-beta
 *
 */!function(){var e={937:function(e){!function(t){"use strict";if(t.__disableNativeFetch||!t.fetch){s.prototype.append=function(e,t){e=i(e),t=a(t);var r=this.map[e];r||(r=[],this.map[e]=r),r.push(t)},s.prototype.delete=function(e){delete this.map[i(e)]},s.prototype.get=function(e){var t=this.map[i(e)];return t?t[0]:null},s.prototype.getAll=function(e){return this.map[i(e)]||[]},s.prototype.has=function(e){return this.map.hasOwnProperty(i(e))},s.prototype.set=function(e,t){this.map[i(e)]=[a(t)]},s.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){e.call(t,n,r,this)},this)},this)};var r={blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t},n=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this)},f.call(p.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var o=[301,302,303,307,308];y.redirect=function(e,t){if(-1===o.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},t.Headers=s,t.Request=p,t.Response=y,t.fetch=function(e,t){return new Promise(function(n,o){var i;i=p.prototype.isPrototypeOf(e)&&!t?e:new p(e,t);var a=new XMLHttpRequest;var l=!1;function u(){if(4===a.readyState){var e=1223===a.status?204:a.status;if(e<100||e>599){if(l)return;return l=!0,void o(new TypeError("Network request failed"))}var t={status:e,statusText:a.statusText,headers:function(e){var t=new s;return e.getAllResponseHeaders().trim().split("\n").forEach(function(e){var r=e.trim().split(":"),n=r.shift().trim(),o=r.join(":").trim();t.append(n,o)}),t}(a),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},r="response"in a?a.response:a.responseText;l||(l=!0,n(new y(r,t)))}}a.onreadystatechange=u,a.onload=u,a.onerror=function(){l||(l=!0,o(new TypeError("Network request failed")))},a.open(i.method,i.url,!0);try{"include"===i.credentials&&("withCredentials"in a?a.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(e){console&&console.warn&&console.warn("set withCredentials error:"+e)}"responseType"in a&&r.blob&&(a.responseType="blob"),i.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0,e.exports&&(e.exports=t.fetch)}function i(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function s(e){this.map={},e instanceof s?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function u(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function c(e){var t=new FileReader;return t.readAsArrayBuffer(e),u(t)}function f(){return this.bodyUsed=!1,this._initBody=function(e,t){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(r.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e,this._options=t;else if(r.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!r.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText=""},r.blob?(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var e,t,r,n,o,i,a,s=l(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,t=this._options,r=new FileReader,n=t.headers.map["content-type"]?t.headers.map["content-type"].toString():"",o=/charset\=[0-9a-zA-Z\-\_]*;?/,i=e.type.match(o)||n.match(o),a=[e],i&&a.push(i[0].replace(/^charset\=/,"").replace(/;$/,"")),r.readAsText.apply(r,a),u(r);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=l(this);return e||Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e,t){var r,o,i=(t=t||{}).body;if(p.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new s(e.headers)),this.method=e.method,this.mode=e.mode,i||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new s(t.headers)),this.method=(r=t.method||this.method||"GET",o=r.toUpperCase(),n.indexOf(o)>-1?o:r),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i,t)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function y(e,t){t||(t={}),this._initBody(e,t),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof s?t.headers:new s(t.headers),this.url=t.url||""}}("undefined"!=typeof self?self:this)},238:function(e,t){var r,n,o;n=[t,e],void 0===(o="function"==typeof(r=function(e,t){"use strict";var r={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function n(e){try{delete window[e]}catch(t){window[e]=void 0}}function o(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=e,a=t.timeout||r.timeout,s=t.jsonpCallback||r.jsonpCallback,l=void 0;return new Promise(function(r,u){var c=t.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),f=s+"_"+c;window[c]=function(e){r({ok:!0,json:function(){return Promise.resolve(e)}}),l&&clearTimeout(l),o(f),n(c)},i+=-1===i.indexOf("?")?"?":"&";var p=document.createElement("script");p.setAttribute("src",""+i+s+"="+c),t.charset&&p.setAttribute("charset",t.charset),p.id=f,document.getElementsByTagName("head")[0].appendChild(p),l=setTimeout(function(){u(new Error("JSONP request to "+e+" timed out")),n(c),o(f),window[c]=function(){n(c)}},a),p.onerror=function(){u(new Error("JSONP request to "+e+" failed")),n(c),o(f),l&&clearTimeout(l)}})}})?r.apply(t,n):r)||(e.exports=o)},634:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Builder=void 0;var n=r(603),o=r(83),i=function(){function e(e){var t;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder,t=e||1024,this.bb=n.ByteBuffer.allocate(t),this.space=t}return e.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null},e.prototype.forceDefaults=function(e){this.force_defaults=e},e.prototype.dataBuffer=function(){return this.bb},e.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},e.prototype.prep=function(t,r){t>this.minalign&&(this.minalign=t);for(var n=1+~(this.bb.capacity()-this.space+r)&t-1;this.space<n+t+r;){var o=this.bb.capacity();this.bb=e.growByteBuffer(this.bb),this.space+=this.bb.capacity()-o}this.pad(n)},e.prototype.pad=function(e){for(var t=0;t<e;t++)this.bb.writeInt8(--this.space,0)},e.prototype.writeInt8=function(e){this.bb.writeInt8(this.space-=1,e)},e.prototype.writeInt16=function(e){this.bb.writeInt16(this.space-=2,e)},e.prototype.writeInt32=function(e){this.bb.writeInt32(this.space-=4,e)},e.prototype.writeInt64=function(e){this.bb.writeInt64(this.space-=8,e)},e.prototype.writeFloat32=function(e){this.bb.writeFloat32(this.space-=4,e)},e.prototype.writeFloat64=function(e){this.bb.writeFloat64(this.space-=8,e)},e.prototype.addInt8=function(e){this.prep(1,0),this.writeInt8(e)},e.prototype.addInt16=function(e){this.prep(2,0),this.writeInt16(e)},e.prototype.addInt32=function(e){this.prep(4,0),this.writeInt32(e)},e.prototype.addInt64=function(e){this.prep(8,0),this.writeInt64(e)},e.prototype.addFloat32=function(e){this.prep(4,0),this.writeFloat32(e)},e.prototype.addFloat64=function(e){this.prep(8,0),this.writeFloat64(e)},e.prototype.addFieldInt8=function(e,t,r){(this.force_defaults||t!=r)&&(this.addInt8(t),this.slot(e))},e.prototype.addFieldInt16=function(e,t,r){(this.force_defaults||t!=r)&&(this.addInt16(t),this.slot(e))},e.prototype.addFieldInt32=function(e,t,r){(this.force_defaults||t!=r)&&(this.addInt32(t),this.slot(e))},e.prototype.addFieldInt64=function(e,t,r){(this.force_defaults||t!==r)&&(this.addInt64(t),this.slot(e))},e.prototype.addFieldFloat32=function(e,t,r){(this.force_defaults||t!=r)&&(this.addFloat32(t),this.slot(e))},e.prototype.addFieldFloat64=function(e,t,r){(this.force_defaults||t!=r)&&(this.addFloat64(t),this.slot(e))},e.prototype.addFieldOffset=function(e,t,r){(this.force_defaults||t!=r)&&(this.addOffset(t),this.slot(e))},e.prototype.addFieldStruct=function(e,t,r){t!=r&&(this.nested(t),this.slot(e))},e.prototype.nested=function(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},e.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},e.prototype.slot=function(e){null!==this.vtable&&(this.vtable[e]=this.offset())},e.prototype.offset=function(){return this.bb.capacity()-this.space},e.growByteBuffer=function(e){var t=e.capacity();if(3221225472&t)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var r=t<<1,o=n.ByteBuffer.allocate(r);return o.setPosition(r-t),o.bytes().set(e.bytes(),r-t),o},e.prototype.addOffset=function(e){this.prep(o.SIZEOF_INT,0),this.writeInt32(this.offset()-e+o.SIZEOF_INT)},e.prototype.startObject=function(e){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=e;for(var t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()},e.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var e=this.offset(),t=this.vtable_in_use-1;t>=0&&0==this.vtable[t];t--);for(var r=t+1;t>=0;t--)this.addInt16(0!=this.vtable[t]?e-this.vtable[t]:0);this.addInt16(e-this.object_start);var n=(r+2)*o.SIZEOF_SHORT;this.addInt16(n);var i=0,a=this.space;e:for(t=0;t<this.vtables.length;t++){var s=this.bb.capacity()-this.vtables[t];if(n==this.bb.readInt16(s)){for(var l=o.SIZEOF_SHORT;l<n;l+=o.SIZEOF_SHORT)if(this.bb.readInt16(a+l)!=this.bb.readInt16(s+l))continue e;i=this.vtables[t];break}}return i?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,i-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e},e.prototype.finish=function(e,t,r){var n=r?o.SIZE_PREFIX_LENGTH:0;if(t){var i=t;if(this.prep(this.minalign,o.SIZEOF_INT+o.FILE_IDENTIFIER_LENGTH+n),i.length!=o.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+o.FILE_IDENTIFIER_LENGTH);for(var a=o.FILE_IDENTIFIER_LENGTH-1;a>=0;a--)this.writeInt8(i.charCodeAt(a))}this.prep(this.minalign,o.SIZEOF_INT+n),this.addOffset(e),n&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},e.prototype.finishSizePrefixed=function(e,t){this.finish(e,t,!0)},e.prototype.requiredField=function(e,t){var r=this.bb.capacity()-e,n=r-this.bb.readInt32(r);if(!(0!=this.bb.readInt16(n+t)))throw new Error("FlatBuffers: field "+t+" must be set")},e.prototype.startVector=function(e,t,r){this.notNested(),this.vector_num_elems=t,this.prep(o.SIZEOF_INT,e*t),this.prep(r,e*t)},e.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},e.prototype.createSharedString=function(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);var t=this.createString(e);return this.string_maps.set(e,t),t},e.prototype.createString=function(e){if(null===e||void 0===e)return 0;var t;t=e instanceof Uint8Array?e:this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);for(var r=0,n=this.space,o=this.bb.bytes();r<t.length;r++)o[n++]=t[r];return this.endVector()},e.prototype.createObjectOffset=function(e){return null===e?0:"string"==typeof e?this.createString(e):e.pack(this)},e.prototype.createObjectOffsetList=function(e){for(var t=[],r=0;r<e.length;++r){var n=e[r];if(null===n)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");t.push(this.createObjectOffset(n))}return t},e.prototype.createStructOffsetList=function(e,t){return t(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()},e}();t.Builder=i},603:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ByteBuffer=void 0;var n=r(83),o=r(700),i=r(958),a=function(){function e(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}return e.allocate=function(t){return new e(new Uint8Array(t))},e.prototype.clear=function(){this.position_=0},e.prototype.bytes=function(){return this.bytes_},e.prototype.position=function(){return this.position_},e.prototype.setPosition=function(e){this.position_=e},e.prototype.capacity=function(){return this.bytes_.length},e.prototype.readInt8=function(e){return this.readUint8(e)<<24>>24},e.prototype.readUint8=function(e){return this.bytes_[e]},e.prototype.readInt16=function(e){return this.readUint16(e)<<16>>16},e.prototype.readUint16=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8},e.prototype.readInt32=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24},e.prototype.readUint32=function(e){return this.readInt32(e)>>>0},e.prototype.readInt64=function(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))},e.prototype.readUint64=function(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))},e.prototype.readFloat32=function(e){return o.int32[0]=this.readInt32(e),o.float32[0]},e.prototype.readFloat64=function(e){return o.int32[o.isLittleEndian?0:1]=this.readInt32(e),o.int32[o.isLittleEndian?1:0]=this.readInt32(e+4),o.float64[0]},e.prototype.writeInt8=function(e,t){this.bytes_[e]=t},e.prototype.writeUint8=function(e,t){this.bytes_[e]=t},e.prototype.writeInt16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8},e.prototype.writeUint16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8},e.prototype.writeInt32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24},e.prototype.writeUint32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24},e.prototype.writeInt64=function(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))},e.prototype.writeUint64=function(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))},e.prototype.writeFloat32=function(e,t){o.float32[0]=t,this.writeInt32(e,o.int32[0])},e.prototype.writeFloat64=function(e,t){o.float64[0]=t,this.writeInt32(e,o.int32[o.isLittleEndian?0:1]),this.writeInt32(e+4,o.int32[o.isLittleEndian?1:0])},e.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+n.SIZEOF_INT+n.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var e="",t=0;t<n.FILE_IDENTIFIER_LENGTH;t++)e+=String.fromCharCode(this.readInt8(this.position_+n.SIZEOF_INT+t));return e},e.prototype.__offset=function(e,t){var r=e-this.readInt32(e);return t<this.readInt16(r)?this.readInt16(r+t):0},e.prototype.__union=function(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e},e.prototype.__string=function(e,t){e+=this.readInt32(e);var r=this.readInt32(e);e+=n.SIZEOF_INT;var o=this.bytes_.subarray(e,e+r);return t===i.Encoding.UTF8_BYTES?o:this.text_decoder_.decode(o)},e.prototype.__union_with_string=function(e,t){return"string"==typeof e?this.__string(t):this.__union(e,t)},e.prototype.__indirect=function(e){return e+this.readInt32(e)},e.prototype.__vector=function(e){return e+this.readInt32(e)+n.SIZEOF_INT},e.prototype.__vector_len=function(e){return this.readInt32(e+this.readInt32(e))},e.prototype.__has_identifier=function(e){if(e.length!=n.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+n.FILE_IDENTIFIER_LENGTH);for(var t=0;t<n.FILE_IDENTIFIER_LENGTH;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+n.SIZEOF_INT+t))return!1;return!0},e.prototype.createScalarList=function(e,t){for(var r=[],n=0;n<t;++n){var o=e(n);null!==o&&r.push(o)}return r},e.prototype.createObjList=function(e,t){for(var r=[],n=0;n<t;++n){var o=e(n);null!==o&&r.push(o.unpack())}return r},e}();t.ByteBuffer=a},83:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SIZE_PREFIX_LENGTH=t.FILE_IDENTIFIER_LENGTH=t.SIZEOF_INT=t.SIZEOF_SHORT=void 0,t.SIZEOF_SHORT=2,t.SIZEOF_INT=4,t.FILE_IDENTIFIER_LENGTH=4,t.SIZE_PREFIX_LENGTH=4},958:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Encoding=void 0,function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"}(t.Encoding||(t.Encoding={}))},828:function(e,t,r){"use strict";t.cZ=t.XU=void 0;var n=r(83);var o=r(83);var i=r(83);var a=r(83);Object.defineProperty(t,"XU",{enumerable:!0,get:function(){return a.SIZE_PREFIX_LENGTH}});var s=r(700);var l=r(958);var u=r(634);var c=r(603);Object.defineProperty(t,"cZ",{enumerable:!0,get:function(){return c.ByteBuffer}})},700:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLittleEndian=t.float64=t.float32=t.int32=void 0,t.int32=new Int32Array(2),t.float32=new Float32Array(t.int32.buffer),t.float64=new Float64Array(t.int32.buffer),t.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0]},820:function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=9007199254740991,i="[object Arguments]",a="[object Function]",s="[object GeneratorFunction]",l="[object Map]",u="[object Set]",c=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,p="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,h="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,y=p||h||Function("return this")();function d(e,t){return function(e,t){for(var r=-1,n=e?e.length:0,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(t,function(t){return[t,e[t]]})}var b,v,m,g=Function.prototype,w=Object.prototype,O=y["__core-js_shared__"],S=(b=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",_=g.toString,P=w.hasOwnProperty,x=w.toString,E=RegExp("^"+_.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=w.propertyIsEnumerable,j=(v=Object.keys,m=Object,function(e){return v(m(e))}),C=J(y,"DataView"),T=J(y,"Map"),R=J(y,"Promise"),A=J(y,"Set"),L=J(y,"WeakMap"),I=z(C),M=z(T),N=z(R),D=z(A),F=z(L);function B(e,t){var r=W(e)||function(e){return function(e){return function(e){return!!e&&"object"==n(e)}(e)&&q(e)}(e)&&P.call(e,"callee")&&(!k.call(e,"callee")||x.call(e)==i)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],o=r.length,a=!!o;for(var s in e)!t&&!P.call(e,s)||a&&("length"==s||H(s,o))||r.push(s);return r}function G(e){return!(!X(e)||S&&S in e)&&(Y(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?E:c).test(z(e))}function U(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||w,t!==n)return j(e);var t,r,n,o=[];for(var i in Object(e))P.call(e,i)&&"constructor"!=i&&o.push(i);return o}function J(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return G(r)?r:void 0}var V=function(e){return x.call(e)};function H(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||f.test(e))&&e>-1&&e%1==0&&e<t}function z(e){if(null!=e){try{return _.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(C&&"[object DataView]"!=V(new C(new ArrayBuffer(1)))||T&&V(new T)!=l||R&&"[object Promise]"!=V(R.resolve())||A&&V(new A)!=u||L&&"[object WeakMap]"!=V(new L))&&(V=function(e){var t=x.call(e),r="[object Object]"==t?e.constructor:void 0,n=r?z(r):void 0;if(n)switch(n){case I:return"[object DataView]";case M:return l;case N:return"[object Promise]";case D:return u;case F:return"[object WeakMap]"}return t});var W=Array.isArray;function q(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}(e.length)&&!Y(e)}function Y(e){var t=X(e)?x.call(e):"";return t==a||t==s}function X(e){var t=n(e);return!!e&&("object"==t||"function"==t)}var Q,Z=(Q=function(e){return q(e)?B(e):U(e)},function(e){var t,r,n,o=V(e);return o==l?(t=e,r=-1,n=Array(t.size),t.forEach(function(e,t){n[++r]=[t,e]}),n):o==u?function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}(e):d(e,Q(e))});e.exports=Z},957:function(e,t,r){var n,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(){"use strict";function e(e){var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){return t.reject(r)})})}function t(e){return new this(function(t,r){if(!e||void 0===e.length)return r(new TypeError(a(e)+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);var o=n.length;function i(e,r){if(r&&("object"===a(r)||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,function(t){i(e,t)},function(r){n[e]={status:"rejected",reason:r},0==--o&&t(n)})}n[e]={status:"fulfilled",value:r},0==--o&&t(n)}for(var s=0;s<n.length;s++)i(s,n[s])})}var n=setTimeout;function o(e){return Boolean(e&&void 0!==e.length)}function i(){}function s(e){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(e,this)}function l(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,s._immediateFn(function(){var r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){var n;try{n=r(e._value)}catch(e){return void c(t.promise,e)}u(t.promise,n)}else(1===e._state?u:c)(t.promise,e._value)})):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===a(t)||"function"==typeof t)){var r=t.then;if(t instanceof s)return e._state=3,e._value=t,void f(e);if("function"==typeof r)return void p((n=r,o=t,function(){n.apply(o,arguments)}),e)}e._state=1,e._value=t,f(e)}catch(t){c(e,t)}var n,o}function c(e,t){e._state=2,e._value=t,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&s._immediateFn(function(){e._handled||s._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)l(e,e._deferreds[t]);e._deferreds=null}function p(e,t){var r=!1;try{e(function(e){r||(r=!0,u(t,e))},function(e){r||(r=!0,c(t,e))})}catch(e){if(r)return;r=!0,c(t,e)}}s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){var r=new this.constructor(i);return l(this,new function(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}(e,t,r)),r},s.prototype.finally=e,s.all=function(e){return new s(function(t,r){if(!o(e))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);var i=n.length;function s(e,o){try{if(o&&("object"===a(o)||"function"==typeof o)){var l=o.then;if("function"==typeof l)return void l.call(o,function(t){s(e,t)},r)}n[e]=o,0==--i&&t(n)}catch(e){r(e)}}for(var l=0;l<n.length;l++)s(l,n[l])})},s.allSettled=t,s.resolve=function(e){return e&&"object"===a(e)&&e.constructor===s?e:new s(function(t){t(e)})},s.reject=function(e){return new s(function(t,r){r(e)})},s.race=function(e){return new s(function(t,r){if(!o(e))return r(new TypeError("Promise.race accepts an array"));for(var n=0,i=e.length;n<i;n++)s.resolve(e[n]).then(t,r)})},s._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){n(e,0)},s._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var h=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();"function"!=typeof h.Promise?h.Promise=s:(h.Promise.prototype.finally||(h.Promise.prototype.finally=e),h.Promise.allSettled||(h.Promise.allSettled=t))},"object"===a(t)?i():void 0===(o="function"==typeof(n=i)?n.call(t,r,t,e):n)||(e.exports=o)},861:function(e,t,r){"use strict";e.exports=o,e.exports.default=o;var n=r(333);function o(e,t){if(!(this instanceof o))return new o(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function i(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}function a(e,t){s(e,0,e.children.length,t,e)}function s(e,t,r,n,o){o||(o=d(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i,a=t;a<r;a++)i=e.children[a],l(o,e.leaf?n(i):i);return o}function l(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function u(e,t){return e.minX-t.minX}function c(e,t){return e.minY-t.minY}function f(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function p(e){return e.maxX-e.minX+(e.maxY-e.minY)}function h(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function y(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function d(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b(e,t,r,o,i){for(var a,s=[t,r];s.length;)(r=s.pop())-(t=s.pop())<=o||(a=t+Math.ceil((r-t)/o/2)*o,n(e,a,t,r,i),s.push(t,a,a,r))}o.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],n=this.toBBox;if(!y(e,t))return r;for(var o,i,a,s,l=[];t;){for(o=0,i=t.children.length;o<i;o++)a=t.children[o],y(e,s=t.leaf?n(a):a)&&(t.leaf?r.push(a):h(e,s)?this._all(a,r):l.push(a));t=l.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!y(e,t))return!1;for(var n,o,i,a,s=[];t;){for(n=0,o=t.children.length;n<o;n++)if(i=t.children[n],y(e,a=t.leaf?r(i):i)){if(t.leaf||h(e,a))return!0;s.push(i)}t=s.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=d([]),this},remove:function(e,t){if(!e)return this;for(var r,n,o,a,s=this.data,l=this.toBBox(e),u=[],c=[];s||u.length;){if(s||(s=u.pop(),n=u[u.length-1],r=c.pop(),a=!0),s.leaf&&-1!==(o=i(e,s.children,t)))return s.children.splice(o,1),u.push(s),this._condense(u),this;a||s.leaf||!h(s,l)?n?(r++,s=n.children[r],a=!1):s=null:(u.push(s),c.push(r),r=0,n=s,s=s.children[0])}return this},toBBox:function(e){return e},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,n){var o,i=r-t+1,s=this._maxEntries;if(i<=s)return a(o=d(e.slice(t,r+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/Math.pow(s,n-1))),(o=d([])).leaf=!1,o.height=n;var l,u,c,f,p=Math.ceil(i/s),h=p*Math.ceil(Math.sqrt(s));for(b(e,t,r,h,this.compareMinX),l=t;l<=r;l+=h)for(b(e,l,c=Math.min(l+h-1,r),p,this.compareMinY),u=l;u<=c;u+=p)f=Math.min(u+p-1,c),o.children.push(this._build(e,u,f,n-1));return a(o,this.toBBox),o},_chooseSubtree:function(e,t,r,n){for(var o,i,a,s,l,u,c,p,h,y;n.push(t),!t.leaf&&n.length-1!==r;){for(c=p=1/0,o=0,i=t.children.length;o<i;o++)l=f(a=t.children[o]),h=e,y=a,(u=(Math.max(y.maxX,h.maxX)-Math.min(y.minX,h.minX))*(Math.max(y.maxY,h.maxY)-Math.min(y.minY,h.minY))-l)<p?(p=u,c=l<c?l:c,s=a):u===p&&l<c&&(c=l,s=a);t=s||t.children[0]}return t},_insert:function(e,t,r){var n=this.toBBox,o=r?e:n(e),i=[],a=this._chooseSubtree(o,this.data,t,i);for(a.children.push(e),l(a,o);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(o,i,t)},_split:function(e,t){var r=e[t],n=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,n);var i=this._chooseSplitIndex(r,o,n),s=d(r.children.splice(i,r.children.length-i));s.height=r.height,s.leaf=r.leaf,a(r,this.toBBox),a(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(r,s)},_splitRoot:function(e,t){this.data=d([e,t]),this.data.height=e.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var n,o,i,a,l,u,c,p,h,y,d,b,v,m;for(u=c=1/0,n=t;n<=r-t;n++)o=s(e,0,n,this.toBBox),i=s(e,n,r,this.toBBox),h=o,y=i,void 0,void 0,void 0,void 0,d=Math.max(h.minX,y.minX),b=Math.max(h.minY,y.minY),v=Math.min(h.maxX,y.maxX),m=Math.min(h.maxY,y.maxY),a=Math.max(0,v-d)*Math.max(0,m-b),l=f(o)+f(i),a<u?(u=a,p=n,c=l<c?l:c):a===u&&l<c&&(c=l,p=n);return p},_chooseSplitAxis:function(e,t,r){var n=e.leaf?this.compareMinX:u,o=e.leaf?this.compareMinY:c;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,o)&&e.children.sort(n)},_allDistMargin:function(e,t,r,n){e.children.sort(n);var o,i,a=this.toBBox,u=s(e,0,t,a),c=s(e,r-t,r,a),f=p(u)+p(c);for(o=t;o<r-t;o++)i=e.children[o],l(u,e.leaf?a(i):i),f+=p(u);for(o=r-t-1;o>=t;o--)i=e.children[o],l(c,e.leaf?a(i):i),f+=p(c);return f},_adjustParentBBoxes:function(e,t,r){for(var n=r;n>=0;n--)l(t[n],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)0===e[r].children.length?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():a(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}},333:function(e,t,r){var n,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(){"use strict";function e(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function t(e,t){return e<t?-1:e>t?1:0}return function(r,n,o,i,a){!function t(r,n,o,i,a){for(;i>o;){if(i-o>600){var s=i-o+1,l=n-o+1,u=Math.log(s),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1),p=Math.max(o,Math.floor(n-l*c/s+f)),h=Math.min(i,Math.floor(n+(s-l)*c/s+f));t(r,n,p,h,a)}var y=r[n],d=o,b=i;for(e(r,o,n),a(r[i],y)>0&&e(r,o,i);d<b;){for(e(r,d,b),d++,b--;a(r[d],y)<0;)d++;for(;a(r[b],y)>0;)b--}0===a(r[o],y)?e(r,o,b):e(r,++b,i),b<=n&&(o=b+1),n<=b&&(i=b-1)}}(r,n,o||0,i||r.length-1,a||t)}},"object"===a(t)?e.exports=i():void 0===(o="function"==typeof(n=i)?n.call(t,r,t,e):n)||(e.exports=o)},425:function(e,t,r){var n,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(){"use strict";var e=new Uint8Array(0);function t(t){this._source=t,this._array=e,this._index=0}return t.prototype.read=function(){var t=this,r=t._array.subarray(t._index);return t._source.read().then(function(n){return t._array=e,t._index=0,n.done?r.length>0?{done:!1,value:r}:{done:!0,value:void 0}:{done:!1,value:function(e,t){if(!e.length)return t;if(!t.length)return e;var r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(r,n.value)}})},t.prototype.slice=function(t){if((t|=0)<0)throw new Error("invalid length");var r=this,n=this._array.length-this._index;if(this._index+t<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=t));var o=new Uint8Array(t);return o.set(this._array.subarray(this._index)),function i(){return r._source.read().then(function(a){return a.done?(r._array=e,r._index=0,n>0?o.subarray(0,n):null):n+a.value.length>=t?(r._array=a.value,r._index=t-n,o.set(a.value.subarray(0,t-n),n),o):(o.set(a.value,n),n+=a.value.length,i())})}()},t.prototype.cancel=function(){return this._source.cancel()},function(e){return"function"==typeof e.slice?e:new t("function"==typeof e.read?e:e.getReader())}},"object"===a(t)?e.exports=i():void 0===(o="function"==typeof(n=i)?n.call(t,r,t,e):n)||(e.exports=o)},351:function(e,t){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function n(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})}function o(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function i(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e){return this instanceof a?(this.v=e,this):new a(e)}function s(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){o[e]&&(n[e]=function(t){return new Promise(function(r,n){i.push([e,t,r,n])>1||l(e,t)})})}function l(e,t){try{(r=o[e](t)).value instanceof a?Promise.resolve(r.value.v).then(u,c):f(i[0][2],r)}catch(e){f(i[0][3],e)}var r}function u(e){l("next",e)}function c(e){l("throw",e)}function f(e,t){e(t),i.shift(),i.length&&l(i[0][0],i[0][1])}}var l=function(e){function t(t){var r=e.call(this,t)||this;return Object.defineProperty(r,"name",{value:"RepeaterOverflowError",enumerable:!1}),"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(r,r.constructor.prototype):r.__proto__=r.constructor.prototype,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(r,r.constructor),r}return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error),u=function(){function e(e){if(e<0)throw new RangeError("Capacity may not be less than 0");this._c=e,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),e.prototype.add=function(e){if(this.full)throw new Error("Buffer full");this._q.push(e)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e}(),c=function(){function e(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.add=function(e){for(;this._q.length>=this._c;)this._q.shift();this._q.push(e)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e}(),f=function(){function e(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.add=function(e){this._q.length<this._c&&this._q.push(e)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e}();function p(e){null!=e&&"function"==typeof e.then&&e.then(g,g)}var h=0,y=1,d=2,b=3,v=4,m=1024,g=function(){};function w(e){var t=e.err,r=Promise.resolve(e.execution).then(function(e){if(null!=t)throw t;return e});return e.err=void 0,e.execution=r.then(function(){},function(){}),void 0===e.pending?r:e.pending.then(function(){return r})}function O(e,t){var r=e.state>=b;return Promise.resolve(t).then(function(t){return!r&&e.state>=v?w(e).then(function(e){return{value:e,done:!0}}):{value:t,done:r}})}function S(e,t){var r,n;if(!(e.state>=d))if(e.state=d,e.onnext(),e.onstop(),null==e.err&&(e.err=t),0!==e.pushes.length||void 0!==e.buffer&&!e.buffer.empty)try{for(var o=i(e.pushes),a=o.next();!a.done;a=o.next()){a.value.resolve()}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}else _(e)}function _(e){var t,r;if(!(e.state>=b)){e.state<d&&S(e),e.state=b,e.buffer=void 0;try{for(var n=i(e.nexts),o=n.next();!o.done;o=n.next()){var a=o.value,s=void 0===e.pending?w(e):e.pending.then(function(){return w(e)});a.resolve(O(e,s))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}e.pushes=[],e.nexts=[]}}function P(e){e.state>=v||(e.state<b&&_(e),e.state=v)}function x(e){if(!(e.state>=y)){e.state=y;var t=function(e,t){if(p(t),e.pushes.length>=m)throw new l("No more than "+m+" pending calls to push are allowed on a single repeater.");if(e.state>=d)return Promise.resolve(void 0);var r,n=void 0===e.pending?Promise.resolve(t):e.pending.then(function(){return t});n=n.catch(function(t){e.state<d&&(e.err=t),P(e)}),e.nexts.length?(e.nexts.shift().resolve(O(e,n)),r=e.nexts.length?Promise.resolve(e.nexts[0].value):new Promise(function(t){return e.onnext=t})):void 0===e.buffer||e.buffer.full?r=new Promise(function(t){return e.pushes.push({resolve:t,value:n})}):(e.buffer.add(n),r=Promise.resolve(void 0));var o=!0,i={},a=r.catch(function(e){if(o)throw e});return i.then=function(e,t){return o=!1,Promise.prototype.then.call(r,e,t)},i.catch=function(e){return o=!1,Promise.prototype.catch.call(r,e)},i.finally=r.finally.bind(r),e.pending=n.then(function(){return a}).catch(function(t){e.err=t,P(e)}),i}.bind(null,e),r=function(e){var t=S.bind(null,e),r=new Promise(function(t){return e.onstop=t});return t.then=r.then.bind(r),t.catch=r.catch.bind(r),t.finally=r.finally.bind(r),t}(e);e.execution=new Promise(function(n){return n(e.executor(t,r))}),e.execution.catch(function(){return S(e)})}}var E=new WeakMap,k=function(){function e(e,t){E.set(this,{executor:e,buffer:t,err:void 0,state:h,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:g,onstop:g})}return e.prototype.next=function(e){p(e);var t=E.get(this);if(void 0===t)throw new Error("WeakMap error");if(t.nexts.length>=m)throw new l("No more than "+m+" pending calls to next are allowed on a single repeater.");if(t.state<=h&&x(t),t.onnext(e),void 0!==t.buffer&&!t.buffer.empty){var r=O(t,t.buffer.remove());if(t.pushes.length){var n=t.pushes.shift();t.buffer.add(n.value),t.onnext=n.resolve}return r}if(t.pushes.length){var o=t.pushes.shift();return t.onnext=o.resolve,O(t,o.value)}return t.state>=d?(_(t),O(t,w(t))):new Promise(function(r){return t.nexts.push({resolve:r,value:e})})},e.prototype.return=function(e){p(e);var t=E.get(this);if(void 0===t)throw new Error("WeakMap error");return _(t),t.execution=Promise.resolve(t.execution).then(function(){return e}),O(t,w(t))},e.prototype.throw=function(e){var t=E.get(this);if(void 0===t)throw new Error("WeakMap error");return t.state<=h||t.state>=d||void 0!==t.buffer&&!t.buffer.empty?(_(t),null==t.err&&(t.err=e),O(t,w(t))):this.next(Promise.reject(e))},e.prototype[Symbol.asyncIterator]=function(){return this},e.race=C,e.merge=T,e.zip=R,e.latest=A,e}();function j(e,t){var r,n,l=[],u=function(e){null!=e&&"function"==typeof e[Symbol.asyncIterator]?l.push(e[Symbol.asyncIterator]()):null!=e&&"function"==typeof e[Symbol.iterator]?l.push(e[Symbol.iterator]()):l.push(function(){return s(this,arguments,function(){return o(this,function(r){switch(r.label){case 0:return t.yieldValues?[4,a(e)]:[3,3];case 1:return[4,r.sent()];case 2:r.sent(),r.label=3;case 3:return t.returnValues?[4,a(e)]:[3,5];case 4:return[2,r.sent()];case 5:return[2]}})})}())};try{for(var c=i(e),f=c.next();!f.done;f=c.next()){u(f.value)}}catch(e){r={error:e}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return l}function C(e){var t=this,r=j(e,{returnValues:!0});return new k(function(e,a){return n(t,void 0,void 0,function(){var t,n,s,l,u,c;return o(this,function(f){switch(f.label){case 0:if(!r.length)return a(),[2];n=!1,a.then(function(){t(),n=!0}),f.label=1;case 1:f.trys.push([1,,5,7]),l=void 0,u=0,c=function(){var n,c,f,p,h,y;return o(this,function(o){switch(o.label){case 0:n=u;try{for(h=void 0,c=i(r),f=c.next();!f.done;f=c.next())p=f.value,Promise.resolve(p.next()).then(function(e){e.done?(a(),void 0===s&&(s=e)):u===n&&(u++,t(e))},function(e){return a(e)})}catch(e){h={error:e}}finally{try{f&&!f.done&&(y=c.return)&&y.call(c)}finally{if(h)throw h.error}}return[4,new Promise(function(e){return t=e})];case 1:return void 0===(l=o.sent())?[3,3]:[4,e(l.value)];case 2:o.sent(),o.label=3;case 3:return[2]}})},f.label=2;case 2:return n?[3,4]:[5,c()];case 3:return f.sent(),[3,2];case 4:return[2,s&&s.value];case 5:return a(),[4,Promise.race(r.map(function(e){return e.return&&e.return()}))];case 6:return f.sent(),[7];case 7:return[2]}})})})}function T(e){var t=this,r=j(e,{yieldValues:!0});return new k(function(e,a){return n(t,void 0,void 0,function(){var t,s,l,u=this;return o(this,function(c){switch(c.label){case 0:if(!r.length)return a(),[2];t=[],s=!1,a.then(function(){var e,r;s=!0;try{for(var n=i(t),o=n.next();!o.done;o=n.next()){(0,o.value)()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}}),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,Promise.all(r.map(function(r,i){return n(u,void 0,void 0,function(){var n;return o(this,function(o){switch(o.label){case 0:o.trys.push([0,,6,9]),o.label=1;case 1:return s?[3,5]:(Promise.resolve(r.next()).then(function(e){return t[i](e)},function(e){return a(e)}),[4,new Promise(function(e){t[i]=e})]);case 2:return void 0===(n=o.sent())?[3,4]:n.done?(l=n,[2]):[4,e(n.value)];case 3:o.sent(),o.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return r.return?[4,r.return()]:[3,8];case 7:o.sent(),o.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return c.sent(),[2,l&&l.value];case 3:return a(),[7];case 4:return[2]}})})})}function R(e){var t=this,r=j(e,{returnValues:!0});return new k(function(e,i){return n(t,void 0,void 0,function(){var t,n,a,s;return o(this,function(o){switch(o.label){case 0:if(!r.length)return i(),[2,[]];n=!1,i.then(function(){t(),n=!0}),o.label=1;case 1:o.trys.push([1,,6,8]),o.label=2;case 2:return n?[3,5]:(Promise.all(r.map(function(e){return e.next()})).then(function(e){return t(e)},function(e){return i(e)}),[4,new Promise(function(e){return t=e})]);case 3:return void 0===(a=o.sent())?[2]:(s=a.map(function(e){return e.value}),a.some(function(e){return e.done})?[2,s]:[4,e(s)]);case 4:return o.sent(),[3,2];case 5:return[3,8];case 6:return i(),[4,Promise.all(r.map(function(e){return e.return&&e.return()}))];case 7:return o.sent(),[7];case 8:return[2]}})})})}function A(e){var t=this,r=j(e,{yieldValues:!0,returnValues:!0});return new k(function(e,a){return n(t,void 0,void 0,function(){var t,s,l,u,c,f=this;return o(this,function(p){switch(p.label){case 0:if(!r.length)return a(),[2,[]];s=[],l=!1,a.then(function(){var e,r;t();try{for(var n=i(s),o=n.next();!o.done;o=n.next()){(0,o.value)()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}l=!0}),p.label=1;case 1:return p.trys.push([1,,5,7]),Promise.all(r.map(function(e){return e.next()})).then(function(e){return t(e)},function(e){return a(e)}),[4,new Promise(function(e){return t=e})];case 2:return void 0===(u=p.sent())?[2]:(c=u.map(function(e){return e.value}),u.every(function(e){return e.done})?[2,c]:[4,e(c.slice())]);case 3:return p.sent(),[4,Promise.all(r.map(function(t,r){return n(f,void 0,void 0,function(){var n;return o(this,function(o){switch(o.label){case 0:if(u[r].done)return[2,u[r].value];o.label=1;case 1:return l?[3,4]:(Promise.resolve(t.next()).then(function(e){return s[r](e)},function(e){return a(e)}),[4,new Promise(function(e){return s[r]=e})]);case 2:return void 0===(n=o.sent())?[2,u[r].value]:n.done?[2,n.value]:(c[r]=n.value,[4,e(c.slice())]);case 3:return o.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,p.sent()];case 5:return a(),[4,Promise.all(r.map(function(e){return e.return&&e.return()}))];case 6:return p.sent(),[7];case 7:return[2]}})})})}t.ZN=k}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=mapboxgl,t=r.n(e);!function(){t().Map.prototype.overlayLayersManager={},void 0===t().Map.prototype.addLayerBak&&(t().Map.prototype.addLayerBak=t().Map.prototype.addLayer,t().Map.prototype.addLayer=function(e,t){return e.source||"custom"===e.type||"background"===e.type?(this.addLayerBak(e,t),this):this.overlayLayersManager[e.id]||this.style._layers[e.id]?void this.fire("error",{error:new Error("A layer with this id already exists.")}):(function(e,t){e.onAdd&&e.onAdd(t)}(e,this),this.overlayLayersManager[e.id]=e,this)}),t().Map.prototype.getLayer=function(e){return this.overlayLayersManager[e]?this.overlayLayersManager[e]:this.style.getLayer(e)},t().Map.prototype.moveLayer=function(e,r){return this.overlayLayersManager[e]?(this.overlayLayersManager[e].moveLayer?this.overlayLayersManager[e].moveLayer(e,r):function(e,r){var n=document.getElementById(e);if(r){var o=document.getElementById(r);o||t().Evented.prototype.fire("error",{error:new Error('Layer with id "'.concat(r,'" does not exist on this document.'))})}n&&o?o.parentNode.insertBefore(n,o):n.parentNode.appendChild(n)}(e,r),this):this.style._layers[e]?(this.style.moveLayer(e,r),this._update(!0),this):void 0},t().Map.prototype.removeLayer=function(e){return this.overlayLayersManager[e]?((t=this.overlayLayersManager[e]).removeFromMap&&t.removeFromMap(),delete this.overlayLayersManager[e],this):(this.style.removeLayer(e),this._update(!0),this);var t},t().Map.prototype.setLayoutProperty=function(e,t,r){return this.overlayLayersManager[e]?("visibility"===t&&(r="visible"===r,n=this.overlayLayersManager[e],o=r,n.setVisibility&&n.setVisibility(o),this.style.fire("data",{dataType:"style"})),this):(this.style.setLayoutProperty(e,t,r),this._update(!0),this);var n,o},t().Map.prototype.updateTransform=function(e,r,n,o,i,a,s){this.transform.units=e;var l=this.mercatorZfromAltitude;t().MercatorCoordinate.fromLngLat=function(e,o){o=o||0;var i=t().LngLat.convert(e);return new(t().MercatorCoordinate)((i.lng-r)/a,(n-i.lat)/s,l(o,i.lat))},t().MercatorCoordinate.prototype.toLngLat=function(){return new(t().LngLat)(this.x*a+r,n-this.y*s)},this.customConvertPoint=window.URL.createObjectURL(new Blob(["customConvertPoint = {projectX:function(x){return (x - "+o+") / "+a+" + 0.5},projectY:function(y){y = 0.5 - ((y - "+i+") / "+s+");return y < 0 ? 0 : y > 1 ? 1 : y;},toY:function(y){return (0.5-y)*"+s+"+"+i+";}}"],{type:"text/javascript"}))}}();function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.imageUrl=null,this.link=null,this.width=null,this.height=null,this.alt="SuperMap iClient",this._extend(this,t)}var t,r,o;return t=e,(r=[{key:"onAdd",value:function(e){this._map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl iclient-logo",this._container.style.marginTop=0,this._container.style.marginBottom=0,this._container.style.marginLeft=0,this._container.style.marginRight=0;var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAdCAYAAAAjHtusAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozYWZlOGIwMi01MWE3LTRiZjYtYWVkYS05MGQ2ZTQ4YjZiMmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODg0NkFBQUE3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODg0NkFBQTk3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MWI3NzdhNC1lZmEyLTQ1MzUtOGQzNi03MmRjNDkyODMzN2UiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjYTYzODVjMi1jNDQ1LTExN2EtYTc0ZC1lM2I5MzJlMGE4Y2QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5q1HM0AAAF/ElEQVR42tSabYhUVRjHZ7W01C1uaCRW4F3oi9SXCUnwQ9gsGUFvOEtQH1bLu5VS9sbYh5KicjYt29qiGQwVg2xWWKgocob91AvC+CWsoJqB3qHMSdTMpZyeU/+Df07n3pk7997Z6cBv99z7nHvOvf/z/pxJNZvNVI/jCKXmv6EquAmVkxPSlvtp2GItr0/96fFQForChJAWDiVYTkMYMu4XBFcYjLOwWS3sNwmn8NGzZ0h4Flv/zwIdchAnh/slCGmmKUNIBzYPaXOUr0vPuEjD71JAPh7l61embzinhV3V8nnCGmGT8LwlzSL8/yUh4Tfjo9T/CgnCIYNKycA2Qq21AcHU/VHE80Idoo3Qs0W6p0UtUnkZvEMDeVcCyqxEafF7hL8Qf0oYsIj+lfC9cH1CwhchWAGCtZO+AooQOkdC1Km1VtCb63StW73uFSzgKFUkNwBbmZGGmqowhvg8ZNpH9oXChcIcYRdeNomgxLkaH+S1SGubAxyIpFv+Zp+0DYjrAS00j/dem2VGEl6FJ4Qa4quEu8j2hTCJ+GJhe4JjfQMf6JCYPPbysMPxBlp0BUKOogEF9Rg9/heNvNKYfM0KsZUZaYxX4STGrzJa+zbhPeFH2DcK10KItcI+pI0rVElwXl1ULaKnIJhDw0oRQpTQc1zcbwRU8ATy4DR6yMlTzwkqMziEWHvubJ4Nk4ZtHdnqwvwY17xq3Z4FjrG+z2Kdrdf2ZSGD+xlLPh6t1R0jP9fI22ZzKI92yvQl7EbmBxI4S7Y+vIAOL87QZqsc5uNnssxZIcfYjXT9snCR7jjobidp+FkxA2v+Cq1QervMDmp4P7Xs3YZtE9kOC3P/By6JGaETl8ElwueYTNTDq4UDsKnd7YfCNbT239LF1udS72xYJt1UWxNfN4IIP4bWuTpEja01JtMFZFsm/AHbtHBlDE6yasA4moYTrUbvdBTXHqUrAH4uSadbyzF+vbBM2IsNkS3MNa5305JxqfA02T4TnkX8XOH1mPw8ruVejpxbI9hZD2Cz1U7LdrrUvjP/WfZinNZhr6V27hP+FPZh9aLvLxVO4DllX0G2OcKnlO/DCblxaz6uXBtmi+8mBaP3/SP8IuEIiTRoPPQm2TaEmEyXo0JU+F0YiPFD0hhOsiE/vqeEVwyTgF8L51OilcIZ2I4Ll5NttvAJPfukUeB2sk0ZPSbKIUUJpCII7+DasWy08uhNNazT0wGHI7mAtB7KqMKm38HhDdAUibTVKGicbB8YAqrJ9DRsp43JdB4qUof1HQrPE6XTQWu3Ce/inVzjXhXpMiTwUYugNVQ+p80jrUsV5EH0POKeuXO9QjhFq5GryNYvfEMCDhsftYVsB9ETtG0V9ZjfhCURhbcJFpfwVZ9jvhxsLHwTYtp2svlWQw3vXL8UnqHVSIG8l8ex+tHhBXgjddgqHEZ8ufAA2aaEnYgrF/KrPXrEmMUqZ9THLW06xhoBaVueQpkug+ewOUphE3Qv2Q5gGamXYa+QbVq4O+DQ5FHyZqrjxNt7UHh9uuRa0F7HjCF8o9PCTOGnscM7g2u1Hl9C9oeEnxC/1ajZg8JLiM9Hj9GHJseMShwL2DO0G5yEWn3Zh1QUods5CPkIoqlwAZxhXMsb6HrcEPBxchhdJ6wj29vCW4hfLOzo8J3rltYX50nXQAATSf/K4DEaGlTLvplsk/QCpoD60EQ7gLYZc8H9wq+I3yncEOEcNhuz6HWf3XEiwU/4Y8YEqVp2P10rt+8REvBGw026i4aDcbL9jF8r8Blmf4fCOzhViiscskygXRdehf3CO4hfigmTBXyQrl8TFtD1IzQX3CbcQrY3hPcRv4z8OmHPXwchVNln2MmE7BX6VwIFi/he6uxvb6JM3m0fdqvx/ATidxg2JeC7VDErAw5NzGfvwRJVheEIQ8Mg/pdwIM+UOmi9Q8ivCsrIy0tF+wVbEcLrd3Pb2XisEb4Tdlhsi4WP4RBbaLGrHfC3PrvMIezy9rTpGm5lz9LOMG15xvFxD/j5gjzjjDbMOzk+9zzt3v5bgAEAibzFeFHVgYkAAAAASUVORK5CYII=";this.imageUrl&&(t=this.imageUrl);var r=this.alt,n="94px",o="29px",i="width:"+n+";height:"+o+";";this.imageUrl&&(i="width:"+(n=this.width)+";height:"+(o=this.height)+";",n&&o||(i=""));var a=this.link;return this._container.innerHTML="<a href='"+a+"' target='_blank'><img src="+t+" alt='"+r+"' style='"+i+"margin-bottom: 2px'></a>",this._createStyleSheet(),this._container}},{key:"_createStyleSheet",value:function(){var e=document.createElement("style");e.type="text/css",e.innerHTML=".iclient-logo{margin:0 !important;}.iclient-logo a{border: none;display: block;height:31px;}.iclient-logo img{border: none;white-space: nowrap}",document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_extend",value:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var r=Object.getOwnPropertyNames(arguments)[t];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(e[i]=n[i])}}}return e}}])&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.w=t?parseFloat(t):0,this.h=t?parseFloat(r):0,this.CLASS_NAME="SuperMap.Size"}var t,r,n;return t=e,(r=[{key:"toString",value:function(){return"w="+this.w+",h="+this.h}},{key:"clone",value:function(){return new e(this.w,this.h)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.w===e.w&&this.h===e.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(e.w)&&isNaN(e.h)),t}},{key:"destroy",value:function(){this.w=null,this.h=null}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t?parseFloat(t):0,this.y=r?parseFloat(r):0,this.mode=n,this.CLASS_NAME="SuperMap.Pixel"}var t,r,n;return t=e,(r=[{key:"toString",value:function(){return"x="+this.x+",y="+this.y}},{key:"clone",value:function(){return new e(this.x,this.y,this.mode)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"distanceTo",value:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}},{key:"add",value:function(t,r){if(null==t||null==r)throw new TypeError("Pixel.add cannot receive null values");return new e(this.x+t,this.y+r)}},{key:"offset",value:function(e){var t=this.clone();return e&&(t=this.add(e.x,e.y)),t}},{key:"destroy",value:function(){this.x=null,this.y=null,this.mode=null}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}l.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"};var c=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=function(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=0;n<t.length;n++)a(this,new t[n](r))}),o=0;o<t.length;o++){var i=t[o];a(n,i),a(n.prototype,i.prototype),a(n.prototype,new i)}return n;function a(e,t){var r=Object.getOwnPropertyNames(t);Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t)));for(var n=0;n<r.length;n++){var o=r[n];if("constructor"!==o&&"prototype"!==o&&"name"!==o&&"length"!==o){var i=Object.getOwnPropertyDescriptor(t,o);window.ActiveXObject?Object.defineProperty(e,o,i||{}):Object.defineProperty(e,o,i)}}}},f={startsWith:function(e,t){return 0==e.indexOf(t)},contains:function(e,t){return-1!=e.indexOf(t)},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(e){for(var t=e.split("-"),r=t[0],n=1,o=t.length;n<o;n++){var i=t[n];r+=i.charAt(0).toUpperCase()+i.substring(1)}return r},format:function(e,t,r){t||(t=window);return e.replace(f.tokenRegEx,function(e,n){for(var o,i=n.split(/\.+/),a=0;a<i.length;a++)0==a&&(o=t),o=o[i[a]];return"function"==typeof o&&(o=r?o.apply(null,r):o()),void 0===o?"undefined":o})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(e){return f.numberRegEx.test(e)},numericIf:function(e){return f.isNumeric(e)?parseFloat(e):e}},p={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(e,t){var r=0;return t>0&&(r=parseFloat(e.toPrecision(t))),r},format:function(e,t,r,n){t=void 0!==t?t:0,r=void 0!==r?r:p.thousandsSeparator,n=void 0!==n?n:p.decimalSeparator,null!=t&&(e=parseFloat(e.toFixed(t)));var o=e.toString().split(".");1===o.length&&null==t&&(t=0);var i,a=o[0];if(r)for(var s=/(-?[0-9]+)([0-9]{3})/;s.test(a);)a=a.replace(s,"$1"+r+"$2");if(0==t)i=a;else{var l=o.length>1?o[1]:"0";null!=t&&(l+=new Array(t-l.length+1).join("0")),i=a+n+l}return i}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(e){return p.limitSigDigs(this,e)});var h={bind:function(e,t){var r=Array.prototype.slice.apply(arguments,[2]);return function(){var n=r.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(t,n)}},bindAsEventListener:function(e,t){return function(r){return e.call(t,r||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},y={filter:function(e,t,r){var n=[];if(Array.prototype.filter)n=e.filter(t,r);else{var o=e.length;if("function"!=typeof t)throw new TypeError;for(var i=0;i<o;i++)if(i in e){var a=e[i];t.call(r,a,i,e)&&n.push(a)}}return n}};function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.Geometry",this.id=j.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.id=null,this.bounds=null,this.SRID=null}},{key:"clone",value:function(){return new e}},{key:"setBounds",value:function(e){e&&(this.bounds=e.clone())}},{key:"clearBounds",value:function(){this.bounds=null,this.parent&&this.parent.clearBounds()}},{key:"extendBounds",value:function(e){this.getBounds()?this.bounds.extend(e):this.setBounds(e)}},{key:"getBounds",value:function(){return null==this.bounds&&this.calculateBounds(),this.bounds}},{key:"calculateBounds",value:function(){}},{key:"getVertices",value:function(e){}},{key:"getArea",value:function(){return 0}}])&&d(t.prototype,r),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e){"@babel/helpers - typeof";return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m,g,w,O,S,_,P,x=(g="",w="",O="pc",(S=navigator.userAgent.toLowerCase()).indexOf("msie")>-1||S.indexOf("trident")>-1&&S.indexOf("rv")>-1?(g="msie",m=S.match(/msie ([\d.]+)/)||S.match(/rv:([\d.]+)/)):S.indexOf("chrome")>-1?(g="chrome",m=S.match(/chrome\/([\d.]+)/)):S.indexOf("firefox")>-1?(g="firefox",m=S.match(/firefox\/([\d.]+)/)):S.indexOf("opera")>-1?(g="opera",m=S.match(/version\/([\d.]+)/)):S.indexOf("safari")>-1&&(g="safari",m=S.match(/version\/([\d.]+)/)),w=m?m[1]:"",S.indexOf("ipad")>-1||S.indexOf("ipod")>-1||S.indexOf("iphone")>-1?O="apple":S.indexOf("android")>-1&&(w=(m=S.match(/version\/([\d.]+)/))?m[1]:"",O="android"),{name:g,version:w,device:O}),E=(_=!0,P=x,document.createElement("canvas").getContext?("firefox"===P.name&&parseFloat(P.version)<5&&(_=!1),"safari"===P.name&&parseFloat(P.version)<4&&(_=!1),"opera"===P.name&&parseFloat(P.version)<10&&(_=!1),"msie"===P.name&&parseFloat(P.version)<9&&(_=!1)):_=!1,_),k=function(){var e=navigator.userAgent.toLowerCase();return-1===e.indexOf("webkit")&&-1!==e.indexOf("gecko")}(),j={extend:function(e,t){if(e=e||{},t){for(var r in t){var n=t[r];void 0!==n&&(e[r]=n)}!("function"==typeof window.Event&&t instanceof window.Event)&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString)}return e},copy:function(e,t){var r;if(e=e||{},t)for(var n in e)void 0!==(r=t[n])&&(e[n]=r)},reset:function(e){for(var t in e=e||{})if(e.hasOwnProperty(t)){if("object"===v(e[t])&&e[t]instanceof Array){for(var r in e[t])e[t][r].destroy&&e[t][r].destroy();e[t].length=0}else"object"===v(e[t])&&e[t]instanceof Object&&e[t].destroy&&e[t].destroy();e[t]=null}},getElement:function(){for(var e=[],t=0,r=arguments.length;t<r;t++){var n=arguments[t];if("string"==typeof n&&(n=document.getElementById(n)),1===arguments.length)return n;e.push(n)}return e},isElement:function(e){return!(!e||1!==e.nodeType)},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},removeItem:function(e,t){for(var r=e.length-1;r>=0;r--)e[r]===t&&e.splice(r,1);return e},indexOf:function(e,t){if(null==e)return-1;if("function"==typeof e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},modifyDOMElement:function(e,t,r,n,o,i,a,s){t&&(e.id=t),r&&(e.style.left=r.x+"px",e.style.top=r.y+"px"),n&&(e.style.width=n.w+"px",e.style.height=n.h+"px"),o&&(e.style.position=o),i&&(e.style.border=i),a&&(e.style.overflow=a),parseFloat(s)>=0&&parseFloat(s)<1?(e.style.filter="alpha(opacity="+100*s+")",e.style.opacity=s):1===parseFloat(s)&&(e.style.filter="",e.style.opacity="")},applyDefaults:function(e,t){e=e||{};var r="function"==typeof window.Event&&t instanceof window.Event;for(var n in t)(void 0===e[n]||!r&&t.hasOwnProperty&&t.hasOwnProperty(n)&&!e.hasOwnProperty(n))&&(e[n]=t[n]);return!r&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")&&(e.toString=t.toString),e},getParameterString:function(e){var t=[];for(var r in e){var n,o=e[r];if(null!=o&&"function"!=typeof o)n=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),t.push(encodeURIComponent(r)+"="+n)}return t.join("&")},urlAppend:function(e,t){var r=e;if(t){0===t.indexOf("?")&&(t=t.substring(1));var n=(e+" ").split(/[?&]/);r+=" "===n.pop()?t:n.length?"&"+t:"?"+t}return r},urlPathAppend:function(e,t){var r=e;if(!t)return r;0===t.indexOf("/")&&(t=t.substring(1));var n=e.split("?");return n[0].indexOf("/",n[0].length-1)<0&&(n[0]+="/"),r="".concat(n[0]).concat(t).concat(n.length>1?"?".concat(n[1]):"")},DEFAULT_PRECISION:14,toFloat:function(e,t){return null==t&&(t=j.DEFAULT_PRECISION),"number"!=typeof e&&(e=parseFloat(e)),0===t?e:parseFloat(e.toPrecision(t))},rad:function(e){return e*Math.PI/180},getParameters:function(e){e=null===e||void 0===e?window.location.href:e;var t="";if(f.contains(e,"?")){var r=e.indexOf("?")+1,n=f.contains(e,"#")?e.indexOf("#"):e.length;t=e.substring(r,n)}for(var o={},i=t.split(/[&;]/),a=0,s=i.length;a<s;++a){var l=i[a].split("=");if(l[0]){var u=l[0];try{u=decodeURIComponent(u)}catch(e){u=unescape(u)}var c=(l[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c)}catch(e){c=unescape(c)}1==(c=c.split(",")).length&&(c=c[0]),o[u]=c}}return o},lastSeqID:0,createUniqueID:function(e){return null==e&&(e="id_"),j.lastSeqID+=1,e+j.lastSeqID},normalizeScale:function(e){return e>1?1/e:e},getResolutionFromScale:function(e,t){var r;e&&(null==t&&(t="degrees"),r=1/(j.normalizeScale(e)*C[t]*96));return r},getScaleFromResolution:function(e,t){return null==t&&(t="degrees"),e*C[t]*96},getBrowser:function(){return x},isSupportCanvas:E,supportCanvas:function(){return j.isSupportCanvas},isInTheSameDomain:function(e){if(!e)return!0;var t=e.indexOf("//"),r=document.location.toString(),n=r.indexOf("//");if(-1===t)return!0;var o,i=o=e.substring(0,t),a=r.substring(n+2);n=a.indexOf("/");var s=a.indexOf(":"),l=a.substring(0,n),u=document.location.protocol;if(-1!==s||(l+=":"+("http:"===u.toLowerCase()?80:443)),u.toLowerCase()!==i.toLowerCase())return!1;var c=(i=e.substring(t+2)).indexOf(":");t=i.indexOf("/");var f,p=i.substring(0,t);return-1!==c?f=i.substring(0,c):(f=i.substring(0,t),p+=":"+("http:"===o.toLowerCase()?80:443)),f===document.domain&&p===l},calculateDpi:function(e,t,r,n,o){if(e&&t&&r){var i,a=e.getWidth(),s=e.getHeight(),l=t.w,u=t.h;if(o=o||6378137,"degree"===(n=n||"degrees").toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()){var c=a/l,f=s/u;i=254/(c>f?c:f)/r/(2*Math.PI*o/360)/1e4}else{i=254/(a/l)/r/1e4}return i}},toJSON:function(e){var t=e;if(null==t)return null;switch(t.constructor){case String:return t=(t=(t=(t=(t=(t=(t='"'+t.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var r="",n=0,o=t.length;n<o;n++)r+=j.toJSON(t[n]),n!==t.length-1&&(r+=",");return"["+r+"]";case Number:return isFinite(t)?String(t):null;case Boolean:return String(t);case Date:return"{'__type':\"System.DateTime\",'Year':"+t.getFullYear()+",'Month':"+(t.getMonth()+1)+",'Day':"+t.getDate()+",'Hour':"+t.getHours()+",'Minute':"+t.getMinutes()+",'Second':"+t.getSeconds()+",'Millisecond':"+t.getMilliseconds()+",'TimezoneOffset':"+t.getTimezoneOffset()+"}";default:if(null!=t.toJSON&&"function"==typeof t.toJSON)return t.toJSON();if("object"===v(t)){if(t.length){for(var i=[],a=0,s=t.length;a<s;a++)i.push(j.toJSON(t[a]));return"["+i.join(",")+"]"}var l=[];for(var u in t)"function"!=typeof t[u]&&"CLASS_NAME"!==u&&"parent"!==u&&l.push("'"+u+"':"+j.toJSON(t[u]));return l.length>0?"{"+l.join(",")+"}":"{}"}return t.toString()}},getResolutionFromScaleDpi:function(e,t,r,n){return n=n||6378137,r=r||"",e>0&&t>0?(e=j.normalizeScale(e),"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/t/e/(2*Math.PI*n/360)/1e4:254/t/e/1e4):-1},getScaleFromResolutionDpi:function(e,t,r,n){return n=n||6378137,r=r||"",e>0&&t>0?"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/t/e/(2*Math.PI*n/360)/1e4:254/t/e/1e4:-1},transformResult:function(e){return e.responseText&&"string"==typeof e.responseText&&(e=JSON.parse(e.responseText)),e},copyAttributes:function(e,t){if(e=e||{},t)for(var r in t){var n=t[r];void 0!==n&&"CLASS_NAME"!==r&&"function"!=typeof n&&(e[r]=n)}return e},copyAttributesWithClip:function(e,t,r){if(e=e||{},t)for(var n in t){var o=!1;if(r&&r.length)for(var i=0,a=r.length;i<a;i++)if(n===r[i]){o=!0;break}if(!0!==o){var s=t[n];void 0!==s&&"CLASS_NAME"!==n&&"function"!=typeof s&&(e[n]=s)}}return e},cloneObject:function(e){if(null===e||"object"!==v(e))return e;if(e instanceof Date){var t=new Date;return t.setTime(e.getTime()),t}if(e instanceof Array)return e.slice(0);if(e instanceof Object){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=j.cloneObject(e[n]));return r}throw new Error("Unable to copy obj! Its type isn't supported.")},lineIntersection:function(e,t,r,n){var o,i,a=null,s=(n.x-r.x)*(e.y-r.y)-(n.y-r.y)*(e.x-r.x),l=(t.x-e.x)*(e.y-r.y)-(t.y-e.y)*(e.x-r.x),u=(n.y-r.y)*(t.x-e.x)-(n.x-r.x)*(t.y-e.y);if(0!=u)i=l/u,a=(o=s/u)>=0&&i<=1&&o<=1&&i>=0?new b.Point(e.x+o*(t.x-e.x),e.y+o*(t.y-e.y)):"No Intersection";else if(0==s&&0==l){var c=Math.max(e.y,t.y),f=Math.min(e.y,t.y),p=Math.max(e.x,t.x),h=Math.min(e.x,t.x);a=(r.y>=f&&r.y<=c||n.y>=f&&n.y<=c)&&r.x>=h&&r.x<=p||n.x>=h&&n.x<=p?"Coincident":"Parallel"}else a="Parallel";return a},getTextBounds:function(e,t,r){document.body.appendChild(r),r.style.width="auto",r.style.height="auto",e.fontSize&&(r.style.fontSize=e.fontSize),e.fontFamily&&(r.style.fontFamily=e.fontFamily),e.fontWeight&&(r.style.fontWeight=e.fontWeight),r.style.position="relative",r.style.visibility="hidden",r.style.display="inline-block",r.innerHTML=t;var n=r.clientWidth,o=r.clientHeight;return document.body.removeChild(r),{textWidth:n,textHeight:o}},convertPath:function(e,t){return t?e.replace(/\{([\w-\.]+)\}/g,function(e,r){var n;return n=t.hasOwnProperty(r)?function(e){if(void 0==e||null==e)return"";if(e instanceof Date)return e.toJSON();if(function(e){if("string"!=typeof e&&"object"!==v(e))return!1;try{var t=e.toString();return"[object Object]"===t||"[object Array]"===t}catch(e){return!1}}(e))return JSON.stringify(e);return e.toString()}(t[r]):e,encodeURIComponent(n)}):e}},C={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36};C.in=C.inches,C.degrees=C.dd,C.nmi=1852*C.m;var T=.0254000508001016;function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}j.extend(C,{Inch:C.inches,Meter:39.37,Foot:12,IFoot:11.999976,ClarkeFoot:11.999868327581488,SearsFoot:11.999955194477684,GoldCoastFoot:11.999964589846002,IInch:.9999979999999999,MicroInch:999998e-9,Mil:9.99998e-7,Centimeter:.3937,Kilometer:39370,Yard:36,SearsYard:35.99986558343306,IndianYard:35.99987015540864,IndianYd37:35.999740205100004,IndianYd62:35.999880755999996,IndianYd75:35.999868945,IndianFoot:11.9999567087,IndianFt37:11.9999134017,IndianFt62:11.999960252000001,IndianFt75:11.999956315,Mile:63360,IYard:35.999928,IMile:63359.87328,NautM:72913.24,"Lat-66":4367838.370169282,"Lat-83":4367954.152606599,Decimeter:3.9370000000000003,Millimeter:.03937,Dekameter:393.7,Decameter:393.7,Hectometer:3937,GermanMeter:39.370535294205006,CaGrid:39.359685060000004,ClarkeChain:791.991309620512,GunterChain:792.0000000000001,BenoitChain:791.9977268035781,SearsChain:791.9970428354235,ClarkeLink:7.91991309620512,GunterLink:7.920000000000001,BenoitLink:7.919977268035781,SearsLink:7.919970428354236,Rod:198.00000000000014,IntnlChain:791.998416,IntnlLink:7.91998416,Perch:198.00000000000014,Pole:198.00000000000014,Furlong:7919.999999999997,Rood:148.75036777426,CapeFoot:11.999868185255002,Brealey:14763.75,ModAmFt:12.000458400000001,Fathom:71.999856,"NautM-UK":72959.85408,"50kilometers":1968500,"150kilometers":5905500}),j.extend(C,{mm:C.Meter/1e3,cm:C.Meter/100,dm:100*C.Meter,km:1e3*C.Meter,kmi:C.nmi,fath:C.Fathom,ch:C.IntnlChain,link:C.IntnlLink,"us-in":C.inches,"us-ft":C.Foot,"us-yd":C.Yard,"us-ch":C.GunterChain,"us-mi":C.Mile,"ind-yd":C.IndianYd37,"ind-ft":C.IndianFt37,"ind-ch":791.9942845122}),C.degree=C.dd,C.meter=C.m,C.foot=C.ft,C.inch=C.inches,C.mile=C.mi,C.kilometer=C.km,C.yard=C.yd;var A=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),j.isArray(t)&&(r=t[1],t=t[0]),this.lon=t?j.toFloat(t):0,this.lat=r?j.toFloat(r):0,this.CLASS_NAME="SuperMap.LonLat"}var t,r,n;return t=e,n=[{key:"fromString",value:function(t){var r=t.split(",");return new e(r[0],r[1])}},{key:"fromArray",value:function(t){var r=j.isArray(t);return new e(r&&t[0],r&&t[1])}}],(r=[{key:"toString",value:function(){return"lon="+this.lon+",lat="+this.lat}},{key:"toShortString",value:function(){return this.lon+","+this.lat}},{key:"clone",value:function(){return new e(this.lon,this.lat)}},{key:"add",value:function(t,r){if(null==t||null==r)throw new TypeError("LonLat.add cannot receive null values");return new e(this.lon+j.toFloat(t),this.lat+j.toFloat(r))}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.lon===e.lon&&this.lat===e.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(e.lon)&&isNaN(e.lat)),t}},{key:"wrapDateLine",value:function(e){var t=this.clone();if(e){for(;t.lon<e.left;)t.lon+=e.getWidth();for(;t.lon>e.right;)t.lon-=e.getWidth()}return t}},{key:"destroy",value:function(){this.lon=null,this.lat=null}}])&&R(t.prototype,r),n&&R(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var I=function(){function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),j.isArray(t)&&(o=t[3],n=t[2],r=t[1],t=t[0]),this.left=null!=t?j.toFloat(t):this.left,this.bottom=null!=r?j.toFloat(r):this.bottom,this.right=null!=n?j.toFloat(n):this.right,this.top=null!=o?j.toFloat(o):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds"}var t,r,n;return t=e,n=[{key:"fromString",value:function(t,r){var n=t.split(",");return e.fromArray(n,r)}},{key:"fromArray",value:function(t,r){return!0===r?new e(t[1],t[0],t[3],t[2]):new e(t[0],t[1],t[2],t[3])}},{key:"fromSize",value:function(t){return new e(0,t.h,t.w,0)}},{key:"oppositeQuadrant",value:function(e){var t="";return t+="t"===e.charAt(0)?"b":"t",t+="l"===e.charAt(1)?"r":"l"}}],(r=[{key:"clone",value:function(){return new e(this.left,this.bottom,this.right,this.top)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.left===e.left&&this.right===e.right&&this.top===e.top&&this.bottom===e.bottom),t}},{key:"toString",value:function(){return[this.left,this.bottom,this.right,this.top].join(",")}},{key:"toArray",value:function(e){return!0===e?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]}},{key:"toBBOX",value:function(e,t){null==e&&(e=6);var r=Math.pow(10,e),n=Math.round(this.left*r)/r,o=Math.round(this.bottom*r)/r,i=Math.round(this.right*r)/r,a=Math.round(this.top*r)/r;return!0===t?o+","+n+","+a+","+i:n+","+o+","+i+","+a}},{key:"getWidth",value:function(){return this.right-this.left}},{key:"getHeight",value:function(){return this.top-this.bottom}},{key:"getSize",value:function(){return new a(this.getWidth(),this.getHeight())}},{key:"getCenterPixel",value:function(){return new l((this.left+this.right)/2,(this.bottom+this.top)/2)}},{key:"getCenterLonLat",value:function(){return this.centerLonLat||(this.centerLonLat=new A((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat}},{key:"scale",value:function(t,r){var n,o;return t=t||1,null==r&&(r=this.getCenterLonLat()),"SuperMap.LonLat"===r.CLASS_NAME?(n=r.lon,o=r.lat):(n=r.x,o=r.y),new e((this.left-n)*t+n,(this.bottom-o)*t+o,(this.right-n)*t+n,(this.top-o)*t+o)}},{key:"add",value:function(t,r){if(null==t||null==r)throw new TypeError("Bounds.add cannot receive null values");return new e(this.left+t,this.bottom+r,this.right+t,this.top+r)}},{key:"extend",value:function(t){var r=null;if(t){switch(t.CLASS_NAME){case"SuperMap.LonLat":r=new e(t.lon,t.lat,t.lon,t.lat);break;case"SuperMap.Geometry.Point":r=new e(t.x,t.y,t.x,t.y);break;case"SuperMap.Bounds":r=t}r&&(this.centerLonLat=null,(null==this.left||r.left<this.left)&&(this.left=r.left),(null==this.bottom||r.bottom<this.bottom)&&(this.bottom=r.bottom),(null==this.right||r.right>this.right)&&(this.right=r.right),(null==this.top||r.top>this.top)&&(this.top=r.top))}}},{key:"containsLonLat",value:function(e,t){"boolean"==typeof t&&(t={inclusive:t}),t=t||{};var r=this.contains(e.lon,e.lat,t.inclusive),n=t.worldBounds;if(n&&!r){var o=n.getWidth(),i=(n.left+n.right)/2,a=Math.round((e.lon-i)/o);r=this.containsLonLat({lon:e.lon-a*o,lat:e.lat},{inclusive:t.inclusive})}return r}},{key:"containsPixel",value:function(e,t){return this.contains(e.x,e.y,t)}},{key:"contains",value:function(e,t,r){if(null==r&&(r=!0),null==e||null==t)return!1;var n=!1;return n=r?e>=this.left&&e<=this.right&&t>=this.bottom&&t<=this.top:e>this.left&&e<this.right&&t>this.bottom&&t<this.top,n}},{key:"intersectsBounds",value:function(e,t){if("boolean"==typeof t&&(t={inclusive:t}),(t=t||{}).worldBounds){var r=this.wrapDateLine(t.worldBounds);e=e.wrapDateLine(t.worldBounds)}else r=this;null==t.inclusive&&(t.inclusive=!0);var n=!1,o=r.left===e.right||r.right===e.left||r.top===e.bottom||r.bottom===e.top;if(t.inclusive||!o){var i=e.bottom>=r.bottom&&e.bottom<=r.top||r.bottom>=e.bottom&&r.bottom<=e.top,a=e.top>=r.bottom&&e.top<=r.top||r.top>e.bottom&&r.top<e.top,s=e.left>=r.left&&e.left<=r.right||r.left>=e.left&&r.left<=e.right,l=e.right>=r.left&&e.right<=r.right||r.right>=e.left&&r.right<=e.right;n=(i||a)&&(s||l)}if(t.worldBounds&&!n){var u=t.worldBounds,c=u.getWidth(),f=!u.containsBounds(r),p=!u.containsBounds(e);f&&!p?(e=e.add(-c,0),n=r.intersectsBounds(e,{inclusive:t.inclusive})):p&&!f&&(r=r.add(-c,0),n=e.intersectsBounds(r,{inclusive:t.inclusive}))}return n}},{key:"containsBounds",value:function(e,t,r){null==t&&(t=!1),null==r&&(r=!0);var n=this.contains(e.left,e.bottom,r),o=this.contains(e.right,e.bottom,r),i=this.contains(e.left,e.top,r),a=this.contains(e.right,e.top,r);return t?n||o||i||a:n&&o&&i&&a}},{key:"determineQuadrant",value:function(e){var t="",r=this.getCenterLonLat();return t+=e.lat<r.lat?"b":"t",t+=e.lon<r.lon?"l":"r"}},{key:"wrapDateLine",value:function(e,t){var r=(t=t||{}).leftTolerance||0,n=t.rightTolerance||0,o=this.clone();if(e){for(var i=e.getWidth();o.left<e.left&&o.right-n<=e.left;)o=o.add(i,0);for(;o.left+r>=e.right&&o.right>e.right;)o=o.add(-i,0);var a=o.left+r;a<e.right&&a>e.left&&o.right-n>e.right&&(o=o.add(-i,0))}return o}},{key:"toServerJSONObject",value:function(){return{rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom}}},{key:"destroy",value:function(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null}}])&&L(t.prototype,r),n&&L(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function M(e){"@babel/helpers - typeof";return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(){return(D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=G(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function F(e,t){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=G(e);if(t){var o=G(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(i,b);var t,r,n,o=B(i);function i(e,t,r,n){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this,e,t,r,n)).x=parseFloat(e),a.y=parseFloat(t),a.tag=n||0==n?parseFloat(n):null,a.type=r||"Point",a.CLASS_NAME="SuperMap.Geometry.Point",a.geometryType="Point",a}return t=i,(r=[{key:"clone",value:function(e){return null==e&&(e=new i(this.x,this.y)),j.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new I(this.x,this.y,this.x,this.y)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x===e.x&&this.y===e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"move",value:function(e,t){this.x=this.x+e,this.y=this.y+t,this.clearBounds()}},{key:"toShortString",value:function(){return this.x+", "+this.y}},{key:"destroy",value:function(){this.x=null,this.y=null,this.tag=null,D(G(i.prototype),"destroy",this).call(this)}},{key:"getVertices",value:function(){return[this]}}])&&N(t.prototype,r),n&&N(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function J(e){"@babel/helpers - typeof";return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function z(e,t){return(z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=q(e);if(t){var o=q(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(i,b);var t,r,n,o=W(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).components=[],t.componentTypes=null,null!=e&&t.addComponents(e),t.CLASS_NAME="SuperMap.Geometry.Collection",t.geometryType="Collection",t}return t=i,(r=[{key:"destroy",value:function(){this.components.length=0,this.components=null,H(q(i.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){for(var e=new i,t=0,r=this.components.length;t<r;t++)e.addComponent(this.components[t].clone());return j.applyDefaults(e,this),e}},{key:"getComponentsString",value:function(){for(var e=[],t=0,r=this.components.length;t<r;t++)e.push(this.components[t].toShortString());return e.join(",")}},{key:"calculateBounds",value:function(){this.bounds=null;var e=new I,t=this.components;if(t)for(var r=0,n=t.length;r<n;r++)e.extend(t[r].getBounds());null!=e.left&&null!=e.bottom&&null!=e.right&&null!=e.top&&this.setBounds(e)}},{key:"addComponents",value:function(e){j.isArray(e)||(e=[e]);for(var t=0,r=e.length;t<r;t++)this.addComponent(e[t])}},{key:"addComponent",value:function(e,t){var r=!1;if(e&&(null==this.componentTypes||j.indexOf(this.componentTypes,e.CLASS_NAME)>-1)){if(null!=t&&t<this.components.length){var n=this.components.slice(0,t),o=this.components.slice(t,this.components.length);n.push(e),this.components=n.concat(o)}else this.components.push(e);e.parent=this,this.clearBounds(),r=!0}return r}},{key:"removeComponents",value:function(e){var t=!1;j.isArray(e)||(e=[e]);for(var r=e.length-1;r>=0;--r)t=this.removeComponent(e[r])||t;return t}},{key:"removeComponent",value:function(e){return j.removeItem(this.components,e),this.clearBounds(),!0}},{key:"getArea",value:function(){for(var e=0,t=0,r=this.components.length;t<r;t++)e+=this.components[t].getArea();return e}},{key:"equals",value:function(e){var t=!0;if(e&&e.CLASS_NAME&&this.CLASS_NAME===e.CLASS_NAME)if(j.isArray(e.components)&&e.components.length===this.components.length){for(var r=0,n=this.components.length;r<n;++r)if(!this.components[r].equals(e.components[r])){t=!1;break}}else t=!1;else t=!1;return t}},{key:"getVertices",value:function(e){for(var t=[],r=0,n=this.components.length;r<n;++r)Array.prototype.push.apply(t,this.components[r].getVertices(e));return t}}])&&V(t.prototype,r),n&&V(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function X(e){"@babel/helpers - typeof";return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e,t){return(Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=$(e);if(t){var o=$(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(i,Y);var t,r,n,o=K(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentTypes=["SuperMap.Geometry.Point"],t.CLASS_NAME="SuperMap.Geometry.MultiPoint",t.geometryType="MultiPoint",t}return t=i,(r=[{key:"addPoint",value:function(e,t){this.addComponent(e,t)}},{key:"removePoint",value:function(e){this.removeComponent(e)}}])&&Q(t.prototype,r),n&&Q(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function te(e){"@babel/helpers - typeof";return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ne(e,t){return(ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ie(e);if(t){var o=ie(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ne(e,t)}(i,ee);var t,r,n,o=oe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],t.CLASS_NAME="SuperMap.Geometry.Curve",t.geometryType="Curve",t}return t=i,r&&re(t.prototype,r),n&&re(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}();function se(e){"@babel/helpers - typeof";return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ue(){return(ue="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pe(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ce(e,t){return(ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=pe(e);if(t){var o=pe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ce(e,t)}(i,ae);var t,r,n,o=fe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).CLASS_NAME="SuperMap.Geometry.LineString",t.geometryType="LineString",t}return t=i,n=[{key:"calculateCircle",value:function(e){if(e.length<3)return e;var t={},r=e[0],n=e[1],o=e[2],i=0,a=0,s=!0,l=0,u=0,c=0,f=[],p=(o.y-r.y)/(o.x-r.x),h=o.y-p*o.x;if(o.x!=r.x&&o.y!=r.y&&n.y==p*n.x+h||o.x==r.x&&n.x==r.x||o.y==r.y&&n.y==r.y||o.x==r.x&&o.y==r.y||o.x==n.x&&o.y==n.y||r.x==n.x&&r.y==n.y)f.push(r),f.push(n),f.push(o);else{var y=(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y))*(2*(o.y-r.y))-(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))*(2*(n.y-r.y)),d=2*(n.x-r.x)*(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))-2*(o.x-r.x)*(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y)),b=4*((n.x-r.x)*(o.y-r.y)-(o.x-r.x)*(n.y-r.y));t.x=y/b,t.y=d/b;var v=(2*(i=Math.sqrt((r.x-t.x)*(r.x-t.x)+(r.y-t.y)*(r.y-t.y)))*i-((r.x-o.x)*(r.x-o.x)+(r.y-o.y)*(r.y-o.y)))/(2*i*i);v=(v=v>=1?1:v)<=-1?-1:v,c=180*Math.acos(v)/Math.PI,a=(c=o.x==r.x?t.x>r.x&&n.x>r.x||t.x<r.x&&n.x<r.x?360-c:c:t.y>p*t.x+h&&n.y>p*n.x+h||t.y<p*t.x+h&&n.y<p*n.x+h?360-c:c)/72,o.y!=r.y?o.x==r.x?o.y>r.y?n.x<r.x&&(s=!1):n.x>r.x&&(s=!1):o.x<r.x?n.y<p*n.x+h&&(s=!1):n.y>p*n.x+h&&(s=!1):o.x>r.x?n.y>r.y&&(s=!1):n.y<r.y&&(s=!1);var m=(r.y-t.y)/(r.x-t.x),g=m>=0?180*Math.atan(m)/Math.PI:Math.abs(180*Math.atan(m)/Math.PI)+90,w=Math.abs(t.y);r.y==w&&w==o.y&&r.x<o.x&&(g+=180);var O=r.y-t.y;f.push(r);for(var S=1;S<72;S++){l=a*S,u=g,s?O>=0?m>=0?u+=l:u=180-(u-90)+l:u=m>0?u-180+l:90-u+l:O>=0?m>=0?u-=l:u=180-(u-90)-l:u=m>=0?u-180-l:90-u-l,u=u*Math.PI/180;var _=t.x+i*Math.cos(u),P=t.y+i*Math.sin(u);f.push(new U(_,P))}f.push(o)}return f}},{key:"createLineEPS",value:function(e){var t=[],r=e.length;if(r<2)return e;for(var n=0;n<r;){if("LTypeArc"==e[n].type){var o=i.createLineArc(t,n,r,e);t=o[0],n=o[1]}else t.push(e[n]),n++}return t}},{key:"createLineArc",value:function(e,t,r,n){if(0==t){var o=i.addPointEPS(n,t,r,"LTypeArc");Array.prototype.push.apply(e,o[0]),t=o[1]+1}else if(t==r-1){var a=[n[t-1],n[t]],s=i.calculateCircle(a);Array.prototype.push.apply(e,s),t++}else{var l=i.addPointEPS(n,t,r,"LTypeArc");e.pop(),Array.prototype.push.apply(e,l[0]),t=l[1]+1}return[e,t]}},{key:"addPointEPS",value:function(e,t,r,n){var o,a=[],s=t+1;return 0==t?Array.prototype.push.apply(a,[e[t],e[t+1]]):t==r-1?Array.prototype.push.apply(a,[e[t-1],e[t]]):Array.prototype.push.apply(a,[e[t-1],e[t],e[t+1]]),"LTypeCurve"==n?o=i.calculatePointsFBZN(a):"LTypeArc"==n&&(o=i.calculateCircle(a)),[o,s]}}],(r=[{key:"removeComponent",value:function(e){var t=this.components&&this.components.length>2;return t&&ue(pe(i.prototype),"removeComponent",this).apply(this,arguments),t}},{key:"getSortedSegments",value:function(){for(var e,t,r=this.components.length-1,n=new Array(r),o=0;o<r;++o)e=this.components[o],t=this.components[o+1],e.x<t.x?n[o]={x1:e.x,y1:e.y,x2:t.x,y2:t.y}:n[o]={x1:t.x,y1:t.y,x2:e.x,y2:e.y};return n.sort(function(e,t){return e.x1-t.x1})}},{key:"getVertices",value:function(e){return!0===e?[this.components[0],this.components[this.components.length-1]]:!1===e?this.components.slice(1,this.components.length-1):this.components.slice()}}])&&le(t.prototype,r),n&&le(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ye(e){"@babel/helpers - typeof";return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function be(){return(be="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ge(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ve(e,t){return(ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ge(e);if(t){var o=ge(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var we=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ve(e,t)}(i,he);var t,r,n,o=me(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentTypes=["SuperMap.Geometry.Point"],t.CLASS_NAME="SuperMap.Geometry.LinearRing",t.geometryType="LinearRing",t}return t=i,(r=[{key:"addComponent",value:function(e,t){var r=!1,n=this.components.pop();null==t&&e.equals(n)||(r=be(ge(i.prototype),"addComponent",this).apply(this,arguments));var o=this.components[0];return be(ge(i.prototype),"addComponent",this).apply(this,[o]),r}},{key:"removeComponent",value:function(e){var t=this.components&&this.components.length>3;if(t){this.components.pop(),be(ge(i.prototype),"removeComponent",this).apply(this,arguments);var r=this.components[0];be(ge(i.prototype),"addComponent",this).apply(this,[r])}return t}},{key:"getArea",value:function(){var e=0;if(this.components&&this.components.length>2){for(var t=0,r=0,n=this.components.length;r<n-1;r++){var o=this.components[r],i=this.components[r+1];t+=(o.x+i.x)*(i.y-o.y)}e=-t/2}return e}},{key:"getVertices",value:function(e){return!0===e?[]:this.components.slice(0,this.components.length-1)}}])&&de(t.prototype,r),n&&de(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Oe(e){"@babel/helpers - typeof";return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _e(e,t){return(_e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=xe(e);if(t){var o=xe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}(i,Y);var t,r,n,o=Pe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentTypes=["SuperMap.Geometry.LinearRing"],t.CLASS_NAME="SuperMap.Geometry.Polygon",t.geometryType="Polygon",t}return t=i,(r=[{key:"getArea",value:function(){var e=0;if(this.components&&this.components.length>0){e+=Math.abs(this.components[0].getArea());for(var t=1,r=this.components.length;t<r;t++)e-=Math.abs(this.components[t].getArea())}return e}}])&&Se(t.prototype,r),n&&Se(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var je=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.Feature",this.layer=t,this.id=j.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=r,this.data=null!=n?n:{}}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.id=null,this.lonlat=null,this.data=null}}])&&ke(t.prototype,r),n&&ke(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ce(e){"@babel/helpers - typeof";return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Re(){return(Re="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ie(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Ae(e,t){return(Ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ie(e);if(t){var o=Ie(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Me="Unknown",Ne="Insert",De="Update",Fe="Delete",Be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ae(e,t)}(i,je);var t,r,n,o=Le(i);function i(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,null,null,t)).fid=null,n.geometry=e||null,n.attributes={},t&&(n.attributes=j.extend(n.attributes,t)),n.bounds=null,n.state=null,n.style=r||null,n.url=null,n.lonlat=null,n.CLASS_NAME="SuperMap.Feature.Vector",i.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"default",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}},n}return t=i,(r=[{key:"destroy",value:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,Re(Ie(i.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){return new i(this.geometry?this.geometry.clone():null,this.attributes,this.style)}},{key:"toState",value:function(e){if(e===De)switch(this.state){case Me:case Fe:this.state=e}else if(e===Ne)switch(this.state){case Me:break;default:this.state=e}else if(e===Fe)switch(this.state){case Ne:case Fe:break;case Me:case De:this.state=e}else e===Me&&(this.state=e)}}])&&Te(t.prototype,r),n&&Te(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ue=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=null,this.keepData=!1,j.extend(this,t),this.options=t,this.CLASS_NAME="SuperMap.Format"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){}},{key:"read",value:function(e){}},{key:"write",value:function(e){}}])&&Ge(t.prototype,r),n&&Ge(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Je(e){"@babel/helpers - typeof";return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function He(e,t){return(He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=We(e);if(t){var o=We(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&He(e,t)}(i,Ue);var t,r,n,o=ze(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).indent="    ",t.space=" ",t.newline="\n",t.level=0,t.pretty=!1,t.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),t.CLASS_NAME="SuperMap.Format.JSON",t.serialize={object:function(e){if(null==e)return"null";if(e.constructor===Date)return this.serialize.date.apply(this,[e]);if(e.constructor===Array)return this.serialize.array.apply(this,[e]);var t,r,n,o=["{"];this.level+=1;var i=!1;for(t in e)e.hasOwnProperty(t)&&(r=this.write.apply(this,[t,this.pretty]),n=this.write.apply(this,[e[t],this.pretty]),null!=r&&null!=n&&(i&&o.push(","),o.push(this.writeNewline(),this.writeIndent(),r,":",this.writeSpace(),n),i=!0));return this.level-=1,o.push(this.writeNewline(),this.writeIndent(),"}"),o.join("")},array:function(e){var t,r=["["];this.level+=1;for(var n=0,o=e.length;n<o;++n)null!=(t=this.write.apply(this,[e[n],this.pretty]))&&(n>0&&r.push(","),r.push(this.writeNewline(),this.writeIndent(),t));return this.level-=1,r.push(this.writeNewline(),this.writeIndent(),"]"),r.join("")},string:function(e){var t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(e)?'"'+e.replace(/([\x00-\x1f\\"])/g,function(e,r){var n=t[r];return n||(n=r.charCodeAt(),"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16))})+'"':'"'+e+'"'},number:function(e){return isFinite(e)?String(e):"null"},boolean:function(e){return String(e)},date:function(e){function t(e){return e<10?"0"+e:e}return'"'+e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+'"'}},t}return t=i,(r=[{key:"read",value:function(e,t){var r;if(this.nativeJSON)try{r=JSON.parse(e,t)}catch(t){return{data:e}}return this.keepData&&(this.data=r),r}},{key:"write",value:function(e,t){this.pretty=!!t;var r=null,n=Je(e);if(this.serialize[n])try{r=!this.pretty&&this.nativeJSON?JSON.stringify(e):this.serialize[n].apply(this,[e])}catch(e){}return r}},{key:"writeIndent",value:function(){var e=[];if(this.pretty)for(var t=0;t<this.level;++t)e.push(this.indent);return e.join("")}},{key:"writeNewline",value:function(){return this.pretty?this.newline:""}},{key:"writeSpace",value:function(){return this.pretty?this.space:""}}])&&Ve(t.prototype,r),n&&Ve(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ye(e){"@babel/helpers - typeof";return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qe(e,t){return(Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ke(e);if(t){var o=Ke(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qe(e,t)}(i,Y);var t,r,n,o=Ze(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentTypes=["SuperMap.Geometry.LineString"],t.CLASS_NAME="SuperMap.Geometry.MultiLineString",t.geometryType="MultiLineString",t}return t=i,r&&Xe(t.prototype,r),n&&Xe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}();function et(e){"@babel/helpers - typeof";return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rt(e,t){return(rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ot(e);if(t){var o=ot(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var it=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}(i,Y);var t,r,n,o=nt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentTypes=["SuperMap.Geometry.Polygon"],t.CLASS_NAME="SuperMap.Geometry.MultiPolygon",t.geometryType="MultiPolygon",t}return t=i,r&&tt(t.prototype,r),n&&tt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}();function at(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var st=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.red=t||0==t?t:255,this.green=r||0,this.blue=n||0,this.CLASS_NAME="SuperMap.ServerColor"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t){var r=new e,n=255;null!==t.red&&(n=Number(t.red)),r.red=n;var o=0;null!==t.green&&(o=Number(t.green)),r.green=o;var i=0;return null!==t.blue&&(i=Number(t.blue)),r.blue=i,r}}}],(r=[{key:"destroy",value:function(){this.red=null,this.green=null,this.blue=null}}])&&at(t.prototype,r),n&&at(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ut=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fillBackColor=new st(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new st(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new st(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ServerStyle"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({fillBackColor:st.fromJson(t.fillBackColor),fillBackOpaque:t.fillBackOpaque,fillForeColor:st.fromJson(t.fillForeColor),fillGradientMode:t.fillGradientMode,fillGradientAngle:t.fillGradientAngle,fillGradientOffsetRatioX:t.fillGradientOffsetRatioX,fillGradientOffsetRatioY:t.fillGradientOffsetRatioY,fillOpaqueRate:t.fillOpaqueRate,fillSymbolID:t.fillSymbolID,lineColor:st.fromJson(t.lineColor),lineSymbolID:t.lineSymbolID,lineWidth:t.lineWidth,markerAngle:t.markerAngle,markerSize:t.markerSize,markerSymbolID:t.markerSymbolID})}}],(r=[{key:"destroy",value:function(){var e=this;e.fillBackColor&&(e.fillBackColor.destroy(),e.fillBackColor=null),e.fillBackOpaque=null,e.fillForeColor&&(e.fillForeColor.destroy(),e.fillForeColor=null),e.fillGradientMode=null,e.fillGradientAngle=null,e.fillGradientOffsetRatioX=null,e.fillGradientOffsetRatioY=null,e.fillOpaqueRate=null,e.fillSymbolID=null,e.lineColor&&(e.lineColor.destroy(),e.lineColor=null),e.lineSymbolID=null,e.lineWidth=null,e.markerAngle=null,e.markerSize=null,e.markerSymbolID=null}},{key:"toServerJSONObject",value:function(){var e={};return e=j.copyAttributes(e,this)}}])&&lt(t.prototype,r),n&&lt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ct(e){"@babel/helpers - typeof";return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pt(e,t){return(pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=dt(e);if(t){var o=dt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ct(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yt(e)}(this,r)}}function yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pt(e,t)}(i,U);var t,r,n,o=ht(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).measure=null,e&&j.extend(yt(t),e),t.CLASS_NAME="SuperMap.PointWithMeasure",t}return t=i,n=[{key:"fromJson",value:function(e){if(e)return new i({x:e.x,y:e.y,measure:e.measure})}}],(r=[{key:"equals",value:function(e){var t=!1;if(null!=e){var r=this.x===e.x&&this.y===e.y&&this.measure===e.measure,n=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),o=isNaN(e.x)&&isNaN(e.y)&&isNaN(e.measure);t=r||n&&o}return t}},{key:"toJson",value:function(){var e="{";return null!=this.measure&&void 0!=this.measure&&(e+='"measure":'+this.measure+","),e+='"x":'+this.x+",",e+='"y":'+this.y,e+="}"}},{key:"destroy",value:function(){this.measure=null,this.x=null,this.y=null}}])&&ft(t.prototype,r),n&&ft(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function vt(e){"@babel/helpers - typeof";return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gt(e,t){return(gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=St(e);if(t){var o=St(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===vt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ot(e)}(this,r)}}function Ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function St(e){return(St=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gt(e,t)}(i,Y);var t,r,n,o=wt(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).id=null,r.center=null,r.style=null,r.length=null,r.maxM=null,r.minM=null,r.parts=null,r.points=null,r.type=null,r.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],t&&j.extend(Ot(r),t),r.CLASS_NAME="SuperMap.Route",r.geometryType="LINEM",r}return t=i,n=[{key:"fromJson",value:function(e){if(e){var t=e.parts||[],r=e.points||[],n=t.length,o=[];if(!(n>0))return null;for(var a=0,s=0,l=[];a<n;a++){for(var u=0;u<t[a];u++)l.push(bt.fromJson(r[s+u]));s+=t[a],l[0].equals(l[t[a]-1])?o.push(new we(l)):o.push(new he(l)),l=[]}return new i(o,{id:e.id,center:e.center,style:e.style,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type,parts:e.parts})}}}],(r=[{key:"toJson",value:function(){var e="{";if(null!=this.id&&void 0!=this.id&&(e+='"id":'+this.id+","),null!=this.center&&void 0!=this.center&&(e+='"center":'+this.center+","),null!=this.style&&void 0!=this.style&&(e+='"style":'+this.style+","),null!=this.length&&void 0!=this.length&&(e+='"length":'+this.length+","),null!=this.maxM&&void 0!=this.maxM&&(e+='"maxM":'+this.maxM+","),null!=this.minM&&void 0!=this.minM&&(e+='"minM":'+this.minM+","),null!=this.type&&void 0!=this.type&&(e+='"type":"'+this.type+'",'),null!=this.parts&&void 0!=this.parts){e+='"parts":['+this.parts[0];for(var t=1;t<this.parts.length;t++)e+=","+this.parts[t];e+="],"}if(null!=this.components&&this.components.length>0){e+='"points":[';for(var r=0,n=this.components.length;r<n;r++)for(var o=0,i=this.components[r].components.length;o<i;o++)e+=this.components[r].components[o].toJson()+",";e=e.replace(/,$/g,""),e+="]"}return e=e.replace(/,$/g,""),e+="}"}},{key:"destroy",value:function(){var e=this;e.id=null,e.center=null,e.style=null,e.length=null,e.maxM=null,e.minM=null,e.type=null,e.parts=null,e.components.length=0,e.components=null,e.componentTypes=null}}])&&mt(t.prototype,r),n&&mt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(),Pt={GEOJSON:"GEOJSON",ISERVER:"ISERVER",FGB:"FGB"},xt={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},Et={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN",GEOCOMPOUND:"GEOCOMPOUND"},kt={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},jt={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"},Ct={DISTANCE:"DISTANCE",AREA:"AREA"},Tt={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},Rt={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"},At={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"},Lt={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},It={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},Mt={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},Nt={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"},Dt={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"},Ft={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},Bt={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"},Gt={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},Ut={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},Jt={FLAT:"FLAT",ROUND:"ROUND"},Vt={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},Ht={INDEXEDHDFS:"INDEXEDHDFS",UDB:"UDB",MONGODB:"MONGODB",PG:"PG"},zt={BSPLINE:"BSPLINE",POLISH:"POLISH"},Wt={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},qt={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},Yt={ADD:"add",UPDATE:"update",DELETE:"delete"},Xt={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},Qt={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},Zt={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"},Kt={EXP1:"EXP1",EXP2:"EXP2"},$t={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},er={CLIP:"clip",INTERSECT:"intersect"},tr={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},rr={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},nr={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},or={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"},ir={REGIONNOOVERLAP:"REGIONNOOVERLAP",REGIONNOOVERLAPWITH:"REGIONNOOVERLAPWITH",REGIONCONTAINEDBYREGION:"REGIONCONTAINEDBYREGION",REGIONCOVEREDBYREGION:"REGIONCOVEREDBYREGION",LINENOOVERLAP:"LINENOOVERLAP",LINENOOVERLAPWITH:"LINENOOVERLAPWITH",POINTNOIDENTICAL:"POINTNOIDENTICAL"},ar={GEOHASH_GRID:"geohash_grid"},sr={AVG:"avg",MAX:"max",MIN:"min",SUM:"sum"},lr={NDVI:"NDVI",HILLSHADE:"HILLSHADE"};function ur(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var cr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ServerGeometry"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({id:t.id,style:ut.fromJson(t.style),parts:t.parts,partTopo:t.partTopo,points:t.points,center:t.center,length:t.length,maxM:t.maxM,minM:t.minM,type:t.type})}},{key:"fromGeometry",value:function(t){if(t){var r=0,n=[],o=[],i=null,a=t.components,s=t.CLASS_NAME,l={epsgCode:t.SRID};if(isNaN(t.id)||(r=t.id),"SuperMap.Geometry.LinearRing"!=s&&"SuperMap.Geometry.LineString"!=s&&(t instanceof ee||t instanceof $e)){for(var u=a.length,c=0;c<u;c++){var f=a[c].getVertices(),p=f.length;n.push(p);for(var h=0;h<p;h++)o.push(new U(f[h].x,f[h].y))}i="SuperMap.Geometry.MultiPoint"==s?Et.POINT:Et.LINE}else if(t instanceof it){for(var y=a.length,d=0;d<y;d++)for(var b=a[d].components,v=b.length,m=0;m<v;m++){var g=b[m].getVertices(),w=g.length+1;n.push(w);for(var O=0;O<w-1;O++)o.push(new U(g[O].x,g[O].y));o.push(new U(g[0].x,g[0].y))}i=Et.REGION}else if(t instanceof Ee){for(var S=a.length,_=0;_<S;_++){var P=a[_].getVertices(),x=P.length+1;n.push(x);for(var E=0;E<x-1;E++)o.push(new U(P[E].x,P[E].y));o.push(new U(P[0].x,P[0].y))}i=Et.REGION}else{for(var k=t.getVertices(),j=k.length,C=0;C<j;C++)o.push(new U(k[C].x,k[C].y));t instanceof we&&(o.push(new U(k[0].x,k[0].y)),j++),n.push(j),i=t instanceof U?Et.POINT:Et.LINE}return new e({id:r,style:null,parts:n,points:o,type:i,prjCoordSys:l})}}},{key:"IsClockWise",value:function(e){var t=e.length;if(t<3)return 0;var r=e[0].y*(e[t-1].x-e[1].x);e.push(e[0]);for(var n=1;n<t;n++)r+=e[n].y*(e[n-1].x-e[n+1].x);return.5*r}},{key:"bubbleSort",value:function(e,t,r,n){for(var o=0;o<e.length;o++)for(var i=0;i<e.length;i++)if(e[o]>e[i]){var a=e[i];e[i]=e[o],e[o]=a;var s=t[i];if(t[i]=t[o],t[o]=s,r&&r.length>0){var l=r[i];r[i]=r[o],r[o]=l}if(n&&n.length>0){var u=n[i];n[i]=n[o],n[o]=u}}}}],(r=[{key:"destroy",value:function(){var e=this;e.id=null,e.style=null,e.parts=null,e.partTopo=null,e.points=null,e.type=null,e.prjCoordSys=null}},{key:"toGeometry",value:function(){var e=this;switch(e.type.toUpperCase()){case Et.POINT:return e.toGeoPoint();case Et.LINE:return e.toGeoLine();case Et.LINEM:return e.toGeoLinem();case Et.REGION:return e.toGeoRegion();case Et.POINTEPS:return e.toGeoPoint();case Et.LINEEPS:return e.toGeoLineEPS();case Et.REGIONEPS:return e.toGeoRegionEPS();case Et.GEOCOMPOUND:return e.transformGeoCompound()}}},{key:"toGeoPoint",value:function(){var e=this.parts||[],t=this.points||[],r=e.length;if(r>0){if(1===r)return new U(t[0].x,t[0].y);for(var n=[],o=0;o<r;o++)n.push(new U(t[o].x,t[o].y));return new ee(n)}return null}},{key:"toGeoLine",value:function(){var e=this.parts||[],t=this.points||[],r=e.length;if(r>0){if(1===r){for(var n=[],o=0;o<e[0];o++)n.push(new U(t[o].x,t[o].y));return n[0].equals(n[e[0]-1])?new we(n):new he(n)}for(var i=[],a=0;a<r;a++){for(var s=[],l=0;l<e[a];l++)s.push(new U(t[l].x,t[l].y));i.push(new he(s)),t.splice(0,e[a])}return new $e(i)}return null}},{key:"toGeoLineEPS",value:function(){var e,t,r,n,o,i=this.parts||[],a=this.points||[],s=i.length;if(s>0){if(1===s){for(e=0,r=[];e<i[0];e++)r.push(new U(a[e].x,a[e].y,a[e].type));return r[0].equals(r[i[0]-1])?(o=he.createLineEPS(r),new we(o)):(o=he.createLineEPS(r),new he(o))}for(e=0,n=[];e<s;e++){for(t=0,r=[];t<i[e];t++)r.push(new U(a[t].x,a[t].y));o=he.createLineEPS(r),n.push(new he(o)),a.splice(0,i[e])}return new $e(n)}return null}},{key:"toGeoLinem",value:function(){return _t.fromJson(this)}},{key:"toGeoRegion",value:function(){var t=this.parts||[],r=this.partTopo||[],n=this.points||[],o=t.length;if(o<=0)return null;var i=[],a=[];if(1==o){for(var s=0;s<n.length;s++)a.push(new U(n[s].x,n[s].y));return i.push(new Ee([new we(a)])),new it(i)}for(var l=[],u=[],c=[],f=[],p=[],h=0,y=0;h<o;h++){for(var d=0;d<t[h];d++)a.push(new U(n[y+d].x,n[y+d].y));y+=t[h];var b=new Ee([new we(a)]);a=[],c.push(b),0===r.length&&f.push(b.getBounds()),p.push(1),u.push(b.getArea())}if(0===r.length){e.bubbleSort(u,c,r,f);for(var v=[],m=1;m<c.length;m++)for(var g=m-1;g>=0;g--)if(v[m]=-1,f[g].containsBounds(f[m])){p[m]=-1*p[g],p[m]<0&&(v[m]=g);break}for(var w=0;w<c.length;w++)p[w]>0?i.push(c[w]):(i[v[w]].components=i[v[w]].components.concat(c[w].components),i.push(""))}else{i=new Array;for(var O=0;O<c.length;O++)if(r[O]&&-1==r[O]?l=l.concat(c[O].components):(l.length>0&&i.length>0&&(i[i.length-1].components=i[i.length-1].components.concat(l),l=[]),i.push(c[O])),O==o-1){var S=i.length;if(S)i[S-1].components=i[S-1].components.concat(l);else for(var _=0,P=l.length;_<P;_++)i.push(new Ee(l))}}return new it(i)}},{key:"toGeoRegionEPS",value:function(){var t=this.parts||[],r=this.partTopo||[],n=this.points||[],o=t.length;if(o<=0)return null;var i,a=[],s=[];if(1==o){for(var l=0;l<n.length;l++)s.push(new U(n[l].x,n[l].y));return i=he.createLineEPS(s),a.push(new Ee([new we(i)])),new it(a)}for(var u=[],c=[],f=[],p=[],h=[],y=0,d=0;y<o;y++){for(var b=0;b<t[y];b++)s.push(new U(n[d+b].x,n[d+b].y));d+=t[y],i=he.createLineEPS(s);var v=new Ee([new we(i)]);s=[],f.push(v),0===r.length&&p.push(v.getBounds()),h.push(1),c.push(v.getArea())}if(0===r.length){e.bubbleSort(c,f,r,p);for(var m=[],g=1;g<f.length;g++)for(var w=g-1;w>=0;w--)if(m[g]=-1,p[w].containsBounds(p[g])){h[g]=-1*h[w],h[g]<0&&(m[g]=w);break}for(var O=0;O<f.length;O++)h[O]>0?a.push(f[O]):(a[m[O]].components=a[m[O]].components.concat(f[O].components),a.push(""))}else{a=new Array;for(var S=0;S<f.length;S++)if(r[S]&&-1==r[S]?u=u.concat(f[S].components):(u.length>0&&a.length>0&&(a[a.length-1].components=a[a.length-1].components.concat(u),u=[]),a.push(f[S])),S==o-1){var _=a.length;if(_)a[_-1].components=a[_-1].components.concat(u);else for(var P=0,x=u.length;P<x;P++)a.push(new Ee(u))}}return new it(a)}},{key:"transformGeoCompound",value:function(){var t=this.geoParts||[],r=t.length;if(r<=0)return null;for(var n=[],o=0;o<r;o++){var i=t[o];n.push(new e(i).toGeometry())}return new Y(n)}}])&&ur(t.prototype,r),n&&ur(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function fr(e){"@babel/helpers - typeof";return(fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hr(){return(hr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=br(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function yr(e,t){return(yr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function dr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=br(e);if(t){var o=br(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===fr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function br(e){return(br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yr(e,t)}(i,qe);var t,r,n,o=dr(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).ignoreExtraDims=!0,t.CLASS_NAME="SuperMap.Format.GeoJSON",t.parseCoords={point:function(e){if(!1===this.ignoreExtraDims&&2!=e.length)throw"Only 2D points are supported: "+e;return new U(e[0],e[1])},multipoint:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new ee(t)},linestring:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new he(t)},multilinestring:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.linestring.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new $e(t)},polygon:function(e){for(var t,r,n=[],o=0,i=e.length;o<i;++o){try{r=this.parseCoords.linestring.apply(this,[e[o]])}catch(e){throw e}t=new we(r.components),n.push(t)}return new Ee(n)},multipolygon:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.polygon.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new it(t)},box:function(e){if(2!=e.length)throw"GeoJSON box coordinates must have 2 elements";return new Ee([new we([new U(e[0][0],e[0][1]),new U(e[1][0],e[0][1]),new U(e[1][0],e[1][1]),new U(e[0][0],e[1][1]),new U(e[0][0],e[0][1])])])}},t.extract={feature:function(e){var t=this.extract.geometry.apply(this,[e.geometry]),r={type:"Feature",properties:this.createAttributes(e),geometry:t};return e.geometry&&"TEXT"===e.geometry.type&&(r.properties.texts=e.geometry.texts,r.properties.textStyle=e.geometry.textStyle),e.fid&&(r.id=e.fid),e.ID&&(r.id=e.ID),r},geometry:function(e){if(null==e)return null;!e.parts&&e.points&&(e.parts=[e.points.length]);var t,r=e.hasOwnProperty("geometryType")?e:new cr(e).toGeometry()||e,n=r.geometryType||r.type;return"LinearRing"===n&&(n="LineString"),"LINEM"===n&&(n="MultiLineString"),t=this.extract[n.toLowerCase()].apply(this,[r]),"Collection"===(n="TEXT"===n?"Point":n)?{type:"GeometryCollection",geometries:t}:{type:n,coordinates:t}},point:function(e){var t=[e.x,e.y];for(var r in e)"x"===r||"y"===r||null===e[r]||isNaN(e[r])||t.push(e[r]);return t},text:function(e){return[e.points[0].x,e.points[0].y]},multipoint:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.point.apply(this,[e.components[r]]));return t},linestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.point.apply(this,[e.components[r]]));return t},multilinestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.linestring.apply(this,[e.components[r]]));return t},polygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.linestring.apply(this,[e.components[r]]));return t},multipolygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.polygon.apply(this,[e.components[r]]));return t},collection:function(e){for(var t=e.components.length,r=new Array(t),n=0;n<t;++n)r[n]=this.extract.geometry.apply(this,[e.components[n]]);return r}},t}return t=i,(r=[{key:"read",value:function(e,t,r){t=t||"FeatureCollection";var n=null,o=null;if(o="string"==typeof e?hr(br(i.prototype),"read",this).call(this,e,r):e){if("string"!=typeof o.type);else if(this.isValidType(o,t))switch(t){case"Geometry":try{n=this.parseGeometry(o)}catch(e){}break;case"Feature":try{(n=this.parseFeature(o)).type="Feature"}catch(e){}break;case"FeatureCollection":switch(n=[],o.type){case"Feature":try{n.push(this.parseFeature(o))}catch(e){n=null}break;case"FeatureCollection":for(var a=0,s=o.features.length;a<s;++a)try{n.push(this.parseFeature(o.features[a]))}catch(e){n=null}break;default:try{var l=this.parseGeometry(o);n.push(new Be(l))}catch(e){n=null}}}}else;return n}},{key:"write",value:function(e,t){return hr(br(i.prototype),"write",this).call(this,this.toGeoJSON(e),t)}},{key:"fromGeoJSON",value:function(e,t,r){var n=this,o=this.read(e,t,r);return j.isArray(o)?o.map(function(e){return n._toiSevrerFeature(e)}):this._toiSevrerFeature(o)}},{key:"toGeoJSON",value:function(e){var t={type:null};if(j.isArray(e)){t.type="FeatureCollection";var r=e.length;t.features=new Array(r);for(var n=0;n<r;++n){var o=e[n];if(s(o)){var i={};i.geometry=o,t.features[n]=this.extract.feature.apply(this,[i])}else t.features[n]=this.extract.feature.apply(this,[o])}}else if(s(e)){var a={};a.geometry=e,t=this.extract.feature.apply(this,[a])}else t=this.extract.feature.apply(this,[e]);function s(e){return e.hasOwnProperty("parts")&&e.hasOwnProperty("points")||e.hasOwnProperty("geoParts")}return t}},{key:"isValidType",value:function(e,t){var r=!1;switch(t){case"Geometry":-1==j.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],e.type)||(r=!0);break;case"FeatureCollection":r=!0;break;default:e.type==t&&(r=!0)}return r}},{key:"parseFeature",value:function(e){var t,r,n,o;n=e.properties?e.properties:{},o=e.geometry&&e.geometry.bbox||e.bbox;try{r=this.parseGeometry(e.geometry)}catch(e){throw e}return t=new Be(r,n),o&&(t.bounds=I.fromArray(o)),e.id&&(t.geometry.id=e.id,t.fid=e.id),t}},{key:"parseGeometry",value:function(e){if(null==e)return null;var t;if("GeometryCollection"==e.type){if(!j.isArray(e.geometries))throw"GeometryCollection must have geometries array: "+e;for(var r=e.geometries.length,n=new Array(r),o=0;o<r;++o)n[o]=this.parseGeometry.apply(this,[e.geometries[o]]);t=new Y(n)}else{if(!j.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!this.parseCoords[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{t=this.parseCoords[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(e){throw e}}return t}},{key:"createCRSObject",value:function(e){var t=e.layer.projection.toString(),r={};if(t.match(/epsg:/i)){var n=parseInt(t.substring(t.indexOf(":")+1));r=4326==n?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+n}}}return r}},{key:"_toiSevrerFeature",value:function(e){var t=e.attributes,r=[],n=[];for(var o in t)r.push(o),n.push(t[o]);var i={fieldNames:r,fieldValues:n,geometry:cr.fromGeometry(e.geometry)};return i.geometry.id=e.fid,i}},{key:"createAttributes",value:function(e){if(!e)return null;var t={};!function(e,t){if(!e.hasOwnProperty("fieldNames")||!e.hasOwnProperty("fieldValues"))return;var r=e.fieldNames,n=e.fieldValues;for(var o in r)t[r[o]]=n[o]}(e,t);var r=["fieldNames","fieldValues","geometry","stringID","ID"];for(var n in e)r.indexOf(n)>-1||(t[n]=e[n]);return t}}])&&pr(t.prototype,r),n&&pr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(),mr=function(e){return"[object Array]"==Object.prototype.toString.call(e)},gr=function(e){return"string"==typeof e&&e.constructor===String},wr={toSuperMapGeometry:function(e){if(e&&e.type)return(new vr).read(e,"FeatureCollection")[0].geometry},toSuperMapBounds:function(e){return mr(e)?new I(e[0],e[1],e[2],e[3]):new I(e.getWest(),e.getSouth(),e.getEast(),e.getNorth())},toSuperMapPoint:function(e){return mr(e)?new U(e[0],e[1]):e.lng&&e.lat?new U(e.lng,e.lat):new U(e.geometry.coordinates[0],e.geometry.coordinates[1])},toSuperMapPolygon:function(e){var t=e.getWest(),r=e.getEast(),n=e.getSouth(),o=e.getNorth();return new Ee([new we([new U(t,n),new U(r,n),new U(r,o),new U(t,o)])])},isArray:mr,toGeoJSON:function(e){if(e)return(new vr).toGeoJSON(e)},toProcessingParam:function(e){var t={};if(e.length<1)t="";else{for(var r=[],n=0;n<e.length;n++){var o={};o.x=e[n][0],o.y=e[n][1],r.push(o)}t.type="REGION",t.points=r}return t},extend:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var r=Object.getOwnPropertyNames(arguments)[t];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(e[i]=n[i])}}}return e},isNumber:function(e){if(""===e)return!1;var t=Number(e);return 0===t||!isNaN(t)},isString:gr,newGuid:function(e){for(var t=e||32,r="",n=1;n<t;n++){r+=Math.floor(16*Math.random()).toString(16)}return r},hexToRgba:function(e,t){var r=[],n=[];if(3==(e=e.replace(/#/,"")).length){for(var o=[],i=0;i<3;i++)o.push(e.charAt(i)+e.charAt(i));e=o.join("")}for(var a=0;a<6;a+=2)r[a]="0x"+e.substr(a,2),n.push(parseInt(Number(r[a])));return n.push(t),"rgba("+n.join(",")+")"},isMatchAdministrativeName:function(e,t){if(gr(t)){var r=e.substr(0,2);return"å¼ å®¶"===r&&(r=e.substr(0,3)),!!t.match(new RegExp(r))}return!1}};function Or(e){"@babel/helpers - typeof";return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _r(){return(_r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Er(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Pr(e,t){return(Pr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Er(e);if(t){var o=Er(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Or(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Er(e){return(Er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pr(e,t)}(i,b);var t,r,n,o=xr(i);function i(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t,r)).x=parseFloat(e),n.y=parseFloat(t),n.text=r.toString(),n.bsInfo={h:null,w:null},n.element=document.createElement("span"),n.CLASS_NAME="SuperMap.Geometry.GeoText",n.geometryType="GeoText",n}return t=i,(r=[{key:"destroy",value:function(){_r(Er(i.prototype),"destroy",this).call(this),this.x=null,this.y=null,this.text=null}},{key:"getCentroid",value:function(){return new U(this.x,this.y)}},{key:"clone",value:function(e){return null==e&&(e=new i(this.x,this.y,this.text)),j.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new I(this.x,this.y,this.x,this.y)}},{key:"getLabelPxBoundsByLabel",value:function(e,t,r,n){var o,i,a,s,l=j.cloneObject(e),u=(n.label||this.text).split("\n").length;if(t=parseFloat(t),r=parseFloat(r),u>1&&(r=parseFloat(r)*u),n.labelAlign&&"cm"!==n.labelAlign)switch(n.labelAlign){case"lt":l.x+=t/2,l.y+=r/2;break;case"lm":l.x+=t/2;break;case"lb":l.x+=t/2,l.y-=r/2;break;case"ct":l.y+=r/2;break;case"cb":l.y-=r/2;break;case"rt":l.x-=t/2,l.y+=r/2;break;case"rm":l.x-=t/2;break;case"rb":l.x-=t/2,l.y-=r/2}return this.bsInfo.h=r,this.bsInfo.w=t,o=l.x-parseFloat(t)/2,i=l.y+parseFloat(r)/2,s=l.x+parseFloat(t)/2,a=l.y-parseFloat(r)/2,new I(o,i,s,a)}},{key:"getLabelPxBoundsByText",value:function(e,t){var r,n,o,i,a=this.getLabelPxSize(t),s=j.cloneObject(e);if(t.labelAlign&&"cm"!==t.labelAlign)switch(t.labelAlign){case"lt":s.x+=a.w/2,s.y+=a.h/2;break;case"lm":s.x+=a.w/2;break;case"lb":s.x+=a.w/2,s.y-=a.h/2;break;case"ct":s.y+=a.h/2;break;case"cb":s.y-=a.h/2;break;case"rt":s.x-=a.w/2,s.y+=a.h/2;break;case"rm":s.x-=a.w/2;break;case"rb":s.x-=a.w/2,s.y-=a.h/2}return this.bsInfo.h=a.h,this.bsInfo.w=a.w,r=s.x-a.w/2,n=s.y+a.h/2,i=t.fontStyle&&"italic"===t.fontStyle?s.x+a.w/2+parseInt(parseFloat(t.fontSize)/2):s.x+a.w/2,o=s.y-a.h/2,new I(r,n,i,o)}},{key:"getLabelPxSize",value:function(e){var t,r,n,o,i=parseFloat(e.strokeWidth);t=e.label||this.text,r=e.fontSize?parseFloat(e.fontSize):parseFloat("12px");var a=t.split("\n"),s=a.length;o=s>1?r*s+s+i+.2*r:r+i+.2*r+1,n=0,this.labelWTmp&&n<this.labelWTmp&&(n=this.labelWTmp);for(var l=0;l<s;l++){var u=this.getTextCount(a[l]),c=this.labelWTmp=j.getTextBounds(e,a[l],this.element).textWidth+1*u.textC+i;n<c&&(n=c)}var f=new Object;return f.h=o,f.w=n,f}},{key:"getTextCount",value:function(e){for(var t={},r=0,n=0,o=0;o<e.length;o++)e.charCodeAt(o)>255?r++:n++;return t.cnC=r,t.enC=n,t.textC=e.length,t}}])&&Sr(t.prototype,r),n&&Sr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function jr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Cr=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&r&&r.map&&r.renderer&&(this.id=j.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=null,this.location=[],this.data=t,this.shapes=[],this.layer=r,this.CLASS_NAME="SuperMap.Feature.Theme")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}},{key:"getLocalXY",value:function(e){var t=this.layer.map.getResolution(),r=this.layer.map.getExtent();return e instanceof U||e instanceof kr?[e.x/t+-r.left/t,r.top/t-e.y/t]:e instanceof A?[e.lon/t+-r.left/t,r.top/t-e.lat/t]:null}}])&&jr(t.prototype,r),n&&jr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Tr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Rr=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.geometry=t,this.attributes=r}var r,n,o;return r=e,(n=[{key:"toFeature",value:function(){var e=wr.toSuperMapGeometry(this.geometry),r=[];return this.geometry instanceof t().LngLat?r=[this.geometry.lng,this.geometry.lat]:this.geometry instanceof t().Point?r=[this.geometry.x,this.geometry.y]:3===this.geometry.length&&(e=new kr(this.geometry[0],this.geometry[1],this.geometry[2])),r.length>1&&(e=new U(r[0],r[1])),new Be(e,this.attributes)}}])&&Tr(r.prototype,n),o&&Tr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Ar(e){"@babel/helpers - typeof";return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ir=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Util"}var t,r,n;return t=e,(r=[{key:"clone",value:function(e){var t=this.BUILTIN_OBJECT;if("object"==Ar(e)&&null!==e){var r=e;if(e instanceof Array){r=[];for(var n=0,o=e.length;n<o;n++)r[n]=this.clone(e[n])}else if(!t[Object.prototype.toString.call(e)])for(var i in r={},e)e.hasOwnProperty(i)&&(r[i]=this.clone(e[i]));return r}return e}},{key:"mergeItem",value:function(e,t,r,n){var o=this.BUILTIN_OBJECT;t.hasOwnProperty(r)&&("object"!=Ar(e[r])||o[Object.prototype.toString.call(e[r])]?!n&&r in e||(e[r]=t[r]):this.merge(e[r],t[r],n))}},{key:"merge",value:function(e,t,r){for(var n in t)this.mergeItem(e,t,n,r);return e}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(e,t){var r,n=this._canvas,o=this._pixelCtx,i=this._width,a=this._height,s=this._offsetX,l=this._offsetY;e+s>i&&(i=e+s+100,n.width=i,r=!0),t+l>a&&(a=t+l+100,n.height=a,r=!0),e<-s&&(i+=s=100*Math.ceil(-e/100),n.width=i,r=!0),t<-l&&(a+=l=100*Math.ceil(-t/100),n.height=a,r=!0),r&&o.translate(s,l)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}},{key:"inherits",value:function(e,t){var r=e.prototype;function n(){}for(var o in n.prototype=t.prototype,e.prototype=new n,r)e.prototype[o]=r[o];e.constructor=e}}])&&Lr(t.prototype,r),n&&Lr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Mr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Nr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._handlers={},this.CLASS_NAME="SuperMap.LevelRenderer.Eventful"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(e,t,r){var n=this._handlers;return t&&e?(n[e]||(n[e]=[]),n[e].push({h:t,one:!0,ctx:r||this}),this):this}},{key:"bind",value:function(e,t,r){var n=this._handlers;return t&&e?(n[e]||(n[e]=[]),n[e].push({h:t,one:!1,ctx:r||this}),this):this}},{key:"unbind",value:function(e,t){var r=this._handlers;if(!e)return this._handlers={},this;if(t){if(r[e]){for(var n=[],o=0,i=r[e].length;o<i;o++)r[e][o].h!=t&&n.push(r[e][o]);r[e]=n}r[e]&&0===r[e].length&&delete r[e]}else delete r[e];return this}},{key:"dispatch",value:function(e){if(this._handlers[e]){var t=arguments,r=t.length;r>3&&(t=Array.prototype.slice.call(t,1));for(var n=this._handlers[e],o=n.length,i=0;i<o;){switch(r){case 1:n[i].h.call(n[i].ctx);break;case 2:n[i].h.call(n[i].ctx,t[1]);break;case 3:n[i].h.call(n[i].ctx,t[1],t[2]);break;default:n[i].h.apply(n[i].ctx,t)}n[i].one?(n.splice(i,1),o--):i++}}return this}},{key:"dispatchWithContext",value:function(e){if(this._handlers[e]){var t=arguments,r=t.length;r>4&&(t=Array.prototype.slice.call(t,1,t.length-1));for(var n=t[t.length-1],o=this._handlers[e],i=o.length,a=0;a<i;){switch(r){case 1:o[a].h.call(n);break;case 2:o[a].h.call(n,t[1]);break;case 3:o[a].h.call(n,t[1],t[2]);break;default:o[a].h.apply(n,t)}o[a].one?(o.splice(a,1),i--):a++}}return this}}])&&Mr(t.prototype,r),n&&Mr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Dr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Fr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Vector"}var t,r,n;return t=e,(r=[{key:"create",value:function(e,t){var r=new(0,this.ArrayCtor)(2);return r[0]=e||0,r[1]=t||0,r}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e}},{key:"set",value:function(e,t,r){return e[0]=t,e[1]=r,e}},{key:"add",value:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}},{key:"scaleAndAdd",value:function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}},{key:"sub",value:function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}},{key:"len",value:function(e){return Math.sqrt(this.lenSquare(e))}},{key:"lenSquare",value:function(e){return e[0]*e[0]+e[1]*e[1]}},{key:"mul",value:function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}},{key:"div",value:function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}},{key:"dot",value:function(e,t){return e[0]*t[0]+e[1]*t[1]}},{key:"scale",value:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}},{key:"normalize",value:function(e,t){var r=this.len(t);return 0===r?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}},{key:"distance",value:function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}},{key:"distanceSquare",value:function(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}},{key:"negate",value:function(e,t){return e[0]=-t[0],e[1]=-t[1],e}},{key:"lerp",value:function(e,t,r,n){return e[0]=t[0]+n*(r[0]-t[0]),e[1]=t[1]+n*(r[1]-t[1]),e}},{key:"applyTransform",value:function(e,t,r){var n=t[0],o=t[1];return e[0]=r[0]*n+r[2]*o+r[4],e[1]=r[1]*n+r[3]*o+r[5],e}},{key:"min",value:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}},{key:"max",value:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}},{key:"length",value:function(e){return this.len(e)}},{key:"lengthSquare",value:function(e){return this.lenSquare(e)}},{key:"dist",value:function(e,t){return this.distance(e,t)}},{key:"distSquare",value:function(e,t){return this.distanceSquare(e,t)}}])&&Dr(t.prototype,r),n&&Dr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Br(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Gr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vector=new Fr,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Curve"}var t,r,n;return t=e,(r=[{key:"isAroundZero",value:function(e){return e>-this.EPSILON&&e<this.EPSILON}},{key:"isNotAroundZero",value:function(e){return e>this.EPSILON||e<-this.EPSILON}},{key:"cubicAt",value:function(e,t,r,n,o){var i=1-o;return i*i*(i*e+3*o*t)+o*o*(o*n+3*i*r)}},{key:"cubicDerivativeAt",value:function(e,t,r,n,o){var i=1-o;return 3*(((t-e)*i+2*(r-t)*o)*i+(n-r)*o*o)}},{key:"cubicRootAt",value:function(e,t,r,n,o,i){var a=n+3*(t-r)-e,s=3*(r-2*t+e),l=3*(t-e),u=e-o,c=s*s-3*a*l,f=s*l-9*a*u,p=l*l-3*s*u,h=0;if(this.isAroundZero(c)&&this.isAroundZero(f))if(this.isAroundZero(s))i[0]=0;else{var y=-l/s;y>=0&&y<=1&&(i[h++]=y)}else{var d=f*f-4*c*p;if(this.isAroundZero(d)){var b=f/c,v=-s/a+b,m=-b/2;v>=0&&v<=1&&(i[h++]=v),m>=0&&m<=1&&(i[h++]=m)}else if(d>0){var g=Math.sqrt(d),w=c*s+1.5*a*(-f+g),O=c*s+1.5*a*(-f-g),S=(-s-((w=w<0?-Math.pow(-w,this.ONE_THIRD):Math.pow(w,this.ONE_THIRD))+(O=O<0?-Math.pow(-O,this.ONE_THIRD):Math.pow(O,this.ONE_THIRD))))/(3*a);S>=0&&S<=1&&(i[h++]=S)}else{var _=(2*c*s-3*a*f)/(2*Math.sqrt(c*c*c)),P=Math.acos(_)/3,x=Math.sqrt(c),E=Math.cos(P),k=(-s-2*x*E)/(3*a),j=(-s+x*(E+this.THREE_SQRT*Math.sin(P)))/(3*a),C=(-s+x*(E-this.THREE_SQRT*Math.sin(P)))/(3*a);k>=0&&k<=1&&(i[h++]=k),j>=0&&j<=1&&(i[h++]=j),C>=0&&C<=1&&(i[h++]=C)}}return h}},{key:"cubicExtrema",value:function(e,t,r,n,o){var i=6*r-12*t+6*e,a=9*t+3*n-3*e-9*r,s=3*t-3*e,l=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(i)){var u=-s/i;u>=0&&u<=1&&(o[l++]=u)}}else{var c=i*i-4*a*s;if(this.isAroundZero(c))o[0]=-i/(2*a);else if(c>0){var f=Math.sqrt(c),p=(-i+f)/(2*a),h=(-i-f)/(2*a);p>=0&&p<=1&&(o[l++]=p),h>=0&&h<=1&&(o[l++]=h)}}return l}},{key:"cubicSubdivide",value:function(e,t,r,n,o,i){var a=(t-e)*o+e,s=(r-t)*o+t,l=(n-r)*o+r,u=(s-a)*o+a,c=(l-s)*o+s,f=(c-u)*o+u;i[0]=e,i[1]=a,i[2]=u,i[3]=f,i[4]=f,i[5]=c,i[6]=l,i[7]=n}},{key:"cubicProjectPoint",value:function(e,t,r,n,o,i,a,s,l,u,c){var f,p=this.vector.create(),h=this.vector.create(),y=this.vector.create(),d=.005,b=1/0;p[0]=l,p[1]=u;for(var v=0;v<1;v+=.05){h[0]=this.cubicAt(e,r,o,a,v),h[1]=this.cubicAt(t,n,i,s,v);var m=this.vector.distSquare(p,h);m<b&&(f=v,b=m)}b=1/0;for(var g=0;g<32&&!(d<this.EPSILON);g++){var w=f-d,O=f+d;h[0]=this.cubicAt(e,r,o,a,w),h[1]=this.cubicAt(t,n,i,s,w);var S=this.vector.distSquare(h,p);if(w>=0&&S<b)f=w,b=S;else{y[0]=this.cubicAt(e,r,o,a,O),y[1]=this.cubicAt(t,n,i,s,O);var _=this.vector.distSquare(y,p);O<=1&&_<b?(f=O,b=_):d*=.5}}return c&&(c[0]=this.cubicAt(e,r,o,a,f),c[1]=this.cubicAt(t,n,i,s,f)),Math.sqrt(b)}},{key:"quadraticAt",value:function(e,t,r,n){var o=1-n;return o*(o*e+2*n*t)+n*n*r}},{key:"quadraticDerivativeAt",value:function(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}},{key:"quadraticRootAt",value:function(e,t,r,n,o){var i=e-2*t+r,a=2*(t-e),s=e-n,l=0;if(this.isAroundZero(i)){if(this.isNotAroundZero(a)){var u=-s/a;u>=0&&u<=1&&(o[l++]=u)}}else{var c=a*a-4*i*s;if(this.isAroundZero(c)){var f=-a/(2*i);f>=0&&f<=1&&(o[l++]=f)}else if(c>0){var p=Math.sqrt(c),h=(-a+p)/(2*i),y=(-a-p)/(2*i);h>=0&&h<=1&&(o[l++]=h),y>=0&&y<=1&&(o[l++]=y)}}return l}},{key:"quadraticExtremum",value:function(e,t,r){var n=e+r-2*t;return 0===n?.5:(e-t)/n}},{key:"quadraticProjectPoint",value:function(e,t,r,n,o,i,a,s,l){var u,c=this.vector.create(),f=this.vector.create(),p=this.vector.create(),h=.005,y=1/0;c[0]=a,c[1]=s;for(var d=0;d<1;d+=.05){f[0]=this.quadraticAt(e,r,o,d),f[1]=this.quadraticAt(t,n,i,d);var b=this.vector.distSquare(c,f);b<y&&(u=d,y=b)}y=1/0;for(var v=0;v<32&&!(h<this.EPSILON);v++){var m=u-h,g=u+h;f[0]=this.quadraticAt(e,r,o,m),f[1]=this.quadraticAt(t,n,i,m);var w=this.vector.distSquare(f,c);if(m>=0&&w<y)u=m,y=w;else{p[0]=this.quadraticAt(e,r,o,g),p[1]=this.quadraticAt(t,n,i,g);var O=this.vector.distSquare(p,c);g<=1&&O<y?(u=g,y=O):h*=.5}}return l&&(l[0]=this.quadraticAt(e,r,o,u),l[1]=this.quadraticAt(t,n,i,u)),Math.sqrt(y)}}])&&Br(t.prototype,r),n&&Br(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ur(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Jr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.util=new Ir,this.curve=new Gr,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Area"}var t,r,n;return t=e,(r=[{key:"normalizeRadian",value:function(e){return(e%=this.PI2)<0&&(e+=this.PI2),e}},{key:"isInside",value:function(e,t,r,n){if(!t||!e)return!1;var o=e.type;this._ctx=this._ctx||this.util.getContext();var i=this._mathMethod(e,t,r,n);if(void 0!==i)return i;if(e.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(e,this._ctx,t,r,n);switch(o){case"ellipse":case"smicellipse":return!0;case"trochoid":var a="out"==t.location?t.r1+t.r2+t.d:t.r1-t.r2+t.d;return this.isInsideCircle(t,r,n,a);case"rose":return this.isInsideCircle(t,r,n,t.maxr);default:return!1}}},{key:"_mathMethod",value:function(e,t,r,n){switch(e.type){case"bezier-curve":return void 0===t.cpX2?this.isInsideQuadraticStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.xEnd,t.yEnd,t.lineWidth,r,n):this.isInsideCubicStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.cpX2,t.cpY2,t.xEnd,t.yEnd,t.lineWidth,r,n);case"line":return this.isInsideLine(t.xStart,t.yStart,t.xEnd,t.yEnd,t.lineWidth,r,n);case"broken-line":return this.isInsideBrokenLine(t.pointList,t.lineWidth,r,n);case"smicbroken-line":var o=r,i=n;return e.refOriginalPosition&&(o=r-e.refOriginalPosition[0],i=n-e.refOriginalPosition[1]),this.isInsideBrokenLine(t.pointList,t.lineWidth,o,i);case"ring":return this.isInsideRing(t.x,t.y,t.r0,t.r,r,n);case"smicring":var a=t.x,s=t.y;return e.refOriginalPosition&&(a=t.x+e.refOriginalPosition[0],s=t.y+e.refOriginalPosition[1]),this.isInsideRing(a,s,t.r0,t.r,r,n);case"circle":return this.isInsideCircle(t.x,t.y,t.r,r,n);case"smicpoint":var l=r,u=n;return e.refOriginalPosition&&(l=r-e.refOriginalPosition[0],u=n-e.refOriginalPosition[1]),this.isInsideCircle(t.x,t.y,t.r,l,u);case"sector":var c=t.startAngle*Math.PI/180,f=t.endAngle*Math.PI/180;return t.clockWise||(c=-c,f=-f),this.isInsideSector(t.x,t.y,t.r0,t.r,c,f,!t.clockWise,r,n);case"smicsector":var p=t.startAngle*Math.PI/180,h=t.endAngle*Math.PI/180;t.clockWise||(p=-p,h=-h);var y=t.x,d=t.y;return e.refOriginalPosition&&(y=t.x+e.refOriginalPosition[0],d=t.y+e.refOriginalPosition[1]),this.isInsideSector(y,d,t.r0,t.r,p,h,!t.clockWise,r,n);case"path":return this.isInsidePath(t.pathArray,Math.max(t.lineWidth,5),t.brushType,r,n);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(t.pointList,r,n);case"smicpolygon":var b=r,v=n;if(e.refOriginalPosition&&(b=r-e.refOriginalPosition[0],v=n-e.refOriginalPosition[1]),e.holePolygonPointLists&&e.holePolygonPointLists.length>0){for(var m=this.isInsidePolygon(t.pointList,b,v),g=e.holePolygonPointLists,w=!1,O=0,S=g.length;O<S;O++){var _=g[O];!0===this.isInsidePolygon(_,b,v)&&(w=!0)}return!0===m&&!1===w}return this.isInsidePolygon(t.pointList,b,v);case"text":var P=t.__rect||e.getRect(t);return this.isInsideRect(P.x,P.y,P.width,P.height,r,n);case"smictext":var x=e.getTextBackground(t);return this.isInsidePolygon(x,r,n);case"rectangle":case"image":return this.isInsideRect(t.x,t.y,t.width,t.height,r,n);case"smicimage":var E=t.x,k=t.y;return e.refOriginalPosition&&(E=t.x+e.refOriginalPosition[0],k=t.y+e.refOriginalPosition[1]),this.isInsideRect(E,k,t.width,t.height,r,n)}}},{key:"_buildPathMethod",value:function(e,t,r,n,o){return t.beginPath(),e.buildPath(t,r),t.closePath(),t.isPointInPath(n,o)}},{key:"isOutside",value:function(e,t,r,n){return!this.isInside(e,t,r,n)}},{key:"isInsideLine",value:function(e,t,r,n,o,i,a){if(0===o)return!1;var s=Math.max(o,5),l=0;if(a>t+s&&a>n+s||a<t-s&&a<n-s||i>e+s&&i>r+s||i<e-s&&i<r-s)return!1;if(e===r)return Math.abs(i-e)<=s/2;var u=(l=(t-n)/(e-r))*i-a+(e*n-r*t)/(e-r);return u*u/(l*l+1)<=s/2*s/2}},{key:"isInsideCubicStroke",value:function(e,t,r,n,o,i,a,s,l,u,c){if(0===l)return!1;var f=Math.max(l,5);return!(c>t+f&&c>n+f&&c>i+f&&c>s+f||c<t-f&&c<n-f&&c<i-f&&c<s-f||u>e+f&&u>r+f&&u>o+f&&u>a+f||u<e-f&&u<r-f&&u<o-f&&u<a-f)&&this.curve.cubicProjectPoint(e,t,r,n,o,i,a,s,u,c,null)<=f/2}},{key:"isInsideQuadraticStroke",value:function(e,t,r,n,o,i,a,s,l){if(0===a)return!1;var u=Math.max(a,5);return!(l>t+u&&l>n+u&&l>i+u||l<t-u&&l<n-u&&l<i-u||s>e+u&&s>r+u&&s>o+u||s<e-u&&s<r-u&&s<o-u)&&this.curve.quadraticProjectPoint(e,t,r,n,o,i,s,l,null)<=u/2}},{key:"isInsideArcStroke",value:function(e,t,r,n,o,i,a,s,l){var u=this.PI2;if(0===a)return!1;var c=Math.max(a,5);s-=e,l-=t;var f=Math.sqrt(s*s+l*l);if(f-c>r||f+c<r)return!1;if(Math.abs(n-o)>=u)return!0;if(i){var p=n;n=this.normalizeRadian(o),o=this.normalizeRadian(p)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=u);var h=Math.atan2(l,s);return h<0&&(h+=u),h>=n&&h<=o||h+u>=n&&h+u<=o}},{key:"isInsideBrokenLine",value:function(e,t,r,n){for(var o=Math.max(t,10),i=0,a=e.length-1;i<a;i++){var s=e[i][0],l=e[i][1],u=e[i+1][0],c=e[i+1][1];if(this.isInsideLine(s,l,u,c,o,r,n))return!0}return!1}},{key:"isInsideRing",value:function(e,t,r,n,o,i){var a=(o-e)*(o-e)+(i-t)*(i-t);return a<n*n&&a>r*r}},{key:"isInsideRect",value:function(e,t,r,n,o,i){return o>=e&&o<=e+r&&i>=t&&i<=t+n}},{key:"isInsideCircle",value:function(e,t,r,n,o){return(n-e)*(n-e)+(o-t)*(o-t)<r*r}},{key:"isInsideSector",value:function(e,t,r,n,o,i,a,s,l){return this.isInsideArcStroke(e,t,(r+n)/2,o,i,a,n-r,s,l)}},{key:"isInsidePolygon",value:function(e,t,r){for(var n=e.length,o=0,i=0,a=n-1;i<n;i++){var s=e[a][0],l=e[a][1],u=e[i][0],c=e[i][1];o+=this.windingLine(s,l,u,c,t,r),a=i}return 0!==o}},{key:"windingLine",value:function(e,t,r,n,o,i){return i>t&&i>n||i<t&&i<n?0:n==t?0:(i-t)/(n-t)*(r-e)+e>o?n<t?1:-1:0}},{key:"swapExtrema",value:function(){var e=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=e}},{key:"windingCubic",value:function(e,t,r,n,o,i,a,s,l,u){var c=this.curve,f=this.roots,p=this.extrema;if(u>t&&u>n&&u>i&&u>s||u<t&&u<n&&u<i&&u<s)return 0;var h=c.cubicRootAt(t,n,i,s,u,f);if(0===h)return 0;for(var y,d,b=0,v=-1,m=0;m<h;m++){var g=f[m];c.cubicAt(e,r,o,a,g)<l||(v<0&&(v=c.cubicExtrema(t,n,i,s,p),p[1]<p[0]&&v>1&&this.swapExtrema(),y=c.cubicAt(t,n,i,s,p[0]),v>1&&(d=c.cubicAt(t,n,i,s,p[1]))),2==v?g<p[0]?b+=y<t?1:-1:g<p[1]?b+=d<y?1:-1:b+=s<d?1:-1:g<p[0]?b+=y<t?1:-1:b+=s<y?1:-1)}return b}},{key:"windingQuadratic",value:function(e,t,r,n,o,i,a,s){var l=this.curve,u=this.roots;if(s>t&&s>n&&s>i||s<t&&s<n&&s<i)return 0;var c=l.quadraticRootAt(t,n,i,s,u);if(0===c)return 0;var f=l.quadraticExtremum(t,n,i);if(f>=0&&f<=1){for(var p=0,h=l.quadraticAt(t,n,i,f),y=0;y<c;y++){l.quadraticAt(e,r,o,u[y])>a||(u[y]<f?p+=h<t?1:-1:p+=i<h?1:-1)}return p}return l.quadraticAt(e,r,o,u[0])>a?0:i<t?1:-1}},{key:"windingArc",value:function(e,t,r,n,o,i,a,s){var l=this.roots,u=this.PI2;if((s-=t)>r||s<-r)return 0;var c=Math.sqrt(r*r-s*s);if(l[0]=-c,l[1]=c,Math.abs(n-o)>=u){n=0,o=u;var f=i?1:-1;return a>=l[0]+e&&a<=l[1]+e?f:0}if(i){var p=n;n=this.normalizeRadian(o),o=this.normalizeRadian(p)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=u);for(var h=0,y=0;y<2;y++){var d=l[y];if(d+e>a){var b=Math.atan2(s,d),v=i?1:-1;b<0&&(b=u+b),(b>=n&&b<=o||b+u>=n&&b+u<=o)&&(b>Math.PI/2&&b<1.5*Math.PI&&(v=-v),h+=v)}}return h}},{key:"isInsidePath",value:function(e,t,r,n,o){for(var i=0,a=0,s=0,l=0,u=0,c=!0,f=!0,p="stroke"===(r=r||"fill")||"both"===r,h="fill"===r||"both"===r,y=0;y<e.length;y++){var d=e[y],b=d.points;if(c||"M"===d.command){if(y>0&&(h&&(i+=this.windingLine(a,s,l,u,n,o)),0!==i))return!0;l=b[b.length-2],u=b[b.length-1],c=!1,f&&"A"!==d.command&&(f=!1,a=l,s=u)}switch(d.command){case"M":a=b[0],s=b[1];break;case"L":if(p&&this.isInsideLine(a,s,b[0],b[1],t,n,o))return!0;h&&(i+=this.windingLine(a,s,b[0],b[1],n,o)),a=b[0],s=b[1];break;case"C":if(p&&this.isInsideCubicStroke(a,s,b[0],b[1],b[2],b[3],b[4],b[5],t,n,o))return!0;h&&(i+=this.windingCubic(a,s,b[0],b[1],b[2],b[3],b[4],b[5],n,o)),a=b[4],s=b[5];break;case"Q":if(p&&this.isInsideQuadraticStroke(a,s,b[0],b[1],b[2],b[3],t,n,o))return!0;h&&(i+=this.windingQuadratic(a,s,b[0],b[1],b[2],b[3],n,o)),a=b[2],s=b[3];break;case"A":var v=b[0],m=b[1],g=b[2],w=b[3],O=b[4],S=b[5],_=Math.cos(O)*g+v,P=Math.sin(O)*w+m;f?(f=!1,l=_,u=P):i+=this.windingLine(a,s,_,P);var x=(n-v)*w/g+v;if(p&&this.isInsideArcStroke(v,m,w,O,O+S,1-b[7],t,x,o))return!0;h&&(i+=this.windingArc(v,m,w,O,O+S,1-b[7],x,o)),a=Math.cos(O+S)*g+v,s=Math.sin(O+S)*w+m;break;case"z":if(p&&this.isInsideLine(a,s,l,u,t,n,o))return!0;c=!0}}return h&&(i+=this.windingLine(a,s,l,u,n,o)),0!==i}},{key:"getTextWidth",value:function(e,t){var r=e+":"+t;if(this._textWidthCache[r])return this._textWidthCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t);for(var n=0,o=0,i=(e=(e+"").split("\n")).length;o<i;o++)n=Math.max(this._ctx.measureText(e[o]).width,n);return this._ctx.restore(),this._textWidthCache[r]=n,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),n}},{key:"getTextHeight",value:function(e,t){var r=e+":"+t;if(this._textHeightCache[r])return this._textHeightCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t),e=(e+"").split("\n");var n=(this._ctx.measureText("ZH").width+2)*e.length;return this._ctx.restore(),this._textHeightCache[r]=n,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),n}}])&&Ur(t.prototype,r),n&&Ur(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Hr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.util=new Ir,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Color"}var t,r,n;return t=e,(r=[{key:"customPalette",value:function(e){this.palette=e}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(e,t){return e|=0,(t=t||this.palette)[e%t.length]}},{key:"customHighlight",value:function(e){this.highlightColor=e}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(e,t,r,n,o,i,a){var s=this.util;this._ctx||(this._ctx=s.getContext());for(var l=this._ctx.createRadialGradient(e,t,r,n,o,i),u=0,c=a.length;u<c;u++)l.addColorStop(a[u][0],a[u][1]);return l.__nonRecursion=!0,l}},{key:"getLinearGradient",value:function(e,t,r,n,o){var i=this.util;this._ctx||(this._ctx=i.getContext());for(var a=this._ctx.createLinearGradient(e,t,r,n),s=0,l=o.length;s<l;s++)a.addColorStop(o[s][0],o[s][1]);return a.__nonRecursion=!0,a}},{key:"getStepColors",value:function(e,t,r){e=this.toRGBA(e),t=this.toRGBA(t),e=this.getData(e);for(var n=[],o=((t=this.getData(t))[0]-e[0])/r,i=(t[1]-e[1])/r,a=(t[2]-e[2])/r,s=(t[3]-e[3])/r,l=0,u=e[0],c=e[1],f=e[2],p=e[3];l<r;l++)n[l]=this.toColor([this.adjust(Math.floor(u),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(f),[0,255]),p.toFixed(4)-0],"rgba"),u+=o,c+=i,f+=a,p+=s;return u=t[0],c=t[1],f=t[2],p=t[3],n[l]=this.toColor([u,c,f,p],"rgba"),n}},{key:"getGradientColors",value:function(e,t){var r=[],n=e.length;if(void 0===t&&(t=20),1===n)r=this.getStepColors(e[0],e[0],t);else if(n>1)for(var o=0,i=n-1;o<i;o++){var a=this.getStepColors(e[o],e[o+1],t);o<i-1&&a.pop(),r=r.concat(a)}return r}},{key:"toColor",value:function(e,t){if(t=t||"rgb",e&&(3===e.length||4===e.length)){if(e=this.map(e,function(e){return e>1?Math.ceil(e):e}),t.indexOf("hex")>-1)return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1);if(t.indexOf("hs")>-1){var r=this.map(e.slice(1,3),function(e){return e+"%"});e[1]=r[0],e[2]=r[1]}return t.indexOf("a")>-1?(3===e.length&&e.push(1),e[3]=this.adjust(e[3],[0,1]),t+"("+e.slice(0,4).join(",")+")"):t+"("+e.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(e){(e=this.trim(e)).indexOf("rgba")<0&&(e=this.toRGBA(e));var t=[],r=0;return e.replace(/[\d.]+/g,function(e){r<3?e|=0:e=+e,t[r++]=e}),t}},{key:"convert",value:function(e,t){if(!this.isCalculableColor(e))return e;var r=this.getData(e),n=r[3];return void 0===n&&(n=1),e.indexOf("hsb")>-1?r=this._HSV_2_RGB(r):e.indexOf("hsl")>-1&&(r=this._HSL_2_RGB(r)),t.indexOf("hsb")>-1||t.indexOf("hsv")>-1?r=this._RGB_2_HSB(r):t.indexOf("hsl")>-1&&(r=this._RGB_2_HSL(r)),r[3]=n,this.toColor(r,t)}},{key:"toRGBA",value:function(e){return this.convert(e,"rgba")}},{key:"toRGB",value:function(e){return this.convert(e,"rgb")}},{key:"toHex",value:function(e){return this.convert(e,"hex")}},{key:"toHSVA",value:function(e){return this.convert(e,"hsva")}},{key:"toHSV",value:function(e){return this.convert(e,"hsv")}},{key:"toHSBA",value:function(e){return this.convert(e,"hsba")}},{key:"toHSB",value:function(e){return this.convert(e,"hsb")}},{key:"toHSLA",value:function(e){return this.convert(e,"hsla")}},{key:"toHSL",value:function(e){return this.convert(e,"hsl")}},{key:"toName",value:function(e){for(var t in this._nameColors)if(this.toHex(this._nameColors[t])===this.toHex(e))return t;return null}},{key:"trim",value:function(e){return String(e).replace(/\s+/g,"")}},{key:"normalize",value:function(e){if(this._nameColors[e]&&(e=this._nameColors[e]),e=(e=this.trim(e)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(e)){var t=(3840&(e=parseInt(e.slice(1),16)))<<8,r=(240&e)<<4,n=15&e;e="#"+((1<<24)+(t<<4)+t+(r<<4)+r+(n<<4)+n).toString(16).slice(1)}return e}},{key:"lift",value:function(e,t){if(!this.isCalculableColor(e))return e;var r=t>0?1:-1;void 0===t&&(t=0),t=Math.abs(t)>1?1:Math.abs(t),e=this.toRGB(e);for(var n=this.getData(e),o=0;o<3;o++)n[o]=1===r?n[o]*(1-t)|0:(255-n[o])*t+n[o]|0;return"rgb("+n.join(",")+")"}},{key:"reverse",value:function(e){if(!this.isCalculableColor(e))return e;var t=this.getData(this.toRGBA(e));return t=this.map(t,function(e){return 255-e}),this.toColor(t,"rgb")}},{key:"mix",value:function(e,t,r){if(!this.isCalculableColor(e)||!this.isCalculableColor(t))return e;void 0===r&&(r=.5);for(var n=2*(r=1-this.adjust(r,[0,1]))-1,o=this.getData(this.toRGBA(e)),i=this.getData(this.toRGBA(t)),a=o[3]-i[3],s=((n*a==-1?n:(n+a)/(1+n*a))+1)/2,l=1-s,u=[],c=0;c<3;c++)u[c]=o[c]*s+i[c]*l;var f=o[3]*r+i[3]*(1-r);return f=Math.max(0,Math.min(1,f)),1===o[3]&&1===i[3]?this.toColor(u,"rgb"):(u[3]=f,this.toColor(u,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(t){var r,n,o=(t=this.normalize(t)).match(this.colorRegExp);if(null===o)throw new Error("The color format error");var i,a=[];if(o[2])i=[(r=o[2].replace("#","").split(""))[0]+r[1],r[2]+r[3],r[4]+r[5]],a=this.map(i,function(t){return e.prototype.adjust.call(this,parseInt(t,16),[0,255])});else if(o[4]){var s=o[4].split(",");n=s[3],i=s.slice(0,3),a=this.map(i,function(t){return t=Math.floor(t.indexOf("%")>0?2.55*parseInt(t,0):t),e.prototype.adjust.call(this,t,[0,255])}),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}else if(o[5]||o[6]){var l=(o[5]||o[6]).split(","),u=parseInt(l[0],0)/360,c=l[1],f=l[2];n=l[3],(a=this.map([c,f],function(t){return e.prototype.adjust.call(this,parseFloat(t)/100,[0,1])})).unshift(u),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}return a}},{key:"alpha",value:function(e,t){if(!this.isCalculableColor(e))return e;null===t&&(t=1);var r=this.getData(this.toRGBA(e));return r[3]=this.adjust(Number(t).toFixed(4),[0,1]),this.toColor(r,"rgba")}},{key:"map",value:function(e,t){if("function"!=typeof t)throw new TypeError;for(var r=e?e.length:0,n=0;n<r;n++)e[n]=t(e[n]);return e}},{key:"adjust",value:function(e,t){return e<=t[0]?e=t[0]:e>=t[1]&&(e=t[1]),e}},{key:"isCalculableColor",value:function(e){return e instanceof Array||"string"==typeof e}},{key:"_HSV_2_RGB",value:function(e){var t,r,n,o=e[0],i=e[1],a=e[2];if(0===i)t=255*a,r=255*a,n=255*a;else{var s=6*o;6===s&&(s=0);var l=0|s,u=a*(1-i),c=a*(1-i*(s-l)),f=a*(1-i*(1-(s-l))),p=0,h=0,y=0;0===l?(p=a,h=f,y=u):1===l?(p=c,h=a,y=u):2===l?(p=u,h=a,y=f):3===l?(p=u,h=c,y=a):4===l?(p=f,h=u,y=a):(p=a,h=u,y=c),t=255*p,r=255*h,n=255*y}return[t,r,n]}},{key:"_HSL_2_RGB",value:function(e){var t,r,n,o=e[0],i=e[1],a=e[2];if(0===i)t=255*a,r=255*a,n=255*a;else{var s,l=2*a-(s=a<.5?a*(1+i):a+i-i*a);t=255*this._HUE_2_RGB(l,s,o+1/3),r=255*this._HUE_2_RGB(l,s,o),n=255*this._HUE_2_RGB(l,s,o-1/3)}return[t,r,n]}},{key:"_HUE_2_RGB",value:function(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),6*r<1?e+6*(t-e)*r:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}},{key:"_RGB_2_HSB",value:function(e){var t,r,n=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),l=s-a,u=s;if(0===l)t=0,r=0;else{r=l/s;var c=((s-n)/6+l/2)/l,f=((s-o)/6+l/2)/l,p=((s-i)/6+l/2)/l;n===s?t=p-f:o===s?t=1/3+c-p:i===s&&(t=2/3+f-c),t<0&&(t+=1),t>1&&(t-=1)}return[t*=360,r*=100,u*=100]}},{key:"_RGB_2_HSL",value:function(e){var t,r,n=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),l=s-a,u=(s+a)/2;if(0===l)t=0,r=0;else{r=u<.5?l/(s+a):l/(2-s-a);var c=((s-n)/6+l/2)/l,f=((s-o)/6+l/2)/l,p=((s-i)/6+l/2)/l;n===s?t=p-f:o===s?t=1/3+c-p:i===s&&(t=2/3+f-c),t<0&&(t+=1),t>1&&(t-=1)}return[t*=360,r*=100,u*=100]}}])&&Vr(t.prototype,r),n&&Vr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function zr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Wr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.ComputeBoundingBox"}var t,r,n;return t=e,(r=[{key:"computeBoundingBox",value:function(e,t,r){if(0!==e.length){for(var n=e[0][0],o=e[0][0],i=e[0][1],a=e[0][1],s=1;s<e.length;s++){var l=e[s];l[0]<n&&(n=l[0]),l[0]>o&&(o=l[0]),l[1]<i&&(i=l[1]),l[1]>a&&(a=l[1])}t[0]=n,t[1]=i,r[0]=o,r[1]=a}}},{key:"cubeBezier",value:function(e,t,r,n,o,i){var a=new Gr,s=[];a.cubicExtrema(e[0],t[0],r[0],n[0],s);for(var l=0;l<s.length;l++)s[l]=a.cubicAt(e[0],t[0],r[0],n[0],s[l]);var u=[];a.cubicExtrema(e[1],t[1],r[1],n[1],u);for(var c=0;c<u.length;c++)u[c]=a.cubicAt(e[1],t[1],r[1],n[1],u[c]);s.push(e[0],n[0]),u.push(e[1],n[1]);var f=Math.min.apply(null,s),p=Math.max.apply(null,s),h=Math.min.apply(null,u),y=Math.max.apply(null,u);o[0]=f,o[1]=h,i[0]=p,i[1]=y}},{key:"quadraticBezier",value:function(e,t,r,n,o){var i=new Gr,a=i.quadraticExtremum(e[0],t[0],r[0]),s=i.quadraticExtremum(e[1],t[1],r[1]),l=1-(a=Math.max(Math.min(a,1),0)),u=1-(s=Math.max(Math.min(s,1),0)),c=l*l*e[0]+2*l*a*t[0]+a*a*r[0],f=l*l*e[1]+2*l*a*t[1]+a*a*r[1],p=u*u*e[0]+2*u*s*t[0]+s*s*r[0],h=u*u*e[1]+2*u*s*t[1]+s*s*r[1];n[0]=Math.min(e[0],r[0],c,p),n[1]=Math.min(e[1],r[1],f,h),o[0]=Math.max(e[0],r[0],c,p),o[1]=Math.max(e[1],r[1],f,h)}},{key:"arc",value:function(e,t,r,n,o,i,a,s){var l=new Fr,u=l.create(),c=l.create(),f=l.create();if(u[0]=Math.cos(n)*r+e,u[1]=Math.sin(n)*r+t,c[0]=Math.cos(o)*r+e,c[1]=Math.sin(o)*r+t,l.min(a,u,c),l.max(s,u,c),(n%=2*Math.PI)<0&&(n+=2*Math.PI),(o%=2*Math.PI)<0&&(o+=2*Math.PI),n>o&&!i?o+=2*Math.PI:n<o&&i&&(n+=2*Math.PI),i){var p=o;o=n,n=p}for(var h=0;h<o;h+=Math.PI/2)h>n&&(f[0]=Math.cos(h)*r+e,f[1]=Math.sin(h)*r+t,l.min(a,f,a),l.max(s,f,s))}}])&&zr(t.prototype,r),n&&zr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function qr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Yr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Env";var t,r,n,o,i,a,s,l,u,c,f,p,h,y,d,b,v,m,g,w,O,S=this;return t=navigator.userAgent,r=S.os={},n=S.browser={},o=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=t.match(/(Android);?[\s\/]+([\d.]+)?/),a=t.match(/(iPad).*OS\s([\d_]+)/),s=t.match(/(iPod)(.*OS\s([\d_]+))?/),l=!a&&t.match(/(iPhone\sOS)\s([\d_]+)/),u=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=u&&t.match(/TouchPad/),f=t.match(/Kindle\/([\d.]+)/),p=t.match(/Silk\/([\d._]+)/),h=t.match(/(BlackBerry).*Version\/([\d.]+)/),y=t.match(/(BB10).*Version\/([\d.]+)/),d=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),b=t.match(/PlayBook/),v=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),m=t.match(/Firefox\/([\d.]+)/),g=t.match(/MSIE ([\d.]+)/),w=o&&t.match(/Mobile\//)&&!v,O=t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!v,(n.webkit=!!o)&&(n.version=o[1]),i&&(r.android=!0,r.version=i[2]),l&&!s&&(r.ios=r.iphone=!0,r.version=l[2].replace(/_/g,".")),a&&(r.ios=r.ipad=!0,r.version=a[2].replace(/_/g,".")),s&&(r.ios=r.ipod=!0,r.version=s[3]?s[3].replace(/_/g,"."):null),u&&(r.webos=!0,r.version=u[2]),c&&(r.touchpad=!0),h&&(r.blackberry=!0,r.version=h[2]),y&&(r.bb10=!0,r.version=y[2]),d&&(r.rimtabletos=!0,r.version=d[2]),b&&(n.playbook=!0),f&&(r.kindle=!0,r.version=f[1]),p&&(n.silk=!0,n.version=p[1]),!p&&r.android&&t.match(/Kindle Fire/)&&(n.silk=!0),v&&(n.chrome=!0,n.version=v[1]),m&&(n.firefox=!0,n.version=m[1]),g&&(n.ie=!0,n.version=g[1]),w&&(t.match(/Safari/)||r.ios)&&(n.safari=!0),O&&(n.webview=!0),g&&(n.ie=!0,n.version=g[1]),r.tablet=!!(a||b||i&&!t.match(/Mobile/)||m&&t.match(/Tablet/)||g&&!t.match(/Phone/)&&t.match(/Touch/)),r.phone=!(r.tablet||r.ipod||!(i||l||u||h||y||v&&t.match(/Android/)||v&&t.match(/CriOS\/([\d.]+)/)||m&&t.match(/Mobile/)||g&&t.match(/Touch/))),{browser:n,os:r,canvasSupported:!!document.createElement("canvas").getContext}}var t,r,n;return t=e,(r=[{key:"destory",value:function(){return!0}}])&&qr(t.prototype,r),n&&qr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Xr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Qr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stop="function"==typeof window.addEventListener?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Event"}var t,r,n;return t=e,(r=[{key:"getX",value:function(e){return void 0!==e.zrenderX&&e.zrenderX||void 0!==e.offsetX&&e.offsetX||void 0!==e.layerX&&e.layerX||void 0!==e.clientX&&e.clientX}},{key:"getY",value:function(e){return void 0!==e.zrenderY&&e.zrenderY||void 0!==e.offsetY&&e.offsetY||void 0!==e.layerY&&e.layerY||void 0!==e.clientY&&e.clientY}},{key:"getDelta",value:function(e){return void 0!==e.zrenderDelta&&e.zrenderDelta||void 0!==e.wheelDelta&&e.wheelDelta||void 0!==e.detail&&-e.detail}}])&&Xr(t.prototype,r),n&&Xr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Zr(e){"@babel/helpers - typeof";return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Http"}var t,r,n;return t=e,(r=[{key:"get",value:function(e,t,r){if("object"===Zr(e)){var n=e;e=n.url,t=n.onsuccess,r=n.onerror}var o=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open("GET",e,!0),o.onreadystatechange=function(){4==o.readyState&&(o.status>=200&&o.status<300||304===o.status?t&&t(o.responseText):r&&r(),o.onreadystatechange=new Function,o=null)},o.send(null)}}])&&Kr(t.prototype,r),n&&Kr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function en(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var tn=function(e,t,r){return t&&en(e.prototype,t),r&&en(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)});function rn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}tn.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},tn.catchBrushException=!1,tn.debugMode=0;var nn=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Log",function(){if(0!=+tn.debugMode)if(1==+tn.debugMode)for(var e in arguments)throw new Error(arguments[e]);else if(+tn.debugMode>1)for(var t in arguments)console.log(arguments[t])}}var t,r,n;return t=e,(r=[{key:"destory",value:function(){return!0}}])&&rn(t.prototype,r),n&&rn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function on(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var an=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._radians=window.Math.PI/180,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Math"}var t,r,n;return t=e,(r=[{key:"sin",value:function(e,t){return window.Math.sin(t?e*this._radians:e)}},{key:"cos",value:function(e,t){return window.Math.cos(t?e*this._radians:e)}},{key:"degreeToRadian",value:function(e){return e*this._radians}},{key:"radianToDegree",value:function(e){return e/this._radians}}])&&on(t.prototype,r),n&&on(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function sn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ln=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Matrix"}var t,r,n;return t=e,(r=[{key:"create",value:function(){var e=new(0,this.ArrayCtor)(6);return this.identity(e),e}},{key:"identity",value:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}},{key:"mul",value:function(e,t,r){return e[0]=t[0]*r[0]+t[2]*r[1],e[1]=t[1]*r[0]+t[3]*r[1],e[2]=t[0]*r[2]+t[2]*r[3],e[3]=t[1]*r[2]+t[3]*r[3],e[4]=t[0]*r[4]+t[2]*r[5]+t[4],e[5]=t[1]*r[4]+t[3]*r[5]+t[5],e}},{key:"translate",value:function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}},{key:"rotate",value:function(e,t,r){var n=t[0],o=t[2],i=t[4],a=t[1],s=t[3],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+a*u,e[1]=-n*u+a*c,e[2]=o*c+s*u,e[3]=-o*u+c*s,e[4]=c*i+u*l,e[5]=c*l-u*i,e}},{key:"scale",value:function(e,t,r){var n=r[0],o=r[1];return e[0]=t[0]*n,e[1]=t[1]*o,e[2]=t[2]*n,e[3]=t[3]*o,e[4]=t[4]*n,e[5]=t[5]*o,e}},{key:"invert",value:function(e,t){var r=t[0],n=t[2],o=t[4],i=t[1],a=t[3],s=t[5],l=r*a-i*n;return l?(l=1/l,e[0]=a*l,e[1]=-i*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*s-a*o)*l,e[5]=(i*o-r*s)*l,e):null}},{key:"mulVector",value:function(e,t,r){var n=t[0],o=t[2],i=t[4],a=t[1],s=t[3],l=t[5];return e[0]=r[0]*n+r[1]*o+i,e[1]=r[0]*a+r[1]*s+l,e}}])&&sn(t.prototype,r),n&&sn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function un(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var cn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"SUtil_smoothBezier",value:function(t,r,n,o,i){i&&2===i.length||(i=[0,0]);var a,s,l=i,u=[],c=[],f=[],p=[],h=!!o;if(h){a=[1/0,1/0],s=[-1/0,-1/0];for(var y=t.length,d=0;d<y;d++)e.Util_vector.min(a,a,[t[d][0]+l[0],t[d][1]+l[1]]),e.Util_vector.max(s,s,[t[d][0]+l[0],t[d][1]+l[1]]);e.Util_vector.min(a,a,o[0]),e.Util_vector.max(s,s,o[1])}for(var b=t.length,v=0;v<b;v++){var m=[t[v][0]+l[0],t[v][1]+l[1]],g=void 0,w=void 0;if(n)g=[t[v?v-1:b-1][0]+l[0],t[v?v-1:b-1][1]+l[1]],w=[t[(v+1)%b][0]+l[0],t[(v+1)%b][1]+l[1]];else{if(0===v||v===b-1){u.push([t[v][0]+l[0],t[v][1]+l[1]]);continue}g=[t[v-1][0]+l[0],t[v-1][1]+l[1]],w=[t[v+1][0]+l[0],t[v+1][1]+l[1]]}e.Util_vector.sub(c,w,g),e.Util_vector.scale(c,c,r);var O=e.Util_vector.distance(m,g),S=e.Util_vector.distance(m,w),_=O+S;0!==_&&(O/=_,S/=_),e.Util_vector.scale(f,c,-O),e.Util_vector.scale(p,c,S);var P=e.Util_vector.add([],m,f),x=e.Util_vector.add([],m,p);h&&(e.Util_vector.max(P,P,a),e.Util_vector.min(P,P,s),e.Util_vector.max(x,x,a),e.Util_vector.min(x,x,s)),u.push(P),u.push(x)}return n&&u.push(u.shift()),u}},{key:"SUtil_smoothSpline",value:function(t,r,n,o){o&&2===o.length||(o=[0,0]);for(var i=o,a=t.length,s=[],l=0,u=1;u<a;u++)l+=e.Util_vector.distance([t[u-1][0]+i[0],t[u-1][1]+i[1]],[t[u][0]+i[0],t[u][1]+i[1]]);var c=l/5;c=c<a?a:c;for(var f=0;f<c;f++){var p=f/(c-1)*(r?a:a-1),h=Math.floor(p),y=p-h,d=void 0,b=[t[h%a][0]+i[0],t[h%a][1]+i[1]],v=void 0,m=void 0;r?(d=[t[(h-1+a)%a][0]+i[0],t[(h-1+a)%a][1]+i[1]],v=[t[(h+1)%a][0]+i[0],t[(h+1)%a][1]+i[1]],m=[t[(h+2)%a][0]+i[0],t[(h+2)%a][1]+i[1]]):(d=[t[0===h?h:h-1][0]+i[0],t[0===h?h:h-1][1]+i[1]],v=[t[h>a-2?a-1:h+1][0]+i[0],t[h>a-2?a-1:h+1][1]+i[1]],m=[t[h>a-3?a-1:h+2][0]+i[0],t[h>a-3?a-1:h+2][1]+i[1]]);var g=y*y,w=y*g;s.push([O(d[0],b[0],v[0],m[0],y,g,w),O(d[1],b[1],v[1],m[1],y,g,w)])}return s;function O(e,t,r,n,o,i,a){var s=.5*(r-e),l=.5*(n-t);return(2*(t-r)+s+l)*a+(-3*(t-r)-2*s-l)*i+s*o+t}}},{key:"SUtil_dashedLineTo",value:function(e,t,r,n,o,i,a){var s=[5,5];if(i="number"!=typeof i?5:i,e.setLineDash)return s[0]=i,s[1]=i,a&&a instanceof Array?e.setLineDash(a):e.setLineDash(s),e.moveTo(t,r),void e.lineTo(n,o);var l=n-t,u=o-r,c=Math.floor(Math.sqrt(l*l+u*u)/i);l/=c,u/=c;for(var f=!0,p=0;p<c;++p)f?e.moveTo(t,r):e.lineTo(t,r),f=!f,t+=l,r+=u;e.lineTo(n,o)}}],(r=null)&&un(t.prototype,r),n&&un(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function fn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}cn.Util_area=new Jr,cn.Util_color=new Hr,cn.Util_computeBoundingBox=new Wr,cn.Util_curve=new Gr,cn.Util_env=new Yr,cn.Util_event=new Qr,cn.Util_http=new $r,cn.Util_log=new nn,cn.Util_math=new an,cn.Util_matrix=new ln,cn.Util=new Ir,cn.Util_vector=new Fr;var pn=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="SuperMap.LevelRenderer.Transformable",this.lookAt=(t=cn.Util_vector.create(),function(e){this.transform||(this.transform=cn.Util_matrix.create());var r=this.transform;function n(e){return e>-5e-5&&e<5e-5}cn.Util_vector.sub(t,e,this.position),n(t[0])&&n(t[1])||(cn.Util_vector.normalize(t,t),r[2]=t[0]*this.scale[1],r[3]=t[1]*this.scale[1],r[0]=t[1]*this.scale[0],r[1]=-t[0]*this.scale[0],r[4]=this.position[0],r[5]=this.position[1],this.decomposeTransform())})}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function e(e){return e>5e-5||e<-5e-5}this.needLocalTransform=e(this.rotation[0])||e(this.position[0])||e(this.position[1])||e(this.scale[0]-1)||e(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var e=[0,0],t=this.transform||cn.Util_matrix.create();if(cn.Util_matrix.identity(t),this.needLocalTransform){if(o(this.scale[0])||o(this.scale[1])){e[0]=-this.scale[2]||0,e[1]=-this.scale[3]||0;var r=o(e[0])||o(e[1]);r&&cn.Util_matrix.translate(t,t,e),cn.Util_matrix.scale(t,t,this.scale),r&&(e[0]=-e[0],e[1]=-e[1],cn.Util_matrix.translate(t,t,e))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){e[0]=-this.rotation[1]||0,e[1]=-this.rotation[2]||0;var n=o(e[0])||o(e[1]);n&&cn.Util_matrix.translate(t,t,e),cn.Util_matrix.rotate(t,t,this.rotation[0]),n&&(e[0]=-e[0],e[1]=-e[1],cn.Util_matrix.translate(t,t,e))}}else 0!=+this.rotation&&cn.Util_matrix.rotate(t,t,this.rotation);(o(this.position[0])||o(this.position[1]))&&cn.Util_matrix.translate(t,t,this.position)}this.transform=t,this.parent&&this.parent.needTransform&&(this.needLocalTransform?cn.Util_matrix.mul(this.transform,this.parent.transform,this.transform):cn.Util_matrix.copy(this.transform,this.parent.transform))}function o(e){return e>5e-5||e<-5e-5}}},{key:"setTransform",value:function(e){if(this.needTransform){var t=this.transform;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var e=this.transform,t=e[0]*e[0]+e[1]*e[1],r=this.position,n=this.scale,o=this.rotation;a(t-1)&&(t=Math.sqrt(t));var i=e[2]*e[2]+e[3]*e[3];a(i-1)&&(i=Math.sqrt(i)),r[0]=e[4],r[1]=e[5],n[0]=t,n[1]=i,n[2]=n[3]=0,o[0]=Math.atan2(-e[1]/i,e[0]/t),o[1]=o[2]=0}function a(e){return e>5e-5||e<-5e-5}}}])&&fn(t.prototype,r),n&&fn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function hn(e){"@babel/helpers - typeof";return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dn(){return(dn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gn(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function bn(e,t){return(bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=gn(e);if(t){var o=gn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===hn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mn(e)}(this,r)}}function mn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gn(e){return(gn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bn(e,t)}(i,c(Nr,pn));var t,r,n,o=vn(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),e=e||{},t.id=null,t.type="group",t.clipShape=null,t._children=[],t._storage=null,t.__dirty=!0,t.ignore=!1,j.extend(mn(t),e),t.id=t.id||j.createUniqueID("smShapeGroup_"),t.CLASS_NAME="SuperMap.LevelRenderer.Group",t}return t=i,(r=[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,dn(gn(i.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(e){return this._children[e]}},{key:"addChild",value:function(e){e!=this&&e.parent!=this&&(e.parent&&e.parent.removeChild(e),this._children.push(e),e.parent=this,this._storage&&this._storage!==e._storage&&(this._storage.addToMap(e),e instanceof i&&e.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(e){var t=j.indexOf(this._children,e);this._children.splice(t,1),e.parent=null,this._storage&&(this._storage.delFromMap(e.id),e instanceof i&&e.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(e,t){for(var r=!!t,n=0;n<this._children.length;n++){var o=this._children[n];r?e.call(t,o):e(o)}}},{key:"traverse",value:function(e,t){for(var r=!!t,n=0;n<this._children.length;n++){var o=this._children[n];r?e.call(t,o):e(o),"group"===o.type&&o.traverse(e,t)}}},{key:"addChildrenToStorage",value:function(e){for(var t=0;t<this._children.length;t++){var r=this._children[t];e.addToMap(r),"group"===r.type&&r.addChildrenToStorage(e)}}},{key:"delChildrenFromStorage",value:function(e){for(var t=0;t<this._children.length;t++){var r=this._children[t];e.delFromMap(r.id),"group"===r.type&&r.delChildrenFromStorage(e)}}},{key:"modSelf",value:function(){this.__dirty=!0}}])&&yn(t.prototype,r),n&&yn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function On(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Sn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="SuperMap.LevelRenderer.Storage"}var t,r,n;return t=e,n=[{key:"shapeCompareFunc",value:function(e,t){return e.zlevel==t.zlevel?e.z==t.z?e.__renderidx-t.__renderidx:e.z-t.z:e.zlevel-t.zlevel}}],(r=[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(e,t){if(!t){t={hover:!1,normal:"down",update:!1}}if(t.hover)for(var r=0,n=this._hoverElements.length;r<n;r++){var o=this._hoverElements[r];if(o.updateTransform(),e(o))return this}switch(t.update&&this.updateShapeList(),t.normal){case"down":for(var i=this._shapeList.length;i--;)if(e(this._shapeList[i]))return this;break;default:for(var a=0,s=this._shapeList.length;a<s;a++)if(e(this._shapeList[a]))return this}return this}},{key:"getHoverShapes",value:function(t){for(var r=[],n=this._hoverElements.length,o=0;o<n;o++){r.push(this._hoverElements[o]);var i=this._hoverElements[o].hoverConnect;if(i)for(var a,s=0,l=(i=i instanceof Array?i:[i]).length;s<l;s++)(a=i[s].id?i[s]:this.get(i[s]))&&r.push(a)}if(r.sort(e.shapeCompareFunc),t)for(var u=0,c=r.length;u<c;u++)r[u].updateTransform();return r}},{key:"getShapeList",value:function(e){return e&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var t=this._roots.length,r=0;r<t;r++){var n=this._roots[r];this._updateAndAddShape(n)}this._shapeList.length=this._shapeListOffset;for(var o=this._shapeList.length,i=0;i<o;i++)this._shapeList[i].__renderidx=i;this._shapeList.sort(e.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(e,t){if(!e.ignore)if(e.updateTransform(),"group"==e.type){e.clipShape&&(e.clipShape.parent=e,e.clipShape.updateTransform(),t?(t=t.slice()).push(e.clipShape):t=[e.clipShape]);for(var r=0;r<e._children.length;r++){var n=e._children[r];n.__dirty=e.__dirty||n.__dirty,this._updateAndAddShape(n,t)}e.__dirty=!1}else e.__clipShapes=t,this._shapeList[this._shapeListOffset++]=e}},{key:"mod",value:function(e,t){var r=this._elements[e];if(r&&(r.modSelf(),t))if(t.parent||t._storage||t.__startClip){var n={};for(var o in t)"parent"!=o&&"_storage"!=o&&"__startClip"!=o&&t.hasOwnProperty(o)&&(n[o]=t[o]);(new Ir).merge(r,n,!0)}else(new Ir).merge(r,t,!0);return this}},{key:"drift",value:function(e,t,r){var n=this._elements[e];return n&&(n.needTransform=!0,"horizontal"===n.draggable?r=0:"vertical"===n.draggable&&(t=0),(!n.ondrift||n.ondrift&&!n.ondrift(t,r))&&n.drift(t,r)),this}},{key:"addHover",value:function(e){return e.updateNeedTransform(),this._hoverElements.push(e),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return this._hoverElements.length>0}},{key:"addRoot",value:function(e){e instanceof wn&&e.addChildrenToStorage(this),this.addToMap(e),this._roots.push(e)}},{key:"delRoot",value:function(e){if(void 0===e){for(var t=0;t<this._roots.length;t++){var r=this._roots[t];r instanceof wn&&r.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(e instanceof Array)for(var n=e.length,o=0;o<n;o++)this.delRoot(e[o]);else{var i;i="string"==typeof e?this._elements[e]:e;var a=(new Ir).indexOf(this._roots,i);a>=0&&(this.delFromMap(i.id),this._roots.splice(a,1),i instanceof wn&&i.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(e){return e instanceof wn&&(e._storage=this),e.modSelf(),this._elements[e.id]=e,this}},{key:"get",value:function(e){return this._elements[e]}},{key:"delFromMap",value:function(e){var t=this._elements[e];return t&&(delete this._elements[e],t instanceof wn&&(t._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}])&&On(t.prototype,r),n&&On(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _n(e){"@babel/helpers - typeof";return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xn(e,t){return(xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function En(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=kn(e);if(t){var o=kn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function kn(e){return(kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xn(e,t)}(i,b);var t,r,n,o=En(i);function i(e,t,r,n){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this,e,t,r,n)).x=e,a.y=t,a.width=r,a.height=n,a.CLASS_NAME="SuperMap.Geometry.Rectangle",a.geometryType="Rectangle",a}return t=i,(r=[{key:"calculateBounds",value:function(){this.bounds=new I(this.x,this.y,this.x+this.width,this.y+this.height)}},{key:"getArea",value:function(){return this.width*this.height}}])&&Pn(t.prototype,r),n&&Pn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Cn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Tn=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.value=t||"",this.name=r||"token",this.CLASS_NAME="SuperMap.Credential"}var t,r,n;return t=e,(r=[{key:"getUrlParameters",value:function(){return this.name+"="+this.value}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.value=null,this.name=null}}])&&Cn(t.prototype,r),n&&Cn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();Tn.CREDENTIAL=null;var Rn={toISOString:function(){if("toISOString"in Date.prototype)return function(e){return e.toISOString()};var e=function(e,t){for(var r=e+"";r.length<t;)r="0"+r;return r};return function(t){return isNaN(t.getTime())?"Invalid Date":t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1,2)+"-"+e(t.getUTCDate(),2)+"T"+e(t.getUTCHours(),2)+":"+e(t.getUTCMinutes(),2)+":"+e(t.getUTCSeconds(),2)+"."+e(t.getUTCMilliseconds(),3)+"Z"}}(),parse:function(e){var t,r=e.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/);if(r&&(r[1]||r[7])){var n=parseInt(r[1],10)||0,o=parseInt(r[2],10)-1||0,i=parseInt(r[3],10)||1;t=new Date(Date.UTC(n,o,i));var a=r[7];if(a){var s=parseInt(r[4],10),l=parseInt(r[5],10),u=parseFloat(r[6]),c=0|u,f=Math.round(1e3*(u-c));if(t.setUTCHours(s,l,c,f),"Z"!==a){var p=-1e3*(60*parseInt(a,10)*60+60*(parseInt(r[8],10)||0));t=new Date(t.getTime()+p)}}}else t=new Date("invalid");return t}},An={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(e){return e.target||e.srcElement},isSingleTouch:function(e){return e.touches&&1===e.touches.length},isMultiTouch:function(e){return e.touches&&e.touches.length>1},isLeftClick:function(e){return e.which&&1===e.which||e.button&&1===e.button},isRightClick:function(e){return e.which&&3===e.which||e.button&&2===e.button},stop:function(e,t){t||(e.preventDefault?e.preventDefault():e.returnValue=!1),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},findElement:function(e,t){for(var r=An.element(e);r.parentNode&&(!r.tagName||r.tagName.toUpperCase()!=t.toUpperCase());)r=r.parentNode;return r},observe:function(e,t,r,n){var o=j.getElement(e);if(n=n||!1,"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.attachEvent)&&(t="keydown"),this.observers||(this.observers={}),!o._eventCacheID){var i="eventCacheID_";o.id&&(i=o.id+"_"+i),o._eventCacheID=j.createUniqueID(i)}var a=o._eventCacheID;this.observers[a]||(this.observers[a]=[]),this.observers[a].push({element:o,name:t,observer:r,useCapture:n}),o.addEventListener?"mousewheel"===t?o.addEventListener(t,r,{useCapture:n,passive:!1}):o.addEventListener(t,r,n):o.attachEvent&&o.attachEvent("on"+t,r)},stopObservingElement:function(e){var t=j.getElement(e)._eventCacheID;this._removeElementObservers(An.observers[t])},_removeElementObservers:function(e){if(e)for(var t=e.length-1;t>=0;t--){var r=e[t],n=new Array(r.element,r.name,r.observer,r.useCapture);An.stopObserving.apply(this,n)}},stopObserving:function(e,t,r,n){n=n||!1;var o=j.getElement(e),i=o._eventCacheID;"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.detachEvent)&&(t="keydown");var a=!1,s=An.observers[i];if(s)for(var l=0;!a&&l<s.length;){var u=s[l];if(u.name===t&&u.observer===r&&u.useCapture===n){s.splice(l,1),0==s.length&&delete An.observers[i],a=!0;break}l++}return a&&(o.removeEventListener?o.removeEventListener(t,r,n):o&&o.detachEvent&&o.detachEvent("on"+t,r)),a},unloadCache:function(){if(An&&An.observers){for(var e in An.observers){var t=An.observers[e];An._removeElementObservers.apply(this,[t])}An.observers=!1}},CLASS_NAME:"SuperMap.Event"};function Ln(e){"@babel/helpers - typeof";return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function In(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}An.observe(window,"resize",An.unloadCache,!1);var Mn=function(){function e(t,r,n,o,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=t,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=o,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,j.extend(this,i),null!=n)for(var a=0,s=n.length;a<s;a++)this.addEventType(n[a]);null!=r&&this.attachToElement(r),this.CLASS_NAME="SuperMap.Events"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){for(var e in this.extensions)"boolean"!=typeof this.extensions[e]&&this.extensions[e].destroy();this.extensions=null,this.element&&(An.stopObservingElement(this.element),this.element.hasScrollEvent&&An.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}},{key:"addEventType",value:function(e){this.listeners[e]||(this.eventTypes.push(e),this.listeners[e]=[])}},{key:"attachToElement",value:function(e){this.element?An.stopObservingElement(this.element):(this.eventHandler=h.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=h.bind(this.clearMouseCache,this)),this.element=e;for(var t=0,r=this.BROWSER_EVENTS.length;t<r;t++){var n=this.BROWSER_EVENTS[t];this.addEventType(n),An.observe(e,n,this.eventHandler)}An.observe(e,"dragstart",An.stop)}},{key:"on",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t])}},{key:"register",value:function(t,r,n,o){if(t in e&&!this.extensions[t]&&(this.extensions[t]=new e[t](this)),null!=n&&-1!==j.indexOf(this.eventTypes,t)){null==r&&(r=this.object);var i=this.listeners[t];i||(i=[],this.listeners[t]=i,this.extensionCount[t]=0);var a={obj:r,func:n};o?(i.splice(this.extensionCount[t],0,a),"object"===Ln(o)&&o.extension&&this.extensionCount[t]++):i.push(a)}}},{key:"registerPriority",value:function(e,t,r){this.register(e,t,r,!0)}},{key:"un",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t])}},{key:"unregister",value:function(e,t,r){null==t&&(t=this.object);var n=this.listeners[e];if(null!=n)for(var o=0,i=n.length;o<i;o++)if(n[o].obj===t&&n[o].func===r){n.splice(o,1);break}}},{key:"remove",value:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])}},{key:"triggerEvent",value:function(e,t){var r=this.listeners[e];if(r&&0!=r.length){var n;null==t&&(t={}),t.object=this.object,t.element=this.element,t.type||(t.type=e);for(var o=0,i=(r=r.slice()).length;o<i;o++){var a=r[o];if(void 0!=(n=a.func.apply(a.obj,[t]))&&!1===n)break}return this.fallThrough||An.stop(t,!0),n}}},{key:"handleBrowserEvent",value:function(e){var t=e.type,r=this.listeners[t];if(r&&0!=r.length){var n=e.touches;if(n&&n[0]){for(var o,i=0,a=0,s=n.length,l=0;l<s;++l)i+=(o=n[l]).clientX,a+=o.clientY;e.clientX=i/s,e.clientY=a/s}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e)}}},{key:"clearMouseCache",value:function(){this.element.scrolls=null,this.element.lefttop=null;var e=document.body;e&&(0==e.scrollTop&&0==e.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}},{key:"getMousePosition",value:function(e){if(this.includeXY?this.element.hasScrollEvent||(An.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var t=j.getViewportElement();this.element.scrolls=[t.scrollLeft,t.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=j.pagePosition(this.element)),new l(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}])&&In(t.prototype,r),n&&In(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Nn(e){"@babel/helpers - typeof";return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fn(){return(Fn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jn(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Bn(e,t){return(Bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Gn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Jn(e);if(t){var o=Jn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Nn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Un(e)}(this,r)}}function Un(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jn(e){return(Jn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Mn.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"];var Vn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bn(e,t)}(i,c(Nr,pn));var t,r,n,o=Gn(i);function i(e){var t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),e=e||{},t.id=null,t.style={},t.highlightStyle=null,t.parent=null,t.__dirty=!0,t.__clipShapes=[],t.invisible=!1,t.ignore=!1,t.zlevel=0,t.draggable=!1,t.clickable=!1,t.hoverable=!0,t.z=0,t.refOriginalPosition=[0,0],t.refDataID=null,t.isHoverByRefDataID=!1,t.refDataHoverGroup=null,t.dataInfo=null,j.extend(Un(t),e),t.id=t.id||j.createUniqueID("smShape_"),t.CLASS_NAME="SuperMap.LevelRenderer.Shape",t.getTansform=(r=[],function(e,t){var n=[e,t];return this.needTransform&&this.transform&&(cn.Util_matrix.invert(r,this.transform),cn.Util_matrix.mulVector(n,r,[e,t,1]),e==n[0]&&t==n[1]&&this.updateNeedTransform()),n}),t}return t=i,n=[{key:"_fillText",value:function(e,t,r,n,o,a,s){o&&(e.font=o),e.textAlign=a,e.textBaseline=s;var l=i._getTextRect(t,r,n,o,a,s);t=(t+"").split("\n");var u=cn.Util_area.getTextHeight("ZH",o);switch(s){case"top":n=l.y;break;case"bottom":n=l.y+u;break;default:n=l.y+u/2}for(var c=0,f=t.length;c<f;c++)e.fillText(t[c],r,n),n+=u}},{key:"_getTextRect",value:function(e,t,r,n,o,i){var a=cn.Util_area.getTextWidth(e,n),s=cn.Util_area.getTextHeight("ZH",n);switch(e=(e+"").split("\n"),o){case"end":case"right":t-=a;break;case"center":t-=a/2}switch(i){case"top":break;case"bottom":r-=s*e.length;break;default:r-=s*e.length/2}return{x:t,y:r,width:a,height:s*e.length}}}],(r=[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,Fn(Jn(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){var r=this.beforeBrush(e,t);switch(e.beginPath(),this.buildPath(e,r),r.brushType){case"both":this.setCtxGlobalAlpha(e,"fill",r),e.fill(),r.lineWidth>0&&(this.setCtxGlobalAlpha(e,"stroke",r),e.stroke()),this.setCtxGlobalAlpha(e,"reset",r);break;case"stroke":this.setCtxGlobalAlpha(e,"stroke",r),r.lineWidth>0&&e.stroke(),this.setCtxGlobalAlpha(e,"reset",r);break;default:this.setCtxGlobalAlpha(e,"fill",r),e.fill(),this.setCtxGlobalAlpha(e,"reset",r)}this.drawText(e,r,this.style),this.afterBrush(e)}},{key:"beforeBrush",value:function(e,t){var r=this.style;return this.brushTypeOnly&&(r.brushType=this.brushTypeOnly),t&&(r=this.getHighlightStyle(r,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(r.strokeColor=r.strokeColor||r.color),e.save(),this.doClip(e),this.setContext(e,r),this.setTransform(e),r}},{key:"afterBrush",value:function(e){e.restore()}},{key:"setContext",value:function(e,t){for(var r=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],n=0,o=r.length;n<o;n++){var i=t[r[n][0]],a=r[n][1];void 0!==i&&(e[a]=i)}}},{key:"doClip",value:function(e){var t=cn.Util_matrix.create();if(this.__clipShapes)for(var r=0;r<this.__clipShapes.length;r++){var n=this.__clipShapes[r];if(n.needTransform){var o=n.transform;cn.Util_matrix.invert(t,o),e.transform(o[0],o[1],o[2],o[3],o[4],o[5])}if(e.beginPath(),n.buildPath(e,n.style),e.clip(),n.needTransform){var i=t;e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}}}},{key:"getHighlightStyle",value:function(e,t,r){var n={};for(var o in e)n[o]=e[o];var i=cn.Util_color.getHighlightColor();for(var a in"stroke"!=e.brushType?(n.strokeColor=i,n.lineWidth=e.lineWidth||1,n.brushType="both"):"stroke"!=r?(n.strokeColor=i,n.lineWidth=e.lineWidth||1):n.strokeColor=t.strokeColor||cn.Util_color.mix(e.strokeColor,cn.Util_color.toRGB(i)),t)void 0!==t[a]&&(n[a]=t[a]);return n}},{key:"getHighlightZoom",value:function(){return"text"!=this.type?6:2}},{key:"drift",value:function(e,t){this.position[0]+=e,this.position[1]+=t}},{key:"buildPath",value:function(e,t){cn.Util_log("buildPath not implemented in "+this.type)}},{key:"getRect",value:function(e){cn.Util_log("getRect not implemented in "+this.type)}},{key:"isCover",value:function(e,t){var r=this.getTansform(e,t);e=r[0],t=r[1];var n=this.style.__rect;return n||(n=this.style.__rect=this.getRect(this.style)),e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height&&cn.Util_area.isInside(this,this.style,e,t)}},{key:"drawText",value:function(e,t,r){if(void 0!==t.text&&!1!==t.text){var n=t.textColor||t.color||t.strokeColor;e.fillStyle=n;var o,a,s,l,u=10,c=t.textPosition||this.textPosition||"top",f=[];switch(f=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],c){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var p=(r||t).__rect||this.getRect(r||t);switch(c){case"inside":s=p.x+p.width/2,l=p.y+p.height/2,o="center",a="middle","stroke"!=t.brushType&&n==t.color&&(e.fillStyle="#fff");break;case"left":s=p.x-u,l=p.y+p.height/2,o="end",a="middle";break;case"right":s=p.x+p.width+u,l=p.y+p.height/2,o="start",a="middle";break;case"top":s=p.x+p.width/2,l=p.y-u,o="center",a="bottom";break;case"bottom":s=p.x+p.width/2,l=p.y+p.height+u,o="center",a="top"}}break;case"start":case"end":var h=0,y=0,d=0,b=0;if(void 0!==t.pointList){var v=t.pointList;if(v.length<2)return;var m=v.length;switch(c){case"start":h=v[0][0]+f[0],y=v[1][0]+f[0],d=v[0][1]+f[1],b=v[1][1]+f[1];break;case"end":h=v[m-2][0]+f[0],y=v[m-1][0]+f[0],d=v[m-2][1]+f[1],b=v[m-1][1]+f[1]}}else h=t.xStart+f[0]||0,y=t.xEnd+f[0]||0,d=t.yStart+f[1]||0,b=t.yEnd+f[1]||0;switch(c){case"start":o=h<y?"end":"start",a=d<b?"bottom":"top",s=h,l=d;break;case"end":o=h<y?"start":"end",a=d<b?"top":"bottom",s=y,l=b}u-=4,h&&y&&h!=y?s-="end"==o?u:-u:o="center",d!=b?l-="bottom"==a?u:-u:a="middle";break;case"specific":s=t.textX||0,l=t.textY||0,o="start",a="middle"}t.labelXOffset&&!isNaN(t.labelXOffset)&&(s+=t.labelXOffset),t.labelYOffset&&!isNaN(t.labelYOffset)&&(l+=t.labelYOffset),null!=s&&null!=l&&i._fillText(e,t.text,s,l,t.textFont,t.textAlign||o,t.textBaseline||a)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(e,t,r){e.globalAlpha="fill"===t?void 0===r.fillOpacity?void 0===r.opacity?1:r.opacity:r.fillOpacity:"stroke"===t?void 0===r.strokeOpacity?void 0===r.opacity?1:r.opacity:r.strokeOpacity:void 0===r.opacity?1:r.opacity}}])&&Dn(t.prototype,r),n&&Dn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Hn(e){"@babel/helpers - typeof";return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wn(){return(Wn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xn(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function qn(e,t){return(qn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Yn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Xn(e);if(t){var o=Xn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Hn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Xn(e){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qn(e,t)}(i,Vn);var t,r,n,o=Yn(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smicimage",t._imageCache={},t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicImage",t}return t=i,(r=[{key:"destroy",value:function(){this.type=null,this._imageCache=null,Wn(Xn(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t,r){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,o=this.style||{};t&&(o=this.getHighlightStyle(o,this.highlightStyle||{}));var a=o.image,s=this;if("string"==typeof a){var l=a;this._imageCache[l]?a=this._imageCache[l]:((a=new Image).onload=function(){a.onload=null,clearTimeout(i._refreshTimeout),i._needsRefresh.push(s),i._refreshTimeout=setTimeout(function(){r&&r(i._needsRefresh),i._needsRefresh=[]},10)},a.src=l,this._imageCache[l]=a)}if(a){if("IMG"==a.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=a.readyState)return}else if(!a.complete)return;var u=o.width||a.width,c=o.height||a.height,f=o.x+n[0],p=o.y+n[1];if(!a.width||!a.height)return;if(e.save(),this.doClip(e),this.setContext(e,o),this.setTransform(e),o.sWidth&&o.sHeight){var h=o.sx+n[0]||0,y=o.sy+n[1]||0;e.drawImage(a,h,y,o.sWidth,o.sHeight,f,p,u,c)}else if(o.sx&&o.sy){var d=o.sx+n[0],b=o.sy+n[1],v=u-d,m=c-b;e.drawImage(a,d,b,v,m,f,p,u,c)}else e.drawImage(a,f,p,u,c);o.width||(o.width=u),o.height||(o.height=c),this.style.width||(this.style.width=u),this.style.height||(this.style.height=c),this.drawText(e,o,this.style),e.restore()}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return{x:e.x+t[0],y:e.y+t[1],width:e.width,height:e.height}}},{key:"clearCache",value:function(){this._imageCache={}}}])&&zn(t.prototype,r),n&&zn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Zn(e){"@babel/helpers - typeof";return(Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kn(e,t){return(Kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=eo(e);if(t){var o=eo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Zn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function eo(e){return(eo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function to(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ro(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function no(e,t,r){return t&&ro(e.prototype,t),r&&ro(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}Qn._needsRefresh=[],Qn._refreshTimeout=null;var oo=function(){function e(t,r){to(this,e),this.root=t,this.storage=r,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,e.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="SuperMap.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var n=document.createElement("div");this._domRoot=n,n.style.position="relative",n.style.overflow="hidden",n.style.width=this._width+"px",n.style.height=this._height+"px",this.root.appendChild(n),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=e.createDom(j.createUniqueID("SuperMap.Theme_background_"),"div",this),n.appendChild(this._bgDom),this._bgDom.onselectstart=a,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var o=new io(j.createUniqueID("_highLightLayer_"),this);this._layers.hover=o,n.appendChild(o.dom),o.initContext(),o.dom.onselectstart=a,o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none";var i=this;function a(){return!1}this.updatePainter=function(e,t){i.refreshShapes(e,t)}}return no(e,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(e){return this.refresh(e,!0),this}},{key:"refresh",value:function(e,t){var r=this.storage.getShapeList(!0);return this._paintList(r,t),"function"==typeof e&&e(),this}},{key:"_paintList",value:function(e,t){var r,n,o;for(var i in void 0===t&&(t=!1),this._updateLayerStatus(e),this._layers)"hover"!==i&&(this._layers[i].unusedCount++,this._layers[i].updateTransform());for(var a=[],s=0,l=e.length;s<l;s++){var u=e[s];if(n!==u.zlevel&&(r&&r.needTransform&&o.restore(),o=(r=this.getLayer(u.zlevel)).ctx,n=u.zlevel,r.unusedCount=0,(r.dirty||t)&&r.clear(),r.needTransform&&(o.save(),r.setTransform(o))),o&&u.__startClip){var c=u.__startClip;if(o.save(),c.needTransform){var f=c.transform;cn.Util_matrix.invert(a,f),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}if(o.beginPath(),c.buildPath(o,c.style),o.clip(),c.needTransform){var p=a;o.transform(p[0],p[1],p[2],p[3],p[4],p[5])}}if((r&&r.dirty||t)&&!u.invisible&&(!u.onbrush||u.onbrush&&!u.onbrush(o,!1)))if(tn.catchBrushException)try{u.brush(o,!1,this.updatePainter)}catch(e){cn.Util_log(e,"brush error of "+u.type,u)}else u.brush(o,!1,this.updatePainter);o&&u.__stopClip&&o.restore(),u.__dirty=!1}for(var h in o&&r&&r.needTransform&&o.restore(),this._layers)if("hover"!==h){var y=this._layers[h];y.dirty=!1,1==y.unusedCount&&y.clear()}}},{key:"getLayer",value:function(e){var t=this._layers[e];if(!t){var r=this._zlevelList.length,n=null,o=-1;if(r>0&&e>this._zlevelList[0]){for(o=0;o<r-1&&!(this._zlevelList[o]<e&&this._zlevelList[o+1]>e);o++);n=this._layers[this._zlevelList[o]]}this._zlevelList.splice(o+1,0,e),t=new io(j.createUniqueID("_levelLayer_"+e),this);var i=n?n.dom:this._bgDom;i.nextSibling?i.parentNode.insertBefore(t.dom,i.nextSibling):i.parentNode.appendChild(t.dom),t.initContext(),this._layers[e]=t,this._layerConfig[e]&&(new Ir).merge(t,this._layerConfig[e],!0),t.updateTransform()}return t}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(e){var t=this._layers,r={};for(var n in t)"hover"!==n&&(r[n]=t[n].elCount,t[n].elCount=0);for(var o=0;o<e.length;o++){var i=e[o],a=t[i.zlevel];if(a){if(a.elCount++,a.dirty)continue;a.dirty=i.__dirty}}for(var s in t)"hover"!==s&&r[s]!==t[s].elCount&&(t[s].dirty=!0)}},{key:"refreshShapes",value:function(e,t){for(var r=0,n=e.length;r<n;r++){var o=e[r];this.storage.mod(o.id)}return this.refresh(t),this}},{key:"clear",value:function(){for(var e in this._layers)"hover"!=e&&this._layers[e].clear();return this}},{key:"modLayer",value:function(e,t){if(t){this._layerConfig[e]?(new Ir).merge(this._layerConfig[e],t,!0):this._layerConfig[e]=t;var r=this._layers[e];r&&(new Ir).merge(r,this._layerConfig[e],!0)}}},{key:"delLayer",value:function(e){var t=this._layers[e];t&&(this.modLayer(e,{position:t.position,rotation:t.rotation,scale:t.scale}),t.dom.parentNode.removeChild(t.dom),delete this._layers[e],this._zlevelList.splice((new Ir).indexOf(this._zlevelList,e),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var e=this.storage.getHoverShapes(!0),t=0,r=e.length;t<r;t++)this._brushHover(e[t]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var e=this._layers.hover;return e&&e.clear(),this}},{key:"resize",value:function(){var e=this._domRoot;e.style.display="none";var t=this._getWidth(),r=this._getHeight();if(e.style.display="",this._width!=t||r!=this._height){for(var n in this._width=t,this._height=r,e.style.width=t+"px",e.style.height=r+"px",this._layers)this._layers[n].resize(t,r);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(e){var t=this._layers[e];t&&t.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(t,r,n){var o=e.createDom(j.createUniqueID("SuperMap.Theme.image_"),"canvas",this);this._bgDom.appendChild(o);var i=o.getContext("2d");1!=e.devicePixelRatio&&i.scale(e.devicePixelRatio,e.devicePixelRatio),i.fillStyle=r||"#fff",i.rect(0,0,this._width*e.devicePixelRatio,this._height*e.devicePixelRatio),i.fill();var a=this;this.storage.iterShape(function(e){if(!e.invisible&&(!e.onbrush||e.onbrush&&!e.onbrush(i,!1)))if(tn.catchBrushException)try{e.brush(i,!1,a.updatePainter)}catch(t){cn.Util_log(t,"brush error of "+e.type,e)}else e.brush(i,!1,a.updatePainter)},{normal:"up",update:!0});var s=o.toDataURL(t,n);return i=null,this._bgDom.removeChild(o),s}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function(e){var t=this._layers.hover.ctx;if(!e.onbrush||e.onbrush&&!e.onbrush(t,!0)){var r=this.getLayer(e.zlevel);if(r.needTransform&&(t.save(),r.setTransform(t)),tn.catchBrushException)try{e.brush(t,!0,this.updatePainter)}catch(t){cn.Util_log(t,"hoverBrush error of "+e.type,e)}else e.brush(t,!0,this.updatePainter);r.needTransform&&t.restore()}}},{key:"_shapeToImage",value:function(e,t,r,n,o){var i=document.createElement("canvas"),a=i.getContext("2d"),s=o||window.devicePixelRatio||1;i.style.width=r+"px",i.style.height=n+"px",i.setAttribute("width",r*s),i.setAttribute("height",n*s),a.clearRect(0,0,r*s,n*s);var l={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[0,0,0],t.rotation=0,t.scale=[1,1],t&&t.brush(a,!1);var u=new Qn({id:e,style:{x:0,y:0,image:i}});return null!=l.position&&(u.position=t.position=l.position),null!=l.rotation&&(u.rotation=t.rotation=l.rotation),null!=l.scale&&(u.scale=t.scale=l.scale),u}},{key:"_createShapeToImageProcessor",value:function(){var t=this;return function(r,n,o,i){return t._shapeToImage(r,n,o,i,e.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(e){if(!(e instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var t=0;t<e.length;t++)this.storage.addHover(e[t]),this._brushHover(e[t])}}],[{key:"createDom",value:function(t,r,n){var o=document.createElement(r),i=n._width,a=n._height;return o.style.position="absolute",o.style.left=0,o.style.top=0,o.style.width=i+"px",o.style.height=a+"px",o.setAttribute("width",i*e.devicePixelRatio),o.setAttribute("height",a*e.devicePixelRatio),o.setAttribute("id",t),o}}]),e}(),io=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kn(e,t)}(r,pn);var t=$n(r);function r(e,n){var o;return to(this,r),(o=t.call(this,e,n)).dom=null,o.domBack=null,o.ctxBack=null,o.painter=n,o.unusedCount=0,o.config=null,o.dirty=!0,o.elCount=0,o.clearColor=0,o.motionBlur=!1,o.lastFrameAlpha=.7,o.zoomable=!1,o.panable=!1,o.maxZoom=1/0,o.minZoom=0,o.ctx=null,o.dom=oo.createDom(j.createUniqueID("SuperMap.Theme"+e),"canvas",n),o.dom.onselectstart=function(){return!1},o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none",o.CLASS_NAME="SuperMap.LevelRenderer.Painter.Layer",o}return no(r,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,pn.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!=oo.devicePixelRatio&&this.ctx.scale(oo.devicePixelRatio,oo.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=oo.createDom(j.createUniqueID("SuperMap.Theme.back-"+this.id),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!=oo.devicePixelRatio&&this.ctxBack.scale(oo.devicePixelRatio,oo.devicePixelRatio)}},{key:"resize",value:function(e,t){this.dom.style.width=e+"px",this.dom.style.height=t+"px",this.dom.setAttribute("width",e*oo.devicePixelRatio),this.dom.setAttribute("height",t*oo.devicePixelRatio),1!=oo.devicePixelRatio&&this.ctx.scale(oo.devicePixelRatio,oo.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",e*oo.devicePixelRatio),this.domBack.setAttribute("height",t*oo.devicePixelRatio),1!=oo.devicePixelRatio&&this.ctxBack.scale(oo.devicePixelRatio,oo.devicePixelRatio))}},{key:"clear",value:function(){var e=this.dom,t=this.ctx,r=e.width,n=e.height,o=this.clearColor,i=this.motionBlur,a=this.lastFrameAlpha;if(i&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(e,0,0,r/oo.devicePixelRatio,n/oo.devicePixelRatio)),o?(t.save(),t.fillStyle=this.config.clearColor,t.fillRect(0,0,r/oo.devicePixelRatio,n/oo.devicePixelRatio),t.restore()):t.clearRect(0,0,r/oo.devicePixelRatio,n/oo.devicePixelRatio),i){var s=this.domBack;t.save(),t.globalAlpha=a,t.drawImage(s,0,0,r/oo.devicePixelRatio,n/oo.devicePixelRatio),t.restore()}}}]),r}();function ao(e){"@babel/helpers - typeof";return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function so(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lo(e,t){return(lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=fo(e);if(t){var o=fo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ao(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return co(e)}(this,r)}}function co(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fo(e){return(fo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var po=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lo(e,t)}(i,Nr);var t,r,n,o=uo(i);function i(e,t,r){var n,a,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t,r)).root=e,n.storage=t,n.painter=r,n._lastX=0,n._lastY=0,n._mouseX=0,n._mouseY=0,n._findHover=null,n._domHover=null,n._findHover=(a=function(e,t,r){var n=this;if(n._draggingTarget&&n._draggingTarget.id==e.id||e.isSilent())return!1;var o=n._event;if(e.isCover(t,r)){if(e.hoverable)if(e.isHoverByRefDataID&&!0===e.isHoverByRefDataID){if(e.refDataID){var i=e.refDataID,a=null;e.refDataHoverGroup&&(a=e.refDataHoverGroup);for(var s=n.storage._shapeList,l=0,u=s.length;l<u;l++){var c=s[l];c.refDataID&&i===c.refDataID&&(a?c.refDataHoverGroup&&a===c.refDataHoverGroup&&n.storage.addHover(c):n.storage.addHover(c))}}}else n.storage.addHover(e);for(var f=e.parent;f;){if(f.clipShape&&!f.clipShape.isCover(n._mouseX,n._mouseY))return!1;f=f.parent}return n._lastHover!=e&&(n._processOutShape(o),n._processDragLeave(o),n._lastHover=e,n._processDragEnter(o)),n._processOverShape(o),n._processDragOver(o),n._hasfound=1,!0}return!1},s=co(n),function(e,t,r){return a.call(s,e,t,r)}),n._domHover=r.getDomHover(),n.CLASS_NAME="SuperMap.LevelRenderer.Handler";var l={resize:function(e){e=e||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(tn.EVENT.RESIZE,e)},click:function(e){e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<10&&this._dispatchAgency(t,tn.EVENT.CLICK,e),this._mousemoveHandler(e)},dblclick:function(e){e=e||window.event,e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<5&&this._dispatchAgency(t,tn.EVENT.DBLCLICK,e),this._mousemoveHandler(e)},mousewheel:function(e){var t=((e=this._zrenderEventFixed(e)).wheelDelta||-e.detail)>0?1.1:1/1.1,r=this.painter.getLayers(),n=!1;for(var o in r)if("hover"!==o){var i=r[o],a=i.position;if(i.zoomable){i.__zoom=i.__zoom||1;var s=i.__zoom;s*=t,t=(s=Math.max(Math.min(i.maxZoom,s),i.minZoom))/i.__zoom,i.__zoom=s,a[0]-=(this._mouseX-a[0])*(t-1),a[1]-=(this._mouseY-a[1])*(t-1),i.scale[0]*=t,i.scale[1]*=t,i.dirty=!0,n=!0}}n&&this.painter.refresh(),this._dispatchAgency(this._lastHover,tn.EVENT.MOUSEWHEEL,e),this._mousemoveHandler(e)},mousemove:function(e){this._clickThreshold++,e=this._zrenderEventFixed(e),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=cn.Util_event.getX(e),this._mouseY=cn.Util_event.getY(e);var t=this._mouseX-this._lastX,r=this._mouseY-this._lastY;this._processDragStart(e),this._hasfound=0,this._event=e,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(e),this._processDragLeave(e)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var n="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,t,r),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var o=this.painter.getLayers(),i=!1;for(var a in o)if("hover"!==a){var s=o[a];s.panable&&(n="move",s.position[0]+=t,s.position[1]+=r,i=!0,s.dirty=!0)}i&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?n="move":this._hasfound&&this._lastHover.clickable&&(n="pointer"),this.root.style.cursor=n,this._dispatchAgency(this._lastHover,tn.EVENT.MOUSEMOVE,e),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(e){var t=(e=this._zrenderEventFixed(e)).toElement||e.relatedTarget;if(t!=this.root)for(;t&&9!=t.nodeType;){if(t==this.root)return void this._mousemoveHandler(e);t=t.parentNode}e.zrenderX=this._lastX,e.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(e),this._processDrop(e),this._processDragEnd(e),this.painter.refreshHover(),this.dispatch(tn.EVENT.GLOBALOUT,e)},mousedown:function(e){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=e.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,e=this._zrenderEventFixed(e),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,tn.EVENT.MOUSEDOWN,e),this._lastDownButton=e.button},mouseup:function(e){e=this._zrenderEventFixed(e),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,tn.EVENT.MOUSEUP,e),this._processDrop(e),this._processDragEnd(e)},touchstart:function(e){e=this._zrenderEventFixed(e,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(e),this._mousedownHandler(e)},touchmove:function(e){e=this._zrenderEventFixed(e,!0),this._mousemoveHandler(e),this._isDragging&&cn.Util_event.stop(e)},touchend:function(e){e=this._zrenderEventFixed(e,!0),this._mouseupHandler(e);var t=new Date;t-this._lastTouchMoment<tn.EVENT.touchClickDelay&&(this._mobildFindFixed(e),this._clickHandler(e),t-this._lastClickMoment<tn.EVENT.touchClickDelay/2&&(this._dblclickHandler(e),this._lastHover&&this._lastHover.clickable&&cn.Util_event.stop(e)),this._lastClickMoment=t),this.painter.clearHover()}};function u(e,t){return function(r){return e.call(t,r)}}return function(e){var t=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],r=t.length;for(;r--;){var n=t[r];e["_"+n+"Handler"]=u(l[n],e)}}(co(n)),window.addEventListener?(window.addEventListener("resize",n._resizeHandler),cn.Util_env.os.tablet||cn.Util_env.os.phone?(e.addEventListener("touchstart",n._touchstartHandler),e.addEventListener("touchmove",n._touchmoveHandler),e.addEventListener("touchend",n._touchendHandler)):(e.addEventListener("click",n._clickHandler),e.addEventListener("dblclick",n._dblclickHandler),e.addEventListener("mousewheel",n._mousewheelHandler),e.addEventListener("mousemove",n._mousemoveHandler),e.addEventListener("mousedown",n._mousedownHandler),e.addEventListener("mouseup",n._mouseupHandler)),e.addEventListener("DOMMouseScroll",n._mousewheelHandler),e.addEventListener("mouseout",n._mouseoutHandler)):(window.attachEvent("onresize",n._resizeHandler),e.attachEvent("onclick",n._clickHandler),e.ondblclick=n._dblclickHandler,e.attachEvent("onmousewheel",n._mousewheelHandler),e.attachEvent("onmousemove",n._mousemoveHandler),e.attachEvent("onmouseout",n._mouseoutHandler),e.attachEvent("onmousedown",n._mousedownHandler),e.attachEvent("onmouseup",n._mouseupHandler)),n}return t=i,(r=[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,Nr.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(e,t){return this.bind(e,t),this}},{key:"un",value:function(e,t){return this.unbind(e,t),this}},{key:"trigger",value:function(e,t){var r=tn.EVENT;switch(e){case r.RESIZE:case r.CLICK:case r.DBLCLICK:case r.MOUSEWHEEL:case r.MOUSEMOVE:case r.MOUSEDOWN:case r.MOUSEUP:case r.MOUSEOUT:this["_"+e+"Handler"](t)}}},{key:"dispose",value:function(){var e=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),cn.Util_env.os.tablet||cn.Util_env.os.phone?(e.removeEventListener("touchstart",this._touchstartHandler),e.removeEventListener("touchmove",this._touchmoveHandler),e.removeEventListener("touchend",this._touchendHandler)):(e.removeEventListener("click",this._clickHandler),e.removeEventListener("dblclick",this._dblclickHandler),e.removeEventListener("mousewheel",this._mousewheelHandler),e.removeEventListener("mousemove",this._mousemoveHandler),e.removeEventListener("mousedown",this._mousedownHandler),e.removeEventListener("mouseup",this._mouseupHandler)),e.removeEventListener("DOMMouseScroll",this._mousewheelHandler),e.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),e.detachEvent("onclick",this._clickHandler),e.detachEvent("dblclick",this._dblclickHandler),e.detachEvent("onmousewheel",this._mousewheelHandler),e.detachEvent("onmousemove",this._mousemoveHandler),e.detachEvent("onmouseout",this._mouseoutHandler),e.detachEvent("onmousedown",this._mousedownHandler),e.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(e){var t=this._lastHover;if(this._isMouseDown&&t&&t.draggable&&!this._draggingTarget&&this._mouseDownTarget==t){if(t.dragEnableTime&&new Date-this._lastMouseDownMoment<t.dragEnableTime)return;var r=t;this._draggingTarget=r,this._isDragging=1,r.invisible=!0,this.storage.mod(r.id),this._dispatchAgency(r,tn.EVENT.DRAGSTART,e),this.painter.refresh()}}},{key:"_processDragEnter",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,tn.EVENT.DRAGENTER,e,this._draggingTarget)}},{key:"_processDragOver",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,tn.EVENT.DRAGOVER,e,this._draggingTarget)}},{key:"_processDragLeave",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,tn.EVENT.DRAGLEAVE,e,this._draggingTarget)}},{key:"_processDrop",value:function(e){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,tn.EVENT.DROP,e,this._draggingTarget))}},{key:"_processDragEnd",value:function(e){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,tn.EVENT.DRAGEND,e),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(e){this._dispatchAgency(this._lastHover,tn.EVENT.MOUSEOVER,e)}},{key:"_processOutShape",value:function(e){this._dispatchAgency(this._lastHover,tn.EVENT.MOUSEOUT,e)}},{key:"_dispatchAgency",value:function(e,t,r,n){var o="on"+t,i={type:t,event:r,target:e,cancelBubble:!1},a=e;for(n&&(i.dragged=n);a&&(a[o]&&(i.cancelBubble=a[o](i)),a.dispatch(t,i),a=a.parent,!i.cancelBubble););e?i.cancelBubble||this.dispatch(t,i):n||this.dispatch(t,{type:t,event:r})}},{key:"_iterateAndFindHover",value:function(){for(var e,t=cn.Util_matrix.create(),r=this.storage.getShapeList(),n=[0,0],o=r.length-1;o>=0;o--){var i=r[o];if(void 0!==i.zlevel&&(e=this.painter.getLayer(i.zlevel,e),n[0]=this._mouseX,n[1]=this._mouseY,e.needTransform&&(cn.Util_matrix.invert(t,e.transform),cn.Util_vector.applyTransform(n,n,t))),this._findHover(i,n[0],n[1]))break}}},{key:"_mobildFindFixed",value:function(e){var t=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=e.zrenderX,this._mouseY=e.zrenderY,this._event=e,this._iterateAndFindHover();for(var r=0;!this._lastHover&&r<t.length;r++){var n=t[r];n.x&&(this._mouseX+=n.x),n.y&&(this._mouseX+=n.y),this._iterateAndFindHover()}this._lastHover&&(e.zrenderX=this._mouseX,e.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(e,t){if(e.zrenderFixed)return e;if(t){var r="touchend"!=e.type?e.targetTouches[0]:e.changedTouches[0];if(r){var n=this.root.getBoundingClientRect();e.zrenderX=r.clientX-n.left,e.zrenderY=r.clientY-n.top}}else{var o=(e=e||window.event).toElement||e.relatedTarget||e.srcElement||e.target;o&&o!=this._domHover&&(e.zrenderX=(void 0!==e.offsetX?e.offsetX:e.layerX)+o.offsetLeft,e.zrenderY=(void 0!==e.offsetY?e.offsetY:e.layerY)+o.offsetTop)}return e.zrenderFixed=1,e}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}])&&so(t.prototype,r),n&&so(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ho(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var yo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Animation.easing"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){}},{key:"Linear",value:function(e){return e}},{key:"QuadraticIn",value:function(e){return e*e}},{key:"QuadraticOut",value:function(e){return e*(2-e)}},{key:"QuadraticInOut",value:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},{key:"CubicIn",value:function(e){return e*e*e}},{key:"CubicOut",value:function(e){return--e*e*e+1}},{key:"CubicInOut",value:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},{key:"QuarticIn",value:function(e){return e*e*e*e}},{key:"QuarticOut",value:function(e){return 1- --e*e*e*e}},{key:"QuarticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},{key:"QuinticIn",value:function(e){return e*e*e*e*e}},{key:"QuinticOut",value:function(e){return--e*e*e*e*e+1}},{key:"QuinticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},{key:"SinusoidalIn",value:function(e){return 1-Math.cos(e*Math.PI/2)}},{key:"SinusoidalOut",value:function(e){return Math.sin(e*Math.PI/2)}},{key:"SinusoidalInOut",value:function(e){return.5*(1-Math.cos(Math.PI*e))}},{key:"ExponentialIn",value:function(e){return 0===e?0:Math.pow(1024,e-1)}},{key:"ExponentialOut",value:function(e){return 1===e?1:1-Math.pow(2,-10*e)}},{key:"ExponentialInOut",value:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},{key:"CircularIn",value:function(e){return 1-Math.sqrt(1-e*e)}},{key:"CircularOut",value:function(e){return Math.sqrt(1- --e*e)}},{key:"CircularInOut",value:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},{key:"ElasticIn",value:function(e){var t,r=.1;return 0===e?0:1===e?1:(r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(e){var t,r=.1;return 0===e?0:1===e?1:(r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(e){var t,r=.1;return 0===e?0:1===e?1:(r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(e){var t=1.70158;return e*e*((t+1)*e-t)}},{key:"BackOut",value:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1}},{key:"BackInOut",value:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},{key:"BounceIn",value:function(e){return 1-this.BounceOut(1-e)}},{key:"BounceOut",value:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},{key:"BounceInOut",value:function(e){return e<.5?.5*this.BounceIn(2*e):.5*this.BounceOut(2*e-1)+.5}}])&&ho(t.prototype,r),n&&ho(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function bo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var vo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._targetPool=t.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=t.life||1e3,this._delay=t.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Clip"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){}},{key:"step",value:function(e){var t=new yo,r=(e-this._startTime)/this._life;if(!(r<0)){r=Math.min(r,1);var n="string"==typeof this.easing?t[this.easing]:this.easing,o="function"==typeof n?n(r):r;return this.fire("frame",o),1==r?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var e=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-e+this.gap}},{key:"fire",value:function(e,t){for(var r=0,n=this._targetPool.length;r<n;r++)this["on"+e]&&this["on"+e](this._targetPool[r],t)}}])&&bo(t.prototype,r),n&&bo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function mo(e){"@babel/helpers - typeof";return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function go(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Oo(e,t,r){return t&&wo(e.prototype,t),r&&wo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function So(e,t){return(So=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=xo(e);if(t){var o=xo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===mo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Po(e)}(this,r)}}function Po(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xo(e){return(xo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Eo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&So(e,t)}(r,Nr);var t=_o(r);function r(e){var n;return go(this,r),n=t.call(this,e),e=e||{},n.stage={},n.onframe=function(){},n._clips=[],n._running=!1,n._time=0,j.extend(Po(n),e),n.CLASS_NAME="SuperMap.LevelRenderer.Animation",n}return Oo(r,[{key:"add",value:function(e){this._clips.push(e)}},{key:"remove",value:function(e){var t=(new Ir).indexOf(this._clips,e);t>=0&&this._clips.splice(t,1)}},{key:"_update",value:function(){for(var e=(new Date).getTime(),t=e-this._time,r=this._clips,n=r.length,o=[],i=[],a=0;a<n;a++){var s=r[a],l=s.step(e);l&&(o.push(l),i.push(s))}this.stage.update&&this.stage.update();for(var u=0;u<n;)r[u]._needsRemove?(r[u]=r[n-1],r.pop(),n--):u++;n=o.length;for(var c=0;c<n;c++)i[c].fire(o[c]);this._time=e,this.onframe(t),this.dispatch("frame",t)}},{key:"start",value:function(){var e=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,16)},t=this;this._running=!0,this._time=(new Date).getTime(),e(function r(){t._running&&(t._update(),e(r))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(e,t){var r=new ko(e,(t=t||{}).loop,t.getter,t.setter);return r.animation=this,r}}],[{key:"_interpolateNumber",value:function(e,t,r){return(t-e)*r+e}},{key:"_interpolateArray",value:function(e,t,n,o,i){var a=e.length;if(1==i)for(var s=0;s<a;s++)o[s]=r._interpolateNumber(e[s],t[s],n);else for(var l=e[0].length,u=0;u<a;u++)for(var c=0;c<l;c++)o[u][c]=r._interpolateNumber(e[u][c],t[u][c],n)}},{key:"_isArrayLike",value:function(e){switch(mo(e)){case"undefined":case"string":return!1}return void 0!==e.length}},{key:"_catmullRomInterpolateArray",value:function(e,t,n,o,i,a,s,l,u){var c=e.length;if(1==u)for(var f=0;f<c;f++)l[f]=r._catmullRomInterpolate(e[f],t[f],n[f],o[f],i,a,s);else for(var p=e[0].length,h=0;h<c;h++)for(var y=0;y<p;y++)l[h][y]=r._catmullRomInterpolate(e[h][y],t[h][y],n[h][y],o[h][y],i,a,s)}},{key:"_catmullRomInterpolate",value:function(e,t,r,n,o,i,a){var s=.5*(r-e),l=.5*(n-t);return(2*(t-r)+s+l)*a+(-3*(t-r)-2*s-l)*i+s*o+t}},{key:"_cloneValue",value:function(e){var t=Array.prototype.slice;if(r._isArrayLike(e)){var n=e.length;if(r._isArrayLike(e[0])){for(var o=[],i=0;i<n;i++)o.push(t.call(e[i]));return o}return t.call(e)}return e}},{key:"rgba2String",value:function(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}}]),r}(),ko=function(){function e(t,r,n,o){go(this,e),this._tracks={},this._target=t,this._loop=r||!1,this._getter=n||function(e,t){return e[t]},this._setter=o||function(e,t,r){e[t]=r},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Animator"}return Oo(e,[{key:"when",value:function(e,t){for(var r in t)this._tracks[r]||(this._tracks[r]=[],0!==e&&this._tracks[r].push({time:0,value:Eo._cloneValue(this._getter(this._target,r))})),this._tracks[r].push({time:parseInt(e,10),value:t[r]});return this}},{key:"during",value:function(e){return this._onframeList.push(e),this}},{key:"start",value:function(e){var t=this,r=this._setter,n=this._getter,o=t._onframeList.length,i="spline"===e,a=function(){if(t._clipCount--,0===t._clipCount){t._tracks={};for(var e=t._doneList.length,r=0;r<e;r++)t._doneList[r].call(t)}},s=function(s,l){var u=s.length;if(u){var c=s[0].value,f=Eo._isArrayLike(c),p=!1,h=f&&Eo._isArrayLike(c[0])?2:1;s.sort(function(e,t){return e.time-t.time});for(var y=s[u-1].time,d=[],b=[],v=0;v<u;v++){d.push(s[v].time/y);var m=s[v].value;"string"==typeof m&&(0===(m=cn.Util_color.toArray(m)).length&&(m[0]=m[1]=m[2]=0,m[3]=1),p=!0),b.push(m)}var g,w,O,S,_,P,x,E=0,k=0;if(p)var j=[0,0,0,0];var C=new vo({target:t._target,life:y,loop:t._loop,delay:t._delay,onframe:function(e,a){if(a<k){for(g=Math.min(E+1,u-1),w=g;w>=0&&!(d[w]<=a);w--);w=Math.min(w,u-2)}else{for(w=E;w<u&&!(d[w]>a);w++);w=Math.min(w-1,u-2)}E=w,k=a;var s=d[w+1]-d[w];if(0!==s){var c,y;for(O=(a-d[w])/s,i?(_=b[w],S=b[0===w?w:w-1],P=b[w>u-2?u-1:w+1],x=b[w>u-3?u-1:w+2],f?Eo._catmullRomInterpolateArray(S,_,P,x,O,O*O,O*O*O,n(e,l),h):(c=p?Eo.rgba2String(j):Eo._catmullRomInterpolate(S,_,P,x,O,O*O,O*O*O),r(e,l,c))):f?Eo._interpolateArray(b[w],b[w+1],O,n(e,l),h):(p?(Eo._interpolateArray(b[w],b[w+1],O,j,1),y=Eo.rgba2String(j)):y=Eo._interpolateNumber(b[w],b[w+1],O),r(e,l,y)),w=0;w<o;w++)t._onframeList[w](e,a)}},ondestroy:a});e&&"spline"!==e&&(C.easing=e),t._clipList.push(C),t._clipCount++,t.animation.add(C)}};for(var l in this._tracks)s(this._tracks[l],l);return this}},{key:"stop",value:function(){for(var e=0;e<this._clipList.length;e++){var t=this._clipList[e];this.animation.remove(t)}this._clipList=[]}},{key:"delay",value:function(e){return this._delay=e,this}},{key:"done",value:function(e){return e&&this._doneList.push(e),this}}]),e}();function jo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Co=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.storage=new Sn,this.painter=new oo(r,this.storage),this.handler=new po(r,this.storage,this.painter),this.animatingElements=[],this.animation=new Eo({stage:{update:e.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="SuperMap.LevelRenderer.Render"}var t,r,n;return t=e,n=[{key:"getFrameCallback",value:function(e){return function(){var t=e.animatingElements;if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)e.storage.mod(t[r].id);(t.length||e._needsRefreshNextFrame)&&e.refresh()}}}}],(r=[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(e){return this.storage.addRoot(e),this}},{key:"addGroup",value:function(e){return this.storage.addRoot(e),this}},{key:"delShape",value:function(e){return this.storage.delRoot(e),this}},{key:"delGroup",value:function(e){return this.storage.delRoot(e),this}},{key:"modShape",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modGroup",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modLayer",value:function(e,t){return this.painter.modLayer(e,t),this}},{key:"addHoverShape",value:function(e){return this.storage.addHover(e),this}},{key:"render",value:function(e){return this.painter.render(e),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(e){return this.painter.refresh(e),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(e){return this.painter.refreshHover(e),this}},{key:"refreshShapes",value:function(e,t){return this.painter.refreshShapes(e,t),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(e,t,r){if("string"==typeof e&&(e=this.storage.get(e)),e){var n;if(t){for(var o=t.split("."),i=e,a=0,s=o.length;a<s;a++)i&&(i=i[o[a]]);i&&(n=i)}else n=e;if(!n)return void cn.Util_log('Property "'+t+'" is not existed in element '+e.id);var l=this.animatingElements;return void 0===e.__aniCount&&(e.__aniCount=0),0===e.__aniCount&&l.push(e),e.__aniCount++,this.animation.animate(n,{loop:r}).done(function(){if(e.__aniCount--,0===e.__aniCount){var t=(new Ir).indexOf(l,e);l.splice(t,1)}})}cn.Util_log("Element not existed")}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(e,t,r){return this.painter.toDataURL(e,t,r)}},{key:"shapeToImage",value:function(e,t,r){var n=j.createUniqueID("SuperMap.LevelRenderer.ToImage_");return this.painter.shapeToImage(n,e,t,r)}},{key:"on",value:function(e,t){return this.handler.on(e,t),this}},{key:"un",value:function(e,t){return this.handler.un(e,t),this}},{key:"trigger",value:function(e,t){return this.handler.trigger(e,t),this.handler.dispatch(e,t),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(e){return this.painter.updateHoverLayer(e),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}])&&jo(t.prototype,r),n&&jo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function To(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ro=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e._instances={},e.Tool={},this.version="2.0.4",this.CLASS_NAME="SuperMap.LevelRenderer"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.dispose(),this.version=null}},{key:"init",value:function(t){var r=new Co(j.createUniqueID("LRenderer_"),t);return e._instances[r.id]=r,r}},{key:"dispose",value:function(t){if(t)t.dispose(),this.delInstance(t.id);else{for(var r in e._instances)e._instances[r].dispose();e._instances={}}return this}},{key:"getInstance",value:function(t){return e._instances[t]}},{key:"delInstance",value:function(t){return delete e._instances[t],this}}])&&To(t.prototype,r),n&&To(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ao(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Lo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fieldNames=null,this.fieldValues=null,this.geometry=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ServerFeature"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){var r=null;if(t)return(r=t.geometry)&&(r=cr.fromJson(r)),new e({fieldNames:t.fieldNames,fieldValues:t.fieldValues,geometry:r})}}],(r=[{key:"destroy",value:function(){var e=this;e.fieldNames=null,e.fieldValues=null,e.geometry&&(e.geometry.destroy(),e.geometry=null)}},{key:"toFeature",value:function(){var e,t,r,n,o={},i=this;for(var a in e=i.fieldNames,t=i.fieldValues,e)o[e[a]]=t[a];return i.geometry&&(r=i.geometry.toGeometry()),n=new Be(r,o),i.geometry&&i.geometry.id&&(n.fid=i.geometry.id),n}}])&&Ao(t.prototype,r),n&&Ao(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Io(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Mo=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=r||{};this.name=t,this.id=n.id?n.id:j.createUniqueID("themeLayer_"),this.opacity=n.opacity?n.opacity:1,this.visibility=!0,this.loadWhileAnimating=void 0===n.loadWhileAnimating||n.loadWhileAnimating,this.map=n.map?n.map:null,this.features=[],this.TFEvents=[],this.map&&this.map.addLayer(this)}var r,n,o;return r=e,(n=[{key:"onAdd",value:function(e){this.map=e,this._createCanvasContainer(),this.addTFEvents(),this.map.on("resize",this.resizeEvent.bind(this)),this.map.on("zoomstart",this.zoomStartEvent.bind(this)),this.map.on("zoomend",this.zoomEndEvent.bind(this)),this.map.on("rotatestart",this.rotateStartEvent.bind(this)),this.map.on("rotate",this.rotateEvent.bind(this)),this.map.on("rotateend",this.rotateEndEvent.bind(this)),this.map.on("dragend",this.dragEndEvent.bind(this)),this.map.on("movestart",this.moveStartEvent.bind(this)),this.map.on("move",this.moveEvent.bind(this)),this.map.on("moveend",this.moveEndEvent.bind(this)),this.map.on("remove",this.removeFromMap.bind(this)),this.refresh()}},{key:"refresh",value:function(){0!==this.features.length&&this.map&&this.redrawThematicFeatures(this.map.getBounds())}},{key:"_createCanvasContainer",value:function(){this.movingOffset=[0,0],this.mapContainer=this.map.getCanvasContainer(),this.div=document.createElement("div"),this.div.id=this.id,this.div.style.position="absolute";var e=this.map.getCanvasContainer(),t=this.map.getCanvas();this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px",this.div.style.width=t.style.width,this.div.style.height=t.style.height,this.div.className="themeLayer",this.div.width=parseInt(t.width),this.div.height=parseInt(t.height),e.appendChild(this.div),this.setOpacity(this.opacity),this.levelRenderer=new Ro,this.renderer=this.levelRenderer.init(this.div),this.renderer.clear()}},{key:"destroyFeatures",value:function(e){if(void 0===e&&(e=this.features),e){this.removeFeatures(e),Array.isArray(e)||(e=[e]);for(var t=e.length-1;t>=0;t--)e[t].destroy()}}},{key:"setVisibility",value:function(e){e!==this.visibility&&(this.visibility=e,this.display(e),this.redrawThematicFeatures(this.map.getBounds()))}},{key:"display",value:function(e){this.div.style.display=e?"block":"none"}},{key:"setOpacity",value:function(e){if(e!==this.opacity){this.opacity=e;var r=this.div;j.modifyDOMElement(r,null,null,null,null,null,null,e),null!==this.map&&t().Evented.prototype.fire("changelayer",{layer:this,property:"opacity"})}}},{key:"addFeatures",value:function(e){}},{key:"removeFeatures",value:function(e){var r=this;if(e){if(e===r.features)return r.removeAllFeatures();j.isArray(e)||"function"==typeof e||(e=[e]);for(var n=[],o=0;o<r.features.length;o++){var i=r.features[o];if(e&&"function"==typeof e)e(i)&&r.features.splice(o--,1);else-1===j.indexOf(e,i)?n.push(i):r.features.splice(o--,1)}for(var a=[],s=0,l=this.features.length;s<l;s++)i=this.features[s],a.push(i);this.features=[],this.addFeatures(a),this.renderer&&this.redrawThematicFeatures(this.map.getBounds());var u=0==n.length;t().Evented.prototype.fire("featuresremoved",{features:n,succeed:u})}}},{key:"removeAllFeatures",value:function(){this.renderer&&this.renderer.clear(),this.features=[],t().Evented.prototype.fire("featuresremoved",{features:[],succeed:!0})}},{key:"getFeatures",value:function(e){for(var t=this.features.length,r=[],n=0;n<t;++n)(!e||e&&"function"==typeof e&&e(this.features[n]))&&r.push(this.features[n]);return r}},{key:"getFeatureBy",value:function(e,t){var r=null;for(var n in this.features)if(this.features[n][e]===t){r=this.features[n];break}return r}},{key:"getFeatureById",value:function(e){return this.getFeatureBy("id",e)}},{key:"getFeaturesByAttribute",value:function(e,t){var r,n=[];for(var o in this.features)(r=this.features[o])&&r.attributes&&r.attributes[e]===t&&n.push(r);return n}},{key:"redrawThematicFeatures",value:function(e){}},{key:"on",value:function(e,t,r){return this.renderer?this.renderer.on(e,t):this.map.on(e,t),this}},{key:"off",value:function(e,t,r){return this.renderer?this.renderer.un(e,t):this.map.off(e,t),this}},{key:"addTFEvents",value:function(){for(var e=this.TFEvents,t=e.length,r=0;r<t;r++)this.renderer.on(e[r][0],e[r][1])}},{key:"getLocalXY",value:function(e){var r,n=this.map;if(e instanceof U||e instanceof kr){var o=n.project(new(t().LngLat)(e.x,e.y));r=[o.x,o.y]}if(e instanceof A){var i=n.project(new(t().LngLat)(e.lon,e.lat));r=[i.x,i.y]}return r}},{key:"toiClientFeature",value:function(e){j.isArray(e)||(e=[e]);for(var t=[],r=0;r<e.length;r++)if(e[r]instanceof Rr)t.push(e[r].toFeature());else if(e[r]instanceof Be)t.push(e[r]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e[r].type)){var n=new vr;t=t.concat(n.read(e[r]))}else{if(!e[r].geometry||!e[r].geometry.parts)throw new Error("features's type is not be supported.");t.push(Lo.fromJson(e[r]).toFeature())}return t}},{key:"toFeature",value:function(e){return this.toiClientFeature(e)}},{key:"moveEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.div.style.transform="",this.redrawThematicFeatures(this.map.getBounds()),this._show())}},{key:"moveStartEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){this.startPitch=this.map.getPitch(),this.startBearing=this.map.getBearing();var e=this.map.project(new(t().LngLat)(0,0));this.startMoveX=e.x,this.startMoveY=e.y}}},{key:"moveEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){if(!this.rotating&&!this.zooming){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,r=-this.map.getBearing()+this.startBearing,n=this.map.project(new(t().LngLat)(0,0)),o=n.x-this.startMoveX,i=n.y-this.startMoveY;this.div.style.transform="rotateX("+e+"deg) rotateZ("+r+"deg) translate3d("+o+"px, "+i+"px, 0px)"}}else this.redrawThematicFeatures(this.map.getBounds())}},{key:"zoomStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!0,this._hide())}},{key:"zoomEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!1,this._show())}},{key:"rotateStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!0)}},{key:"rotateEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing;this.div.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg)"}}},{key:"rotateEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!1,this._show())}},{key:"dragEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&this._hide()}},{key:"resizeEvent",value:function(){this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getCanvas();this.div.style.width=e.style.width,this.div.style.height=e.style.height,this.div.width=parseInt(e.width),this.div.height=parseInt(e.height),this.renderer.resize()}},{key:"removeFromMap",value:function(){this.mapContainer.removeChild(this.div),this.removeAllFeatures()}},{key:"moveTo",value:function(e,t){var r=document.getElementById(this.div.id);if(t=void 0===t||t){var n=document.getElementById(e);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(e);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"_hide",value:function(){this.renderer.painter.root.style.display="none"}},{key:"_show",value:function(){this.renderer.painter.root.style.display="block"}}])&&Io(r.prototype,n),o&&Io(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function No(e){"@babel/helpers - typeof";return(No="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Do(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fo(){return(Fo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Uo(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Bo(e,t){return(Bo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Go(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Uo(e);if(t){var o=Uo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===No(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Uo(e){return(Uo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bo(e,t)}(a,Mo);var r,n,o,i=Go(a);function a(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e,r)).chartsSetting=r.chartsSetting||{},n.themeFields=r.themeFields||null,n.overlayWeightField=r.overlayWeightField||null,n.isOverLay=void 0===r.isOverLay||r.isOverLay,n.charts=r.charts||[],n.cache=r.cache||{},n.chartsType=t,n}return r=a,(n=[{key:"setChartsType",value:function(e){this.chartsType=e,this.redraw()}},{key:"addFeatures",value:function(e){!1!==t().Evented.prototype.fire("beforefeaturesadded",{features:e})&&(this.features=this.toiClientFeature(e),this.renderer&&this.redrawThematicFeatures(this.map.getBounds()))}},{key:"redrawThematicFeatures",value:function(){this.clearCache(),this.renderer.clearAll();for(var e=this.features,t=0,r=e.length;t<r;t++){var n=e[t],o=this.cache,i=n.id;if(!o[i]){o[i]=i;var a=this.createThematicFeature(n);a&&this.overlayWeightField&&n.attributes[this.overlayWeightField]&&!isNaN(n.attributes[this.overlayWeightField])&&(a.__overlayWeight=n.attributes[this.overlayWeightField]),a&&this.charts.push(a)}}this.drawCharts()}},{key:"createThematicFeature",value:function(e){var t;return Cr[this.chartsType]&&this.themeFields&&this.chartsSetting&&(t=new Cr[this.chartsType](e,this,this.themeFields,this.chartsSetting)),!!t&&(t.assembleShapes(),t)}},{key:"drawCharts",value:function(){if(this.renderer){var e=this.charts;if(this.overlayWeightField&&e.sort(function(e,t){return void 0===e.__overlayWeight&&void 0===t.__overlayWeight?0:void 0!==e.__overlayWeight&&void 0===t.__overlayWeight?-1:void 0===e.__overlayWeight&&void 0!==t.__overlayWeight?1:void 0!==e.__overlayWeight&&void 0!==t.__overlayWeight?parseFloat(e.__overlayWeight)<parseFloat(t.__overlayWeight)?1:-1:0}),this.isOverLay)for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r],i=o.resetLocation(),a=o.chartBounds,s=[{x:a.left,y:a.top},{x:a.left,y:a.bottom},{x:a.right,y:a.bottom},{x:a.right,y:a.top},{x:a.left,y:a.top}],l=!1;if(0!==r)for(var u=0;u<t.length;u++)if(this.isQuadrilateralOverLap(s,t[u])){l=!0;break}if(!l){t.push(s);for(var c=o.shapes,f=0,p=c.length;f<p;f++)c[f].refOriginalPosition=i,this.renderer.addShape(c[f])}}else for(var h=0,y=e.length;h<y;h++)for(var d=e[h],b=d.resetLocation(),v=d.shapes,m=0,g=v.length;m<g;m++)v[m].refOriginalPosition=b,this.renderer.addShape(v[m]);this.renderer.render()}}},{key:"getShapesByFeatureID",value:function(e){var t=[],r=this.renderer.getAllShapes();if(!e)return r;for(var n=0,o=r.length;n<o;n++){var i=r[n];i.refDataID&&e===i.refDataID&&t.push(i)}return t}},{key:"isQuadrilateralOverLap",value:function(e,t){var r=e.length,n=t.length;if(5!==r||5!==n)return null;for(var o=!1,i=0;i<r;i++)if(this.isPointInPoly(e[i],t)){o=!0;break}for(var a=0;a<n;a++)if(this.isPointInPoly(t[a],e)){o=!0;break}for(var s=0;s<r-1&&!o;s++)for(var l=0;l<n-1;l++){if("SuperMap.Geometry.Point"===j.lineIntersection(e[s],e[s+1],t[l],t[l+1]).CLASS_NAME){o=!0;break}}return o}},{key:"isPointInPoly",value:function(e,t){for(var r=!1,n=-1,o=t.length,i=o-1;++n<o;i=n)(t[n].y<=e.y&&e.y<t[i].y||t[i].y<=e.y&&e.y<t[n].y)&&e.x<(t[i].x-t[n].x)*(e.y-t[n].y)/(t[i].y-t[n].y)+t[n].x&&(r=!r);return r}},{key:"isChartInMap",value:function(e,t){for(var r=e,n=!1,o=0,i=t.length;o<i;o++){var a=t[o];if(a.x>=r.left&&a.x<=r.right&&a.y>=r.top&&a.y<=r.bottom){n=!0;break}}return n}},{key:"clearCache",value:function(){this.cache={},this.charts=[]}},{key:"removeFeatures",value:function(e){this.clearCache(),Fo(Uo(a.prototype),"removeFeatures",this).call(this,e)}},{key:"removeAllFeatures",value:function(){this.clearCache(),Fo(Uo(a.prototype),"removeAllFeatures",this).call(this)}},{key:"redraw",value:function(){return this.clearCache(),!!this.renderer&&(this.redrawThematicFeatures(this.map.getBounds()),!0)}},{key:"clear",value:function(){this.renderer&&(this.renderer.clearAll(),this.renderer.refresh()),this.removeAllFeatures(),this.clearCache()}}])&&Do(r.prototype,n),o&&Do(r,o),Object.defineProperty(r,"prototype",{writable:!1}),a}();function Vo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ho=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="SuperMap.Feature.ShapeParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}])&&Vo(t.prototype,r),n&&Vo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function zo(e){"@babel/helpers - typeof";return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qo(){return(qo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qo(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Yo(e,t){return(Yo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Xo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Qo(e);if(t){var o=Qo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===zo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Qo(e){return(Qo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Zo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yo(e,t)}(i,Ho);var t,r,n,o=Xo(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).x=isNaN(e)?0:e,r.y=isNaN(t)?0:t,r.r=6,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Point",r}return t=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,qo(Qo(i.prototype),"destroy",this).call(this)}}])&&Wo(t.prototype,r),n&&Wo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ko(e){"@babel/helpers - typeof";return(Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ei(){return(ei="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ni(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ti(e,t){return(ti=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ri(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ni(e);if(t){var o=ni(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ko(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ni(e){return(ni=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ti(e,t)}(i,Ho);var t,r,n,o=ri(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).pointList=e,t.CLASS_NAME="SuperMap.Feature.ShapeParameters.Line",t}return t=i,(r=[{key:"destroy",value:function(){this.pointList=null,ei(ni(i.prototype),"destroy",this).call(this)}}])&&$o(t.prototype,r),n&&$o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ii(e){"@babel/helpers - typeof";return(ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ai(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function si(){return(si="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ci(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function li(e,t){return(li=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ui(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ci(e);if(t){var o=ci(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ii(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ci(e){return(ci=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&li(e,t)}(i,Ho);var t,r,n,o=ui(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).pointList=e,t.holePolygonPointLists=null,t.CLASS_NAME="SuperMap.Feature.ShapeParameters.Polygon",t}return t=i,(r=[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,si(ci(i.prototype),"destroy",this).call(this)}}])&&ai(t.prototype,r),n&&ai(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function pi(e){"@babel/helpers - typeof";return(pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yi(){return(yi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function di(e,t){return(di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=vi(e);if(t){var o=vi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===pi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function vi(e){return(vi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&di(e,t)}(i,Ho);var t,r,n,o=bi(i);function i(e,t,r,n){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this,e,t,r,n)).x=isNaN(e)?0:e,a.y=isNaN(e)?0:t,a.width=isNaN(r)?0:r,a.height=isNaN(n)?0:n,a.CLASS_NAME="SuperMap.Feature.ShapeParameters.Rectangle",a}return t=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,yi(vi(i.prototype),"destroy",this).call(this)}}])&&hi(t.prototype,r),n&&hi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function gi(e){"@babel/helpers - typeof";return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Oi(){return(Oi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Si(e,t){return(Si=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Pi(e);if(t){var o=Pi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===gi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Pi(e){return(Pi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Si(e,t)}(i,Ho);var t,r,n,o=_i(i);function i(e,t,r,n,a,s,l){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(u=o.call(this,e,t,r,n,a,s,l)).x=isNaN(e)?0:e,u.y=isNaN(t)?0:t,u.r=isNaN(r)?0:r,u.startAngle=isNaN(n)?0:n,u.endAngle=isNaN(a)?0:a,u.r0=isNaN(s)?0:s,u.clockWise=l,u.CLASS_NAME="SuperMap.Feature.ShapeParameters.Sector",u}return t=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,Oi(Pi(i.prototype),"destroy",this).call(this)}}])&&wi(t.prototype,r),n&&wi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ei(e){"@babel/helpers - typeof";return(Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ki(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ji(){return(ji="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ri(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Ci(e,t){return(Ci=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ti(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ri(e);if(t){var o=Ri(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ei(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ri(e){return(Ri=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ai=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ci(e,t)}(i,Ho);var t,r,n,o=Ti(i);function i(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t,r)).x=e,n.y=t,n.text=r,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Label",n}return t=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,ji(Ri(i.prototype),"destroy",this).call(this)}}])&&ki(t.prototype,r),n&&ki(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Li(e){"@babel/helpers - typeof";return(Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ii(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mi(){return(Mi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Ni(e,t){return(Ni=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Di(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Fi(e);if(t){var o=Fi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Li(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Fi(e){return(Fi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ni(e,t)}(i,Ho);var t,r,n,o=Di(i);function i(e,t,r,n,a,s,l,u,c){var f;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(f=o.call(this,e,t,r,n,a,s,l,u,c)).x=e,f.y=t,f.image=r,f.width=n,f.height=a,f.sx=s,f.sy=l,f.sWidth=u,f.sHeight=c,f.CLASS_NAME="SuperMap.Feature.ShapeParameters.Image",f}return t=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,Mi(Fi(i.prototype),"destroy",this).call(this)}}])&&Ii(t.prototype,r),n&&Ii(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Gi(e){"@babel/helpers - typeof";return(Gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ui(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ji(){return(Ji="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Vi(e,t){return(Vi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Hi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=zi(e);if(t){var o=zi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Gi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function zi(e){return(zi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vi(e,t)}(i,Ho);var t,r,n,o=Hi(i);function i(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t,r)).x=isNaN(e)?0:e,n.y=isNaN(t)?0:t,n.r=isNaN(r)?0:r,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Circle",n}return t=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,Ji(zi(i.prototype),"destroy",this).call(this)}}])&&Ui(t.prototype,r),n&&Ui(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function qi(e){"@babel/helpers - typeof";return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xi(){return(Xi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ki(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Qi(e,t){return(Qi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Zi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ki(e);if(t){var o=Ki(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===qi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ki(e){return(Ki=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qi(e,t)}(i,Vn);var t,r,n,o=Zi(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smicpoint",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPoint",t}return t=i,(r=[{key:"destroy",value:function(){this.type=null,Xi(Ki(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;e.arc(t.x+r[0],t.y+r[1],t.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition;return e.__rect?e.__rect:(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+r[0]-e.r-t/2),y:Math.round(e.y+r[1]-e.r-t/2),width:2*e.r+t,height:2*e.r+t},e.__rect)}}])&&Yi(t.prototype,r),n&&Yi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ea(e){"@babel/helpers - typeof";return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ta(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ra(){return(ra="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ia(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function na(e,t){return(na=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ia(e);if(t){var o=ia(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ea(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ia(e){return(ia=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var aa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&na(e,t)}(i,Vn);var t,r,n,o=oa(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smictext",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicText",t}return t=i,(r=[{key:"destroy",value:function(){this.type=null,ra(ia(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=this.style;if(t&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),void 0!==n.text&&!1!==n.text){e.save(),this.doClip(e),this.setContext(e,n),this.setTransform(e),n.textFont&&(e.font=n.textFont),e.textAlign=n.textAlign||"start",e.textBaseline=n.textBaseline||"middle";var o,i=(n.text+"").split("\n"),a=cn.Util_area.getTextHeight("ZH",n.textFont),s=this.getRectNoRotation(n),l=n.x+r[0];o="top"==n.textBaseline?s.y:"bottom"==n.textBaseline?s.y+a:s.y+a/2;for(var u=n.x+r[0],c=n.y+r[1],f=0,p=i.length;f<p;f++){switch(n.labelRect&&(e.fillRect(s.x-2,s.y,s.width+4,s.height),e.fillStyle=n.strokeColor,e.strokeRect(s.x-2,s.y,s.width+4,s.height),e.fillStyle=n.textColor),n.brushType){case"stroke":this.setCtxGlobalAlpha(e,"stroke",n),n.textRotation&&0!==n.textRotation?(e.save(),e.translate(u,c),e.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?e.strokeText(i[f],0,a*f,n.maxWidth):e.strokeText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?e.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth):e.strokeText(i[f],0,a*(f+1)-s.height):n.maxWidth?e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),e.restore()):n.maxWidth?e.strokeText(i[f],l,o,n.maxWidth):e.strokeText(i[f],l,o),this.setCtxGlobalAlpha(e,"reset",n);break;case"both":n.textRotation&&0!==n.textRotation?(e.save(),e.translate(u,c),e.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*f),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*f),this.setCtxGlobalAlpha(e,"reset",n)):"bottom"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(e,"reset",n)):n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(e,"reset",n)),e.restore()):n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],l,o,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],l,o,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],l,o),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],l,o),this.setCtxGlobalAlpha(e,"reset",n));break;default:this.setCtxGlobalAlpha(e,"fill",n),n.textRotation&&0!==n.textRotation?(e.save(),e.translate(u,c),e.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?e.fillText(i[f],0,a*f,n.maxWidth):e.fillText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?e.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth):e.fillText(i[f],0,a*(f+1)-s.height):n.maxWidth?e.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):e.fillText(i[f],0,a*(f+1)-s.height/2-a/2),e.restore()):n.maxWidth?e.fillText(i[f],l,o,n.maxWidth):e.fillText(i[f],l,o),this.setCtxGlobalAlpha(e,"reset",n)}o+=a}e.restore()}}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;for(var t,r,n,o,i=this.getTextBackground(e,!0),a=0,s=i.length;a<s;a++){var l=i[a];0==a?(t=l[0],n=l[0],r=l[1],o=l[1]):(l[0]<t&&(t=l[0]),l[0]>n&&(n=l[0]),l[1]<r&&(r=l[1]),l[1]>o&&(o=l[1]))}return e.__rect={x:t,y:r,width:n-t,height:o-r},e.__rect}},{key:"getRectNoRotation",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition,n=cn.Util_area.getTextHeight("ZH",e.textFont),o=cn.Util_area.getTextWidth(e.text,e.textFont),i=cn.Util_area.getTextHeight(e.text,e.textFont),a=e.x+r[0];"end"==e.textAlign||"right"==e.textAlign?a-=o:"center"==e.textAlign&&(a-=o/2),t="top"==e.textBaseline?e.y+r[1]:"bottom"==e.textBaseline?e.y+r[1]-i:e.y+r[1]-i/2;var s,l=!1;if(e.maxWidth){var u=parseInt(e.maxWidth);u<o&&(s=o,l=!0,o=u),a=e.x+r[0],"end"==e.textAlign||"right"==e.textAlign?a-=o:"center"==e.textAlign&&(a-=o/2)}e.textFont&&(e.textFont.toLowerCase().indexOf("italic")>-1&&(o+=!0===l?n/3*(o/s):n/3));return{x:a,y:t,width:o,height:i}}},{key:"getTextBackground",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;if(!t&&e.__textBackground)return e.__textBackground;var n=this.getRectNoRotation(e),o=e.x+r[0],i=e.y+r[1],a=[];if(e.textRotation&&0!==e.textRotation){var s=e.textRotation,l=this.getRotatedLocation(n.x,n.y,o,i,s),u=this.getRotatedLocation(n.x+n.width,n.y,o,i,s),c=this.getRotatedLocation(n.x+n.width,n.y+n.height,o,i,s),f=this.getRotatedLocation(n.x,n.y+n.height,o,i,s);a.push(l),a.push(u),a.push(c),a.push(f)}else{var p=[n.x,n.y],h=[n.x+n.width,n.y],y=[n.x+n.width,n.y+n.height],d=[n.x,n.y+n.height];a.push(p),a.push(h),a.push(y),a.push(d)}return e.__textBackground=a,e.__textBackground}},{key:"getRotatedLocation",value:function(e,t,r,n,o){var i,a,s=new Array;return t=-t,n=-n,o=-o,i=(e-r)*Math.cos(o/180*Math.PI)-(t-n)*Math.sin(o/180*Math.PI)+r,a=(e-r)*Math.sin(o/180*Math.PI)+(t-n)*Math.cos(o/180*Math.PI)+n,s[0]=i,s[1]=-a,s}}])&&ta(t.prototype,r),n&&ta(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function sa(e){"@babel/helpers - typeof";return(sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function la(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ua(){return(ua="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pa(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ca(e,t){return(ca=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=pa(e);if(t){var o=pa(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===sa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function pa(e){return(pa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ha=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ca(e,t)}(i,Vn);var t,r,n,o=fa(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smiccircle",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicCircle",t}return t=i,(r=[{key:"destroy",value:function(){this.type=null,ua(pa(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.x+r[0],o=t.y+r[1];return e.moveTo(n+t.r,o),e.arc(n,o,t.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition,n=e.x+r[0],o=e.y+r[1],i=e.r;return t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(n-i-t/2),y:Math.round(o-i-t/2),width:2*i+t,height:2*i+t},e.__rect}}])&&la(t.prototype,r),n&&la(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ya(e){"@babel/helpers - typeof";return(ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function da(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ba(){return(ba="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ga(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function va(e,t){return(va=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ma(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ga(e);if(t){var o=ga(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ya(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ga(e){return(ga=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&va(e,t)}(i,Vn);var t,r,n,o=ma(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smicpolygon",t.holePolygonPointLists=null,t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPolygon",t}return t=i,(r=[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,ba(ga(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.style;t&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),e.save(),this.setContext(e,r),this.setTransform(e);var n=!1;"fill"!=r.brushType&&"both"!=r.brushType&&void 0!==r.brushType||(e.beginPath(),"dashed"==r.lineType||"dotted"==r.lineType||"dot"==r.lineType||"dash"==r.lineType||"dashdot"==r.lineType||"longdash"==r.lineType||"longdashdot"==r.lineType?this.buildPath(e,{lineType:"solid",lineWidth:r.lineWidth,pointList:r.pointList}):(this.buildPath(e,r),n=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",r),e.fill(),this.setCtxGlobalAlpha(e,"reset",r)),r.lineWidth>0&&("stroke"==r.brushType||"both"==r.brushType)&&(n||(e.beginPath(),this.buildPath(e,r)),this.setCtxGlobalAlpha(e,"stroke",r),e.stroke(),this.setCtxGlobalAlpha(e,"reset",r)),this.drawText(e,r,this.style);var o=j.cloneObject(r);if(o.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var i=this.holePolygonPointLists,a=i.length,s=0;s<a;s++){var l=i[s];o.pointList=l,e.globalCompositeOperation="destination-out",n=!1,"fill"!=o.brushType&&"both"!=o.brushType&&void 0!==o.brushType||(e.beginPath(),"dashed"==o.lineType||"dotted"==o.lineType||"dot"==o.lineType||"dash"==o.lineType||"dashdot"==o.lineType||"longdash"==o.lineType||"longdashdot"==o.lineType?this.buildPath(e,{lineType:"solid",lineWidth:o.lineWidth,pointList:o.pointList}):(this.buildPath(e,o),n=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",o),e.fill(),this.setCtxGlobalAlpha(e,"reset",o)),o.lineWidth>0&&("stroke"==o.brushType||"both"==o.brushType)?(n||(e.beginPath(),this.buildPath(e,o)),e.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(e,"stroke",o),e.stroke(),this.setCtxGlobalAlpha(e,"reset",o)):e.globalCompositeOperation="source-over"}e.restore()}},{key:"buildPath",value:function(e,t){t.showShadow&&(e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.pointList;if(!(n.length<2))if(t.smooth&&"spline"!==t.smooth){var o,i,a,s=cn.SUtil_smoothBezier(n,t.smooth,!0,t.smoothConstraint,r);e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var l=n.length,u=0;u<l;u++)o=s[2*u],i=s[2*u+1],a=[n[(u+1)%l][0]+r[0],n[(u+1)%l][1]+r[1]],e.bezierCurveTo(o[0],o[1],i[0],i[1],a[0],a[1])}else if("spline"===t.smooth&&(n=cn.SUtil_smoothSpline(n,!0,null,r)),t.lineType&&"solid"!=t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=c;var f=t.lineWidth||1,p=f,h=f;"dashed"===t.lineType&&(p*=5,h*=5,t.lineCap&&"butt"!==t.lineCap&&(p-=f,h+=f)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(p=1,h+=f),"dot"===t.lineType&&(h*=4,t.lineCap&&"butt"!==t.lineCap&&(p=1,h+=f)),"dash"===t.lineType&&(p*=4,h*=4,t.lineCap&&"butt"!==t.lineCap&&(p-=f,h+=f)),"longdash"===t.lineType&&(p*=8,h*=4,t.lineCap&&"butt"!==t.lineCap&&(p-=f,h+=f)),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var y=1;y<n.length;y++)cn.SUtil_dashedLineTo(e,n[y-1][0]+r[0],n[y-1][1]+r[1],n[y][0]+r[0],n[y][1]+r[1],f,[p,h]);cn.SUtil_dashedLineTo(e,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],f,[p,h])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var d=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=d;var b=t.lineWidth||1,v=b,m=b,g=b,w=b;"dashdot"===t.lineType&&(v*=4,m*=4,w*=4,t.lineCap&&"butt"!==t.lineCap&&(v-=b,m+=b,g=1,w+=b)),"longdashdot"===t.lineType&&(v*=8,m*=4,w*=4,t.lineCap&&"butt"!==t.lineCap&&(v-=b,m+=b,g=1,w+=b)),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var O=1;O<n.length;O++)cn.SUtil_dashedLineTo(e,n[O-1][0]+r[0],n[O-1][1]+r[1],n[O][0]+r[0],n[O][1]+r[1],b,[v,m,g,w]);cn.SUtil_dashedLineTo(e,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],b,[v,m,g,w])}}else{e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var S=1;S<n.length;S++)e.lineTo(n[S][0]+r[0],n[S][1]+r[1]);e.lineTo(n[0][0]+r[0],n[0][1]+r[1])}}},{key:"getRect",value:function(e,t){var r;if(t?r=t:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),r=this.refOriginalPosition),e.__rect)return e.__rect;for(var n,o=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MAX_VALUE,s=Number.MIN_VALUE,l=e.pointList,u=0,c=l.length;u<c;u++)l[u][0]+r[0]<o&&(o=l[u][0]+r[0]),l[u][0]+r[0]>i&&(i=l[u][0]+r[0]),l[u][1]+r[1]<a&&(a=l[u][1]+r[1]),l[u][1]+r[1]>s&&(s=l[u][1]+r[1]);return n="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(o-n/2),y:Math.round(a-n/2),width:i-o+n,height:s-a+n},e.__rect}}])&&da(t.prototype,r),n&&da(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Oa(e){"@babel/helpers - typeof";return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _a(){return(_a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ea(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Pa(e,t){return(Pa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ea(e);if(t){var o=Ea(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Oa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ea(e){return(Ea=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ka=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pa(e,t)}(i,Vn);var t,r,n,o=xa(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).brushTypeOnly="stroke",t.textPosition="end",t.type="smicbroken-line",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicBrokenLine",t}return t=i,(r=[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,_a(Ea(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.pointList;if(!(n.length<2)){var o=Math.min(t.pointList.length,Math.round(t.pointListLength||t.pointList.length));if(t.smooth&&"spline"!==t.smooth){var i,a,s,l=cn.SUtil_smoothBezier(n,t.smooth,!1,t.smoothConstraint,r);e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var u=0;u<o-1;u++)i=l[2*u],a=l[2*u+1],s=[n[u+1][0]+r[0],n[u+1][1]+r[1]],e.bezierCurveTo(i[0],i[1],a[0],a[1],s[0],s[1])}else if("spline"===t.smooth&&(o=(n=cn.SUtil_smoothSpline(n,null,null,r)).length),t.lineType&&"solid"!==t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t.lineWidth||1,f=c,p=c;"dashed"===t.lineType&&(f*=5,p*=5,t.lineCap&&"butt"!==t.lineCap&&(f-=c,p+=c)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(f=1,p+=c),"dot"===t.lineType&&(p*=4,t.lineCap&&"butt"!==t.lineCap&&(f=1,p+=c)),"dash"===t.lineType&&(f*=4,p*=4,t.lineCap&&"butt"!==t.lineCap&&(f-=c,p+=c)),"longdash"===t.lineType&&(f*=8,p*=4,t.lineCap&&"butt"!==t.lineCap&&(f-=c,p+=c)),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var h=1;h<o;h++)cn.SUtil_dashedLineTo(e,n[h-1][0]+r[0],n[h-1][1]+r[1],n[h][0]+r[0],n[h][1]+r[1],c,[f,p])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var y=t.lineWidth||1,d=y,b=y,v=y,m=y;"dashdot"===t.lineType&&(d*=4,b*=4,m*=4,t.lineCap&&"butt"!==t.lineCap&&(d-=y,b+=y,v=1,m+=y)),"longdashdot"===t.lineType&&(d*=8,b*=4,m*=4,t.lineCap&&"butt"!==t.lineCap&&(d-=y,b+=y,v=1,m+=y)),y=(t.lineWidth||1)*("dashed"===t.lineType?5:1),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var g=1;g<o;g++)cn.SUtil_dashedLineTo(e,n[g-1][0]+r[0],n[g-1][1]+r[1],n[g][0]+r[0],n[g][1]+r[1],y,[d,b,v,m])}}else{e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var w=1;w<o;w++)e.lineTo(n[w][0]+r[0],n[w][1]+r[1])}}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return wa.prototype.getRect.apply(this,[e,t])}}])&&Sa(t.prototype,r),n&&Sa(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ja(e){"@babel/helpers - typeof";return(ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ca(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ta(){return(Ta="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=La(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Ra(e,t){return(Ra=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Aa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=La(e);if(t){var o=La(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ja(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function La(e){return(La=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ia=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ra(e,t)}(i,Vn);var t,r,n,o=Aa(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smicrectangle",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicRectangle",t}return t=i,(r=[{key:"destroy",value:function(){this.type=null,Ta(La(i.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r,n,o,i,a,s=this.refOriginalPosition,l=t.x+s[0],u=t.y+s[1],c=t.width,f=t.height,p=t.radius;"number"==typeof p?r=n=o=i=p:p instanceof Array?1===p.length?r=n=o=i=p[0]:2===p.length?(r=o=p[0],n=i=p[1]):3===p.length?(r=p[0],n=i=p[1],o=p[2]):(r=p[0],n=p[1],o=p[2],i=p[3]):r=n=o=i=0,r+n>c&&(r*=c/(a=r+n),n*=c/a),o+i>c&&(o*=c/(a=o+i),i*=c/a),n+o>f&&(n*=f/(a=n+o),o*=f/a),r+i>f&&(r*=f/(a=r+i),i*=f/a),e.moveTo(l+r,u),e.lineTo(l+c-n,u),0!==n&&e.quadraticCurveTo(l+c,u,l+c,u+n),e.lineTo(l+c,u+f-o),0!==o&&e.quadraticCurveTo(l+c,u+f,l+c-o,u+f),e.lineTo(l+i,u+f),0!==i&&e.quadraticCurveTo(l,u+f,l,u+f-i),e.lineTo(l,u+r),0!==r&&e.quadraticCurveTo(l,u,l+r,u)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;t.radius?this._buildRadiusPath(e,t):(e.moveTo(t.x+r[0],t.y+r[1]),e.lineTo(t.x+r[0]+t.width,t.y+r[1]),e.lineTo(t.x+r[0]+t.width,t.y+r[1]+t.height),e.lineTo(t.x+r[0],t.y+r[1]+t.height),e.lineTo(t.x+r[0],t.y+r[1])),e.closePath()}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition;return e.__rect?e.__rect:(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+r[0]-t/2),y:Math.round(e.y+r[1]-t/2),width:e.width+t,height:e.height+t},e.__rect)}}])&&Ca(t.prototype,r),n&&Ca(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ma(e){"@babel/helpers - typeof";return(Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Na(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Da(){return(Da="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ga(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Fa(e,t){return(Fa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ba(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ga(e);if(t){var o=Ga(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ma(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ga(e){return(Ga=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ua=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fa(e,t)}(i,Vn);var t,r,n,o=Ba(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smicsector",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicSector",t}return t=i,(r=[{key:"destroy",value:function(){this.type=null,Da(Ga(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.x+r[0],o=t.y+r[1],i=t.r0||0,a=t.r,s=t.startAngle,l=t.endAngle,u=t.clockWise||!1;s=cn.Util_math.degreeToRadian(s),l=cn.Util_math.degreeToRadian(l),u||(s=-s,l=-l);var c=cn.Util_math.cos(s),f=cn.Util_math.sin(s);e.moveTo(c*i+n,f*i+o),e.lineTo(c*a+n,f*a+o),e.arc(n,o,a,s,l,!u),e.lineTo(cn.Util_math.cos(l)*i+n,cn.Util_math.sin(l)*i+o),0!==i&&e.arc(n,o,i,l,s,u),e.closePath()}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition,r=cn.Util_vector.create(),n=cn.Util_vector.create(),o=cn.Util_vector.create(),i=cn.Util_vector.create(),a=e.x+t[0],s=e.y+t[1],l=e.r0||0,u=e.r,c=cn.Util_math.degreeToRadian(e.startAngle),f=cn.Util_math.degreeToRadian(e.endAngle),p=e.clockWise;return p||(c=-c,f=-f),l>1?cn.Util_computeBoundingBox.arc(a,s,l,c,f,!p,r,o):(r[0]=o[0]=a,r[1]=o[1]=s),cn.Util_computeBoundingBox.arc(a,s,u,c,f,!p,n,i),cn.Util_vector.min(r,r,n),cn.Util_vector.max(o,o,i),e.__rect={x:r[0],y:r[1],width:o[0]-r[0],height:o[1]-r[1]},e.__rect}}])&&Na(t.prototype,r),n&&Na(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ja(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Va=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shapeParameters=t,this.CLASS_NAME="SuperMap.Feature.ShapeFactory"}var t,r,n;return t=e,n=[{key:"transformStyle",value:function(e){var t={},r=["normal","normal","normal","12","arial,sans-serif"],n=[!0,!1];for(var o in e)switch(o){case"fill":n[0]=e[o];break;case"fillColor":t.color=e[o];break;case"stroke":n[1]=e[o];break;case"strokeWidth":t.lineWidth=e[o];break;case"strokeLinecap":t.lineCap=e[o];break;case"strokeLineJoin":t.lineJoin=e[o];break;case"strokeDashstyle":t.lineType=e[o];break;case"pointRadius":t.r=e[o];break;case"label":t.text=e[o];break;case"labelRect":t.labelRect=e[o];break;case"fontColor":t.textColor=e[o];break;case"fontStyle":r[0]=e[o];break;case"fontVariant":r[1]=e[o];break;case"fontWeight":r[2]=e[o];break;case"fontSize":var i="";e[o]&&e[o].toString().indexOf("px")<0&&(i="px"),r[3]=e[o]+i;break;case"fontFamily":r[4]=e[o];break;case"fontOpacity":t.opacity=e[o];break;case"labelPosition":t.textPosition=e[o];break;case"labelAlign":t.textAlign=e[o];break;case"labelBaseline":t.textBaseline=e[o];break;case"labelRotation":t.textRotation=e[o];break;default:t[o]=e[o]}return t.textFont=r.join(" "),!0===n[0]&&!1===n[1]?t.brushType="fill":!1===n[0]&&!0===n[1]?t.brushType="stroke":!0===n[0]&&!0===n[1]?t.brushType="both":t.brushType="fill",null==t.lineWidth&&(t.lineWidth=1),t}},{key:"Background",value:function(e,t,r){var n=r||{},o=new mi(t[0],t[3],Math.abs(t[2]-t[0]),Math.abs(t[3]-t[1]));return o.style={fillColor:"#f3f3f3"},n.backgroundStyle&&j.copyAttributesWithClip(o.style,n.backgroundStyle),n.backgroundRadius&&(o.style.radius=n.backgroundRadius),o.clickable=!1,o.hoverable=!1,e.createShape(o)}},{key:"GraphAxis",value:function(e,t,r,n){var o=t,i=r||{},a=[],s=[],l=!!i.useXReferenceLine&&i.useXReferenceLine,u=i.axisYTick&&!isNaN(i.axisYTick)?i.axisYTick:0,c=[],f=[];if(0==u){if(f.push([o[0],o[3]-5]),f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var p=parseInt(i.axis3DParameter),h=[o[0]-p,o[1]+p];i.axisUseArrow?(c.push([h[0]+1.5,h[1]-7.5]),c.push([h[0]-1,h[1]+1]),c.push([h[0]+7.5,h[1]-1.5]),f.push([h[0],h[1]])):f.push([h[0],h[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}else{var y=Math.abs(o[1]-o[3])/u,d=o[3];f.push([o[0],d-5]);for(var b=0;b<u;b++){if(f.push([o[0],d]),f.push([o[0]-5,d]),f.push([o[0],d]),l){var v=new oi([[o[0],d],[o[2],d]]);v.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},v.clickable=!1,v.hoverable=!1,i.xReferenceLineStyle&&j.copyAttributesWithClip(v.style,i.xReferenceLineStyle),a.push(e.createShape(v))}d+=y}if(f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var m=parseInt(i.axis3DParameter),g=[o[0]-m,o[1]+m];i.axisUseArrow?(c.push([g[0]+1.5,g[1]-7.5]),c.push([g[0]-1,g[1]+1]),c.push([g[0]+7.5,g[1]-1.5]),f.push([g[0],g[1]])):f.push([g[0],g[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}if(i.axisUseArrow){var w=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]],O=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]],S=new fi(w);S.style={fillColor:"#008acd"},j.copyAttributesWithClip(S.style,i.axisStyle),s.push(e.createShape(S));var _=new fi(O);if(_.style={fillColor:"#008acd"},j.copyAttributesWithClip(_.style,i.axisStyle),s.push(e.createShape(_)),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var P=new fi(c);P.style={fillColor:"#008acd"},j.copyAttributesWithClip(P.style,i.axisStyle),s.push(e.createShape(P))}}var x=new oi(f);x.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},i.axisStyle&&j.copyAttributesWithClip(x.style,i.axisStyle),x.clickable=!1,x.hoverable=!1;var E=[e.createShape(x)],k=[];if(i.axisYLabels&&i.axisYLabels.length&&i.axisYLabels.length>0){var C=i.axisYLabels,T=C.length,R=[0,0];if(i.axisYLabelsOffset&&i.axisYLabelsOffset.length&&(R=i.axisYLabelsOffset),1==T){var A=new Ai(o[0]-5+R[0],o[3]+R[1],C[0]);A.style={labelAlign:"right"},i.axisYLabelsStyle&&j.copyAttributesWithClip(A.style,i.axisYLabelsStyle),A.clickable=!1,A.hoverable=!1,k.push(e.createShape(A))}else for(var L=o[3],I=Math.abs(o[1]-o[3])/(T-1),M=0;M<T;M++){var N=new Ai(o[0]-5+R[0],L+R[1],C[M]);N.style={labelAlign:"right"},i.axisYLabelsStyle&&j.copyAttributesWithClip(N.style,i.axisYLabelsStyle),N.clickable=!1,N.hoverable=!1,k.push(e.createShape(N)),L+=I}}var D=[];if(i.axisXLabels&&i.axisXLabels.length&&i.axisXLabels.length>0){var F=i.axisXLabels,B=F.length,G=[0,0];if(i.axisXLabelsOffset&&i.axisXLabelsOffset.length&&(G=i.axisXLabelsOffset),n&&n.xPositions&&n.xPositions.length&&n.xPositions.length==B)for(var U=n.xPositions,J=0;J<B;J++){var V=new Ai(U[J]+G[0],o[1]+G[1],F[J]);V.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&j.copyAttributesWithClip(V.style,i.axisXLabelsStyle),V.clickable=!1,V.hoverable=!1,D.push(e.createShape(V))}else if(1==B){var H=new Ai(o[0]-5+G[0],o[1]+G[0],F[0]);H.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&j.copyAttributesWithClip(H.style,i.axisXLabelsStyle),H.clickable=!1,H.hoverable=!1,D.push(e.createShape(H))}else for(var z=o[0],W=Math.abs(o[2]-o[0])/(B-1),q=0;q<B;q++){var Y=new Ai(z+G[0],o[1]+G[1],F[q]);Y.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&j.copyAttributesWithClip(Y.style,i.axisXLabelsStyle),Y.clickable=!1,Y.hoverable=!1,D.push(e.createShape(Y)),z+=W}}return a.concat(E).concat(k).concat(D).concat(s)}},{key:"ShapeStyleTool",value:function(e,t,r,n,o,i){var a=e||{};if(t&&j.copyAttributesWithClip(a,t),r&&r.length&&void 0!==o&&!isNaN(o)&&o>=0&&r[o]&&j.copyAttributesWithClip(a,r[o]),n&&n.length&&void 0!==i)for(var s=n,l=s.length,u=parseFloat(i),c=0;c<l;c++)if(s[c].start<=u&&u<s[c].end){j.copyAttributesWithClip(a,s[c].style);break}return a}}],(r=[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(t){if(t&&(this.shapeParameters=t),!this.shapeParameters)return null;var r=this.shapeParameters;if(r instanceof Zo){var n=new Object;n.x=r.x,n.y=r.y,n.r=r.r,n=j.copyAttributesWithClip(n,r.style,["x","y"]);var o=new $i;return o.style=e.transformStyle(n),o.highlightStyle=e.transformStyle(r.highlightStyle),j.copyAttributesWithClip(o,r,["x","y","style","highlightStyle"]),o}if(r instanceof oi){if(!r.pointList)return null;var i=new Object;i.pointList=r.pointList,i=j.copyAttributesWithClip(i,r.style,["pointList"]);var a=new ka;return a.style=e.transformStyle(i),a.highlightStyle=e.transformStyle(r.highlightStyle),j.copyAttributesWithClip(a,r,["pointList","style","highlightStyle"]),a}if(r instanceof fi){if(!r.pointList)return null;var s=new Object;s.pointList=r.pointList,s=j.copyAttributesWithClip(s,r.style,["pointList"]);var l=new wa;return l.style=e.transformStyle(s),l.highlightStyle=e.transformStyle(r.highlightStyle),j.copyAttributesWithClip(l,r,["pointList","style","highlightStyle"]),l}if(r instanceof mi){if(!r.x&&!r.y&!r.width&!r.height)return null;var u=new Object;u.x=r.x,u.y=r.y,u.width=r.width,u.height=r.height,u=j.copyAttributesWithClip(u,r.style,["x","y","width","height"]);var c=new Ia;return c.style=e.transformStyle(u),c.highlightStyle=e.transformStyle(r.highlightStyle),j.copyAttributesWithClip(c,r,["x","y","width","height","style","highlightStyle"]),c}if(r instanceof xi){var f=new Object;f.x=r.x,f.y=r.y,f.r=r.r,f.startAngle=r.startAngle,f.endAngle=r.endAngle,r.r0&&(f.r0=r.r0),r.clockWise&&(f.clockWise=r.clockWise),f=j.copyAttributesWithClip(f,r.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var p=new Ua;return p.style=e.transformStyle(f),p.highlightStyle=e.transformStyle(r.highlightStyle),j.copyAttributesWithClip(p,r,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),p}if(r instanceof Ai){var h=new Object;h.x=r.x,h.y=r.y,h.text=r.text,h=j.copyAttributesWithClip(h,r.style,["x","y","text"]);var y=new aa;return y.style=e.transformStyle(h),y.highlightStyle=e.transformStyle(r.highlightStyle),j.copyAttributesWithClip(y,r,["x","y","text","style","highlightStyle"]),y}if(r instanceof Bi){var d=new Object;d.x=r.x,d.y=r.y,r.image&&(d.image=r.image),r.width&&(d.width=r.width),r.height&&(d.height=r.height),r.sx&&(d.sx=r.sx),r.sy&&(d.sy=r.sy),r.sWidth&&(d.sWidth=r.sWidth),r.sHeight&&(d.sHeight=r.sHeight),d=j.copyAttributesWithClip(d,r.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var b=new Qn;return b.style=e.transformStyle(d),b.highlightStyle=e.transformStyle(r.highlightStyle),j.copyAttributesWithClip(b,r,["x","y","image","width","height","style","highlightStyle"]),b}if(r instanceof Wi){var v=new Object;v.x=r.x,v.r=r.r,v.y=r.y,v=j.copyAttributesWithClip(v,r.style,["x","y","r"]);var m=new ha;return m.style=e.transformStyle(v),m.highlightStyle=e.transformStyle(r.highlightStyle),j.copyAttributesWithClip(m,r,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),m}return null}}])&&Ja(t.prototype,r),n&&Ja(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ha(e){"@babel/helpers - typeof";return(Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function za(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wa(){return(Wa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Za(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function qa(e,t){return(qa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ya(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Za(e);if(t){var o=Za(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Xa(this,r)}}function Xa(e,t){if(t&&("object"===Ha(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Qa(e)}function Qa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Za(e){return(Za=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ka=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qa(e,t)}(i,Cr);var t,r,n,o=Ya(i);function i(e,t,r,n,a){var s;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),s=o.call(this,e,t),!e.geometry)return Xa(s);if(!(e.geometry instanceof b))return Xa(s);s.dataBounds=e.geometry.getBounds(),s.nodesClipPixel=2,s.isHoverAble=!0,s.isMultiHover=!0,s.isClickAble=!0,s.highlightStyle=null,s.shapeOptions={},s.style=r||{},s.CLASS_NAME="SuperMap.Feature.Theme.Vector",s.style=r||{},n&&j.copyAttributesWithClip(Qa(s),n,["shapeOptions","dataBounds"]),a&&j.copyAttributesWithClip(s.shapeOptions,a);var l=e.geometry;return s.lonlat=s.dataBounds.getCenterLonLat(),s.location=s.getLocalXY(s.lonlat),l instanceof we?s.lineToTF(l):l instanceof he?s.lineToTF(l):l instanceof ae||(l instanceof ee?s.multiPointToTF(l):l instanceof $e?s.multiLineStringToTF(l):l instanceof it?s.multiPolygonToTF(l):l instanceof Ee?s.polygonToTF(l):l instanceof Y||(l instanceof U?s.pointToTF(l):l instanceof jn?s.rectangleToTF(l):l instanceof kr&&s.geoTextToTF(l))),s}return t=i,(r=[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,Wa(Za(i.prototype),"destroy",this).call(this)}},{key:"lineToTF",value:function(e){for(var t=e.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<t.length;s++){var l=t[s];if(n=[],r=this.getLocalXY(l),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var u=i[i.length-1];if(Math.abs(u[0]-n[0])<=a&&Math.abs(u[1]-n[1])<=a)continue}i.push(n)}if(i.length<2)return null;var c=new Object;(c=j.copyAttributesWithClip(c,this.style,["pointList"])).pointList=i;var f=new ka({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=this.location,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&j.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}},{key:"multiPointToTF",value:function(e){for(var t=e.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<t.length;s++){var l=t[s];if(n=[],r=this.getLocalXY(l),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var u=i[i.length-1];if(Math.abs(u[0]-n[0])<=a&&Math.abs(u[1]-n[1])<=a)continue}i.push(n);var c=new Object;c.r=6,(c=j.copyAttributesWithClip(c,this.style)).x=n[0],c.y=n[1];var f=new $i({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=o,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&j.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}}},{key:"multiLineStringToTF",value:function(e){for(var t=e.components,r=0;r<t.length;r++){var n=t[r];this.lineToTF(n)}}},{key:"multiPolygonToTF",value:function(e){for(var t=e.components,r=0;r<t.length;r++){var n=t[r];this.polygonToTF(n)}}},{key:"pointToTF",value:function(e){var t=this.location,r=this.getLocalXY(e),n=new Object;n.r=6,(n=j.copyAttributesWithClip(n,this.style)).x=r[0]-t[0],n.y=r[1]-t[1];var o=new $i({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=t,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&j.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"polygonToTF",value:function(e){for(var t=e.components,r=[],n=[],o=this.location,i=[],a=[],s=[],l=this.nodesClipPixel,u=0;u<t.length;u++){var c=t[u].components;if(0===u){i=[];for(var f=0;f<c.length;f++){if(n=[],r=this.getLocalXY(c[f]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var p=i[i.length-1];if(Math.abs(p[0]-n[0])<=l&&Math.abs(p[1]-n[1])<=l)continue}i.push(n)}}else{a=[];for(var h=0;h<c.length;h++){if(n=[],r=this.getLocalXY(c[h]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],a.length>0){var y=a[a.length-1];if(Math.abs(y[0]-n[0])<=l&&Math.abs(y[1]-n[1])<=l)continue}a.push(n)}}a.length<2||s.push(a)}if(!(i.length<2)){var d={};(d=j.copyAttributesWithClip(d,this.style,["pointList"])).pointList=i;var b=new wa({style:d,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(b.highlightStyle=this.highlightStyle),b.refOriginalPosition=this.location,b.refDataID=this.data.id,b.isHoverByRefDataID=this.isMultiHover,s.length>0&&(b.holePolygonPointLists=s),this.shapeOptions&&j.copyAttributesWithClip(b,this.shapeOptions),this.shapes.push(b)}}},{key:"rectangleToTF",value:function(e){var t=this.location,r=new A(e.x,e.y),n=this.layer.map.getResolution(),o=this.getLocalXY(r),i=new Object;i.r=6,(i=j.copyAttributesWithClip(i,this.style)).x=o[0]-t[0],i.y=o[1]-t[1]-2*e.width/n,i.width=e.width/n,i.height=e.height/n;var a=new Ia({style:i,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(a.highlightStyle=this.highlightStyle),a.refOriginalPosition=t,a.refDataID=this.data.id,a.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&j.copyAttributesWithClip(a,this.shapeOptions),this.shapes.push(a)}},{key:"geoTextToTF",value:function(e){var t=this.location,r=this.getLocalXY(e),n=new Object;n.r=6,(n=j.copyAttributesWithClip(n,this.style,["x","y","text"])).x=r[0]-t[0],n.y=r[1]-t[1],n.text=e.text;var o=new aa({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=t,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&j.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"updateAndAddShapes",value:function(){var e=this.getLocalXY(this.lonlat);this.location=e;for(var t=this.layer.renderer,r=0,n=this.shapes.length;r<n;r++){var o=this.shapes[r];o.refOriginalPosition=e,t.addShape(o)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}])&&za(t.prototype,r),n&&za(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function $a(e){"@babel/helpers - typeof";return($a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function es(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ts(e,t){return(ts=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=os(e);if(t){var o=os(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===$a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ns(e)}(this,r)}}function ns(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function os(e){return(os=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var is=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ts(e,t)}(a,Mo);var r,n,o,i=rs(a);function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).name=null,r.style=null,r.highlightStyle=null,r.nodesClipPixel=2,r.isHoverAble=!1,r.isMultiHover=!1,r.isClickAble=!0,r.isAllowFeatureStyle=!1,j.extend(ns(r),t),r.cache=t.cache||{},r.cacheFields=t.cacheFields||[],r.maxCacheCount=t.maxCacheCount||0,r.isCustomSetMaxCacheCount=void 0!==t.isCustomSetMaxCacheCount&&t.isCustomSetMaxCacheCount,r}return r=a,(n=[{key:"addFeatures",value:function(e){t().Evented.prototype.fire("beforefeaturesadded",{features:e}),this.features=this.toiClientFeature(e),this.isCustomSetMaxCacheCount||(this.maxCacheCount=5*this.features.length),this.renderer&&this.redrawThematicFeatures(this.map.getBounds())}},{key:"removeFeatures",value:function(e){this.clearCache(),Mo.prototype.removeFeatures.call(this,e)}},{key:"removeAllFeatures",value:function(){this.clearCache(),Mo.prototype.removeAllFeatures.apply(this,arguments)}},{key:"redrawThematicFeatures",value:function(e){this.clearCache();var t=this.renderer.getHoverOne(),r=null;t&&t.refDataID&&(r=t.refDataID),this.renderer.clearAll();for(var n=this.features,o=this.cache,i=this.cacheFields,a=this.map.getZoom(),s=this.maxCacheCount,l=0,u=n.length;l<u;l++){var c,f=n[l].id+"_zoom_"+a.toString();if(o[f])o[f].updateAndAddShapes();else{if((c=this.createThematicFeature(n[l])).getShapesCount()<1)continue;if(o[f]=c,i.push(f),i.length>s){var p=i[0];i.splice(0,1),delete o[p]}}}if(this.renderer.render(),r&&this.isHoverAble&&this.isMultiHover){var h=this.getShapesByFeatureID(r);this.renderer.updateHoverShapes(h)}}},{key:"createThematicFeature",value:function(e){var t=j.copyAttributesWithClip(this.style);e.style&&!0===this.isAllowFeatureStyle&&(t=j.copyAttributesWithClip(e.style));var r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=Va.transformStyle(this.highlightStyle);for(var n=new Ka(e,this,Va.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"clearCache",value:function(){this.cache={},this.cacheFields=[]}},{key:"clear",value:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()}},{key:"getCacheCount",value:function(){return this.cacheFields.length}},{key:"setMaxCacheCount",value:function(e){isNaN(e)||(this.maxCacheCount=e,this.isCustomSetMaxCacheCount=!0)}},{key:"getShapesByFeatureID",value:function(e){var t=[],r=this.renderer.getAllShapes();if(!e)return r;for(var n=0,o=r.length;n<o;n++){var i=r[n];i.refDataID&&e===i.refDataID&&t.push(i)}return t}}])&&es(r.prototype,n),o&&es(r,o),Object.defineProperty(r,"prototype",{writable:!1}),a}();function as(e){"@babel/helpers - typeof";return(as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ss(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ls(){return(ls="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ps(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function us(e,t){return(us=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function cs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ps(e);if(t){var o=ps(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===as(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fs(e)}(this,r)}}function fs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ps(e){return(ps=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var hs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&us(e,t)}(a,is);var r,n,o,i=cs(a);function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).isOverLay=!0,r.isAvoid=!0,r.themeField=null,r.styleGroups=null,j.extend(fs(r),t),r.defaultStyle={fontColor:"#000000",fontOpacity:1,fontSize:"12px",fontStyle:"normal",fontWeight:"normal",labelAlign:"cm",labelXOffset:0,labelYOffset:0,labelRotation:0,fill:!1,fillColor:"#ee9900",fillOpacity:.4,stroke:!1,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",labelRect:!0,labelSelect:!0,_isGeoTextStrategyStyle:!0},r.getPxBoundsMode=0,r.labelFeatures=[],r}return r=a,(n=[{key:"redrawThematicFeatures",value:function(e){if(this.features.length>0&&0==this.labelFeatures.length)for(var t=this.setLabelsStyle(this.features),r=0,n=t.length;r<n;r++)this.labelFeatures.push(t[r]);this.features=this.getDrawnLabels(this.labelFeatures),ls(ps(a.prototype),"redrawThematicFeatures",this).call(this,e)}},{key:"removeFeatures",value:function(e){this.labelFeatures=[],ls(ps(a.prototype),"removeFeatures",this).call(this,e)}},{key:"removeAllFeatures",value:function(){this.labelFeatures=[],ls(ps(a.prototype),"removeAllFeatures",this).call(this,arguments)}},{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=Va.transformStyle(this.highlightStyle);for(var n=new Ka(e,this,Va.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getDrawnLabels",value:function(e){for(var t,r,n,o,i=[],a=[],s={labelAlign:"cm",labelXOffset:0,labelYOffset:0},l=this.map,u=l.getZoom(),c=l.getCanvas(),f={x:parseFloat(c.style.width),y:parseFloat(c.style.height)},p=0,h=e.length;p<h;p++){((r=e[p]).isStyleChange||void 0===r.isStyleChange)&&(r=this.setStyle(r));var y=this.getLabelPxLocation(r);if(y.x>=0&&y.x<=f.x&&y.y>=0&&y.y<=f.y){if(r.style.minZoomLevel>-1&&u<=r.style.minZoomLevel)continue;if(r.style.maxZoomLevel>-1&&u>r.style.maxZoomLevel)continue;var d=null;r.isStyleChange?(r.isStyleChange=null,d=this.calculateLabelBounds(r,y)):d=r.geometry.bsInfo.w&&r.geometry.bsInfo.h?this.calculateLabelBounds2(r,y):this.calculateLabelBounds(r,y);var b=new I(0,f.y,f.x,0),v=d.length;if(this.isAvoid){var m=this.getAvoidInfo(b,d);if(m){if("left"===m.aspectW){r.style.labelXOffset+=m.offsetX;for(var g=0;g<v;g++)d[g].x+=m.offsetX}else if("right"===m.aspectW){r.style.labelXOffset+=-m.offsetX;for(var w=0;w<v;w++)d[w].x+=-m.offsetX}if("top"===m.aspectH){r.style.labelYOffset+=m.offsetY;for(var O=0;O<v;O++)d[O].y+=m.offsetY}else if("bottom"===m.aspectH){r.style.labelYOffset+=-m.offsetY;for(var S=0;S<v;S++)d[S].y+=-m.offsetY}r.isStyleChange=!0}}if(this.isOverLay){var _=!1;if(0!=p)for(var P=0;P<a.length;P++)if(this.isQuadrilateralOverLap(d,a[P])){_=!0;break}if(_)continue;a.push(d)}for(var x=[],E=0;E<v-1;E++)x.push(l.unproject(d[E]));var k=x[3],C=x[1],T=new I(k.lng,k.lat,C.lng,C.lat).getCenterLonLat(),R=new kr(T.lon,T.lat,r.attributes[this.themeField]);R.calculateBounds(),n=j.cloneObject(r.style),o=j.cloneObject(j.copyAttributes(n,s)),(t=new Be(R,r.attributes,o)).id=r.id,t.fid=r.fid,i.push(t)}}return i}},{key:"getStyleByData",value:function(e){var t=e;if(t.style=j.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=j.copyAttributes(t.style,this.style),this.themeField&&this.styleGroups&&t.attributes){var r=this.themeField,n=t.attributes,o=this.styleGroups,i=!1,a=null;for(var s in n)if(r===s){i=!0,a=n[s];break}if(i)for(var l=0,u=o.length;l<u;l++)if(a>=o[l].start&&a<o[l].end){var c=o[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),t.style=j.copyAttributes(t.style,c)}t.style.label=t.attributes[this.themeField]}return t.style}},{key:"setLabelsStyle",value:function(e){for(var t,r=[],n=0,o=e.length;n<o;n++){var i=e[n];if("SuperMap.Geometry.GeoText"!==i.geometry.CLASS_NAME)return e;(i.geometry.bsInfo.w||i.geometry.bsInfo.h)&&(i.geometry.bsInfo.w=null,i.geometry.bsInfo.h=null,i.geometry.labelWTmp=null),(t=this.setStyle(i)).layer=this.layer,r.push(t)}return r}},{key:"setStyle",value:function(e){var t=e;if(t.style=j.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=j.copyAttributes(t.style,this.style),this.groupField&&this.styleGroups&&t.attributes){var r=this.groupField,n=t.attributes,o=this.styleGroups,i=!1,a=null;for(var s in n)if(r===s){i=!0,a=n[s];break}if(i)for(var l=0,u=o.length;l<u;l++)if(a>=o[l].start&&a<o[l].end){var c=o[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),t.style=j.copyAttributes(t.style,c)}}return t.style.label=t.geometry.text,t}},{key:"getLabelPxLocation",value:function(e){var r=e.geometry,n=e.style,o=r.getCentroid(),i=this.map.project(new(t().LngLat)(o.x,o.y)),a=new(t().Point)(i.x,i.y);if(n.labelXOffset||n.labelYOffset){var s=isNaN(n.labelXOffset)?0:n.labelXOffset,l=isNaN(n.labelYOffset)?0:n.labelYOffset,u=a.add(new(t().Point)(s,-l));return new(t().Point)(u.x,u.y)}return new(t().Point)(a.x,a.y)}},{key:"calculateLabelBounds",value:function(e,t){var r=e.geometry,n=null,o=null;if(0==this.getPxBoundsMode)n=r.getLabelPxBoundsByText(t,e.style);else{if(1!==this.getPxBoundsMode)return null;o=this.getLabelInfo(e.geometry.getCentroid(),e.style),n=r.getLabelPxBoundsByLabel(t,o.w,o.h,e.style)}var i=[];return i=e.style.labelRotation%180==0?[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.right,y:n.bottom},{x:n.left,y:n.bottom},{x:n.left,y:n.top}]:this.rotationBounds(n,t,e.style.labelRotation),r.bounds=new I(i[1].x,i[3].y,i[2].x,i[4].y),i}},{key:"calculateLabelBounds2",value:function(e,t){var r,n,o,i,a,s=e.geometry.bsInfo,l=e.style,u=j.cloneObject(t);if(l.labelAlign&&"cm"!==l.labelAlign)switch(l.labelAlign){case"lt":u.x+=s.w/2,u.y+=s.h/2;break;case"lm":u.x+=s.w/2;break;case"lb":u.x+=s.w/2,u.y-=s.h/2;break;case"ct":u.y+=s.h/2;break;case"cb":u.y-=s.h/2;break;case"rt":u.x-=s.w/2,u.y+=s.h/2;break;case"rm":u.x-=s.w/2;break;case"rb":u.x-=s.w/2,u.y-=s.h/2}n=u.x-s.w/2,o=u.y+s.h/2,a=l.fontStyle&&"italic"===l.fontStyle?u.x+s.w/2+parseInt(parseFloat(l.fontSize)/2):u.x+s.w/2,i=u.y-s.h/2,r=new I(n,o,a,i);var c=[];return c=l.labelRotation%180==0?[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.right,y:r.bottom},{x:r.left,y:r.bottom},{x:r.left,y:r.top}]:this.rotationBounds(r,t,l.labelRotation),e.geometry.bounds=new I(c[1].x,c[3].y,c[2].x,c[4].y),c}},{key:"getLabelInfo",value:function(e,t){var r={l:"left",r:"right",t:"top",b:"bottom"},n={l:0,r:-1,t:0,b:-1};t=j.extend({fontColor:"#000000",labelAlign:"cm"},t);var o=this.getLocalXY(e),i=0;if(t.labelXOffset||t.labelYOffset){var a=isNaN(t.labelXOffset)?0:t.labelXOffset,s=isNaN(t.labelYOffset)?0:t.labelYOffset;o[0]+=a,o[1]-=s}var l=document.createElement("canvas");l.globalAlpha=0,l.lineWidth=1;var u=l.getContext("2d");u.fillStyle=t.fontColor,u.globalAlpha=t.fontOpacity||1;var c,f,p,h=[t.fontStyle?t.fontStyle:"normal","normal",t.fontWeight?t.fontWeight:"normal",t.fontSize?t.fontSize:"1em",t.fontFamily?t.fontFamily:"sans-serif"].join(" "),y=t.label.split("\n"),d=y.length;if(u.fillText){u.font=h,u.textAlign=r[t.labelAlign[0]]||"center",u.textBaseline=r[t.labelAlign[1]]||"middle",null==(c=n[t.labelAlign[1]])&&(c=-.5),f=u.measureText("Mg").height||u.measureText("xx").width,o[1]+=f*c*(d-1);for(var b=0;b<d;b++)i<(p=u.measureText(y[b]).width)&&(i=p)}else if(u.mozDrawText){u.mozTextStyle=h,null==(c=n[t.labelAlign[1]])&&(c=-.5),f=u.mozMeasureText("xx"),o[1]+=f*(1+c*d);for(var v=0;v<d;v++)i<(p=u.measureText(y[v]).width)&&(i=p)}var m={};return i?(m.w=i,m.h=t.fontSize,m.rows=y.length,m):null}},{key:"rotationBounds",value:function(e,r,n){var o=new(t().Point)(e.left,e.top),i=new(t().Point)(e.right,e.top),a=new(t().Point)(e.right,e.bottom),s=new(t().Point)(e.left,e.bottom),l=[];l.push(this.getRotatedLocation(o.x,o.y,r.x,r.y,n)),l.push(this.getRotatedLocation(i.x,i.y,r.x,r.y,n)),l.push(this.getRotatedLocation(a.x,a.y,r.x,r.y,n)),l.push(this.getRotatedLocation(s.x,s.y,r.x,r.y,n));for(var u=[],c=0;c<l.length;c++)u.push({x:l[c].x,y:l[c].y});return u.push({x:l[0].x,y:l[0].y}),u}},{key:"getRotatedLocation",value:function(e,t,r,n,o){var i,a,s={};return t=-t,n=-n,o=-o,i=(e-r)*Math.cos(o/180*Math.PI)-(t-n)*Math.sin(o/180*Math.PI)+r,a=(e-r)*Math.sin(o/180*Math.PI)+(t-n)*Math.cos(o/180*Math.PI)+n,s.x=i,s.y=-a,s}},{key:"getAvoidInfo",value:function(e,t){if(5!==t.length)return null;for(var r=[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.right,y:e.bottom},{x:e.left,y:e.bottom},{x:e.left,y:e.top}],n=!1,o=r.length,i=t.length,a=0,s=0,l="",u="",c=0;c<o-1;c++)for(var f=0;f<i-1;f++){"SuperMap.Geometry.Point"===j.lineIntersection(r[c],r[c+1],t[f],t[f+1]).CLASS_NAME&&(p(t[f]),p(t[f+1]),n=!0)}return n?{aspectW:u,aspectH:l,offsetX:a,offsetY:s}:null;function p(t){if(!e.contains(t.x,t.y)){if(t.y<e.top){var r=Math.abs(e.top-t.y);r>s&&(s=r,l="top")}if(t.y>e.bottom){var n=Math.abs(t.y-e.bottom);n>s&&(s=n,l="bottom")}if(t.x<e.left){var o=Math.abs(e.left-t.x);o>a&&(a=o,u="left")}if(t.x>e.right){var i=Math.abs(t.x-e.right);i>a&&(a=i,u="right")}}}}},{key:"isQuadrilateralOverLap",value:function(e,t){var r=e.length,n=t.length;if(5!==r||5!==n)return null;for(var o=!1,i=0;i<r;i++)if(this.isPointInPoly(e[i],t)){o=!0;break}for(var a=0;a<n;a++)if(this.isPointInPoly(t[a],e)){o=!0;break}for(var s=0;s<r-1&&!o;s++)for(var l=0;l<n-1;l++){if("SuperMap.Geometry.Point"===j.lineIntersection(e[s],e[s+1],t[l],t[l+1]).CLASS_NAME){o=!0;break}}return o}},{key:"isPointInPoly",value:function(e,t){for(var r=!1,n=-1,o=t.length,i=o-1;++n<o;i=n)(t[n].y<=e.y&&e.y<t[i].y||t[i].y<=e.y&&e.y<t[n].y)&&e.x<(t[i].x-t[n].x)*(e.y-t[n].y)/(t[i].y-t[n].y)+t[n].x&&(r=!r);return r}}])&&ss(r.prototype,n),o&&ss(r,o),Object.defineProperty(r,"prototype",{writable:!1}),a}(),ys=function(){try{return mapv}catch(e){return{}}}(),ds=function(e){var t;if(e===Tt.METER)t=1;else if(e===Tt.DEGREE)t=2*Math.PI*6378137/360;else if(e===Tt.KILOMETER)t=.001;else if(e===Tt.INCH)t=1/.025399999918;else{if(e!==Tt.FOOT)return t;t=.3048}return t};function bs(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[-180,180],o=n[1],i=n[0],a=o-i;return e===o&&t?e:e===i&&r?e:0===((e-i)%a+a)%a&&t?o:((e-i)%a+a)%a+i}function vs(e){var t=parseInt(e),r=parseInt(60*(e-t)),n=parseInt(60*(60*(e-t)-r));return r=0===parseInt(r/10)?"0".concat(r):r,n=0===parseInt(n/10)?"0".concat(n):n,"".concat(t,"Â°").concat(r,"'").concat(n)}function ms(e){"@babel/helpers - typeof";return(ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ws(){return(ws="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xs(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Os(e,t){return(Os=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ss(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=xs(e);if(t){var o=xs(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _s(this,r)}}function _s(e,t){if(t&&("object"===ms(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ps(e)}function Ps(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xs(e){return(xs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Es=ys.baiduMapLayer?ys.baiduMapLayer.__proto__:Function,ks=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Os(e,t)}(a,Es);var r,n,o,i=Ss(a);function a(e,t,r,n){var o;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o=i.call(this,e,r,n),!Es)return _s(o);o.map=e;var s=Ps(o);return n=n||{},s.init(n),s.argCheck(n),o.canvasLayer=t,o.stopAniamation=!1,o.animation=n.animation,o.clickEvent=o.clickEvent.bind(Ps(o)),o.mousemoveEvent=o.mousemoveEvent.bind(Ps(o)),o.bindMapEvent(),o.bindEvent(),o._expectShow=!0,o}return r=a,(n=[{key:"clickEvent",value:function(e){var t=e.point;ws(xs(a.prototype),"clickEvent",this).call(this,t,e)}},{key:"mousemoveEvent",value:function(e){var t=e.point;ws(xs(a.prototype),"mousemoveEvent",this).call(this,t,e)}},{key:"bindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.on("click",this.clickEvent),this.options.methods.mousemove&&e.on("mousemove",this.mousemoveEvent))}},{key:"unbindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.off("click",this.clickEvent),this.options.methods.mousemove&&e.off("mousemove",this.mousemoveEvent))}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"addData",value:function(e,t){var r=e;e&&e.get&&(r=e.get()),this.dataSet.add(r),this.update({options:t})}},{key:"update",value:function(e){var t=e||{},r=t.data;r&&r.get&&(r=r.get()),void 0!=r&&this.dataSet.set(r),ws(xs(a.prototype),"update",this).call(this,{options:t.options})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(e){if(this.dataSet){var t=this.dataSet.get({filter:function(t){return null==e||"function"!=typeof e||!e(t)}});this.dataSet.set(t),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"updateData",value:function(e,t){e&&e.get&&this.dataSet.set(e.get()),this.update({options:t})}},{key:"_canvasUpdate",value:function(e){var r=this.map;if(this.canvasLayer&&!this.stopAniamation){var n=this,o=n.options.animation,i=this.getContext();if(n.isEnabledTime()){if(void 0===e)return void this.clear(i);"2d"===this.context&&(i.save(),i.globalCompositeOperation="destination-out",i.fillStyle="rgba(0, 0, 0, .1)",i.fillRect(0,0,i.canvas.width,i.canvas.height),i.restore())}else this.clear(i);if("2d"===this.context)for(var a in n.options)i[a]=n.options[a];else i.clear(i.COLOR_BUFFER_BIT);if(!(n.options.minZoom&&r.getZoom()<n.options.minZoom||n.options.maxZoom&&r.getZoom()>n.options.maxZoom)){var s=r.getBounds(),l=s.getEast()-s.getWest(),u=s.getNorth()-s.getSouth(),c=l/this.canvasLayer.canvas.width,f=u/this.canvasLayer.canvas.height,p=ds("DEGREE")*c,h=r.getCenter(),y=r.project(h),d={transferCoordinate:function(e){if(r.transform.rotationMatrix||"2d"===n.context){var o=r.project(new(t().LngLat)(e[0],e[1]));return[o.x,o.y]}var i=[(e[0]-h.lng)/c,(h.lat-e[1])/f];return[i[0]+y.x,i[1]+y.y]}};void 0!==e&&(d.filter=function(t){var r=o.trails||10;return e&&t.time>e-r&&t.time<e});var b=n.dataSet.get(d);this.processData(b),"m"===n.options.unit?(n.options.size&&(n.options._size=n.options.size/p),n.options.width&&(n.options._width=n.options.width/p),n.options.height&&(n.options._height=n.options.height/p)):(n.options._size=n.options.size,n.options._height=n.options.height,n.options._width=n.options.width);var v=r.project(new(t().LngLat)(0,0));this.drawContext(i,b,n.options,v),n.options.updateCallback&&n.options.updateCallback(e)}}}},{key:"init",value:function(e){this.options=e,this.initDataRange(e),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"bindMapEvent",value:function(){this.mapEvent={resizeEvent:this.resizeEvent.bind(this),zoomStartEvent:this.zoomStartEvent.bind(this),zoomEndEvent:this.zoomEndEvent.bind(this),rotateStartEvent:this.rotateStartEvent.bind(this),rotateEvent:this.rotateEvent.bind(this),moveStartEvent:this.moveStartEvent.bind(this),rotateEndEvent:this.rotateEndEvent.bind(this),moveEvent:this.moveEvent.bind(this),moveEndEvent:this.moveEndEvent.bind(this),removeEvent:this.removeEvent.bind(this)},this.map.on("resize",this.mapEvent.resizeEvent),this.map.on("zoomstart",this.mapEvent.zoomStartEvent),this.map.on("zoomend",this.mapEvent.zoomEndEvent),this.map.on("rotatestart",this.mapEvent.rotateStartEvent),this.map.on("rotate",this.mapEvent.rotateEvent),this.map.on("rotateend",this.mapEvent.rotateEndEvent),this.map.on("movestart",this.mapEvent.moveStartEvent),this.map.on("move",this.mapEvent.moveEvent),this.map.on("moveend",this.mapEvent.moveEndEvent),this.map.on("remove",this.mapEvent.removeEvent)}},{key:"unbindMapEvent",value:function(){this.map.off("resize",this.mapEvent.resizeEvent),this.map.off("zoomstart",this.mapEvent.zoomStartEvent),this.map.off("zoomend",this.mapEvent.zoomEndEvent),this.map.off("rotatestart",this.mapEvent.rotateStartEvent),this.map.off("rotate",this.mapEvent.rotateEvent),this.map.off("rotateend",this.mapEvent.rotateEndEvent),this.map.off("movestart",this.mapEvent.moveStartEvent),this.map.off("move",this.mapEvent.moveEvent),this.map.off("moveend",this.mapEvent.moveEndEvent),this.map.off("remove",this.mapEvent.removeEvent)}},{key:"destroy",value:function(){this.unbindMapEvent(),this.unbindEvent(),this.clearData(),this.animator&&this.animator.stop(),this.animator=null,this.canvasLayer=null}},{key:"addAnimatorEvent",value:function(){}},{key:"removeEvent",value:function(){this.canvasLayer.mapContainer.removeChild(this.canvasLayer.canvas)}},{key:"resizeEvent",value:function(){this.canvasLayer.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.canvasLayer.canvas;e.style.position="absolute",e.style.top="0px",e.style.left="0px";var t="undefined"==typeof window?{}:window,r=this.canvasLayer.devicePixelRatio=t.devicePixelRatio||1;e.width=parseInt(this.map.getCanvas().style.width)*r,e.height=parseInt(this.map.getCanvas().style.height)*r,this.canvasLayer.mapVOptions.context&&"2d"!=this.canvasLayer.mapVOptions.context||e.getContext("2d").scale(r,r),e.style.width=this.map.getCanvas().style.width,e.style.height=this.map.getCanvas().style.height}},{key:"moveEndEvent",value:function(){this.stopAniamation=!1,this.getContext().canvas.style.transform="",this._canvasUpdate(),!0===this._expectShow&&this._show()}},{key:"moveStartEvent",value:function(){this.startPitch=this.map.getPitch(),this.startBearing=this.map.getBearing();var e=this.map.project(new(t().LngLat)(0,0));this.startMoveX=e.x,this.startMoveY=e.y,this.animation&&(this.stopAniamation=!0),this.rotating||this.zooming||(this._expectShow="none"!==this.canvasLayer.canvas.style.display,0!==this.map.getPitch()&&this._hide())}},{key:"moveEvent",value:function(){this.canvasLayer.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,r=-this.map.getBearing()+this.startBearing,n=this.map.project(new(t().LngLat)(0,0)),o=n.x-this.startMoveX,i=n.y-this.startMoveY;this.getContext().canvas.style.transform="rotateX("+e+"deg) rotateZ("+r+"deg) translate3d("+o+"px, "+i+"px, 0px)"}},{key:"zoomStartEvent",value:function(){this.zooming=!0,this._hide()}},{key:"zoomEndEvent",value:function(){this.zooming=!1}},{key:"rotateStartEvent",value:function(){this.rotating=!0,0!==this.map.getPitch()&&this._hide()}},{key:"rotateEvent",value:function(){this.canvasLayer.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing;this.getContext().canvas.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg)"}},{key:"rotateEndEvent",value:function(){this.rotating=!1}},{key:"clear",value:function(e){e&&e.clearRect&&e.clearRect(0,0,parseInt(this.map.getCanvas().style.width),parseInt(this.map.getCanvas().style.height))}},{key:"draw",value:function(){this._canvasUpdate()}},{key:"_hide",value:function(){this.canvasLayer.canvas.style.display="none"}},{key:"_show",value:function(){this.canvasLayer.canvas.style.display="block"}}])&&gs(r.prototype,n),o&&gs(r,o),Object.defineProperty(r,"prototype",{writable:!1}),a}();function js(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Cs=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=t,this.id=n.layerID?n.layerID:j.createUniqueID("mapvLayer_"),delete n.layerID,this.mapVOptions=n,this.dataSet=r,this.visibility=!0,this.map&&this.map.addLayer(this)}var t,r,n;return t=e,(r=[{key:"onAdd",value:function(e){this.map=e,this.renderer=new ks(this.map,this,this.dataSet,this.mapVOptions),this.canvas=this._createCanvas(),this.renderer._canvasUpdate(),this.mapContainer=e.getCanvasContainer(),this.mapContainer.appendChild(this.canvas),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px"}},{key:"removeFromMap",value:function(){this.mapContainer.removeChild(this.canvas),this.renderer.destroy()}},{key:"setVisibility",value:function(e){e!==this.visibility&&(this.visibility=e,e?this.show():this.hide())}},{key:"moveTo",value:function(e,t){var r=document.getElementById(this.canvas.id);if(t=void 0===t||t){var n=document.getElementById(e);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(e);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"getTopLeft",value:function(){var e,t=this.map;t&&(e=t.getBounds().getNorthWest());return e}},{key:"addData",value:function(e,t){this.renderer.addData(e,t)}},{key:"update",value:function(e){this.renderer.update(e)}},{key:"getData",value:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet}},{key:"removeData",value:function(e){this.renderer&&this.renderer.removeData(e)}},{key:"clearData",value:function(){this.renderer.clearData()}},{key:"show",value:function(){return this.renderer&&this.renderer._show(),this}},{key:"hide",value:function(){return this.renderer&&this.renderer._hide(),this}},{key:"_createCanvas",value:function(){var e=document.createElement("canvas");e.id=this.id,e.style.position="absolute",e.style.top="0px",e.style.left="0px";var t="undefined"==typeof window?{}:window,r=this.devicePixelRatio=t.devicePixelRatio||1;return e.width=parseInt(this.map.getCanvas().style.width)*r,e.height=parseInt(this.map.getCanvas().style.height)*r,this.mapVOptions.context&&"2d"!=this.mapVOptions.context||e.getContext("2d").scale(r,r),e.style.width=this.map.getCanvas().style.width,e.style.height=this.map.getCanvas().style.height,e}},{key:"setZIndex",value:function(e){this.canvas.style.zIndex=e}}])&&js(t.prototype,r),n&&js(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ts(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Rs=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.map=null,this.opacity=1,this.parseNumber=!1,this.enableHighlight=!1,this.highlight={color:"#ADA91E"},this.baseHeightField=null,this.height=null,this.heightField="height",this.themeField=this.heightField,this.showLegend=!0,this.legendTitle=null,this.legendTheme="light",this.legendOrientation="horizontal",this.legendPosition="bottom-right",this._highlightLayerId="".concat(this.id,"-highlightLayer"),this._extend(this,r)}var t,r,n;return t=e,(r=[{key:"setLayerOptions",value:function(e){return this._extend(this,e),this}},{key:"setHighlightStyleOptions",value:function(e){return this._extend(this.highlight,e),this}},{key:"setData",value:function(e,t){var r=this;return r.data=e,null!=t&&(r.parseNumber=t),r.parseNumber&&r.data&&r.data.features&&r.data.features.map(function(e){return r.baseHeightField&&e.properties[r.baseHeightField]&&(e.properties[r.baseHeightField]=parseFloat(e.properties[r.baseHeightField])),r.heightField&&e.properties[r.heightField]&&(e.properties[r.heightField]=parseFloat(e.properties[r.heightField])),e}),this}},{key:"getData",value:function(){return this.data}},{key:"addTo",value:function(e){return this.map=e,this.map?(this.show(),this):this}},{key:"show",value:function(e){return this._extend(this,e),this._addLayer(),this.enableHighlight&&this._addHighLightLayer(),this.showLegend&&(this.legend||(this.legend=this._createLegendControl()),this.map.addControl(this.legend,this.legendPosition)),this}},{key:"remove",value:function(){if(!this.map)return this;var e=this.id?this.id:"theme3DLayer";return this.map.getLayer(e)&&(this.map.off("mousemove",e,this._onMouseMove.bind(this)),this.map.on("mouseout",e,this._onMouseMove.bind(this)),this.map.removeLayer(e)),this.map.getLayer(this._highlightLayerId)&&(this._selectFeatureId=null,this.map.removeLayer(this._highlightLayerId)),this.legend&&this.map.removeControl(this.legend),this}},{key:"getLayerStyleOptions",value:function(){}},{key:"getHighlightStyleOptions",value:function(){}},{key:"_createLegendControl",value:function(e){var t=this;function r(){}return r.prototype.onAdd=function(r){this._map=r,this._container=document.createElement("div");var n="legend-light";"dark"===t.legendTheme&&(n="legend-dark");var o=" legend-horizontal";if("vertical"===t.legendOrientation&&(o=" legend-vertical"),this._container.className="mapboxgl-ctrl legend "+n+o,e)this._container.innerHTML=e;else{var i=" <div class='legend-title'>"+(t.legendTitle||"")+"</div>",a="<div class='legend-content'>"+(t._createLegendElement.call(t)||"")+"</div>";this._container.innerHTML=i+a}return t._appendLegendCSSStyle(),this._container},r.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map=void 0},new r}},{key:"_createLegendElement",value:function(){}},{key:"_addLayer",value:function(){var e=this.getLayerStyleOptions(),t=this.id?this.id:"theme3DLayer",r=this.sourceId=t+"Source";this.map.getSource(r)?(this.map.removeSource(r),this.map.addSource(r,{type:"geojson",data:this.data})):this.map.addSource(r,{type:"geojson",data:this.data}),this.map.addLayer({id:t,type:"fill-extrusion",source:r,paint:e}),this.map.moveLayer(t)}},{key:"_addHighLightLayer",value:function(){if(this.map){var e=this.map;e.addLayer({id:this._highlightLayerId,type:"fill-extrusion",source:this.sourceId,paint:this.getHighlightStyleOptions(),filter:["in","$id",""]}),this._selectFeatureId=null,e.on("mousemove",this.id,this._onMouseMove.bind(this)),e.on("mouseout",this.id,this._onMouseMove.bind(this))}}},{key:"_onMouseMove",value:function(e){var t=this,r=this.map,n=r.queryRenderedFeatures(e.point,{layers:[t.id]});if(t.highlight&&t.highlight.callback&&t.highlight.callback(n,e),!n||n.length<1)return t._clearHighlight.call(t),void(t._selectFeatureId=null);var o=n[0].id;t._selectFeatureId!==o&&(t._selectFeatureId=o,r.setFilter(t._highlightLayerId,["==","$id",t._selectFeatureId]))}},{key:"_clearHighlight",value:function(){this.map&&this.map.setFilter(this._highlightLayerId,["in","$id",""])}},{key:"_appendLegendCSSStyle",value:function(){var e=document.createElement("style");e.type="text/css";e.innerHTML="\n        .legend {\n            display: inline-block;\n            border-radius: 2px;\n            -moz-border-radius: 2px;\n            -webkit-border-radius: 2px;\n            font-size: 12px;\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n        }\n        .legend-light {\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n            box-shadow: 0px 0px 6px #bbbbbb;\n            -moz-box-shadow: 0px 6px 10px #bbbbbb;\n            -webkit-box-shadow: 0px 0px 6px #bbbbbb;\n        }\n        .legend-dark {\n            color: rgba(255, 255, 255, 0.8);\n            background-color: rgb(64, 64, 64);\n        }\n        .legend .legend-title {\n            min-height: 14px;\n            max-width: 500px;\n            padding:6px 10px;\n        }\n        .legend-light .legend-title {\n            color: rgba(0, 0, 0, 0.8);\n        }\n        .legend-dark .legend-title {\n            color: rgba(255, 255, 255, 0.8);\n        }\n        .legend-content{\n            padding:6px 10px;\n        }\n        "+this._legendCSSStyle(),document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_legendCSSStyle",value:function(){return"\n        .legend ul {\n            padding: 0;\n            margin: 0 16px;\n            height: 100%;\n            display: block;\n            list-style: none;\n        }\n\n        .legend li {\n            vertical-align: middle;\n        }\n\n        .legend li span:first-child {\n            vertical-align: middle;\n        }\n\n        .legend li span:last-child {\n            line-height: 28px;\n            max-width: 200px;\n            vertical-align: middle;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            -ms-text-overflow: ellipsis;\n        }\n\n        .legend-vertical li {\n            height: 28px;\n        }\n\n        .legend-vertical li span:first-child {\n            display: inline-block;\n            width: 60px;\n            height: 100%;\n        }\n\n        .legend-vertical li span:last-child {\n            display: inline-block;\n            margin-left: 16px;\n            height: 100%;\n        }\n\n        .legend-horizontal li {\n            height: 56px;\n            float: left;\n        }\n\n        .legend-horizontal li span:first-child {\n            display: block;\n            width: 100%;\n            height: 50%;\n        }\n\n        .legend-horizontal li span:last-child {\n            display: block;\n            vertical-align: middle;\n            width: 60px;\n            height: 50%;\n            text-align: center;\n        }\n        "}},{key:"_extend",value:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var r=Object.getOwnPropertyNames(arguments)[t];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(e[i]=n[i])}}}return e}}])&&Ts(t.prototype,r),n&&Ts(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function As(e){"@babel/helpers - typeof";return(As="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ls(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Is(e,t){return(Is=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ms(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ds(e);if(t){var o=Ds(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===As(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ns(e)}(this,r)}}function Ns(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ds(e){return(Ds=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Is(e,t)}(i,Rs);var t,r,n,o=Ms(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).heightStops=null,r.colorStops=null,r.base=null,r.legendRatio=1,r._extend(Ns(r),t),r}return t=i,(r=[{key:"getLayerStyleOptions",value:function(){var e=null==this.opacity?1:this.opacity;e=isNaN(parseFloat(e))?1:parseFloat(e);var t=/^[0-9]+.?[0-9]*$/,r={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField||this.heightField,type:"interval",base:t.test(this.base)?this.base:1},"fill-extrusion-opacity":e};return this.heightStops?r["fill-extrusion-height"]={stops:this.heightStops,property:this.heightField||"height",base:t.test(this.base)?this.base:1}:this.height?r["fill-extrusion-height"]=this.height:r["fill-extrusion-height"]={property:this.heightField||"height",type:"identity"},this.baseHeightField&&(r["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}),r}},{key:"getHighlightStyleOptions",value:function(){return{"fill-extrusion-color":this.highlight&&null!=this.highlight.color?this.highlight.color:"#ADA91E","fill-extrusion-height":{stops:this.heightStops,property:this.heightField},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6}}},{key:"_createLegendElement",value:function(){var e,t=this.colorStops&&this.colorStops.length||0,r="<ul>";for(e=0;e<t;e++){var n=this.colorStops[e][0],o=this._getWrapperText(n);if(e===t-1)o="> "+o;else o=o+"-"+this._getWrapperText(this.colorStops[e+1][0]);r+="<li><span style='background-color:"+this.colorStops[e][1]+";'></span><span>"+o+"</span></li>"}return r+="</ul>"}},{key:"_getWrapperText",value:function(e){var t=e*(null==this.legendRatio?1:parseFloat(this.legendRatio)),r=parseFloat(t);return r%1e6<=1e6?r.toString():parseInt(r/1e3)+"k"}}])&&Ls(t.prototype,r),n&&Ls(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Bs(e){"@babel/helpers - typeof";return(Bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Us(e,t){return(Us=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Js(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Vs(e);if(t){var o=Vs(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Bs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Vs(e){return(Vs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Hs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Us(e,t)}(i,is);var t,r,n,o=Js(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).style=t.style,r.isHoverAble=t.isHoverAble,r.highlightStyle=t.highlightStyle,r.themeField=t.themeField,r.styleGroups=t.styleGroups,r}return t=i,(r=[{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=Va.transformStyle(this.highlightStyle);for(var n=new Ka(e,this,Va.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getStyleByData",value:function(e){var t={},r=e;if(t=j.copyAttributesWithClip(t,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&r.attributes){var n=this.themeField,o=r.attributes,i=this.styleGroups,a=!1,s=null;for(var l in o)if(n===l){a=!0,s=o[l];break}if(a)for(var u=0,c=i.length;u<c;u++)if(s>=i[u].start&&s<i[u].end){var f=i[u].style;t=j.copyAttributesWithClip(t,f)}}return r.style&&!0===this.isAllowFeatureStyle&&(t=j.copyAttributesWithClip(r.style)),t}}])&&Gs(t.prototype,r),n&&Gs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function zs(e){"@babel/helpers - typeof";return(zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ws(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qs(e,t){return(qs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ys(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Xs(e);if(t){var o=Xs(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===zs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Xs(e){return(Xs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qs(e,t)}(i,Jo);var t,r,n,o=Ys(i);function i(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t,r)).symbolType=t,n.symbolSetting=r.symbolSetting,n.themeField=r.themeField,n}return t=i,(r=[{key:"setSymbolType",value:function(e){this.symbolType=e,this.redraw()}},{key:"createThematicFeature",value:function(e){var t;return Cr[this.symbolType]&&this.themeField&&this.symbolSetting&&(t=new Cr[this.symbolType](e,this,[this.themeField],this.symbolSetting)),!!t&&(t.assembleShapes(),t)}}])&&Ws(t.prototype,r),n&&Ws(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Zs(e){"@babel/helpers - typeof";return(Zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ks(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $s(e,t){return($s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function el(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=rl(e);if(t){var o=rl(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Zs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return tl(e)}(this,r)}}function tl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rl(e){return(rl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$s(e,t)}(i,Rs);var t,r,n,o=el(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).colorStops=null,r._extend(tl(r),t),r}return t=i,(r=[{key:"getLayerStyleOptions",value:function(){var e=null==this.opacity?1:this.opacity;e=isNaN(parseFloat(e))?1:parseFloat(e);var t={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField,type:"categorical"},"fill-extrusion-opacity":e};return null!=this.height?t["fill-extrusion-height"]=this.height:t["fill-extrusion-height"]={property:this.heightField||"height",type:"categorical"},this.baseHeightField&&(t["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}),t}},{key:"getHighlightStyleOptions",value:function(){var e={"fill-extrusion-color":this.highlight&&null!=this.highlight.color?this.highlight.color:"#ADA91E","fill-extrusion-height":{stops:this.heightStops,property:this.heightField,type:"categorical"},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6};return null!=this.height&&(e["fill-extrusion-height"]=this.height||0),e}},{key:"_createLegendElement",value:function(){for(var e="<ul>",t=this.colorStops&&this.colorStops.length||0,r=0;r<t;r++){var n=this.colorStops[r][0];e+="<li><span style='background-color:"+this.colorStops[r][1]+";'></span><span>"+n+"</span></li>"}return e+="</ul>"}}])&&Ks(t.prototype,r),n&&Ks(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ol(e){"@babel/helpers - typeof";return(ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function il(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function al(e,t){return(al=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ll(e);if(t){var o=ll(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ol(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ll(e){return(ll=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ul=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&al(e,t)}(i,is);var t,r,n,o=sl(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).themeField=t.themeField,r.style=t.style,r.styleGroups=t.styleGroups,r.isHoverAble=t.isHoverAble,r.highlightStyle=t.highlightStyle,r}return t=i,(r=[{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=Va.transformStyle(this.highlightStyle);for(var n=new Ka(e,this,Va.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getStyleByData",value:function(e){var t={},r=e;if(t=j.copyAttributesWithClip(t,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&r.attributes){var n=this.themeField,o=r.attributes,i=this.styleGroups,a=!1,s=null;for(var l in o)if(n===l){a=!0,s=o[l];break}if(a)for(var u=0,c=i.length;u<c;u++)if(s.toString()===i[u].value.toString()){var f=i[u].style;t=j.copyAttributesWithClip(t,f)}}return r.style&&!0===this.isAllowFeatureStyle&&(t=j.copyAttributesWithClip(r.style)),t}}])&&il(t.prototype,r),n&&il(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function cl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var fl={color:[0,0,0,255],opacity:.8,radius:10,radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1},pl=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=wr.extend(this,fl,r);this.id=t||j.createUniqueID("graphicLayer_"),this.graphics=[].concat(n.graphics),this.visibility=!0}var r,n,o;return r=e,(n=[{key:"addTo",value:function(e){this.onAdd(e)}},{key:"onAdd",value:function(e){if(this.map=e,this.canvas)return this.mapContainer=this.map.getCanvasContainer(),this.mapContainer.appendChild(this.canvas),this;this._initContainer(),e.getCRS&&e.getCRS()!==t().CRS.EPSG3857&&(this.coordinateSystem=3,this.isGeographicCoordinateSystem=!0);var r=this.getState(),n=r.data,o=r.color,i=r.radius,a=r.opacity,s=r.highlightColor,l=r.radiusScale,u=r.radiusMinPixels,c=r.radiusMaxPixels,f=r.strokeWidth,p=r.outline,h=this,y={id:"scatter-plot",data:n,pickable:Boolean(this.onClick)||Boolean(this.onHover),autoHighlight:!0,color:o,opacity:a,radius:i,radiusScale:l,highlightColor:s,radiusMinPixels:u,radiusMaxPixels:c,strokeWidth:f,outline:p,isGeographicCoordinateSystem:this.isGeographicCoordinateSystem,coordinateSystem:this.coordinateSystem,getPosition:function(e){if(!e)return[0,0,0];var t=e.getLngLat();return t&&[t.lng,t.lat,0]},getColor:function(e){var t=e&&e.getStyle();return t&&t.color||h.color},getRadius:function(e){var t=e&&e.getStyle();return t&&t.radius||h.radius},updateTriggers:{getColor:[o],getRadius:[i]}};this.onClick&&(y.onClick=this.onClick),this.onHover&&(y.onHover=this.onHover),this.layer=new window.DeckGL.ScatterplotLayer(y);var d={};for(var b in r)d[b]=r[b];return d.layers=[this.layer],d.canvas=this.canvas,this.deckGL=new window.DeckGL.experimental.DeckGLJS(d),this.map.on("render",this._moveEvent.bind(this)),this.map.on("resize",this._resizeEvent.bind(this)),this.draw(),this}},{key:"setStyle",value:function(e){var t={color:this.color,radius:this.radius,opacity:this.opacity,highlightColor:this.highlightColor,radiusScale:this.radiusScale,radiusMinPixels:this.radiusMinPixels,radiusMaxPixels:this.radiusMaxPixels,strokeWidth:this.strokeWidth,outline:this.outline};wr.extend(this,t,e),this.update()}},{key:"setGraphics",value:function(e){this.graphics=this.graphics||[],this.graphics.length=0;var t=wr.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]),this.layer.props.data.length=0;for(var r=0;r<t.length;r++)this.layer.props.data.push(t[r]);this.update()}},{key:"addGraphics",value:function(e){this.graphics=this.graphics||[];var t=wr.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]);for(var r=0;r<t.length;r++)this.layer.props.data.push(t[r]);this.update()}},{key:"getGraphicBy",value:function(e,t){var r=null;for(var n in this.graphics)if(this.graphics[n][e]===t){r=this.graphics[n];break}return r}},{key:"getGraphicById",value:function(e){return this.getGraphicBy("id",e)}},{key:"getGraphicsByAttribute",value:function(e,t){var r,n=[];for(var o in this.graphics)(r=this.graphics[o])&&r.attributes&&r.attributes[e]===t&&n.push(r);return n}},{key:"removeGraphics",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e||0===e.length||e===this.graphics)return this.graphics.length=0,this.layer.props.data&&(this.layer.props.data.length=0),void this.update();j.isArray(e)||(e=[e]);for(var t=e.length-1;t>=0;t--){var r=e[t],n=j.indexOf(this.graphics,r);-1!==n&&this.graphics.splice(n,1)}this.update()}},{key:"update",value:function(){if("Awaiting state"!==this.layer.lifecycle){this.layer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0});var e=this.getState();this.layer.setState(e)}}},{key:"clear",value:function(){this.removeGraphics(),this.deckGL.finalize()}},{key:"remove",value:function(){this.map.off("render",this._moveEvent.bind(this)),this.map.off("resize",this._resizeEvent.bind(this)),this.map.getCanvasContainer().removeChild(this.canvas)}},{key:"removeFromMap",value:function(){this.remove(),this.clear()}},{key:"moveTo",value:function(e,t){var r=document.getElementById(this.id);if(t=void 0===t||t){var n=document.getElementById(e);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(e);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(e){this.canvas&&e!==this.visibility&&(this.visibility=e,this.canvas.style.display=e?"block":"none")}},{key:"getState",value:function(){var e=this.map,r=parseInt(this.canvas.style.width),n=parseInt(this.canvas.style.height),o=e.getCenter(),i={longitude:o.lng,latitude:o.lat,zoom:e.getZoom(),maxZoom:e.getMaxZoom(),pitch:e.getPitch(),bearing:e.getBearing()},a={};for(var s in i)a[s]=i[s];return a.width=r,a.height=n,a.data=this.graphics,a.color=this.color,a.radius=this.radius,a.opacity=this.opacity,a.highlightColor=this.highlightColor,a.radiusScale=this.radiusScale,a.radiusMinPixels=this.radiusMinPixels,a.radiusMaxPixels=this.radiusMaxPixels,a.strokeWidth=this.strokeWidth,a.outline=this.outline,e.getCRS&&e.getCRS()!==t().CRS.EPSG3857&&(a.coordinateSystem=this.coordinateSystem,a.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem),a}},{key:"draw",value:function(){var e=this.getState(),t={};for(var r in e)t[r]=e[r];t.layers=[this.layer],t.canvas=this.canvas,this.deckGL.setProps(t)}},{key:"_moveEvent",value:function(){this.draw()}},{key:"_resizeEvent",value:function(){var e=this.canvas,t=this.map;e.width=parseInt(t.getCanvas().style.width),e.height=parseInt(t.getCanvas().style.height),e.style.width=t.getCanvas().style.width,e.style.height=t.getCanvas().style.height,this.draw()}},{key:"_initContainer",value:function(){this.canvas=this._createCanvas(),this.mapContainer=this.map.getCanvasContainer(),this.mapContainer.appendChild(this.canvas)}},{key:"_createCanvas",value:function(){var e=document.createElement("canvas");this.id&&(e.id=this.id),e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.cursor="";var t=this.map;return e.width=parseInt(t.getCanvas().style.width),e.height=parseInt(t.getCanvas().style.height),e.style.width=t.getCanvas().style.width,e.style.height=t.getCanvas().style.height,e}}])&&cl(r.prototype,n),o&&cl(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(),hl=function(){try{return THREE}catch(e){return{}}}();function yl(e,t,r){if(e===r||e===t)return e;var n=r-t;return((e-t)%n+n)%n+t}function dl(e){return e*Math.PI/180}var bl={matrix:[1,-1,0,0],projection:{R:6378137,minZoom:0,maxZoom:22,nativeMaxZoom:19,RAD:Math.PI/180,METERS_PER_DEGREE:6378137*Math.PI/180,MAX_LATITUDE:85.0511287798,project:function(e){var t=this.RAD,r=this.METERS_PER_DEGREE,n=this.MAX_LATITUDE,o=e instanceof Array?{lng:e[0],lat:e[1]}:{lng:e.lng,lat:e.lat},i=o.lng,a=Math.max(Math.min(n,o.lat),-n);return{x:i*r,y:(0===a?0:Math.log(Math.tan((90+a)*t/2))/t)*r}},unproject:function(e){var t,r=e.x,n=e.y,o=this.RAD,i=this.METERS_PER_DEGREE;return 0===n?t=0:(t=n/i,t=(2*Math.atan(Math.exp(t*o))-Math.PI/2)/o),{lng:yl(r/i,-180,180),lat:yl(t,-this.MAX_LATITUDE,this.MAX_LATITUDE)}},locate:function(e,t,r){if(!e)return null;if(t=t||0,r=r||0,!t&&!r)return e;var n=e.lng;if(0!==t){var o=Math.abs(t),i=dl(e.lng);n=yl(180*(i+=2*Math.sqrt(Math.pow(Math.sin(o/(2*this.R)),2)/Math.pow(Math.cos(i),2))*(o>0?1:-1))/Math.PI,-180,180)}var a=e.lat;if(0!==r){var s=Math.abs(r),l=dl(e.lat);a=yl(180*(l+=2*Math.sin(s/(2*this.R))*(s>0?1:-1))/Math.PI,-90,90)}return{lng:n,lat:a}},getResolution:function(e){if(!this.resolutions){for(var t=[],r=12756274*Math.PI,n=0;n<=this.maxZoom;n++)t[n]=r/(256*Math.pow(2,n));this.resolutions=t}var o=0|e,i=this.resolutions.length;o=o<0?0:o>i-1?i-1:o;var a=this.resolutions[o];return(0|e)!==e&&o!==i-1?a+(this.resolutions[o+1]-a)*(e-o):a}},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},lngLatToPoint:function(e,t){var r=this.project(e);return this.transform(r,this.projection.getResolution(t))},locate:function(e,t,r){return this.projection.locate(e,t,r)},transform:function(e,t){return{x:this.matrix[0]*(e.x-this.matrix[2])/t,y:this.matrix[1]*(e.y-this.matrix[3])/t}}};function vl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ml=bl.projection,gl=hl.Color,wl=hl.Scene,Ol=hl.WebGLRenderer,Sl=hl.CanvasRenderer,_l=hl.PerspectiveCamera,Pl=Math.PI/180,xl=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,El=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame,kl=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._layer=t,this.renderer=r||"gl",this.options=n}var t,r,n;return t=e,(r=[{key:"setMap",value:function(e){this.map=e}},{key:"render",value:function(){this._layer&&(this.prepare(),this._layer.fire("initialized"),this._layer&&this._layer.draw(this.context,this.scene,this.camera),this._layer.fire("draw"),this.renderScene())}},{key:"update",value:function(){this.remove(),this.render()}},{key:"renderScene",value:function(){this.locationCamera(),this.animationFrame=this.renderFrame(function(){this.animationFrame=null,this.context&&this.context.render(this.scene,this.camera)}.bind(this))}},{key:"renderFrame",value:function(e){return xl(function(){e&&"function"==typeof e&&e()})}},{key:"resize",value:function(){this._resetElementSize(this.container),this._resetElementSize(this.canvas);var e=this.canvas.width,t=this.canvas.height,r=this.getMapSize();this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.context.setSize(r.width,r.height),this.renderScene()}},{key:"prepare",value:function(){if(!this.map)return new Error("map object is necessary");this.canvas?this.clear(this.context):(this._initContainer(),this._initThreeRenderer(),this._layer.fire("rendererinitialized"))}},{key:"getMapSize",value:function(){var e=this.map.getContainer();return{width:e.clientWidth,height:e.clientHeight}}},{key:"cancelFrame",value:function(){null!=this.animationFrame&&El(this.animationFrame)}},{key:"remove",value:function(){null!=this.animationFrame&&El(this.animationFrame),this.container.removeChild(this.canvas),this.container.parentNode.removeChild(this.container),this.context=null,this.canvas=null,this.container=null}},{key:"clear",value:function(e){e&&e.clear&&e.clear(),e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}},{key:"getScale",value:function(e){var t=this.map,r=null==e?t.getZoom():e,n=ml.getResolution(ml.nativeMaxZoom);return ml.getResolution(r)/n}},{key:"getCanvasContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"locationCamera",value:function(){var e=this.map,t=this.getMapSize(),r=e.transform.zoomScale(ml.nativeMaxZoom-e.getZoom()-1),n=Math.tan(e.transform.fov/2*Pl),o=this.camera,i=e.getPitch()*Pl,a=-r*t.height/2/n;o.position.z=a*Math.cos(i);var s=bl.lngLatToPoint(e.getCenter(),ml.nativeMaxZoom),l=Math.sin(i)*a,u=e.getBearing()*Pl;o.position.x=s.x+l*Math.sin(u),o.position.y=s.y-l*Math.cos(u),o.up.set(Math.sin(u),-Math.cos(u),0),o.lookAt(new hl.Vector3(s.x,s.y,0)),o.updateProjectionMatrix()}},{key:"_initContainer",value:function(){var e=this._createCanvas(),t=this.container=document.createElement("div");this._layer._layerId&&(t.id=this._layer._layerId),t.className="threejs-wrapper",t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.overflow="hidden",this._resetElementSize(t),t.appendChild(e),this.map.getCanvasContainer().appendChild(t)}},{key:"_createCanvas",value:function(){if(!this.canvas){var e=this.canvas=document.createElement("canvas");return e.className="threejs-overlay",e.style.outline="none",this._resetElementSize(e),e}}},{key:"_resetElementSize",value:function(e){if(e){var t=this.getMapSize(),r=window.devicePixelRatio?window.devicePixelRatio:1,n=r*t.width,o=r*t.height;e.width=n,e.height=o,e.style.width=t.width+"px",e.style.height=t.height+"px"}}},{key:"_initThreeRenderer",value:function(){var e,t=this.map,r=this.getMapSize();"gl"===(this.renderer||"gl")?((e=new Ol({canvas:this.canvas,alpha:!0,antialias:!0,preserveDrawingBuffer:!0},this.options)).autoClear=!0,e.clear()):e=new Sl(j.extend({canvas:this.canvas,alpha:!0},this.options)),e.setClearColor(new gl(1,1,1),0),e.canvas=this.canvas,this.context=e;var n=t.transform.fov,o=Math.tan(n/2*Pl),i=this.getScale(ml.minZoom)/this.getScale(ml.nativeMaxZoom)*r.height/2/o;this.camera=new _l(n,r.width/r.height,1,i),this.scene=new wl,this.scene.add(this.camera)}}])&&vl(t.prototype,r),n&&vl(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function jl(e){"@babel/helpers - typeof";return(jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tl(e,t){return(Tl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Rl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ll(e);if(t){var o=Ll(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===jl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Al(e)}(this,r)}}function Al(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ll(e){return(Ll=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Il=hl.Vector3,Ml=hl.Shape,Nl=hl.Mesh,Dl=hl.ExtrudeGeometry,Fl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tl(e,t)}(a,t().Evented);var r,n,o,i=Rl(a);function a(e,t,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this))._layerId=e,n.options=r;var o=r&&r.threeOptions;return n.renderer=new kl(Al(n),t,o),n}return r=a,(n=[{key:"toThreeShape",value:function(e){var t=this;if(!e)return null;var r=this.getCoordinatesCenter(e),n=this.lngLatToPosition(r),o=e.map(function(e){return t.lngLatToPosition({lng:e[0],lat:e[1]}).sub(n)});return new Ml(o)}},{key:"toThreeMesh",value:function(e,t,r,n){if(!e)return null;var o=e;n&&(o=this.removeDuplicatedCoordinates(e));var i=this.distanceToThreeVector3(t,t).x,a=this.toThreeShape(o),s=new Dl(a,{amount:i,bevelEnabled:!0}),l=new Nl(s,r),u=this.lngLatToPosition(this.getCoordinatesCenter(o));return l.position.set(u.x,u.y,-i),l}},{key:"addObject",value:function(e,t){t&&e&&this.setPosition(e,t),this.renderer&&this.renderer.scene.add(e)}},{key:"getScene",value:function(){return this.renderer.scene}},{key:"getCamera",value:function(){return this.renderer.camera}},{key:"getThreeRenderer",value:function(){return this.renderer.context}},{key:"clearMesh",value:function(){var e=this.renderer.scene;if(!e)return this;for(var t=e.children.length-1;t>=0;t--)e.children[t]instanceof hl.Mesh&&e.remove(e.children[t]);return this}},{key:"clearAll",value:function(e){var t=this.renderer.scene;if(!t)return this;for(var r=t.children.length-1;r>=0;r--)!e&&t.children[r]instanceof hl.Camera||t.remove(t.children[r]);return this}},{key:"setPosition",value:function(e,t){if(!e||!t)return this;var r=this.lngLatToPosition(t);return e.position.set(r.x,r.y,r.z),this}},{key:"lngLatToPosition",value:function(e){var t=bl.projection.nativeMaxZoom,r=bl.lngLatToPoint(e,t);return new Il(r.x,r.y,-0)}},{key:"distanceToThreeVector3",value:function(e,t,r){var n=this._map,o=r||n.getCenter(),i=bl.projection.nativeMaxZoom,a=bl.locate(o,e,t),s=bl.lngLatToPoint(o,i),l=bl.lngLatToPoint(a,i),u=Math.abs(l.x-s.x)*Math.sign(e),c=Math.abs(l.y-s.y)*Math.sign(t);return new Il(u,c,0)}},{key:"removeDuplicatedCoordinates",value:function(e){function t(e,t){return e[0]===t[0]&&e[1]===t[1]}for(var r=[].concat(e),n=r.length-1;n>=1;n--)t(r[n],r[n-1])&&r.splice(n,1);return t(r[0],r[r.length-1])&&r.splice(r.length-1,1),r}},{key:"getCoordinatesCenter",value:function(e){for(var t=0,r=0,n=0,o=0,i=e.length;o<i;o++)e[o]&&(t+=e[o][0],r+=e[o][1],n++);return{lng:t/n,lat:r/n}}},{key:"addTo",value:function(e){var t=this;return t._map=e,t.renderer.setMap(e),t.renderer.render(),t._map.on("render",this._update.bind(t)),t._map.on("resize",this._resize.bind(t)),t.on("render",function(){this.context&&this.context.render(this.scene,this.camera)}.bind(t.renderer)),this}},{key:"getCanvasContainer",value:function(){return this.renderer.getCanvasContainer()}},{key:"getCanvas",value:function(){return this.renderer.getCanvas()}},{key:"remove",value:function(){var e=this._map,t=this;e.off("render",t._update.bind(t)),e.off("resize",t._resize.bind(t)),t.renderer.remove(),t._map=null}},{key:"draw",value:function(){return this}},{key:"renderScene",value:function(){return this.renderer.renderScene(),this.fire("renderscene"),this}},{key:"_resize",value:function(){this.renderer.resize()}},{key:"_update",value:function(){return this.renderScene(),this.fire("render"),this}}])&&Cl(r.prototype,n),o&&Cl(r,o),Object.defineProperty(r,"prototype",{writable:!1}),a}();function Bl(e){"@babel/helpers - typeof";return(Bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ul(e,t){return(Ul=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Jl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Vl(e);if(t){var o=Vl(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Bl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Vl(e){return(Vl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Hl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ul(e,t)}(a,t().Evented);var r,n,o,i=Jl(a);function a(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r=i.call(this);var n=t||{};return r.name=e,r.id=n.id?n.id:j.createUniqueID("HeatMapLayer_"),r.map=n.map?n.map:null,r.loadWhileAnimating=void 0===n.loadWhileAnimating||n.loadWhileAnimating,r.visibility=!0,r.opacity=n.opacity?n.opacity:1,r.colors=n.colors?n.colors:["blue","cyan","lime","yellow","red"],r.useGeoUnit=!!n.useGeoUnit&&n.useGeoUnit,r.radius=n.radius?n.radius:50,r.featureWeight=n.featureWeight?n.featureWeight:null,r.features=[],r.maxWeight=null,r.minWeight=null,r.EVENT_TYPES=["featuresadded","featuresremoved","featuresdrawcompleted"],r.supported=!1,r.rootCanvas=null,r.canvasContext=null,r.maxWidth=null,r.maxHeight=null,r}return r=a,(n=[{key:"onAdd",value:function(e){this.map=e,0!==this.features.length&&(this._createCanvasContainer(),this.map.on("resize",this._resizeEvent.bind(this)),this.map.on("zoomstart",this._zoomStartEvent.bind(this)),this.map.on("zoomend",this._zoomEndEvent.bind(this)),this.map.on("rotatestart",this._rotateStartEvent.bind(this)),this.map.on("rotate",this._rotateEvent.bind(this)),this.map.on("rotateend",this._rotateEndEvent.bind(this)),this.map.on("dragend",this._dragEndEvent.bind(this)),this.map.on("movestart",this._moveStartEvent.bind(this)),this.map.on("move",this._moveEvent.bind(this)),this.map.on("moveend",this._moveEndEvent.bind(this)),this.map.on("remove",this.removeFromMap.bind(this)),this.refresh())}},{key:"removeFromMap",value:function(){this.removeAllFeatures(),this.map.getCanvasContainer().removeChild(this.rootCanvas)}},{key:"_createCanvasContainer",value:function(){this.supported=!0,this.mapContainer=this.map.getCanvasContainer(),this.rootCanvas=document.createElement("canvas"),this.rootCanvas.id=this.id;var e=this.map.getCanvas();this.rootCanvas.width=this.maxWidth=parseInt(e.style.width),this.rootCanvas.height=this.maxHeight=parseInt(e.style.height),this.canvasContext=this.rootCanvas.getContext("2d");var t=window.devicePixelRatio||1;1!==t&&this.canvasContext&&this.canvasContext.scale(t,t),j.modifyDOMElement(this.rootCanvas,null,{x:0,y:0},{w:this.maxWidth,h:this.maxHeight},"absolute",null,null,this.opacity),this.mapContainer.appendChild(this.rootCanvas)}},{key:"addFeatures",value:function(e){this.features=this.toiClientFeature(e),this.fire(this.EVENT_TYPES[0],{features:e,succeed:!0}),this.refresh()}},{key:"refresh",value:function(){if(0!==this.features.length&&this.map){var e=this.map.getBounds();this.updateHeatPoints(e)}}},{key:"setOpacity",value:function(e){e!==this.opacity&&(this.opacity=e,j.modifyDOMElement(this.rootCanvas,null,null,null,null,null,null,e),null!==this.map&&this.fire("changelayer",{layer:this,property:"opacity"}))}},{key:"updateHeatPoints",value:function(e){this.features&&this.features.length>0?this.convertFastToPixelPoints(e):this.canvasContext.clearRect(0,0,this.maxWidth,this.maxWidth)}},{key:"convertFastToPixelPoints",value:function(e){var t,r,n,o,i,a,s,l=[],u=e.getEast()-e.getWest(),c=e.getNorth()-e.getSouth(),f=this.map.getCanvas();o=u/f.width>c/f.height?u/f.width:c/f.height,this.useRadius=this.useGeoUnit?parseInt(this.radius/o):this.radius;for(var p=0;p<this.features.length;p++){var h=this.features[p],y=h.geometry,d=this.getPixelXY(new A(y.x,y.y));this.featureWeight?(d.weight=h.attributes[this.featureWeight],this.maxWeight||(i=i||d.weight,a=a||d.weight,i=Math.max(i,d.weight),a=Math.min(a,d.weight))):d.weight=1,t=Math.floor(d.x),r=Math.floor(d.y),n=d.weight,l.push([t,r,n])}this.maxWeight?this.draw(l,this.maxWeight):(s=i&&a?(i+a)/2:1,this.draw(l,s))}},{key:"draw",value:function(e,t){if(!(this.maxHeight>0&&this.maxWidth>0))return!1;var r=this.canvasContext;r.setTransform(1,0,0,1,0,0),this.canvasContext.clearRect(0,0,this.maxWidth,this.maxHeight),this.drawCircle(this.useRadius),this.createGradient();for(var n=0;n<e.length;n++){var o=e[n];this.canvasContext.globalAlpha=Math.max(o[2]/t,.05),this.canvasContext.drawImage(this.circle,o[0]-this.useRadius,o[1]-this.useRadius)}var i=r.getImageData(0,0,this.maxWidth,this.maxHeight);this.colorize(i.data,this.grad),r.putImageData(i,0,0)}},{key:"colorize",value:function(e,t){for(var r,n=0;n<e.length;n+=4)(r=4*e[n+3])&&(e[n]=t[r],e[n+1]=t[r+1],e[n+2]=t[r+2])}},{key:"drawCircle",value:function(e){var t=e/2,r=this.circle=document.createElement("canvas"),n=r.getContext("2d");r.height=2*e,r.width=2*e,n.shadowOffsetX=n.shadowOffsetY=2*e,n.shadowBlur=t,n.shadowColor="#000000",n.beginPath(),n.arc(-e,-e,e/2,0,2*Math.PI,!0),n.closePath(),n.fill()}},{key:"createGradient",value:function(){var e=this.colors,t=document.createElement("canvas"),r=t.getContext("2d"),n=r.createLinearGradient(0,0,0,256);t.height=256,t.width=1;for(var o=1,i=0,a=e.length;i<a;i++)n.addColorStop(o/a,e[i]),o++;r.fillStyle=n,r.fillRect(0,0,1,256),this.grad=r.getImageData(0,0,1,256).data}},{key:"getPixelXY",value:function(e){var r,n=this.map;if(e instanceof U||e instanceof kr){var o=n.project(new(t().LngLat)(e.x,e.y));r={x:parseInt(o.x),y:parseInt(o.y)}}if(e instanceof A){var i=n.project(new(t().LngLat)(e.lon,e.lat));r={x:parseInt(i.x),y:parseInt(i.y)}}return r}},{key:"toiClientFeature",value:function(e){j.isArray(e)||(e=[e]);for(var t=[],r=0;r<e.length;r++)if(e[r]instanceof Be)t.push(e[r]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e[r].type)){var n=new vr;t=t.concat(n.read(e[r]))}else{if(!e[r].geometry||!e[r].geometry.parts)throw new Error("Features[".concat(r,"]'s type does not match, please check."));t.push(Lo.fromJson(e[r]).toFeature())}return t}},{key:"removeFeatures",value:function(e){if(e&&0!==e.length&&this.features&&0!==this.features.length){if(e===this.features)return this.removeAllFeatures();j.isArray(e)||(e=[e]);for(var t,r,n=[],o=0,i=e.length;o<i;o++)t=e[o],-1!==(r=j.indexOf(this.features,t))?this.features.splice(r,1):n.push(t);var a=0==n.length;this.fire(this.EVENT_TYPES[1],{features:n,succeed:a}),this.refresh()}}},{key:"removeAllFeatures",value:function(){this.features=[],this.refresh()}},{key:"moveTo",value:function(e,t){var r=document.getElementById(this.rootCanvas.id);if(t=void 0===t||t){var n=document.getElementById(e);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(e);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(e){this.rootCanvas&&e!==this.visibility&&(this.visibility=e,this.rootCanvas.style.display=e?"block":"none")}},{key:"_resizeEvent",value:function(){this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getCanvas();this.rootCanvas.style.width=e.style.width,this.rootCanvas.style.height=e.style.height,this.rootCanvas.width=this.maxWidth=parseInt(e.style.width),this.rootCanvas.height=this.maxHeight=parseInt(e.style.height);var t=window.devicePixelRatio||1;1!==t&&this.canvasContext&&this.canvasContext.scale(t,t),this.refresh()}},{key:"_zoomStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!0,this._hide())}},{key:"_zoomEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!1,this._show())}},{key:"_rotateStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!0)}},{key:"_rotateEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing;this.rootCanvas.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg)"}}},{key:"_rotateEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!1,this._show())}},{key:"_dragEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&this._hide()}},{key:"_moveEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rootCanvas.style.transform="",this.refresh(),this._show())}},{key:"_moveStartEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){this.startPitch=this.map.getPitch(),this.startBearing=this.map.getBearing();var e=this.map.project(new(t().LngLat)(0,0));this.startMoveX=e.x,this.startMoveY=e.y}}},{key:"_moveEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){if(!this.rotating&&!this.zooming){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,r=-this.map.getBearing()+this.startBearing,n=this.map.project(new(t().LngLat)(0,0)),o=n.x-this.startMoveX,i=n.y-this.startMoveY;this.rootCanvas.style.transform="rotateX("+e+"deg) rotateZ("+r+"deg) translate3d("+o+"px, "+i+"px, 0px)"}}else this.refresh()}},{key:"_hide",value:function(){this.rootCanvas.style.display="none"}},{key:"_show",value:function(){this.rootCanvas.style.display="block"}}])&&Gl(r.prototype,n),o&&Gl(r,o),Object.defineProperty(r,"prototype",{writable:!1}),a}();function zl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Wl=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerTypeID=t,this.data=[].concat(r.data),this.props=r.props?r.props:{},this.callback=r.callback?r.callback:{},this.id=r.layerId?r.layerId:j.createUniqueID("graphicLayer_"+this.layerTypeID+"_"),this.visibility=!0}var r,n,o;return r=e,(n=[{key:"onAdd",value:function(e){if(this.map=e,this.canvas)return this.mapContainer=this.map.getCanvasContainer(),this.mapContainer.appendChild(this.canvas),this;e.getCRS&&e.getCRS()!==t().CRS.EPSG3857?(this.coordinateSystem=3,this.isGeographicCoordinateSystem=!0):(this.coordinateSystem=1,this.isGeographicCoordinateSystem=!1),this._initContainer(),this._createLayerByLayerTypeID();var r=this._getState(),n={};for(var o in r)n[o]=r[o];return n.layers=[this.layer],n.canvas=this.canvas,this.deckGL=new window.DeckGL.experimental.DeckGLJS(n),this.map.on("render",this._moveEvent.bind(this)),this.map.on("resize",this._resizeEvent.bind(this)),this._draw(),this}},{key:"remove",value:function(){this.map.off("render",this._moveEvent.bind(this)),this.map.off("resize",this._resizeEvent.bind(this)),this.map.getCanvasContainer().removeChild(this.canvas)}},{key:"removeFromMap",value:function(){this.remove(),this.clear()}},{key:"moveTo",value:function(e,t){var r=document.getElementById(this.id);if(t=void 0===t||t){var n=document.getElementById(e);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(e);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(e){this.canvas&&e!==this.visibility&&(this.visibility=e,this.canvas.style.display=e?"block":"none")}},{key:"setStyle",value:function(e){wr.extend(this.props,e),this._createLayerByLayerTypeID(),this.update()}},{key:"setData",value:function(e){this.data=this.data||[],this.data.length=0;var t=wr.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]),this.layer.props.data.length=0;for(var r=0;r<t.length;r++)this.layer.props.data.push(t[r]);this.data=this.layer.props.data,this.update()}},{key:"addData",value:function(e){this.data=this.data||[];var t=wr.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]);for(var r=0;r<t.length;r++)this.layer.props.data.push(t[r]);this.update()}},{key:"update",value:function(){if("Awaiting state"!==this.layer.lifecycle){this.layer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0})}this._draw()}},{key:"clear",value:function(){this.removeData(),this.deckGL.finalize()}},{key:"removeData",value:function(){this.data.length=0,this.layer.props.data&&(this.layer.props.data.length=0),this.update()}},{key:"_draw",value:function(){var e=this._getState();e.layers=[this.layer],e.canvas=this.canvas,this.deckGL.setProps(e)}},{key:"_getState",value:function(){var e=this.map,r=parseInt(this.canvas.style.width),n=parseInt(this.canvas.style.height),o=e.getCenter(),i={width:r,height:n,longitude:o.lng,latitude:o.lat,zoom:e.getZoom(),maxZoom:e.getMaxZoom(),pitch:e.getPitch(),bearing:e.getBearing()},a={};for(var s in i)a[s]=i[s];for(var l in this.props)a[l]=this.props[l];return e.getCRS&&e.getCRS()!==t().CRS.EPSG3857?(a.coordinateSystem=this.coordinateSystem,a.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem):(a.coordinateSystem=1,a.isGeographicCoordinateSystem=!1),a.data=this.data,a}},{key:"_createLayerByLayerTypeID",value:function(){if(this.props.data=this.data,this.props.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem,this.props.coordinateSystem=this.coordinateSystem,this.props.pickable=Boolean(this.props.onClick)||Boolean(this.props.onHover),"scatter-plot"===this.layerTypeID)this.props.id="scatter-plot",this._createScatterPlotLayer();else if("path-layer"===this.layerTypeID)this.props.id="path-layer",this._createPathLayer();else if("polygon-layer"===this.layerTypeID)this.props.id="polygon-layer",this._createPolygonLayer();else if("arc-layer"===this.layerTypeID)this.props.id="arc-layer",this._createArcLineLayer();else{if("hexagon-layer"!==this.layerTypeID)throw new Error(this.layerTypeID+" does not support");this.props.id="hexagon-layer",this._createHexagonLayer()}}},{key:"_createScatterPlotLayer",value:function(){var e=this;this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(e){if(!e)return[0,0,0];var t=e.getLngLat();return t&&[t.lng,t.lat,0]},this.callback.getColor&&(this.props.getColor=this.callback.getColor?this.callback.getColor:function(t){var r=t&&t.getStyle();return r&&r.color||e.props.color}),this.callback.getRadius&&(this.props.getRadius=this.callback.getRadius?this.callback.getRadius:function(t){var r=t&&t.getStyle();return r&&r.radius||e.props.radius}),(this.props.color||this.props.radius)&&(this.props.updateTriggers={},this.props.radius&&(this.props.updateTriggers.getRadius=[this.props.radius]),this.props.color&&(this.props.updateTriggers.getColor=[this.props.color])),this.layer=new window.DeckGL.ScatterplotLayer(this.props)}},{key:"_createPathLayer",value:function(){this.props.getPath=this.callback.getPath?this.callback.getPath:function(e){return e.geometry.coordinates},this.callback.getColor&&(this.props.getColor=this.callback.getColor),this.callback.getWidth&&(this.props.getWidth=this.callback.getWidth),this.callback.getDashArray&&(this.props.getDashArray=this.callback.getDashArray),this.layer=new window.DeckGL.PathLayer(this.props)}},{key:"_createPolygonLayer",value:function(){this.props.getPolygon=this.callback.getPolygon?this.callback.getPolygon:function(e){return e.geometry.coordinates},this.callback.getElevation&&(this.props.getElevation=this.callback.getElevation),this.callback.getFillColor&&(this.props.getFillColor=this.callback.getFillColor),this.callback.getLineColor&&(this.props.getLineColor=this.callback.getLineColor),this.callback.getLineWidth&&(this.props.getLineWidth=this.callback.getLineWidth),this.props.updateTriggers={},this.props.updateTriggers.getColor=this.props.color?this.props.color:[0,0,128,128],this.layer=new window.DeckGL.PolygonLayer(this.props)}},{key:"_createArcLineLayer",value:function(){this.props.getSourcePosition=this.callback.getSourcePosition?this.callback.getSourcePosition:function(e){return e?e.geometry.coordinates[0]:[0,0,0]},this.props.getTargetPosition=this.callback.getTargetPosition?this.callback.getTargetPosition:function(e){return e?e.geometry.coordinates[1]:[0,0,0]},this.callback.getStrokeWidth&&(this.props.getStrokeWidth=this.callback.getStrokeWidth),this.callback.getSourceColor&&(this.props.getSourceColor=this.callback.getSourceColor),this.callback.getTargetColor&&(this.props.getTargetColor=this.callback.getTargetColor),this.layer=new window.DeckGL.ArcLayer(this.props)}},{key:"_createHexagonLayer",value:function(){this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(e){return e?e.geometry.coordinates:[0,0,0]},this.callback.getColorValue&&(this.props.getColorValue=this.callback.getColorValue),this.callback.getElevationValue&&(this.props.getElevationValue=this.callback.getElevationValue),this.layer=new window.DeckGL.HexagonLayer(this.props)}},{key:"_initContainer",value:function(){this.canvas=this._createCanvas(),this.mapContainer=this.map.getCanvasContainer(),this.mapContainer.appendChild(this.canvas)}},{key:"_createCanvas",value:function(){var e=document.createElement("canvas");e.id=this.id,e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.cursor="";var t=this.map;return e.width=parseInt(t.getCanvas().style.width),e.height=parseInt(t.getCanvas().style.height),e.style.width=t.getCanvas().style.width,e.style.height=t.getCanvas().style.height,e}},{key:"_moveEvent",value:function(){this._draw()}},{key:"_resizeEvent",value:function(){var e=this.canvas,t=this.map;e.width=parseInt(t.getCanvas().style.width),e.height=parseInt(t.getCanvas().style.height),e.style.width=t.getCanvas().style.width,e.style.height=t.getCanvas().style.height,this._draw()}}])&&zl(r.prototype,n),o&&zl(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function ql(e){return function(e){if(Array.isArray(e))return Yl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Yl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yl(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ql,Zl,Kl,$l={textSize:"12px",textFont:["12px Calibri","sans-serif"],textAnchor:"bottom",textColor:"rgba(0,0,0,1)",textHaloColor:"rgba(255,255,255,1)",textHaloWidth:1},eu={lineColor:"red",lineCap:"round",lineJoin:"round",lindDasharray:[.4,5],lineDashOffset:0,lineWidth:1},tu={showLabel:!0,opacity:1,visible:!0,interval:10,extent:null,minZoom:0,maxZoom:50,wrapX:!0,strokeStyle:eu,lngLabelFormatter:null,latLabelFormatter:null,lngLabelStyle:$l,latLabelStyle:$l},ru=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t&&t.layerID?t.layerID:j.createUniqueID("graticuleLayer_"),this.sourceId=this.id+"_line",this.canvasId=this.id,this.options=t,this.resetEvent=this._reset.bind(this),this.styleDataEevent=this._setLayerTop.bind(this),this.resizeEvent=this._resizeCallback.bind(this),this.zoomendEvent=this.setVisibility.bind(this)}var r,n,o;return r=e,(n=[{key:"onAdd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.map;this.map=e,this._initialize(),this._createCanvas(),this._bindEvent(),this._drawCanvas(),this._addGraticuleLayer(),this.setVisibility()}},{key:"removeFromMap",value:function(){this.mapContainer.removeChild(this.canvas),this.canvas=null,this._unbindEvent()}},{key:"setVisibility",value:function(e){var t=this.map&&this.map.getZoom();this.options.visible="boolean"==typeof e?e:this.options.visible,this.visible="boolean"==typeof e?e:this.options.visible&&t>=this.options.minZoom&&t<=this.options.maxZoom,this.map.getLayer(this.sourceId)&&this.map.setLayoutProperty(this.sourceId,"visibility",this.visible?"visible":"none"),this._drawLabel()}},{key:"setMinZoom",value:function(e){this.options.minZoom=e,this.setVisibility()}},{key:"setMaxZoom",value:function(e){this.options.maxZoom=e,this.setVisibility()}},{key:"setShowLabel",value:function(e){this.options.showLabel=e,this._drawLabel()}},{key:"setExtent",value:function(e){this.options.extent=this._getDefaultExtent(e,this.map),this.features=this._getGraticuleFeatures(),this._updateGraticuleLayer(),this._drawLabel()}},{key:"setStrokeStyle",value:function(e){if(this.map&&this.map.getLayer(this.sourceId)){this.options.strokeStyle=e;var t=this._transformStrokeStyle(e),r=t.layout,n=t.paint;for(var o in r)this.map.setLayoutProperty(this.sourceId,o,r[o]);for(var i in n)this.map.setPaintProperty(this.sourceId,i,n[i])}}},{key:"setLngLabelStyle",value:function(e){this.options.lngLabelStyle=e,this._drawLabel()}},{key:"setLatLabelStyle",value:function(e){this.options.latLabelStyle=e,this._drawLabel()}},{key:"setIntervals",value:function(e){this.options.interval=e,this._calcInterval(),this.features=this._getGraticuleFeatures(),this._updateGraticuleLayer(),this._drawLabel()}},{key:"_bindEvent",value:function(){this.map.on("move",this.resetEvent),this.map.on("moveend",this.resetEvent),this.map.on("styledata",this.styleDataEevent),this.map.on("resize",this.resizeEvent),this.map.on("zoomend",this.zoomendEvent)}},{key:"_unbindEvent",value:function(){this.map.off("move",this.resetEvent),this.map.off("moveend",this.resetEvent),this.map.off("styledata",this.styleDataEevent),this.map.off("resize",this.resizeEvent),this.map.off("zoomend",this.zoomendEvent)}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.map,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options;(t=t||{}).strokeStyle=Object.assign({},eu,t.strokeStyle||{}),t.lngLabelStyle=Object.assign({},$l,t.lngLabelStyle||{}),t.latLabelStyle=Object.assign({},$l,t.latLabelStyle||{}),this.options=Object.assign({},tu,t,{extent:this._getDefaultExtent(t.extent,e),wrapX:"boolean"==typeof t.wrapX?t.wrapX:e.getRenderWorldCopies()}),this.oldExtent=this.options.extent,this._calcInterval(),this.isRotate=!1,this.visible=!0,this.features=this._getGraticuleFeatures()}},{key:"_createCanvas",value:function(){if(!this.canvas){this.canvas=document.createElement("canvas"),this.canvas.id=this.canvasId,this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.left="0px";var e=("undefined"==typeof window?{}:window).devicePixelRatio||1;this.canvas.width=parseInt(this.map.getCanvas().style.width)*e,this.canvas.height=parseInt(this.map.getCanvas().style.height)*e,this.canvas.style.width=this.map.getCanvas().style.width,this.canvas.style.height=this.map.getCanvas().style.height,this.canvas.globalAlpha=this.options.opacity,this.mapContainer=this.map.getCanvasContainer(),this.mapContainer.appendChild(this.canvas)}}},{key:"_drawCanvas",value:function(){this.canvas||this._createCanvas(),this.setVisibility(),this._reset()}},{key:"_resizeCallback",value:function(){this.mapContainer&&this.mapContainer.removeChild(this.canvas),this.canvas=null,this._drawCanvas()}},{key:"_reset",value:function(){this._updateRotate(),this._updateExtent(),this._calcInterval(),this._drawLabel()}},{key:"_setLayerTop",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.map;if(t){var r=t.getStyle&&t.getStyle().layers;r&&r.length&&r.findIndex(function(t){return t.id===e.sourceId})!==r.length-1&&t.getLayer(this.sourceId)&&(t.removeLayer(this.sourceId),this._addGraticuleLayer())}}},{key:"_getDefaultExtent",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.map,n=(r.getCRS&&r.getCRS()||{}).extent;if(n||(n=[-180,-85.05119,180,85.05119]),!e||0===e.length)return n;var o=t().LngLatBounds.convert(e),i=o._sw,a=o._ne;return e=[i.lng,i.lat,a.lng,a.lat],e=[Math.max(n[0],e[0]),Math.max(n[1],e[1]),Math.min(n[2],e[2]),Math.min(n[3],e[3])]}},{key:"_updateRotate",value:function(){var e=this.map.getBearing();this.isRotate=e>-180&&e<=-90||e>=90&&e<180}},{key:"_updateExtent",value:function(){if(this.options.wrapX&&!this.oldExtent){var e=this.map.getBounds(),t=e._ne,r=e._sw;this.options.extent=[r.lng,r.lat,t.lng,t.lat]}}},{key:"_calcInterval",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.interval;"function"==typeof e?(e=e(this.map),this._currLngInterval=e,this._currLatInterval=e):(this._currLngInterval=e,this._currLatInterval=e)}},{key:"_formatLat",value:function(e){return this.options.latFormatTickLabel?this.options.latLabelFormatter(e):e<0?vs(-1*e)+"S":e>0?vs(e)+"N":""+vs(e)}},{key:"_formatLng",value:function(e){return this.options.lngLabelFormatter?this.options.lngLabelFormatter(e):(e=bs(e))>0&&e<=180?vs(e)+"E":e<0&&e>=-180?vs(-1*e)+"W":""+vs(e)}},{key:"_parsePxToInt",value:function(e){e.length>2&&"p"===e.charAt(e.length-2)&&(e=e.substr(0,e.length-2));try{return parseInt(e,10)}catch(e){console.log(e)}return 0}},{key:"_drawLabel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.visible,r=this.canvas,n=r.getContext("2d");if(t&&this.options.showLabel){if(this.map){this._currLngInterval&&this._currLatInterval||this._calcInterval(),n.clearRect(0,0,r.width,r.height);var o=this.options,i=o.lngLabelStyle,a=o.latLabelStyle,s=this._getGridiculePoints(),l=s.lngPoints,u=s.latPonits;l.forEach(function(t){e._drawLng(n,t[0],t[1],t[2],i)}),u.forEach(function(t){e._drawLat(n,t[0],t[1],t[2],a)})}}else n.clearRect(0,0,r.width,r.height)}},{key:"_drawLat",value:function(e,t,r,n,o){e=this._setLabelStyle(e,o);var i=this.canvas.width,a=12;try{var s=e.font.split(" ")[0];a=this._parsePxToInt(s)}catch(e){console.log(e)}if(!n){var l=t;t=r,r=this.map.project([l,t])}var u=this._formatLat(t),c=e.measureText(u).width;e.strokeText(u,(n?i:r.x)-c,(n?r:r.y)+a/2),e.fillText(u,(n?i:r.x)-c,(n?r:r.y)+a/2)}},{key:"_drawLng",value:function(e,t,r,n,o){e=this._setLabelStyle(e,o);var i=this.canvas.height;if(!n){var a=r;r=this.map.project([t,a])}var s=this._formatLng(t),l=e.measureText(s).width;e.strokeText(s,(n?r:r.x)-l/2,n?i:r.y),e.fillText(s,(n?r:r.x)-l/2,n?i:r.y)}},{key:"_getLatPoints",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-180,180],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.features;if(o){if(this.options.wrapX&&-180===t[0]&&180===t[1])return[];var i=[];return o.forEach(function(o){var a=o.geometry.coordinates[0][1];if(o.geometry.coordinates[1][1]===a){var s="number"==typeof n?n:t[1];e.isRotate&&(s="number"==typeof r?r:t[0]),e.options.wrapX&&(i=i.concat(e._getWrapPoints(s,a,[s,s]))),i.push([s,a])}}),i}}},{key:"_getLngPoints",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-90,90],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.features;if(o){var i="number"==typeof r?r:t[0];this.isRotate&&(i="number"==typeof n?n:t[1]);var a=[];return o.forEach(function(t){var r=t.geometry.coordinates[0][0];t.geometry.coordinates[1][0]===r&&(a.push([r,i]),e.options.wrapX&&(a=a.concat(e._getWrapPoints(r,i))))}),a}}},{key:"_getWrapPoints",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.oldExtent,n=[],o=this.map.getBounds(),i=o._ne,a=o._sw,s=r.length>2?r[2]:r[1];e>=a.lng;){var l=bs(e,180===s,-180===r[0]);(!r||l>=r[0]&&l<=s)&&n.push([e,t]),e-=360}for(;e<=i.lng;){var u=bs(e,180===s,-180===r[0]);(!r||u>=r[0]&&u<=s)&&n.push([e,t]),e+=360}return n}},{key:"_getGridiculePoints",value:function(){var e=this._getEdgeLat(),t=this._getEdgeLng(),r=this._getRange(),n=r.latRange,o=r.lngRange,i=r.firstLat,a=r.firstLng,s=r.lastLat,l=r.lastLng;return{latPonits:this._getUniquePoint(this._getLatPoints(o,a,l),e,1),lngPoints:this._getUniquePoint(this._getLngPoints(n,i,s),t,0)}}},{key:"_getEdgeLat",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._currLatInterval,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.map,n=[],o=[],i=this.canvas.width,a=this.canvas.height,s=this._getRange().extent,l=this.map.getBounds()._ne;if(this.options.wrapX&&bs(l.lng)>s[2])return[];for(var u=this._countDecimals(t),c=0;c<=a;c++){var f=r.unproject([i,c]),p=bs(f.lng);(this.options.wrapX?p>=s[0]&&p<=s[2]:f.lng>=s[0]&&f.lng<=s[2])&&f.lat>=s[1]&&f.lat<=s[3]&&(n.push([f.lat,c]),o.push(f.lat),void 0===e&&f.lat.toFixed(u)%t==0&&(e=Number(f.lat.toFixed(u))))}var h=this._getIntersectRange(e,o,n,t),y=h.first,d=h.last,b=h.coordinates,v=h.points;e=Math.min(Math.max(y,-90),90);var m=Math.max(Math.min(Math.round(d),90),-90);return-90!==e||-90!==m?this._getClosestCoordinate(e,m,b,v,t):[]}},{key:"_getEdgeLng",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._currLngInterval,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.map,n=[],o=[],i=this.canvas.width,a=this.canvas.height,s=this.options.extent,l=this._countDecimals(t),u=this.map.getBounds()._sw;if(this.options.wrapX&&bs(u.lat)>s[3])return[];for(var c=0;c<=i;c++){var f=r.unproject([c,a]),p=bs(f.lng);(this.options.wrapX?p>=s[0]&&p<=s[2]:f.lng>=s[0]&&f.lng<=s[2])&&f.lat>=s[1]&&f.lat<=s[3]&&(n.push([f.lng,c]),o.push(f.lng),void 0===e&&f.lng.toFixed(l)%t==0&&(e=Number(f.lng.toFixed(l))))}var h=this._getIntersectRange(e,o,n,t),y=h.first,d=h.last,b=h.coordinates,v=h.points;return e=y,this._getClosestCoordinate(e,d,b,v,t)}},{key:"_getIntersectRange",value:function(e,t,r,n){var o=t[t.length-1];if(e>o){o=e,t.reverse(),r.reverse();for(var i=this._countDecimals(n),a=0;a<=t.length;a++){var s=t[a];if(s.toFixed(i)%n==0){e=Number(s.toFixed(i));break}}}return{first:e,last:o,coordinates:t,points:r}}},{key:"_getClosestCoordinate",value:function(e,t,r,n,o){for(var i=[],a=e;a<=t;){var s=this._getClosestNumberIndex(a,r),l=n[s];i.push([Math.round(l[0]),l[1],!0]),a+=o,r=r.slice(s),n=n.slice(s)}return i}},{key:"_getClosestNumberIndex",value:function(e,t){for(var r=0,n=Number.MAX_VALUE,o=0;o<t.length;o++){var i=Math.abs(t[o]-e);if(i<=n){if(i===n&&t[o]<t[r])continue;r=o,n=i}}return r}},{key:"_getUniquePoint",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.options.wrapX)return e.concat(t);if(!t||0===t.length)return e;var n=t,o=this.canvas.width,i=this.canvas.height;for(var a in e){var s=this.map.project(e[a]),l=n.findIndex(function(t){return t[0]===e[a][r]});l<=-1?n.push(e[a]):s&&s.x>=0&&s.x<=o&&s.y>=0&&s.y<=i&&(n[l]=e[a])}return n}},{key:"_countDecimals",value:function(e){return Math.floor(e)!==e&&e.toString().split(".")[1].length||0}},{key:"_addGraticuleLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.features;if(!this.map.getSource(this.sourceId)){var t={type:"geojson",data:{type:"FeatureCollection",features:e}};this.map.addSource(this.sourceId,t)}if(!this.map.getLayer(this.sourceId)){var r=Object.assign({id:this.sourceId,type:"line",source:this.sourceId},this._transformStrokeStyle());this.map.addLayer(r)}}},{key:"_updateGraticuleLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.features;if(this.map.getSource(this.sourceId)){var t={type:"FeatureCollection",features:e};this.map.getSource(this.sourceId).setData(t)}this._addGraticuleLayer()}},{key:"_getGraticuleFeatures",value:function(){var e=this._currLngInterval||10,t=this._currLatInterval||10,r=[],n=this._getRange(),o=n.latRange,i=n.lngRange,a=n.firstLat,s=n.firstLng,l=n.lastLat,u=n.lastLng;this.options.wrapX&&!this.oldExtent&&(o=[-90,90],i=[-180,180],a=s=l=u=null),"number"==typeof s&&r.unshift(this._makeLineFeature(this._makeLineCoords(s,o,a,l))),"number"==typeof u&&r.unshift(this._makeLineFeature(this._makeLineCoords(u,o,a,l)));for(var c=i[0];c<=i[1];c+=e)r.unshift(this._makeLineFeature(this._makeLineCoords(c,o,a,l)));"number"==typeof a&&r.unshift(this._makeLineFeature(this._makeLineCoords(a,i,s,u,"lat"))),"number"==typeof l&&r.unshift(this._makeLineFeature(this._makeLineCoords(l,i,s,u,"lat")));for(var f=o[0];f<=o[1];f+=t)r.unshift(this._makeLineFeature(this._makeLineCoords(f,i,s,u,"lat")));return r}},{key:"_getRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.extent&&ql(this.options.extent);e&&0!==e.length||(e=this._getDefaultExtent());var t={};if((e=e.map(function(e){return Number(e.toFixed(6))}))[1]%this._currLatInterval!=0){t.firstLat=e[1];var r=Math.ceil(e[1]/this._currLatInterval);e[1]=r*this._currLatInterval}if(e[3]%this._currLatInterval!=0){t.lastLat=e[3];var n=Math.floor(e[3]/this._currLatInterval);e[3]=n*this._currLatInterval}if(e[0]%this._currLngInterval!=0){t.firstLng=e[0];var o=Math.ceil(e[0]/this._currLngInterval);e[0]=o*this._currLngInterval}if(e[2]%this._currLngInterval!=0){t.lastLng=e[2];var i=Math.floor(e[2]/this._currLngInterval);e[2]=i*this._currLngInterval}return Object.assign({latRange:[e[1],e[3]],lngRange:[e[0],e[2]],extent:e},t)}},{key:"_makeLineCoords",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[-90,90],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"lng";e="lng"===o?this._lngFix(e):e,r="number"==typeof r?r:t[0],n="number"==typeof n?n:t[1];for(var i=Math.abs(r-n),a=[],s=r;s<=n;s+=i)"lng"===o?a.push([e,s]):a.push([s,e]);return a}},{key:"_makeLineFeature",value:function(e){return{type:"Feature",geometry:{type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LineString",coordinates:e}}}},{key:"_lngFix",value:function(e){return e>=180?180:e<=-180?-180:e}},{key:"_transformStrokeStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.strokeStyle;if(!e||"string"==typeof e)return{paint:{"line-color":e||"rgba(0,0,0,0.2)"}};var t={visibility:this.visible?"visible":"none","line-join":e.lineJoin||"round","line-cap":e.lineCap||"round"},r={"line-color":e.lineColor||"rgba(0,0,0,0.2)","line-width":e.lineWidth||1,"line-offset":e.lineDashOffset||0,"line-translate-anchor":"viewport"};return e.lineWidth&&("function"==typeof e.lineWidth?r["line-width"]=e.lineWidth(this.map):r["line-width"]=e.lineWidth),e.lindDasharray&&("function"==typeof e.lindDasharray?r["line-dasharray"]=e.lindDasharray(this.map):r["line-dasharray"]=e.lindDasharray),{layout:t,paint:r}}},{key:"_setLabelStyle",value:function(e,t){return t.textColor&&(e.fillStyle=t.textColor),t.textSize&&(e.font=t.textSize+" "+(t.textFont||["Calibri","sans-serif"]).join(",")),t.textHaloColor&&(e.strokeStyle=t.textHaloColor,e.lineWidth=t.textHaloWidth||1),t.textAnchor&&(e.textBaseline=this._getTxetBaseline(t.textAnchor),e.textAligin=this._getTxetAlign(t.textAligin)),e}},{key:"_getTxetBaseline",value:function(e){if(!e)return"bottom";var t=e.split("-");return t.includes("bottom")?"bottom":t.includes("top")?"top":t.includes("center")?"middle":void 0}},{key:"_getTxetAlign",value:function(e){if(!e)return"center";var t=e.split("-");return t.includes("left")?"left":t.includes("right")?"right":t.includes("center")?"center":void 0}}])&&Xl(r.prototype,n),o&&Xl(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(),nu=r(861),ou=r.n(nu),iu=(r(957),r(937),r(238)),au=r.n(iu),su=window.fetch,lu={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(e){for(var t in e){this.queryKeys.push(t),"string"!=typeof e[t]&&(e[t]=j.toJSON(e[t]));var r=encodeURIComponent(e[t]);this.queryValues.push(r)}},issue:function(e){for(var t=this,r=t.getUid(),n=e.url,o=[],i=new Promise(function(e){t.supermap_callbacks[r]=function(n){delete t.supermap_callbacks[r],e(n)}}),a=n,s=0,l=t.queryKeys?t.queryKeys.length:0,u=0;u<l;u++)if(a.length+t.queryKeys[u].length+2>=t.limitLength){if(0==s)return!1;o.push(a),a=n,s=0,u--}else if(a.length+t.queryKeys[u].length+2+t.queryValues[u].length>t.limitLength)for(var c=t.queryValues[u];c.length>0;){var f=t.limitLength-a.length-t.queryKeys[u].length-2;a.indexOf("?")>-1?a+="&":a+="?";var p=c.substring(0,f);"%"===p.substring(f-1,f)?(f-=1,p=c.substring(0,f)):"%"===p.substring(f-2,f-1)&&(f-=2,p=c.substring(0,f)),a+=t.queryKeys[u]+"="+p,c=c.substring(f),p.length>0&&(o.push(a),a=n,s=0)}else s++,a.indexOf("?")>-1?a+="&":a+="?",a+=t.queryKeys[u]+"="+t.queryValues[u];return o.push(a),t.send(o,"RequestJSONPPromise.supermap_callbacks["+r+"]",e&&e.proxy),i},getUid:function(){return 1e3*(new Date).getTime()+Math.floor(1e17*Math.random())},send:function(e,t,r){var n=e.length;if(n>0)for(var o=(new Date).getTime(),i=0;i<n;i++){var a=e[i];a.indexOf("?")>-1?a+="&":a+="?",a+="sectionCount="+n,a+="&sectionIndex="+i,a+="&jsonpUserID="+o,r&&(a=decodeURIComponent(a),a=r+encodeURIComponent(a)),au()(a,{jsonpCallbackFunction:t,timeout:3e4})}},GET:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings(e.params),this.issue(e)},POST:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},PUT:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},DELETE:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)}},uu=function(){return void 0!=Ql?Ql:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest},cu=function(){return Zl||45e3},fu={commit:function(e,t,r,n){switch(e=e?e.toUpperCase():e){case"GET":return this.get(t,r,n);case"POST":return this.post(t,r,n);case"PUT":return this.put(t,r,n);case"DELETE":return this.delete(t,r,n);default:return this.get(t,r,n)}},supportDirectRequest:function(e,t){return!!j.isInTheSameDomain(e)||(void 0!=t.crossOrigin?t.crossOrigin:uu()||t.proxy)},get:function(e,t,r){r=r||{};if(e=j.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,r),!this.supportDirectRequest(e,r)){var n={url:e=e.replace(".json",".jsonp"),data:t};return lu.GET(n)}return this.urlIsLong(e)?this._postSimulatie("GET",e.substring(0,e.indexOf("?")),t,r):this._fetch(e,t,r,"GET")},delete:function(e,t,r){r=r||{};if(e=j.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,r),!this.supportDirectRequest(e,r)){e=e.replace(".json",".jsonp");var n={url:e+="&_method=DELETE",data:t};return lu.DELETE(n)}return this.urlIsLong(e)?this._postSimulatie("DELETE",e.substring(0,e.indexOf("?")),t,r):this._fetch(e,t,r,"DELETE")},post:function(e,t,r){if(r=r||{},!this.supportDirectRequest(e,r)){e=e.replace(".json",".jsonp");var n={url:e+="&_method=POST",data:t};return lu.POST(n)}return this._fetch(this._processUrl(e,r),t,r,"POST")},put:function(e,t,r){if(r=r||{},e=this._processUrl(e,r),!this.supportDirectRequest(e,r)){e=e.replace(".json",".jsonp");var n={url:e+="&_method=PUT",data:t};return lu.PUT(n)}return this._fetch(e,t,r,"PUT")},urlIsLong:function(e){for(var t=0,r=null,n=0,o=e.length;n<o;n++)(r=e.charCodeAt(n))<127?t++:128<=r&&r<=2047?t+=2:2048<=r&&r<=65535&&(t+=3);return!(t<2e3)},_postSimulatie:function(e,t,r,n){return t+=(t.indexOf("?")>-1?"&":"?")+"_method="+e,"string"!=typeof r&&(r=JSON.stringify(r)),this.post(t,r,n)},_processUrl:function(e,t){if(this._isMVTRequest(e))return e;if(-1===e.indexOf(".json")&&!t.withoutFormatSuffix)if(e.indexOf("?")<0)e+=".json";else{var r=e.split("?");2===r.length&&(e=r[0]+".json?"+r[1])}return t&&t.proxy&&("function"==typeof t.proxy?e=t.proxy(e):(e=decodeURIComponent(e),e=t.proxy+encodeURIComponent(e))),e},_fetch:function(e,t,r,n){return(r=r||{}).headers=r.headers||{},r.headers["Content-Type"]||FormData.prototype.isPrototypeOf(t)||(r.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),r.timeout?this._timeout(r.timeout,su(e,{method:n,headers:r.headers,body:"PUT"===n||"POST"===n?t:void 0,credentials:this._getWithCredentials(r),mode:"cors",timeout:cu()}).then(function(e){return e})):su(e,{method:n,body:"PUT"===n||"POST"===n?t:void 0,headers:r.headers,credentials:this._getWithCredentials(r),mode:"cors",timeout:cu()}).then(function(e){return e})},_getWithCredentials:function(e){return!0===e.withCredentials?"include":!1===e.withCredentials?"omit":"same-origin"},_fetchJsonp:function(e,t){return t=t||{},au()(e,{method:"GET",timeout:t.timeout}).then(function(e){return e})},_timeout:function(e,t){return new Promise(function(r,n){setTimeout(function(){n(new Error("timeout"))},e),t.then(r,n)})},_getParameterString:function(e){var t=[];for(var r in e){var n,o=e[r];if(null!=o&&"function"!=typeof o)n=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),t.push(encodeURIComponent(r)+"="+n)}return t.join("&")},_isMVTRequest:function(e){return e.indexOf(".mvt")>-1||e.indexOf(".pbf")>-1}};!function(e){e[e.Unknown=0]="Unknown",e[e.Point=1]="Point",e[e.LineString=2]="LineString",e[e.Polygon=3]="Polygon",e[e.MultiPoint=4]="MultiPoint",e[e.MultiLineString=5]="MultiLineString",e[e.MultiPolygon=6]="MultiPolygon",e[e.GeometryCollection=7]="GeometryCollection",e[e.CircularString=8]="CircularString",e[e.CompoundCurve=9]="CompoundCurve",e[e.CurvePolygon=10]="CurvePolygon",e[e.MultiCurve=11]="MultiCurve",e[e.MultiSurface=12]="MultiSurface",e[e.Curve=13]="Curve",e[e.Surface=14]="Surface",e[e.PolyhedralSurface=15]="PolyhedralSurface",e[e.TIN=16]="TIN",e[e.Triangle=17]="Triangle"}(Kl||(Kl={}));var pu=r(828);function hu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var yu,du=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}var t,r,n;return t=e,n=[{key:"getRootAsGeometry",value:function(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsGeometry",value:function(t,r){return t.setPosition(t.position()+pu.XU),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startGeometry",value:function(e){e.startObject(8)}},{key:"addEnds",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"createEndsVector",value:function(e,t){e.startVector(4,t.length,4);for(var r=t.length-1;r>=0;r--)e.addInt32(t[r]);return e.endVector()}},{key:"startEndsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"addXy",value:function(e,t){e.addFieldOffset(1,t,0)}},{key:"createXyVector",value:function(e,t){e.startVector(8,t.length,8);for(var r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}},{key:"startXyVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addZ",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"createZVector",value:function(e,t){e.startVector(8,t.length,8);for(var r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}},{key:"startZVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addM",value:function(e,t){e.addFieldOffset(3,t,0)}},{key:"createMVector",value:function(e,t){e.startVector(8,t.length,8);for(var r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}},{key:"startMVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addT",value:function(e,t){e.addFieldOffset(4,t,0)}},{key:"createTVector",value:function(e,t){e.startVector(8,t.length,8);for(var r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}},{key:"startTVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addTm",value:function(e,t){e.addFieldOffset(5,t,0)}},{key:"createTmVector",value:function(e,t){e.startVector(8,t.length,8);for(var r=t.length-1;r>=0;r--)e.addInt64(t[r]);return e.endVector()}},{key:"startTmVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addType",value:function(e,t){e.addFieldInt8(6,t,Kl.Unknown)}},{key:"addParts",value:function(e,t){e.addFieldOffset(7,t,0)}},{key:"createPartsVector",value:function(e,t){e.startVector(4,t.length,4);for(var r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}},{key:"startPartsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"endGeometry",value:function(e){return e.endObject()}},{key:"createGeometry",value:function(t,r,n,o,i,a,s,l,u){return e.startGeometry(t),e.addEnds(t,r),e.addXy(t,n),e.addZ(t,o),e.addM(t,i),e.addT(t,a),e.addTm(t,s),e.addType(t,l),e.addParts(t,u),e.endGeometry(t)}}],(r=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"ends",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb.__vector(this.bb_pos+t)+4*e):0}},{key:"endsLength",value:function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"endsArray",value:function(){var e=this.bb.__offset(this.bb_pos,4);return e?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"xy",value:function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"xyLength",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"xyArray",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"z",value:function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"zLength",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"zArray",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"m",value:function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"mLength",value:function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"mArray",value:function(){var e=this.bb.__offset(this.bb_pos,10);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"t",value:function(e){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"tLength",value:function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"tArray",value:function(){var e=this.bb.__offset(this.bb_pos,12);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"tm",value:function(e){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readUint64(this.bb.__vector(this.bb_pos+t)+8*e):BigInt(0)}},{key:"tmLength",value:function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"type",value:function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint8(this.bb_pos+e):Kl.Unknown}},{key:"parts",value:function(t,r){var n=this.bb.__offset(this.bb_pos,18);return n?(r||new e).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}},{key:"partsLength",value:function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}}])&&hu(t.prototype,r),n&&hu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function bu(e,t){for(var r=[],n=0;n<e.length;n+=2){var o=[e[n],e[n+1]];t&&o.push(t[n>>1]),r.push(o)}return r}function vu(e,t,r){if(!r||0===r.length)return[bu(e,t)];var n,o=0,i=Array.from(r).map(function(t){return e.slice(o,o=t<<1)});return t&&(o=0,n=Array.from(r).map(function(e){return t.slice(o,o=e)})),i.map(function(e,t){return bu(e,n?n[t]:void 0)})}function mu(e,t){var r=t;if(r===Kl.Unknown&&(r=e.type()),r===Kl.GeometryCollection){for(var n=[],o=0;o<e.partsLength();o++){var i=e.parts(o),a=i.type();n.push(mu(i,a))}return{type:Kl[r],geometries:n}}if(r===Kl.MultiPolygon){for(var s=[],l=0;l<e.partsLength();l++)s.push(mu(e.parts(l),Kl.Polygon));return{type:Kl[r],coordinates:s.map(function(e){return e.coordinates})}}var u=function(e,t){var r=e.xyArray(),n=e.zArray();switch(t){case Kl.Point:var o=Array.from(r);return n&&o.push(n[0]),o;case Kl.MultiPoint:case Kl.LineString:return bu(r,n);case Kl.MultiLineString:case Kl.Polygon:return vu(r,n,e.endsArray())}}(e,r);return{type:Kl[r],coordinates:u}}function gu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}!function(e){e[e.Byte=0]="Byte",e[e.UByte=1]="UByte",e[e.Bool=2]="Bool",e[e.Short=3]="Short",e[e.UShort=4]="UShort",e[e.Int=5]="Int",e[e.UInt=6]="UInt",e[e.Long=7]="Long",e[e.ULong=8]="ULong",e[e.Float=9]="Float",e[e.Double=10]="Double",e[e.String=11]="String",e[e.Json=12]="Json",e[e.DateTime=13]="DateTime",e[e.Binary=14]="Binary"}(yu||(yu={}));var wu=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}var t,r,n;return t=e,n=[{key:"getRootAsColumn",value:function(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsColumn",value:function(t,r){return t.setPosition(t.position()+pu.XU),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startColumn",value:function(e){e.startObject(11)}},{key:"addName",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addType",value:function(e,t){e.addFieldInt8(1,t,yu.Byte)}},{key:"addTitle",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"addDescription",value:function(e,t){e.addFieldOffset(3,t,0)}},{key:"addWidth",value:function(e,t){e.addFieldInt32(4,t,-1)}},{key:"addPrecision",value:function(e,t){e.addFieldInt32(5,t,-1)}},{key:"addScale",value:function(e,t){e.addFieldInt32(6,t,-1)}},{key:"addNullable",value:function(e,t){e.addFieldInt8(7,+t,1)}},{key:"addUnique",value:function(e,t){e.addFieldInt8(8,+t,0)}},{key:"addPrimaryKey",value:function(e,t){e.addFieldInt8(9,+t,0)}},{key:"addMetadata",value:function(e,t){e.addFieldOffset(10,t,0)}},{key:"endColumn",value:function(e){var t=e.endObject();return e.requiredField(t,4),t}},{key:"createColumn",value:function(t,r,n,o,i,a,s,l,u,c,f,p){return e.startColumn(t),e.addName(t,r),e.addType(t,n),e.addTitle(t,o),e.addDescription(t,i),e.addWidth(t,a),e.addPrecision(t,s),e.addScale(t,l),e.addNullable(t,u),e.addUnique(t,c),e.addPrimaryKey(t,f),e.addMetadata(t,p),e.endColumn(t)}}],(r=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"name",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"type",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):yu.Byte}},{key:"title",value:function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"description",value:function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"width",value:function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt32(this.bb_pos+e):-1}},{key:"precision",value:function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt32(this.bb_pos+e):-1}},{key:"scale",value:function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):-1}},{key:"nullable",value:function(){var e=this.bb.__offset(this.bb_pos,18);return!e||!!this.bb.readInt8(this.bb_pos+e)}},{key:"unique",value:function(){var e=this.bb.__offset(this.bb_pos,20);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"primaryKey",value:function(){var e=this.bb.__offset(this.bb_pos,22);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"metadata",value:function(e){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__string(this.bb_pos+t,e):null}}])&&gu(t.prototype,r),n&&gu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ou(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Su=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}var t,r,n;return t=e,n=[{key:"getRootAsFeature",value:function(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsFeature",value:function(t,r){return t.setPosition(t.position()+pu.XU),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startFeature",value:function(e){e.startObject(3)}},{key:"addGeometry",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addProperties",value:function(e,t){e.addFieldOffset(1,t,0)}},{key:"createPropertiesVector",value:function(e,t){e.startVector(1,t.length,1);for(var r=t.length-1;r>=0;r--)e.addInt8(t[r]);return e.endVector()}},{key:"startPropertiesVector",value:function(e,t){e.startVector(1,t,1)}},{key:"addColumns",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"createColumnsVector",value:function(e,t){e.startVector(4,t.length,4);for(var r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}},{key:"startColumnsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"endFeature",value:function(e){return e.endObject()}},{key:"finishFeatureBuffer",value:function(e,t){e.finish(t)}},{key:"finishSizePrefixedFeatureBuffer",value:function(e,t){e.finish(t,void 0,!0)}},{key:"createFeature",value:function(t,r,n,o){return e.startFeature(t),e.addGeometry(t,r),e.addProperties(t,n),e.addColumns(t,o),e.endFeature(t)}}],(r=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"geometry",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?(e||new du).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}},{key:"properties",value:function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}},{key:"propertiesLength",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"propertiesArray",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"columns",value:function(e,t){var r=this.bb.__offset(this.bb_pos,8);return r?(t||new wu).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}},{key:"columnsLength",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}}])&&Ou(t.prototype,r),n&&Ou(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),_u=(new TextEncoder,new TextDecoder);function Pu(e,t){var r={};if(!t||0===t.length)return r;var n=e.propertiesArray();if(!n)return r;for(var o=new DataView(n.buffer,n.byteOffset),i=e.propertiesLength(),a=0;a<i;){var s=o.getUint16(a,!0);a+=2;var l=t[s],u=l.name;switch(l.type){case yu.Bool:r[u]=!!o.getUint8(a),a+=1;break;case yu.Byte:r[u]=o.getInt8(a),a+=1;break;case yu.UByte:r[u]=o.getUint8(a),a+=1;break;case yu.Short:r[u]=o.getInt16(a,!0),a+=2;break;case yu.UShort:r[u]=o.getUint16(a,!0),a+=2;break;case yu.Int:r[u]=o.getInt32(a,!0),a+=4;break;case yu.UInt:r[u]=o.getUint32(a,!0),a+=4;break;case yu.Long:r[u]=Number(o.getBigInt64(a,!0)),a+=8;break;case yu.ULong:r[u]=Number(o.getBigUint64(a,!0)),a+=8;break;case yu.Float:r[u]=o.getFloat32(a,!0),a+=4;break;case yu.Double:r[u]=o.getFloat64(a,!0),a+=8;break;case yu.DateTime:case yu.String:var c=o.getUint32(a,!0);a+=4,r[u]=_u.decode(n.subarray(a,a+c)),a+=c;break;case yu.Json:var f=o.getUint32(a,!0);a+=4;var p=_u.decode(n.subarray(a,a+f));r[u]=JSON.parse(p),a+=f;break;default:throw new Error("Unknown type "+l.type)}}return r}function xu(e,t){var r=t.columns;return{type:"Feature",geometry:mu(e.geometry(),t.geometryType),properties:Pu(e,r)}}var Eu=r(425);function ku(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ju=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}var t,r,n;return t=e,n=[{key:"getRootAsCrs",value:function(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsCrs",value:function(t,r){return t.setPosition(t.position()+pu.XU),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startCrs",value:function(e){e.startObject(6)}},{key:"addOrg",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addCode",value:function(e,t){e.addFieldInt32(1,t,0)}},{key:"addName",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"addDescription",value:function(e,t){e.addFieldOffset(3,t,0)}},{key:"addWkt",value:function(e,t){e.addFieldOffset(4,t,0)}},{key:"addCodeString",value:function(e,t){e.addFieldOffset(5,t,0)}},{key:"endCrs",value:function(e){return e.endObject()}},{key:"createCrs",value:function(t,r,n,o,i,a,s){return e.startCrs(t),e.addOrg(t,r),e.addCode(t,n),e.addName(t,o),e.addDescription(t,i),e.addWkt(t,a),e.addCodeString(t,s),e.endCrs(t)}}],(r=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"org",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"code",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}},{key:"name",value:function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"description",value:function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"wkt",value:function(e){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"codeString",value:function(e){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb_pos+t,e):null}}])&&ku(t.prototype,r),n&&ku(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Cu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Tu=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}var t,r,n;return t=e,n=[{key:"getRootAsHeader",value:function(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsHeader",value:function(t,r){return t.setPosition(t.position()+pu.XU),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startHeader",value:function(e){e.startObject(14)}},{key:"addName",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addEnvelope",value:function(e,t){e.addFieldOffset(1,t,0)}},{key:"createEnvelopeVector",value:function(e,t){e.startVector(8,t.length,8);for(var r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}},{key:"startEnvelopeVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addGeometryType",value:function(e,t){e.addFieldInt8(2,t,Kl.Unknown)}},{key:"addHasZ",value:function(e,t){e.addFieldInt8(3,+t,0)}},{key:"addHasM",value:function(e,t){e.addFieldInt8(4,+t,0)}},{key:"addHasT",value:function(e,t){e.addFieldInt8(5,+t,0)}},{key:"addHasTm",value:function(e,t){e.addFieldInt8(6,+t,0)}},{key:"addColumns",value:function(e,t){e.addFieldOffset(7,t,0)}},{key:"createColumnsVector",value:function(e,t){e.startVector(4,t.length,4);for(var r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}},{key:"startColumnsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"addFeaturesCount",value:function(e,t){e.addFieldInt64(8,t,BigInt("0"))}},{key:"addIndexNodeSize",value:function(e,t){e.addFieldInt16(9,t,16)}},{key:"addCrs",value:function(e,t){e.addFieldOffset(10,t,0)}},{key:"addTitle",value:function(e,t){e.addFieldOffset(11,t,0)}},{key:"addDescription",value:function(e,t){e.addFieldOffset(12,t,0)}},{key:"addMetadata",value:function(e,t){e.addFieldOffset(13,t,0)}},{key:"endHeader",value:function(e){return e.endObject()}},{key:"finishHeaderBuffer",value:function(e,t){e.finish(t)}},{key:"finishSizePrefixedHeaderBuffer",value:function(e,t){e.finish(t,void 0,!0)}}],(r=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"name",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"envelope",value:function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"envelopeLength",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"envelopeArray",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"geometryType",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):Kl.Unknown}},{key:"hasZ",value:function(){var e=this.bb.__offset(this.bb_pos,10);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"hasM",value:function(){var e=this.bb.__offset(this.bb_pos,12);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"hasT",value:function(){var e=this.bb.__offset(this.bb_pos,14);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"hasTm",value:function(){var e=this.bb.__offset(this.bb_pos,16);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"columns",value:function(e,t){var r=this.bb.__offset(this.bb_pos,18);return r?(t||new wu).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}},{key:"columnsLength",value:function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"featuresCount",value:function(){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readUint64(this.bb_pos+e):BigInt("0")}},{key:"indexNodeSize",value:function(){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readUint16(this.bb_pos+e):16}},{key:"crs",value:function(e){var t=this.bb.__offset(this.bb_pos,24);return t?(e||new ju).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}},{key:"title",value:function(e){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"description",value:function(e){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"metadata",value:function(e){var t=this.bb.__offset(this.bb_pos,30);return t?this.bb.__string(this.bb_pos+t,e):null}}])&&Cu(t.prototype,r),n&&Cu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ru(e){for(var t=Tu.getRootAsHeader(e),r=t.featuresCount(),n=t.indexNodeSize(),o=[],i=0;i<t.columnsLength();i++){var a=t.columns(i);if(!a)throw new Error("Column unexpectedly missing");if(!a.name())throw new Error("Column name unexpectedly missing");o.push({name:a.name(),type:a.type(),title:a.title(),description:a.description(),width:a.width(),precision:a.precision(),scale:a.scale(),nullable:a.nullable(),unique:a.unique(),primary_key:a.primaryKey()})}var s=t.crs(),l=s?{org:s.org(),code:s.code(),name:s.name(),description:s.description(),wkt:s.wkt(),code_string:s.codeString()}:null;return{geometryType:t.geometryType(),columns:o,envelope:null,featuresCount:Number(r),indexNodeSize:n,crs:l,title:t.title(),description:t.description(),metadata:t.metadata()}}var Au=r(351);function Lu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Iu,Mu=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._extraRequestThreshold=262144}var t,r,n;return t=e,(r=[{key:"extraRequestThreshold",value:function(){return this._extraRequestThreshold}},{key:"setExtraRequestThreshold",value:function(e){if(e<0)throw new Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=e}}])&&Lu(t.prototype,r),n&&Lu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Nu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Mu.global=new Mu,function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error"}(Iu||(Iu={}));var Du=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log.apply(this,[Iu.Debug].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log.apply(this,[Iu.Info].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log.apply(this,[Iu.Warn].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log.apply(this,[Iu.Error].concat(t))}},{key:"log",value:function(e){if(!(this.logLevel>e)){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];switch(e){case Iu.Debug:var o;(o=console).debug.apply(o,r);break;case Iu.Info:var i;(i=console).info.apply(i,r);break;case Iu.Warn:var a;(a=console).warn.apply(a,r);break;case Iu.Error:var s;(s=console).error.apply(s,r)}}}}],(r=null)&&Nu(t.prototype,r),n&&Nu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Fu(e){"@babel/helpers - typeof";return(Fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bu(){Bu=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var c={};function f(){}function p(){}function h(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(P([])));b&&b!==t&&r.call(b,o)&&(y=b);var v=h.prototype=f.prototype=Object.create(y);function m(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function g(e,t){var n;this._invoke=function(o,i){function a(){return new t(function(n,a){!function n(o,i,a,s){var l=u(e[o],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==Fu(f)&&r.call(f,"__await")?t.resolve(f.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(l.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function P(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return p.prototype=h,s(v,"constructor",h),s(h,"constructor",p),p.displayName=s(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},m(g.prototype),s(g.prototype,i,function(){return this}),e.AsyncIterator=g,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=P,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}function Gu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Uu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Uu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ju(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hu(e){var t,r;function n(t,r){try{var i=e[t](r),a=i.value,s=a instanceof zu;Promise.resolve(s?a.v:a).then(function(r){if(s){var l="return"===t?"return":"next";if(!a.k||r.done)return n(l,r);r=e[l](r).value}o(i.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise(function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function zu(e,t){this.v=e,this.k=t}Du.logLevel=Iu.Warn,Hu.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Hu.prototype.next=function(e){return this._invoke("next",e)},Hu.prototype.throw=function(e){return this._invoke("throw",e)},Hu.prototype.return=function(e){return this._invoke("return",e)};var Wu=40;function qu(e,t){t=Math.min(Math.max(+t,2),65535);var r=e,n=r;do{n+=r=Math.ceil(r/t)}while(1!==r);return n*Wu}function Yu(e,t){if(t<2)throw new Error("Node size must be at least 2");if(0===e)throw new Error("Number of items must be greater than 0");var r=e,n=r,o=[r];do{n+=r=Math.ceil(r/t),o.push(r)}while(1!==r);var i=[];r=n;for(var a=0,s=o;a<s.length;a++){var l=s[a];i.push(r-l),r-=l}for(var u=[],c=0;c<o.length;c++)u.push([i[c],i[c]+o[c]]);return u}function Xu(e,t,r,n){return Qu.apply(this,arguments)}function Qu(){var e;return e=Bu().mark(function e(t,r,n,o){var i,a,s,l,u,c,f,p,h,y;return Bu().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=function(){function e(t,r){Ju(this,e),this._level=r,this.nodes=t}var t,r,n;return t=e,(r=[{key:"level",value:function(){return this._level}},{key:"startNode",value:function(){return this.nodes[0]}},{key:"endNode",value:function(){return this.nodes[1]}},{key:"extendEndNodeToNewOffset",value:function(e){console.assert(e>this.nodes[1]),this.nodes[1]=e}},{key:"toString",value:function(){return"[NodeRange level: ".concat(this._level,", nodes: ").concat(this.nodes[0],"-").concat(this.nodes[1],"]")}}])&&Vu(t.prototype,r),n&&Vu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),a=n.minX,s=n.minY,l=n.maxX,u=n.maxY,Du.info("tree items: ".concat(t,", nodeSize: ").concat(r)),c=Yu(t,r),f=c[0][0],void 0,d=c.length-1,p=new i([0,1],d),h=[p],Du.debug("starting stream search with queue: ".concat(h,", numItems: ").concat(t,", nodeSize: ").concat(r,", levelBounds: ").concat(c)),y=Bu().mark(function e(){var n,p,y,d,b,v,m,g,w,O,S,_;return Bu().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.shift(),Du.debug("popped node: ".concat(n,", queueLength: ").concat(h.length)),p=n.startNode(),y=p>=f,d=Gu(c[n.level()],2),b=d[1],v=Math.min(n.endNode()+r,b),m=v-p,e.next=9,new zu(o(p*Wu,m*Wu),0);case 9:g=e.sent,w=new Float64Array(g),O=new Uint32Array(g),S=Bu().mark(function e(r){var o,c,d,b,v,m,g,S;return Bu().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l<w[(o=5*(r-p))+0])){e.next=3;break}return e.abrupt("return","continue");case 3:if(!(u<w[o+1])){e.next=5;break}return e.abrupt("return","continue");case 5:if(!(a>w[o+2])){e.next=7;break}return e.abrupt("return","continue");case 7:if(!(s>w[o+3])){e.next=9;break}return e.abrupt("return","continue");case 9:if(c=O[8+(o<<1)],d=O[9+(o<<1)],b=Zu(d,c),!y){e.next=17;break}return v=function(){if(r<t-1){var e=5*(r-p+1),n=O[8+(e<<1)];return Zu(O[9+(e<<1)],n)-b}return null}(),e.next=16,[b,r-f,v];case 16:return e.abrupt("return","continue");case 17:if(m=Mu.global.extraRequestThreshold()/Wu,!(void 0!==(g=h[h.length-1])&&g.level()==n.level()-1&&b<g.endNode()+m)){e.next=23;break}return Du.debug('Merging "nodeRange" request into existing range: '.concat(g,", newOffset: ").concat(g.endNode()," -> ").concat(b)),g.extendEndNodeToNewOffset(b),e.abrupt("return","continue");case 23:void 0,_=n.level()-1,S=new i([b,b+1],_),void 0!==g&&g.level()==S.level()?Du.info("Same level, but too far away. Pushing new request at offset: ".concat(b," rather than merging with distant ").concat(g)):Du.info("Pushing new level for ".concat(S," onto queue with nearestNodeRange: ").concat(g," since there's not already a range for this level.")),h.push(S);case 26:case"end":return e.stop()}var _},e)}),_=p;case 14:if(!(_<v)){e.next=22;break}return e.delegateYield(S(_),"t0",16);case 16:if("continue"!==e.t0){e.next=19;break}return e.abrupt("continue",19);case 19:_++,e.next=14;break;case 22:case"end":return e.stop()}},e)});case 9:if(0==h.length){e.next=13;break}return e.delegateYield(y(),"t0",11);case 11:e.next=9;break;case 13:case"end":return e.stop()}var d},e)}),(Qu=function(){return new Hu(e.apply(this,arguments))}).apply(this,arguments)}function Zu(e,t){if(0!=(4293918720&e))throw Error("integer is too large to be safely represented");return t+e*Math.pow(2,32)}var Ku=new Uint8Array([102,103,98,3,102,103,98,0]),$u=4;function ec(e){"@babel/helpers - typeof";return(ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tc(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=nc(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function rc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||nc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nc(e,t){if(e){if("string"==typeof e)return oc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oc(e,t):void 0}}function oc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ic(){ic=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var c={};function f(){}function p(){}function h(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(P([])));b&&b!==t&&r.call(b,o)&&(y=b);var v=h.prototype=f.prototype=Object.create(y);function m(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function g(e,t){var n;this._invoke=function(o,i){function a(){return new t(function(n,a){!function n(o,i,a,s){var l=u(e[o],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==ec(f)&&r.call(f,"__await")?t.resolve(f.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(l.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function P(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return p.prototype=h,s(v,"constructor",h),s(h,"constructor",p),p.displayName=s(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},m(g.prototype),s(g.prototype,i,function(){return this}),e.AsyncIterator=g,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=P,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}function ac(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function sc(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){ac(i,n,o,a,s,"next",e)}function s(e){ac(i,n,o,a,s,"throw",e)}a(void 0)})}}function lc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cc(e,t,r){return t&&uc(e.prototype,t),r&&uc(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function fc(e){return function(){return new pc(e.apply(this,arguments))}}function pc(e){var t,r;function n(t,r){try{var i=e[t](r),a=i.value,s=a instanceof dc;Promise.resolve(s?a.v:a).then(function(r){if(s){var l="return"===t?"return":"next";if(!a.k||r.done)return n(l,r);r=e[l](r).value}o(i.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise(function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function hc(e){return new dc(e,0)}function yc(e){var t={},r=!1;function n(t,n){return r=!0,{done:!1,value:new dc(n=new Promise(function(r){r(e[t](n))}),1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):n("return",e)}),t}function dc(e,t){this.v=e,this.k=t}function bc(e){var t,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new vc(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function vc(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(vc=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new vc(e)}pc.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},pc.prototype.next=function(e){return this._invoke("next",e)},pc.prototype.throw=function(e){return this._invoke("throw",e)},pc.prototype.return=function(e){return this._invoke("return",e)};var mc=function(){function e(t,r,n,o){lc(this,e),this.headerClient=t,this.header=r,this.headerLength=n,this.indexLength=o}return cc(e,[{key:"selectBbox",value:function(e){var t=this;return fc(ic().mark(function r(){var n,o,i,a,s,l,u,c,f,p,h,y,d,b,v,m,g,w,O;return ic().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=t.lengthBeforeTree(),o=t.headerClient,i=function(){var e=sc(ic().mark(function e(t,r){var i;return ic().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=0,e.abrupt("return",o.getRange(n+t,r,i,"index"));case 2:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}(),a=[],s=[],l=!1,u=!1,r.prev=7,f=bc(Xu(t.header.featuresCount,t.header.indexNodeSize,e,i));case 9:return r.next=11,hc(f.next());case 11:if(!(l=!(p=r.sent).done)){r.next=26;break}if(h=p.value,y=rc(h,2),d=y[0],b=rc(h,3),(v=b[2])||(Du.info("final feature"),m=Mu.global.extraRequestThreshold(),v=m),0!=s.length){r.next=19;break}return s.push([d,v]),r.abrupt("continue",23);case 19:g=s[s.length-1],(w=d-(g[0]+g[1]))>Mu.global.extraRequestThreshold()&&(Du.info("Pushing new feature batch, since gap ".concat(w," was too large")),a.push(s),s=[]),s.push([d,v]);case 23:l=!1,r.next=9;break;case 26:r.next=32;break;case 28:r.prev=28,r.t0=r.catch(7),u=!0,c=r.t0;case 32:if(r.prev=32,r.prev=33,!l||null==f.return){r.next=37;break}return r.next=37,hc(f.return());case 37:if(r.prev=37,!u){r.next=40;break}throw c;case 40:return r.finish(37);case 41:return r.finish(32);case 42:return t.headerClient.logUsage("header+index"),s.length>0&&a.push(s),O=a.flatMap(function(e){return t.readFeatureBatch(e)}),r.delegateYield(yc(bc(Au.ZN.merge(O))),"t1",46);case 46:case"end":return r.stop()}},r,null,[[7,28,32,42],[33,,37,41]])}))()}},{key:"lengthBeforeTree",value:function(){return Ku.length+$u+this.headerLength}},{key:"lengthBeforeFeatures",value:function(){return this.lengthBeforeTree()+this.indexLength}},{key:"buildFeatureClient",value:function(){return new gc(this.headerClient.httpClient)}},{key:"readFeatureBatch",value:function(e){var t=this;return fc(ic().mark(function r(){var n,o,i,a,s,l,u,c,f,p,h;return ic().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=rc(e[0],1),o=n[0],i=rc(e[e.length-1],2),a=i[0],s=i[1],l=a+s-o,u=t.buildFeatureClient(),c=tc(e),r.prev=7,c.s();case 9:if((f=c.n()).done){r.next=17;break}return p=rc(f.value,1),h=p[0],r.next=13,hc(t.readFeature(u,h,l));case 13:return r.next=15,r.sent;case 15:r.next=9;break;case 17:r.next=22;break;case 19:r.prev=19,r.t0=r.catch(7),c.e(r.t0);case 22:return r.prev=22,c.f(),r.finish(22);case 25:u.logUsage("feature");case 26:case"end":return r.stop()}},r,null,[[7,19,22,25]])}))()}},{key:"readFeature",value:function(){var e=sc(ic().mark(function e(t,r,n){var o,i,a,s,l,u,c;return ic().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r+this.lengthBeforeFeatures(),e.next=3,t.getRange(o,4,n,"feature length");case 3:return a=e.sent,i=new DataView(a).getUint32(0,!0),e.next=7,t.getRange(o+4,i,n,"feature data");case 7:return s=e.sent,l=new Uint8Array(s),(u=new Uint8Array(i+$u)).set(l,$u),(c=new pu.cZ(u)).setPosition($u),e.abrupt("return",Su.getRootAsFeature(c));case 14:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()}],[{key:"open",value:function(){var t=sc(ic().mark(function t(r){var n,o,i,a,s,l,u,c,f,p,h;return ic().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=2024,o=new gc(r),i=function(){var e,t=0;for(e=0;e<3;e++){t+=Math.pow(16,e)*Wu}return t}(),a=n+i,Du.debug("fetching header. minReqLength: ".concat(a," (assumedHeaderLength: ").concat(n,", assumedIndexLength: ").concat(i,")")),t.t0=Uint8Array,t.next=8,o.getRange(0,8,a,"header");case 8:if(t.t1=t.sent,(s=new t.t0(t.t1)).subarray(0,3).every(function(e,t){return Ku[t]===e})){t.next=13;break}throw Du.error("bytes: ".concat(s," != ").concat(Ku)),new Error("Not a FlatGeobuf file");case 13:return Du.debug("magic bytes look good"),t.next=16,o.getRange(8,4,a,"header");case 16:if(u=t.sent,!((l=new DataView(u).getUint32(0,!0))>10485760||l<8)){t.next=21;break}throw new Error("Invalid header size");case 21:return Du.debug("headerLength: ".concat(l)),t.next=24,o.getRange(12,l,a,"header");case 24:return c=t.sent,f=new pu.cZ(new Uint8Array(c)),p=Ru(f),h=qu(p.featuresCount,p.indexNodeSize),Du.debug("completed: opening http reader"),t.abrupt("return",new e(o,p,l,h));case 30:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}]),e}(),gc=function(){function e(t){lc(this,e),this.bytesEverUsed=0,this.bytesEverFetched=0,this.buffer=new ArrayBuffer(0),this.head=0,this.httpClient="string"==typeof t?new wc(t):t}return cc(e,[{key:"getRange",value:function(){var e=sc(ic().mark(function e(t,r,n,o){var i,a,s;return ic().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.bytesEverUsed+=r,i=t-this.head,a=i+r,!(i>=0&&a<=this.buffer.byteLength)){e.next=5;break}return e.abrupt("return",this.buffer.slice(i,a));case 5:return s=Math.max(r,n),this.bytesEverFetched+=s,Du.debug("requesting for new Range: ".concat(t,"-").concat(t+r-1)),e.next=10,this.httpClient.getRange(t,s,o);case 10:return this.buffer=e.sent,this.head=t,e.abrupt("return",this.buffer.slice(0,r));case 13:case"end":return e.stop()}},e,this)}));return function(t,r,n,o){return e.apply(this,arguments)}}()},{key:"logUsage",value:function(e){var t=e.split(" ")[0],r=this.bytesEverUsed,n=this.bytesEverFetched,o=(100*r/n).toFixed(2);Du.info("".concat(t," bytes used/requested: ").concat(r," / ").concat(n," = ").concat(o,"%"))}}]),e}(),wc=function(){function e(t){lc(this,e),this.requestsEverMade=0,this.bytesEverRequested=0,this.url=t}return cc(e,[{key:"getRange",value:function(){var e=sc(ic().mark(function e(t,r,n){var o,i;return ic().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.requestsEverMade+=1,this.bytesEverRequested+=r,o="bytes=".concat(t,"-").concat(t+r-1),Du.info("request: #".concat(this.requestsEverMade,", purpose: ").concat(n,"), bytes: (this_request: ").concat(r,", ever: ").concat(this.bytesEverRequested,"), Range: ").concat(o)),e.next=6,fetch(this.url,{headers:{Range:o}});case 6:return i=e.sent,e.abrupt("return",i.arrayBuffer());case 8:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}();function Oc(e){"@babel/helpers - typeof";return(Oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sc(){Sc=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var c={};function f(){}function p(){}function h(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(P([])));b&&b!==t&&r.call(b,o)&&(y=b);var v=h.prototype=f.prototype=Object.create(y);function m(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function g(e,t){var n;this._invoke=function(o,i){function a(){return new t(function(n,a){!function n(o,i,a,s){var l=u(e[o],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==Oc(f)&&r.call(f,"__await")?t.resolve(f.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(l.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function P(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return p.prototype=h,s(v,"constructor",h),s(h,"constructor",p),p.displayName=s(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},m(g.prototype),s(g.prototype,i,function(){return this}),e.AsyncIterator=g,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=P,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}function _c(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function Pc(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){_c(i,n,o,a,s,"next",e)}function s(e){_c(i,n,o,a,s,"throw",e)}a(void 0)})}}function xc(e){var t,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Ec(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Ec(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(Ec=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Ec(e)}function kc(e){return new Tc(e,0)}function jc(e){return function(){return new Cc(e.apply(this,arguments))}}function Cc(e){var t,r;function n(t,r){try{var i=e[t](r),a=i.value,s=a instanceof Tc;Promise.resolve(s?a.v:a).then(function(r){if(s){var l="return"===t?"return":"next";if(!a.k||r.done)return n(l,r);r=e[l](r).value}o(i.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise(function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function Tc(e,t){this.v=e,this.k=t}function Rc(){return(Rc=jc(Sc().mark(function e(t,r,n){var o,i,a,s,l,u,c,f,p,h;return Sc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Eu(t),i=function(){var e=Pc(Sc().mark(function e(t){return Sc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.slice(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),e.t0=Uint8Array,e.next=5,kc(i(8,"magic bytes"));case 5:if(e.t1=e.sent,(a=new e.t0(e.t1)).subarray(0,3).every(function(e,t){return Ku[t]===e})){e.next=9;break}throw new Error("Not a FlatGeobuf file");case 9:return e.t2=Uint8Array,e.next=12,kc(i(4,"header length"));case 12:return e.t3=e.sent,a=new e.t2(e.t3),s=new pu.cZ(a),l=s.readUint32(0),e.t4=Uint8Array,e.next=19,kc(i(l,"header data"));case 19:if(e.t5=e.sent,a=new e.t4(e.t5),s=new pu.cZ(a),u=Ru(s),n&&n(u),c=u.indexNodeSize,f=u.featuresCount,!(c>0)){e.next=29;break}return p=qu(f,c),e.next=29,kc(i(p,"entire index, w/o rect"));case 29:return e.next=31,kc(Lc(i,u,r));case 31:if(!(h=e.sent)){e.next=36;break}return e.next=34,h;case 34:e.next=29;break;case 36:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ac(){return(Ac=jc(Sc().mark(function e(t,r,n,o){var i,a,s,l,u,c,f;return Sc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kc(mc.open(t));case 2:i=e.sent,Du.debug("opened reader"),o&&o(i.header),a=!1,s=!1,e.prev=7,u=xc(i.selectBbox(r));case 9:return e.next=11,kc(u.next());case 11:if(!(a=!(c=e.sent).done)){e.next=18;break}return f=c.value,e.next=15,n(f,i.header);case 15:a=!1,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),s=!0,l=e.t0;case 24:if(e.prev=24,e.prev=25,!a||null==u.return){e.next=29;break}return e.next=29,kc(u.return());case 29:if(e.prev=29,!s){e.next=32;break}throw l;case 32:return e.finish(29);case 33:return e.finish(24);case 34:case"end":return e.stop()}},e,null,[[7,20,24,34],[25,,29,33]])}))).apply(this,arguments)}function Lc(e,t,r){return Ic.apply(this,arguments)}function Ic(){return(Ic=Pc(Sc().mark(function e(t,r,n){var o,i,a,s,l;return Sc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,t(4,"feature length");case 3:if(e.t1=e.sent,0!==(o=new e.t0(e.t1)).byteLength){e.next=7;break}return e.abrupt("return");case 7:return i=new pu.cZ(o),a=i.readUint32(0),e.t2=Uint8Array,e.next=12,t(a,"feature data");case 12:return e.t3=e.sent,o=new e.t2(e.t3),(s=new Uint8Array(a+4)).set(o,4),(i=new pu.cZ(s)).setPosition($u),l=Su.getRootAsFeature(i),e.abrupt("return",n(l,r));case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mc(e,t){return{type:"FeatureCollection",features:function(e,t,r){if(!e.subarray(0,3).every(function(e,t){return Ku[t]===e}))throw new Error("Not a FlatGeobuf file");var n=new pu.cZ(e),o=n.readUint32(Ku.length);n.setPosition(Ku.length+$u);var i=Ru(n);r&&r(i);var a=Ku.length+$u+o,s=i.indexNodeSize,l=i.featuresCount;s>0&&(a+=qu(l,s));for(var u=[];a<n.capacity();){var c=n.readUint32(a);n.setPosition(a+$u);var f=Su.getRootAsFeature(n);u.push(t(f,i)),a+=$u+c}return u}(e,xu,t)}}function Nc(e,t){return function(e,t,r){return Rc.apply(this,arguments)}(e,xu,t)}function Dc(e,t,r){return function(e,t,r,n){return Ac.apply(this,arguments)}(e,t,xu,r)}function Fc(e,t,r){return e instanceof Uint8Array?Mc(e,r):e instanceof ReadableStream?Nc(e,r):Dc(e,t,r)}function Bc(e){"@babel/helpers - typeof";return(Bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gc(){Gc=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var c={};function f(){}function p(){}function h(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(P([])));b&&b!==t&&r.call(b,o)&&(y=b);var v=h.prototype=f.prototype=Object.create(y);function m(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function g(e,t){var n;this._invoke=function(o,i){function a(){return new t(function(n,a){!function n(o,i,a,s){var l=u(e[o],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==Bc(f)&&r.call(f,"__await")?t.resolve(f.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(l.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function P(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return p.prototype=h,s(v,"constructor",h),s(h,"constructor",p),p.displayName=s(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},m(g.prototype),s(g.prototype,i,function(){return this}),e.AsyncIterator=g,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=P,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}function Uc(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function Jc(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){Uc(i,n,o,a,s,"next",e)}function s(e){Uc(i,n,o,a,s,"throw",e)}a(void 0)})}}function Vc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hc(e){var t,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new zc(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function zc(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(zc=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new zc(e)}Cc.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Cc.prototype.next=function(e){return this._invoke("next",e)},Cc.prototype.throw=function(e){return this._invoke("throw",e)},Cc.prototype.return=function(e){return this._invoke("return",e)};var Wc={1:"circle",2:"line",3:"fill",5:"line",4:"circle",6:"fill",MultiPolygon:"fill",Point:"circle",MultiLineString:"line",MultiPoint:"circle",LineString:"line",Polygon:"fill"},qc={circle:{"circle-radius":6,"circle-color":"#3fb1e3","circle-opacity":1,"circle-blur":0,"circle-translate":[0,0],"circle-stroke-width":0,"circle-stroke-color":"#000","circle-stroke-opacity":1},line:{"line-opacity":1,"line-color":"#3fb1e3","line-width":3,"line-blur":1},fill:{"fill-opacity":.8,"fill-color":"#3fb1e3","fill-translate":[0,0],"fill-antialias":!0,"fill-outline-color":"#3fb1e3"}},Yc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t&&t.layerID?t.layerID:j.createUniqueID("FGBLayer_"),this.layerId=this.id+"outer",this.sourceId=this.layerId,this.options=t||{},this.strategy=t.strategy||"bbox",this.url=t.url,this.loadedExtentsRtree_=new(ou()),this.layerType="",this.extent=this.options.extent,this._updateFeaturesFn=this._updateFeatures.bind(this)}var t,r,n;return t=e,(r=[{key:"onAdd",value:function(e){this.map=e;var t,r,n,o=[];if("bbox"===this.strategy){this.map.on("moveend",this._updateFeaturesFn);var i=this.map.getBounds().toArray();o=[i[0][0],i[0][1],i[1][0],i[1][1]]}if(this.extent){var a=(t=this.extent,n=[],function(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}(t,r=o)&&(t[0]>r[0]?n[0]=t[0]:n[0]=r[0],t[1]>r[1]?n[1]=t[1]:n[1]=r[1],t[2]<r[2]?n[2]=t[2]:n[2]=r[2],t[3]<r[3]?n[3]=t[3]:n[3]=r[3]),n);o=a&&a.length?a:this.extent}this._handleFeatures(o)}},{key:"moveLayer",value:function(e,t){this.map.removeLayer(this.layerId,t)}},{key:"removeLayer",value:function(){this.map.removeLayer(this.layerId)}},{key:"setVisibility",value:function(e){var t=e?"visible":"none";this.map.setLayoutProperty(this.layerId,"visibility",t)}},{key:"_handleFeatures",value:function(){var e=Jc(Gc().mark(function e(t){var r,n,o;return Gc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._loadData(t);case 2:return r=e.sent,e.next=5,this.iterateFeatures(r);case 5:n=e.sent,this.map.getSource(this.sourceId)?this.map.getSource(this.sourceId).setData(n):this.map.addSource(this.sourceId,{type:"geojson",data:n}),this.map.getLayer(this.layerId)||(o=Object.assign({id:this.layerId,type:this.layerType,source:this.sourceId,paint:Object.assign(qc[this.layerType],this.options.paint)||{},layout:this.options.layout||{}}),this.map.addLayer(o));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_updateFeatures",value:function(){var e=Jc(Gc().mark(function e(){var t,r,n,o,i=this;return Gc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.map.getBounds().toArray(),r=[t[0][0],t[0][1],t[1][0],t[1][1]],this._forEachInExtent(r,function(e){return i._containsExtent(e.extent,r)})){e.next=11;break}return e.next=6,this._loadData(r);case 6:return n=e.sent,e.next=9,this.iterateFeatures(n);case 9:o=e.sent,this.map.getSource(this.sourceId).setData(o);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"iterateFeatures",value:function(){var e=Jc(Gc().mark(function e(t){var r,n,o,i,a,s,l;return Gc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={type:"FeatureCollection",features:[]},n=!1,o=!1,e.prev=3,a=Hc(t);case 5:return e.next=7,a.next();case 7:if(!(n=!(s=e.sent).done)){e.next=15;break}l=s.value,this.options.featureLoader&&"function"==typeof this.options.featureLoader&&(l=this.options.featureLoader(l)),this.layerType||(this.layerType=Wc[l.geometry.type]),r.features.push(l);case 12:n=!1,e.next=5;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),o=!0,i=e.t0;case 21:if(e.prev=21,e.prev=22,!n||null==a.return){e.next=26;break}return e.next=26,a.return();case 26:if(e.prev=26,!o){e.next=29;break}throw i;case 29:return e.finish(26);case 30:return e.finish(21);case 31:return e.abrupt("return",r);case 32:case"end":return e.stop()}},e,this,[[3,17,21,31],[22,,26,30]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_loadData",value:function(){var e=Jc(Gc().mark(function e(t){var r,n,o=this;return Gc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]},t.length){e.next=7;break}return e.next=4,this._getStream(this.url);case 4:r=e.sent,e.next=9;break;case 7:n.value={extent:t.slice()},this.loadedExtentsRtree_.insert(n);case 9:return e.next=11,Fc(r&&r.body||this.url,n,function(e){o.layerType=Wc[e.geometryType]});case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_getStream",value:function(){var e=Jc(Gc().mark(function e(t){return Gc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fu.get(t,{},{withoutFormatSuffix:!0}).then(function(e){return e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"_containsExtent",value:function(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}},{key:"_getInExtent",value:function(e){var t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.loadedExtentsRtree_.search(t).map(function(e){return e.value})}},{key:"_forEachInExtent",value:function(e,t){return this._forEach(this._getInExtent(e),t)}},{key:"_forEach",value:function(e,t){for(var r,n=0,o=e.length;n<o;n++)if(r=t(e[n]))return r;return r}}])&&Vc(t.prototype,r),n&&Vc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Xc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Qc=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lngLat=wr.isArray(t)?{lng:t[0],lat:t[1]}:t,this.style=wr.extend({},r),this.attributes=n}var t,r,n;return t=e,(r=[{key:"getId",value:function(){return this.id}},{key:"setId",value:function(e){this.id=e}},{key:"getLngLat",value:function(){return this.lngLat}},{key:"setLngLat",value:function(e){this.lngLat=wr.isArray(e)?{lng:e[0],lat:e[1]}:e}},{key:"setStyle",value:function(e){this.style=wr.extend(this.style,e)}},{key:"getStyle",value:function(){return this.style}},{key:"setAttributes",value:function(e){this.attributes=wr.extend({},this.attributes,e)}},{key:"getAttributes",value:function(){return this.attributes}}])&&Xc(t.prototype,r),n&&Xc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Zc={getPoint:function(e){if(e&&e instanceof Array)return new ys.DataSet([{geometry:{type:"Point",coordinates:e}}])},getPoints:function(e){if(e&&e instanceof Array){var t=[];return e.forEach(function(e){t.push({geometry:{type:"Point",coordinates:e.geometry.coordinates}})}),new ys.DataSet(t)}},getCurveLines:function(e,t){if(e&&e instanceof Array&&t&&t instanceof Array){var r=[];return t.forEach(function(t){var n=t.geometry&&t.geometry.coordinates,o={lng:n[0],lat:n[1]},i={lng:e[0],lat:e[1]},a=ys.utilCurve.getPoints([i,o]);r.push({geometry:{type:"LineString",coordinates:a}})}),new ys.DataSet(r)}},getCurveDynamicPoints:function(e,t){if(e&&e instanceof Array&&t&&t instanceof Array){var r=[];return t.forEach(function(t){for(var n=t.geometry&&t.geometry.coordinates,o={lng:n[0],lat:n[1]},i={lng:e[0],lat:e[1]},a=ys.utilCurve.getPoints([i,o]),s=0;s<a.length;s++)r.push({geometry:{type:"Point",coordinates:a[s]},time:s})}),new ys.DataSet(r)}}};function Kc(e,t,r,n,o){return{id:e,type:t,source:r||"vector-tiles","source-layer":n||e,paint:o}}function $c(e){"@babel/helpers - typeof";return($c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ef(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tf(e,t){return(tf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=of(e);if(t){var o=of(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===$c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nf(e)}(this,r)}}function nf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function of(e){return(of=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var af=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tf(e,t)}(a,t().Evented);var r,n,o,i=rf(a);function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this)).options=t||{},r.url=e,r.fire("initialized",nf(r)),r}return r=a,n&&ef(r.prototype,n),o&&ef(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r}();function sf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var lf=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"generateToken",value:function(e,t){var r=this.servers[e];if(r)return fu.post(r.tokenServiceUrl,JSON.stringify(t.toJSON())).then(function(e){return e.text()})}},{key:"registerServers",value:function(e){this.servers=this.servers||{},j.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var r=e[t];this.servers[r.server]=r}}},{key:"registerToken",value:function(e,t){if(this.tokens=this.tokens||{},e&&t){var r=this._getTokenStorageKey(e);this.tokens[r]=t}}},{key:"registerKey",value:function(e,t){if(this.keys=this.keys||{},e&&!(e.length<1)&&t){e=j.isArray(e)?e:[e];for(var r=0;r<e.length;r++){var n=this._getUrlRestString(e[0])||e[0];this.keys[n]=t}}}},{key:"getServerInfo",value:function(e){return this.servers=this.servers||{},this.servers[e]}},{key:"getToken",value:function(e){if(e){this.tokens=this.tokens||{};var t=this._getTokenStorageKey(e);return this.tokens[t]}}},{key:"getKey",value:function(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;return this.keys[t]}},{key:"loginiServer",value:function(e,t,r,n){e=j.urlPathAppend(e,"services/security/login");var o={username:t&&t.toString(),password:r&&r.toString(),rememberme:n};o=JSON.stringify(o);return fu.post(e,o,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){return e.json()})}},{key:"logoutiServer",value:function(e){e=j.urlPathAppend(e,"services/security/logout");return fu.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginOnline",value:function(t,r){var n=e.SSO+"/login?service="+t;this._open(n,r)}},{key:"loginiPortal",value:function(e,t,r){e=j.urlPathAppend(e,"web/login");var n={username:t&&t.toString(),password:r&&r.toString()};n=JSON.stringify(n);return fu.post(e,n,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0}).then(function(e){return e.json()})}},{key:"logoutiPortal",value:function(e){e=j.urlPathAppend(e,"services/security/logout");return fu.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginManager",value:function(e,t,r){if(j.isInTheSameDomain(e)){var n=j.urlPathAppend(e,"icloud/security/tokens"),o=t||{},i={username:o.userName&&o.userName.toString(),password:o.password&&o.password.toString()};i=JSON.stringify(i);var a=this;return fu.post(n,i,{headers:{Accept:"*/*","Content-Type":"application/json"}}).then(function(e){e.text().then(function(e){return a.imanagerToken=e,e})})}var s=!r||r.isNewTab;this._open(e,s)}},{key:"destroyAllCredentials",value:function(){this.keys=null,this.tokens=null,this.servers=null}},{key:"destroyToken",value:function(e){if(e){var t=this._getTokenStorageKey(e);this.tokens=this.tokens||{},this.tokens[t]&&delete this.tokens[t]}}},{key:"destroyKey",value:function(e){if(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;this.keys[t]&&delete this.keys[t]}}},{key:"appendCredential",value:function(e){var t=e,r=this.getToken(e),n=r?new Tn(r,"token"):null;return n||(n=(r=this.getKey(e))?new Tn(r,"key"):null),n&&(t=j.urlAppend(t,n.getUrlParameters())),t}},{key:"_open",value:function(e,t){t=null==t||t;var r=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,n=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,o="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+n+", left="+r+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";t?window.open(e,"login"):window.open(e,"login",o)}},{key:"_getTokenStorageKey",value:function(e){var t=e.match(/(.*?):\/\/([^\/]+)/i);return t?t[0]:e}},{key:"_getUrlRestString",value:function(e){if(!e)return e;var t=e.match(/(http|https):\/\/(.*\/rest)/i);return t?t[0]:e}}],(r=null)&&sf(t.prototype,r),n&&sf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function uf(e){"@babel/helpers - typeof";return(uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}lf.INNER_WINDOW_WIDTH=600,lf.INNER_WINDOW_HEIGHT=600,lf.SSO="https://sso.supermap.com",lf.ONLINE="https://www.supermapol.com";var ff=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.index=null,this.length=null,this.options=null,this.totalTimes=null,this.POLLING_TIMES=3,this._processSuccess=null,this._processFailed=null,this.isInTheSameDomain=null,this.withCredentials=!1,j.isArray(t)?(n.urls=t,n.length=t.length,n.totalTimes=n.length,1===n.length?n.url=t[0]:(n.index=parseInt(Math.random()*n.length),n.url=t[n.index])):(n.totalTimes=1,n.url=t),j.isArray(t)&&!n.isServiceSupportPolling()&&(n.url=t[0],n.totalTimes=1),r=r||{},this.crossOrigin=r.crossOrigin,this.headers=r.headers,j.extend(this,r),n.isInTheSameDomain=j.isInTheSameDomain(n.url),n.events=new Mn(n,null,n.EVENT_TYPES,!0),n.eventListeners instanceof Object&&n.events.on(n.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;j.isArray(e.urls)&&(e.urls=null,e.index=null,e.length=null,e.totalTimes=null),e.url=null,e.options=null,e._processSuccess=null,e._processFailed=null,e.isInTheSameDomain=null,e.EVENT_TYPES=null,e.events&&(e.events.destroy(),e.events=null),e.eventListeners&&(e.eventListeners=null)}},{key:"request",value:function(e){var t=e.scope.format;if(t&&!this.supportDataFormat(t))throw new Error("".concat(this.CLASS_NAME," is not surport ").concat(t," format!"));var r=this;e.url=e.url||r.url,this._returnContent(e)&&!e.url.includes("returnContent=true")&&(e.url=j.urlAppend(e.url,"returnContent=true")),e.proxy=e.proxy||r.proxy,e.withCredentials=void 0!=e.withCredentials?e.withCredentials:r.withCredentials,e.crossOrigin=void 0!=e.crossOrigin?e.crossOrigin:r.crossOrigin,e.headers=e.headers||r.headers,e.isInTheSameDomain=r.isInTheSameDomain,e.withoutFormatSuffix=e.scope.withoutFormatSuffix||!1,e.url=lf.appendCredential(e.url),r.calculatePollingTimes(),r._processSuccess=e.success,r._processFailed=e.failure,e.scope=r,e.success=r.getUrlCompleted,e.failure=r.getUrlFailed,r.options=e,r._commit(r.options)}},{key:"getUrlCompleted",value:function(e){this._processSuccess(e)}},{key:"getUrlFailed",value:function(e){this.totalTimes>0?(this.totalTimes--,this.ajaxPolling()):this._processFailed(e)}},{key:"ajaxPolling",value:function(){var e=this,t=e.options.url,r=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;e.index=parseInt(Math.random()*e.length),e.url=e.urls[e.index],t=t.replace(r,r.exec(e.url)[0]),e.options.url=t,e.options.isInTheSameDomain=j.isInTheSameDomain(t),e._commit(e.options)}},{key:"calculatePollingTimes",value:function(){var e=this;e.times?e.totalTimes>e.POLLING_TIMES?e.times>e.POLLING_TIMES?e.totalTimes=e.POLLING_TIMES:e.totalTimes=e.times:e.times<e.totalTimes&&(e.totalTimes=e.times):e.totalTimes>e.POLLING_TIMES&&(e.totalTimes=e.POLLING_TIMES),e.totalTimes--}},{key:"isServiceSupportPolling",value:function(){return!("SuperMap.REST.ThemeService"===this.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===this.CLASS_NAME)}},{key:"serviceProcessCompleted",value:function(e){e=j.transformResult(e),this.events.triggerEvent("processCompleted",{result:e})}},{key:"serviceProcessFailed",value:function(e){var t=(e=j.transformResult(e)).error||e;this.events.triggerEvent("processFailed",{error:t})}},{key:"_returnContent",value:function(e){return e.scope.format!==Pt.FGB&&!!e.scope.returnContent}},{key:"supportDataFormat",value:function(e){return this.dataFormat().includes(e)}},{key:"dataFormat",value:function(){return[Pt.GEOJSON,Pt.ISERVER]}},{key:"_commit",value:function(e){if("POST"===e.method||"PUT"===e.method||"PATCH"===e.method)if(e.params&&(e.url=j.urlAppend(e.url,j.getParameterString(e.params||{}))),"object"===uf(e.data))try{e.params=j.toJSON(e.data)}catch(e){console.log("ä¸æ¯jsonå¯¹è±¡")}else e.params=e.data;fu.commit(e.method,e.url,e.params,{headers:e.headers,withoutFormatSuffix:e.withoutFormatSuffix,withCredentials:e.withCredentials,crossOrigin:e.crossOrigin,timeout:e.async?0:null,proxy:e.proxy}).then(function(e){return e.text?e.text():e.json?e.json():e}).then(function(t){var r=t;return"string"==typeof t&&(r=(new qe).read(t)),(!r||r.error||r.code>=300&&304!==r.code)&&(r=r&&r.error?{error:r.error}:{error:r}),r&&e.scope.format===Pt.FGB&&(r.newResourceLocation=r.newResourceLocation.replace(".json","")+".fgb"),r}).catch(function(e){return{error:e}}).then(function(t){t.error?(e.scope?h.bind(e.failure,e.scope):e.failure)(t):(t.succeed=void 0==t.succeed||t.succeed,(e.scope?h.bind(e.success,e.scope):e.success)(t))})}}])&&cf(t.prototype,r),n&&cf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var hf=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters&&"string"==typeof t.filters&&(t.filters=t.filters.split(",")),this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}])&&pf(t.prototype,r),n&&pf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function yf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var df=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters&&(t.filters=t.filters.split(",")),this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}])&&yf(t.prototype,r),n&&yf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function bf(e){"@babel/helpers - typeof";return(bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mf(){return(mf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Of(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function gf(e,t){return(gf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Of(e);if(t){var o=Of(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===bf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Of(e){return(Of=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gf(e,t)}(i,ff);var t,r,n,o=wf(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).options=t||{},r.CLASS_NAME="SuperMap.AddressMatchService",r}return t=i,(r=[{key:"destroy",value:function(){mf(Of(i.prototype),"destroy",this).call(this)}},{key:"code",value:function(e,t){t instanceof hf&&this.processAsync(e,t)}},{key:"decode",value:function(e,t){t instanceof df&&this.processAsync(e,t)}},{key:"processAsync",value:function(e,t){this.request({method:"GET",url:e,params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){e.succeed&&delete e.succeed,mf(Of(i.prototype),"serviceProcessCompleted",this).call(this,e)}},{key:"serviceProcessFailed",value:function(e){mf(Of(i.prototype),"serviceProcessFailed",this).call(this,e)}}])&&vf(t.prototype,r),n&&vf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _f(e){"@babel/helpers - typeof";return(_f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xf(e,t){return(xf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ef(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=kf(e);if(t){var o=kf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function kf(e){return(kf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xf(e,t)}(i,af);var t,r,n,o=Ef(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(r=[{key:"code",value:function(e,t){var r=this;new Sf(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).code(j.urlPathAppend(r.url,"geocoding"),e)}},{key:"decode",value:function(e,t){var r=this;new Sf(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).decode(j.urlPathAppend(r.url,"geodecoding"),e)}}])&&Pf(t.prototype,r),n&&Pf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Cf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Tf=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.customParams=null,this.prjCoordSys=null,this.expectCount=1e5,this.networkType=Et.LINE,this.queryOption=kt.ATTRIBUTEANDGEOMETRY,this.queryParams=null,this.startRecord=0,this.holdTime=10,this.returnCustomResult=!1,this.returnFeatureWithFieldCaption=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.QueryParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.customParams=null,e.expectCount=null,e.networkType=null,e.queryOption=null,e.queryParams){for(var t=0,r=e.queryParams,n=r.length;t<n;t++)r[t].destroy();e.queryParams=null}e.startRecord=null,e.holdTime=null,e.returnCustomResult=null,e.prjCoordSys=null}}])&&Cf(t.prototype,r),n&&Cf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Rf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Af=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null,j.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryFilterParameter"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.isQueryPoint=null,e.isQueryLine=null,e.isQueryRegion=null,e.attributeFilter=null,e.chartFeatureInfoSpecCode=null}},{key:"toJson",value:function(){var e="";return e+='"isQueryPoint":'+this.isQueryPoint+",",e+='"isQueryLine":'+this.isQueryLine+",",e+='"isQueryRegion":'+this.isQueryRegion+",",this.attributeFilter&&(e+='"attributeFilter": "'+this.attributeFilter+'",'),e="{"+(e+='"chartFeatureInfoSpecCode":'+this.chartFeatureInfoSpecCode)+"}"}}])&&Rf(t.prototype,r),n&&Rf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Lf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var If=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null,j.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.queryMode=null,e.bounds=null,e.chartLayerNames=null,e.chartQueryFilterParameters=null,e.returnContent=!0,e.startRecord=0,e.expectCount=null}},{key:"getVariablesJson",value:function(){var e="";if(e+='"queryMode":"'+this.queryMode+'",',this.chartLayerNames&&this.chartLayerNames.length){for(var t=[],r=this.chartLayerNames.length,n=0;n<r;n++)t.push('"'+this.chartLayerNames[n]+'"');e+='"chartLayerNames":'+("["+t.join(",")+"]")+","}if("ChartBoundsQuery"===this.queryMode&&this.bounds&&(e+='"bounds":{"leftBottom":{"x":'+this.bounds.left+',"y":'+this.bounds.bottom+'},"rightTop":{"x":'+this.bounds.right+',"y":'+this.bounds.top+"}},"),this.chartQueryFilterParameters&&this.chartQueryFilterParameters.length){for(var o=[],i=this.chartQueryFilterParameters.length,a=0;a<i;a++){var s=this.chartQueryFilterParameters[a];s instanceof Af&&o.push(s.toJson())}var l="["+o.join(",")+"]";l='"chartQueryParams":'+l+",",l+='"startRecord":'+this.startRecord+",",e+='"chartQueryParameters":'+(l="{"+(l+='"expectCount":'+this.expectCount)+"}")}return e="{"+e+"}"}}])&&Lf(t.prototype,r),n&&Lf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Mf(e){"@babel/helpers - typeof";return(Mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Df(e,t){return(Df=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ff(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Uf(e);if(t){var o=Uf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Bf(this,r)}}function Bf(e,t){if(t&&("object"===Mf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gf(e)}function Gf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uf(e){return(Uf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Df(e,t)}(i,ff);var t,r,n,o=Ff(i);function i(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t),t=t||{},r.returnContent=null,r.format=Pt.GEOJSON,j.extend(Gf(r),t);var n=Gf(r);return t.format&&(n.format=t.format.toUpperCase()),n.url?(n.url=j.urlPathAppend(n.url,"queryResults"),r.CLASS_NAME="SuperMap.ChartQueryService",r):Bf(r)}return t=i,(r=[{key:"destroy",value:function(){ff.prototype.destroy.apply(this,arguments),this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e){if(e instanceof If){var t,r=this;r.returnContent=e.returnContent,t=e.getVariablesJson(),r.returnContent&&(r.url=j.urlAppend(r.url,"returnContent=true")),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){if((e=j.transformResult(e))&&e.recordsets&&this.format===Pt.GEOJSON)for(var t=0,r=e.recordsets,n=r.length;t<n;t++)if(r[t].features){var o=new vr;r[t].features=o.toGeoJSON(r[t].features)}this.events.triggerEvent("processCompleted",{result:e})}},{key:"getQueryParameters",value:function(e){return new Tf({queryMode:e.queryMode,bounds:e.bounds,chartLayerNames:e.chartLayerNames,chartQueryFilterParameters:e.chartQueryFilterParameters,returnContent:e.returnContent})}}])&&Nf(t.prototype,r),n&&Nf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Vf(e){"@babel/helpers - typeof";return(Vf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zf(){return(zf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Wf(e,t){return(Wf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Yf(e);if(t){var o=Yf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Vf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Yf(e){return(Yf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wf(e,t)}(i,ff);var t,r,n,o=qf(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.ChartFeatureInfoSpecsService",r}return t=i,(r=[{key:"destroy",value:function(){zf(Yf(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"processAsync",value:function(){var e=this;e.isTempLayers||j.urlPathAppend(e.url,"chartFeatureInfoSpecs"),e.request({method:"GET",params:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&Hf(t.prototype,r),n&&Hf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Qf(e){"@babel/helpers - typeof";return(Qf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Kf(e,t){return(Kf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ep(e);if(t){var o=ep(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Qf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ep(e){return(ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kf(e,t)}(a,af);var r,n,o,i=$f(a);function a(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e,t)}return r=a,(n=[{key:"queryChart",value:function(e,t,r){var n=this,o=n._processParams(e),i=n._processFormat(r);new Jf(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:i}).processAsync(o)}},{key:"getChartFeatureInfo",value:function(e){var t=this,r=t.url.concat();r=j.urlPathAppend(r,"chartFeatureInfoSpecs"),new Xf(r,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).processAsync()}},{key:"_processParams",value:function(e){if(!e)return{};e.returnContent=null==e.returnContent||e.returnContent,e.filter&&(e.chartQueryFilterParameters=wr.isArray(e.filter)?e.filter:[e.filter]),e.bounds&&(e.bounds instanceof Array&&(e.bounds=new I(e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3])),e.bounds instanceof t().LngLatBounds&&(e.bounds=new I(e.bounds.getSouthWest().lng,e.bounds.getSouthWest().lat,e.bounds.getNorthEast().lng,e.bounds.getNorthEast().lat)))}},{key:"_processFormat",value:function(e){return e||Pt.GEOJSON}}])&&Zf(r.prototype,n),o&&Zf(r,o),Object.defineProperty(r,"prototype",{writable:!1}),a}();function rp(e){"@babel/helpers - typeof";return(rp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function np(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function op(e,t){return(op=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ip(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=sp(e);if(t){var o=sp(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===rp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ap(e)}(this,r)}}function ap(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sp(e){return(sp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&op(e,t)}(i,ff);var t,r,n,o=ip(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=t||{}).EVENT_TYPES=["broadcastSocketConnected","broadcastSocketClosed","broadcastSocketError","broadcastFailed","broadcastSucceeded","subscribeSocketConnected","subscribeSocketClosed","subscribeSocketError","messageSucceeded","setFilterParamSucceeded"],(r=o.call(this,e,t)).geometry=null,r.prjCoordSys=null,r.excludeField=null,j.extend(ap(r),t),r.CLASS_NAME="SuperMap.DataFlowService",r}return t=i,(r=[{key:"initBroadcast",value:function(){var e=this;return this.broadcastWebSocket=this._connect(j.urlPathAppend(e.url,"broadcast")),this.broadcastWebSocket.onopen=function(t){e.broadcastWebSocket.isOpen=!0,t.eventType="broadcastSocketConnected",e.events.triggerEvent("broadcastSocketConnected",t)},this.broadcastWebSocket.onclose=function(t){e.broadcastWebSocket&&(e.broadcastWebSocket.isOpen=!1),t.eventType="broadcastSocketClosed",e.events.triggerEvent("broadcastSocketClosed",t)},this.broadcastWebSocket.onerror=function(t){t.eventType="broadcastSocketError",e.events.triggerEvent("broadcastSocketError",t)},this}},{key:"broadcast",value:function(e){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen?(this.broadcastWebSocket.send(JSON.stringify(e)),this.events.triggerEvent("broadcastSucceeded")):this.events.triggerEvent("broadcastFailed")}},{key:"initSubscribe",value:function(){var e=this;return this.subscribeWebSocket=this._connect(j.urlPathAppend(e.url,"subscribe")),this.subscribeWebSocket.onopen=function(t){e.subscribeWebSocket.send(e._getFilterParams()),t.eventType="subscribeSocketConnected",e.events.triggerEvent("subscribeSocketConnected",t)},this.subscribeWebSocket.onclose=function(t){t.eventType="subscribeWebSocketClosed",e.events.triggerEvent("subscribeWebSocketClosed",t)},this.subscribeWebSocket.onerror=function(t){t.eventType="subscribeSocketError",e.events.triggerEvent("subscribeSocketError",t)},this.subscribeWebSocket.onmessage=function(t){e._onMessage(t)},this}},{key:"setExcludeField",value:function(e){return this.excludeField=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"setGeometry",value:function(e){return this.geometry=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"unSubscribe",value:function(){this.subscribeWebSocket&&(this.subscribeWebSocket.close(),this.subscribeWebSocket=null)}},{key:"unBroadcast",value:function(){this.broadcastWebSocket&&(this.broadcastWebSocket.close(),this.broadcastWebSocket=null)}},{key:"destroy",value:function(){ff.prototype.destroy.apply(this,arguments);this.geometry=null,this.prjCoordSys=null,this.excludeField=null,this.unBroadcast(),this.unSubscribe()}},{key:"_getFilterParams",value:function(){var e={filterParam:{prjCoordSys:this.prjCoordSys,excludeField:this.excludeField,geometry:this.geometry}};return j.toJSON(e)}},{key:"_onMessage",value:function(e){if(e.data&&e.data.indexOf("filterParam")>=0){var t=JSON.parse(e.data);return e.filterParam=t,e.eventType="setFilterParamSucceeded",void this.events.triggerEvent("setFilterParamSucceeded",e)}var r=JSON.parse(e.data);e.featureResult=r,e.eventType="messageSucceeded",this.events.triggerEvent("messageSucceeded",e)}},{key:"_connect",value:function(e){return e=lf.appendCredential(e),"WebSocket"in window?new WebSocket(e):"MozWebSocket"in window?new(0,window.MozWebSocket)(e):(console.log("no WebSocket"),null)}}])&&np(t.prototype,r),n&&np(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function up(e){"@babel/helpers - typeof";return(up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fp(e,t){return(fp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=yp(e);if(t){var o=yp(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===up(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hp(e)}(this,r)}}function hp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yp(e){return(yp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fp(e,t)}(i,af);var t,r,n,o=pp(i);function i(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=t||{}).projection&&(t.prjCoordSys=t.projection),(r=o.call(this,e,t)).dataFlow=new lp(e,t),r.dataFlow.events.on({broadcastSocketConnected:r._defaultEvent,broadcastSocketError:r._defaultEvent,broadcastFailed:r._defaultEvent,broadcastSucceeded:r._defaultEvent,subscribeSocketConnected:r._defaultEvent,subscribeSocketError:r._defaultEvent,messageSucceeded:r._defaultEvent,setFilterParamSucceeded:r._defaultEvent,scope:hp(r)});var n=hp(r);return n.on("subscribeSocketConnected",function(e){n.fire("subscribesucceeded",e)}),r}return t=i,(r=[{key:"initBroadcast",value:function(){return this.dataFlow.initBroadcast(),this}},{key:"broadcast",value:function(e){this.dataFlow.broadcast(e)}},{key:"initSubscribe",value:function(){return this.dataFlow.initSubscribe(),this}},{key:"setExcludeField",value:function(e){return this.dataFlow.setExcludeField(e),this.options.excludeField=e,this}},{key:"setGeometry",value:function(e){return this.dataFlow.setGeometry(e),this.options.geometry=e,this}},{key:"unSubscribe",value:function(){this.dataFlow.unSubscribe()}},{key:"unBroadcast",value:function(){this.dataFlow.unBroadcast()}},{key:"_defaultEvent",value:function(e){this.fire(e.eventType||e.type,e)}}])&&cp(t.prototype,r),n&&cp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function bp(e){"@babel/helpers - typeof";return(bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mp(){return(mp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_p(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function gp(e,t){return(gp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=_p(e);if(t){var o=_p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Op(this,r)}}function Op(e,t){if(t&&("object"===bp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Sp(e)}function Sp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _p(e){return(_p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gp(e,t)}(i,ff);var t,r,n,o=wp(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t),t?(r.datasource=null,r.dataset=null,t&&j.extend(Sp(r),t),r.CLASS_NAME="SuperMap.DatasetService",r):Op(r)}return t=i,(r=[{key:"destroy",value:function(){mp(_p(i.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"getDatasetsService",value:function(e){var t=this;t.url=j.urlPathAppend(t.url,"datasources/name/".concat(e,"/datasets")),t.request({method:"GET",data:null,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}},{key:"getDatasetService",value:function(e,t){var r=this;r.url=j.urlPathAppend(r.url,"datasources/name/".concat(e,"/datasets/name/").concat(t)),r.request({method:"GET",data:null,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}},{key:"setDatasetService",value:function(e){if(e){var t=j.toJSON(e);this.request({method:"PUT",data:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"deleteDatasetService",value:function(){this.request({method:"DELETE",data:null,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}])&&vp(t.prototype,r),n&&vp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function xp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ep=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasourceName=null,this.datasetName=null,this.datasetType=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.CreateDatasetParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.datasourceName=null,this.datasetName=null,this.datasetType=null}}])&&xp(t.prototype,r),n&&xp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function kp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var jp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasourceName=null,this.datasetName=null,this.isFileCache=null,this.description=null,this.prjCoordSys=null,this.charset=null,this.palette=null,this.noValue=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.UpdateDatasetParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.datasourceName=null,e.datasetName=null,e.isFileCache=null,e.prjCoordSys=null,e.charset=null,e.palette=null,e.noValue=null}}])&&kp(t.prototype,r),n&&kp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Cp(e){"@babel/helpers - typeof";return(Cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Rp(e,t){return(Rp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ap(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Lp(e);if(t){var o=Lp(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Cp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Lp(e){return(Lp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ip=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rp(e,t)}(i,af);var t,r,n,o=Ap(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(r=[{key:"getDatasets",value:function(e,t){if(e){var r=this;new Pp(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).getDatasetsService(e)}}},{key:"getDataset",value:function(e,t,r){if(e&&t){var n=this;new Pp(n.url,{proxy:n.proxy,withCredentials:n.withCredentials,crossOrigin:n.crossOrigin,headers:n.headers,eventListeners:{scope:n,processCompleted:r,processFailed:r}}).getDatasetService(e,t)}}},{key:"setDataset",value:function(e,t){if(e instanceof Ep||e instanceof jp){if(e instanceof Ep)var r={datasetType:e.datasetType,datasetName:e.datasetName};else e instanceof jp&&(r={datasetName:e.datasetName,isFileCache:e.isFileCache,description:e.description,prjCoordSys:e.prjCoordSys,charset:e.charset});var n=this,o=j.urlPathAppend(n.url,"datasources/name/".concat(e.datasourceName,"/datasets/name/").concat(e.datasetName));new Pp(o,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:t,processFailed:t}}).setDatasetService(r)}}},{key:"deleteDataset",value:function(e,t,r){var n=this,o=j.urlPathAppend(n.url,"datasources/name/".concat(e,"/datasets/name/").concat(t));new Pp(o,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:r,processFailed:r}}).deleteDatasetService()}}])&&Tp(t.prototype,r),n&&Tp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Mp(e){"@babel/helpers - typeof";return(Mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Np(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Dp(){return(Dp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Up(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Fp(e,t){return(Fp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Bp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Up(e);if(t){var o=Up(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Mp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gp(e)}(this,r)}}function Gp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Up(e){return(Up=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fp(e,t)}(i,ff);var t,r,n,o=Bp(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t),t&&j.extend(Gp(r),t),r.CLASS_NAME="SuperMap.DatasourceService",r}return t=i,(r=[{key:"destroy",value:function(){Dp(Up(i.prototype),"destroy",this).call(this)}},{key:"getDatasourceService",value:function(e){var t=this;t.url=j.urlPathAppend(t.url,"datasources/name/".concat(e)),t.request({method:"GET",data:null,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}},{key:"getDatasourcesService",value:function(){var e=this;e.url=j.urlPathAppend(e.url,"datasources"),e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}},{key:"setDatasourceService",value:function(e){if(e){var t=j.toJSON(e);this.request({method:"PUT",data:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}])&&Np(t.prototype,r),n&&Np(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Vp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Hp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.SetDatasourceParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null}}])&&Vp(t.prototype,r),n&&Vp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function zp(e){"@babel/helpers - typeof";return(zp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qp(e,t){return(qp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Yp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Xp(e);if(t){var o=Xp(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===zp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Xp(e){return(Xp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qp(e,t)}(i,af);var t,r,n,o=Yp(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(r=[{key:"getDatasources",value:function(e){var t=this;new Jp(t.url,{proxy:t.proxy,withCredentials:t.withCredentials,crossOrigin:t.crossOrigin,headers:t.headers,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).getDatasourcesService()}},{key:"getDatasource",value:function(e,t){if(e){var r=this;new Jp(r.url,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).getDatasourceService(e)}}},{key:"setDatasource",value:function(e,t){if(e instanceof Hp){var r={description:e.description,coordUnit:e.coordUnit,distanceUnit:e.distanceUnit},n=this,o=j.urlPathAppend(n.url,"datasources/name/".concat(e.datasourceName));new Jp(o,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:t,processFailed:t}}).setDatasourceService(r)}}}])&&Wp(t.prototype,r),n&&Wp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Zp(e){"@babel/helpers - typeof";return(Zp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $p(){return($p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nh(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function eh(e,t){return(eh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function th(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=nh(e);if(t){var o=nh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Zp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rh(e)}(this,r)}}function rh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nh(e){return(nh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eh(e,t)}(i,ff);var t,r,n,o=th(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t),t=t||{},r.returnContent=!0,r.fromIndex=0,r.toIndex=19,r.hasGeometry=!0,r.maxFeatures=null,r.format=Pt.GEOJSON,j.extend(rh(r),t),r.url=j.urlPathAppend(r.url,"featureResults"),r.CLASS_NAME="SuperMap.GetFeaturesServiceBase",r}return t=i,(r=[{key:"destroy",value:function(){$p(nh(i.prototype),"destroy",this).call(this);var e=this;e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.maxFeatures=null,e.format=null,e.hasGeometry=null}},{key:"processAsync",value:function(e){if(e){var t,r=this,n=!0;r.returnContent=e.returnContent,r.fromIndex=e.fromIndex,r.toIndex=e.toIndex,r.maxFeatures=e.maxFeatures,r.hasGeometry=e.hasGeometry,r.returnContent&&(n=!1),null!=r.fromIndex&&null!=r.toIndex&&!isNaN(r.fromIndex)&&!isNaN(r.toIndex)&&r.fromIndex>=0&&r.toIndex>=0&&!n&&(r.url=j.urlAppend(r.url,"fromIndex=".concat(r.fromIndex,"&toIndex=").concat(r.toIndex))),e.returnCountOnly&&(r.url=j.urlAppend(r.url,"&returnCountOnly="+e.returnContent)),t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){if(e=j.transformResult(e),this.format===Pt.GEOJSON&&e.features){var t=new vr;e.features=t.toGeoJSON(e.features)}this.events.triggerEvent("processCompleted",{result:e})}},{key:"dataFormat",value:function(){return[Pt.GEOJSON,Pt.ISERVER,Pt.FGB]}}])&&Kp(t.prototype,r),n&&Kp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ih(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ah=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attributeFilter=null,this.name=null,this.joinItems=null,this.linkItems=null,this.ids=null,this.orderBy=null,this.groupBy=null,this.fields=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.FilterParameter"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.attributeFilter=null,e.name=null,e.joinItems){for(var t=0,r=e.joinItems,n=r.length;t<n;t++)r[t].destroy();e.joinItems=null}if(e.linkItems){for(var o=0,i=e.linkItems,a=i.length;o<a;o++)i[o].destroy();e.linkItems=null}e.ids=null,e.orderBy=null,e.groupBy=null,e.fields=null}}])&&ih(t.prototype,r),n&&ih(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function sh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var lh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetNames=null,this.targetEpsgCode=null,this.targetPrj=null,this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.returnCountOnly=!1,this.maxFeatures=null,this.hasGeometry=!0,this.aggregations=null,j.extend(this,t),this.CLASS_NAME="SuperMap.GetFeaturesParametersBase"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.datasetNames=null,e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.hasGeometry=null,e.maxFeatures=null,e.targetEpsgCode=null,e.targetPrj=null,e.aggregation&&(e.aggregation=null)}}])&&sh(t.prototype,r),n&&sh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function uh(e){"@babel/helpers - typeof";return(uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ch(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fh(){return(fh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dh(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ph(e,t){return(ph=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=dh(e);if(t){var o=dh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===uh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yh(e)}(this,r)}}function yh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dh(e){return(dh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ph(e,t)}(i,lh);var t,r,n,o=hh(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).getFeatureMode="ID",t.IDs=null,t.fields=null,j.extend(yh(t),e),t.CLASS_NAME="SuperMap.GetFeaturesByIDsParameters",t}return t=i,n=[{key:"toJsonParameters",value:function(e){var t,r;return t={datasetNames:e.datasetNames,getFeatureMode:"ID",ids:e.IDs},e.fields&&((r=new ah).name=e.datasetNames,r.fields=e.fields,t.queryParameter=r),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),"boolean"==typeof e.hasGeometry&&(t.hasGeometry=e.hasGeometry),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),e.aggregations&&(t.aggregations=e.aggregations),j.toJSON(t)}}],(r=[{key:"destroy",value:function(){fh(dh(i.prototype),"destroy",this).call(this);var e=this;if(e.IDs=null,e.getFeatureMode=null,e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}}}])&&ch(t.prototype,r),n&&ch(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function vh(e){"@babel/helpers - typeof";return(vh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gh(){return(gh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sh(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function wh(e,t){return(wh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Oh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Sh(e);if(t){var o=Sh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===vh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Sh(e){return(Sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wh(e,t)}(i,oh);var t,r,n,o=Oh(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesByIDsService",r}return t=i,(r=[{key:"destroy",value:function(){gh(Sh(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return bh.toJsonParameters(e)}}])&&mh(t.prototype,r),n&&mh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ph(e){"@babel/helpers - typeof";return(Ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Eh(){return(Eh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Th(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function kh(e,t){return(kh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Th(e);if(t){var o=Th(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ph(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ch(e)}(this,r)}}function Ch(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Th(e){return(Th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Rh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kh(e,t)}(i,lh);var t,r,n,o=jh(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).getFeatureMode="SQL",t.queryParameter=null,j.extend(Ch(t),e),t.CLASS_NAME="SuperMap.GetFeaturesBySQLParameters",t}return t=i,n=[{key:"toJsonParameters",value:function(e){var t={datasetNames:e.datasetNames,getFeatureMode:"SQL",queryParameter:e.queryParameter};return e.maxFeatures&&!isNaN(e.maxFeatures)&&(t.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(t.hasGeometry=e.hasGeometry),e.aggregations&&(t.aggregations=e.aggregations),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),e.aggregations&&(t.aggregations=e.aggregations),j.toJSON(t)}}],(r=[{key:"destroy",value:function(){Eh(Th(i.prototype),"destroy",this).call(this);this.getFeatureMode=null,this.queryParameter&&(this.queryParameter.destroy(),this.queryParameter=null)}}])&&xh(t.prototype,r),n&&xh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ah(e){"@babel/helpers - typeof";return(Ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ih(){return(Ih="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dh(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Mh(e,t){return(Mh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Nh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Dh(e);if(t){var o=Dh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ah(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Dh(e){return(Dh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mh(e,t)}(i,oh);var t,r,n,o=Nh(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesBySQLService",r}return t=i,(r=[{key:"destroy",value:function(){Ih(Dh(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return Rh.toJsonParameters(e)}}])&&Lh(t.prototype,r),n&&Lh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Bh(e){"@babel/helpers - typeof";return(Bh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Uh(){return(Uh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zh(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Jh(e,t){return(Jh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Vh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=zh(e);if(t){var o=zh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Bh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hh(e)}(this,r)}}function Hh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zh(e){return(zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jh(e,t)}(i,lh);var t,r,n,o=Vh(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).getFeatureMode=i.getFeatureMode.BOUNDS,t.bounds=null,t.fields=null,t.attributeFilter=null,t.spatialQueryMode=jt.CONTAIN,j.extend(Hh(t),e),t.CLASS_NAME="SuperMap.GetFeaturesByBoundsParameters",t}return t=i,n=[{key:"toJsonParameters",value:function(e){var t,r,n;return r={leftBottom:{x:e.bounds.left,y:e.bounds.bottom},rightTop:{x:e.bounds.right,y:e.bounds.top}},n={datasetNames:e.datasetNames,getFeatureMode:i.getFeatureMode.BOUNDS,bounds:r,spatialQueryMode:e.spatialQueryMode},e.fields&&((t=new ah).name=e.datasetNames,t.fields=e.fields,n.queryParameter=t),e.attributeFilter&&(n.attributeFilter=e.attributeFilter,n.getFeatureMode=i.getFeatureMode.BOUNDS_ATTRIBUTEFILTER),e.maxFeatures&&!isNaN(e.maxFeatures)&&(n.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(n.hasGeometry=e.hasGeometry),e.targetEpsgCode&&(n.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(n.targetPrj=e.targetPrj),e.aggregations&&(n.aggregations=e.aggregations),j.toJSON(n)}}],(r=[{key:"destroy",value:function(){Uh(zh(i.prototype),"destroy",this).call(this);var e=this;if(e.bounds&&(e.bounds.destroy(),e.bounds=null),e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null}}])&&Gh(t.prototype,r),n&&Gh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function qh(e){"@babel/helpers - typeof";return(qh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xh(){return(Xh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Kh(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Qh(e,t){return(Qh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Zh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Kh(e);if(t){var o=Kh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===qh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Kh(e){return(Kh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Wh.getFeatureMode={BOUNDS:"BOUNDS",BOUNDS_ATTRIBUTEFILTER:"BOUNDS_ATTRIBUTEFILTER"};var $h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qh(e,t)}(i,oh);var t,r,n,o=Zh(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesByBoundsService",r}return t=i,(r=[{key:"destroy",value:function(){Xh(Kh(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return Wh.toJsonParameters(e)}}])&&Yh(t.prototype,r),n&&Yh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ey(e){"@babel/helpers - typeof";return(ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ty(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ry(){return(ry="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ay(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ny(e,t){return(ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ay(e);if(t){var o=ay(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ey(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return iy(e)}(this,r)}}function iy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ay(e){return(ay=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ny(e,t)}(i,lh);var t,r,n,o=oy(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).bufferDistance=null,t.attributeFilter=null,t.geometry=null,t.fields=null,j.extend(iy(t),e),t.CLASS_NAME="SuperMap.GetFeaturesByBufferParameters",t}return t=i,n=[{key:"toJsonParameters",value:function(e){var t,r,n;return n=cr.fromGeometry(e.geometry),r={datasetNames:e.datasetNames,getFeatureMode:"BUFFER",bufferDistance:e.bufferDistance,geometry:n},e.fields&&((t=new ah).name=e.datasetNames,t.fields=e.fields,r.queryParameter=t),e.attributeFilter&&(r.attributeFilter=e.attributeFilter,r.getFeatureMode="BUFFER_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(r.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(r.hasGeometry=e.hasGeometry),e.targetEpsgCode&&(r.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(r.targetPrj=e.targetPrj),j.toJSON(r)}}],(r=[{key:"destroy",value:function(){ry(ay(i.prototype),"destroy",this).call(this);var e=this;if(e.bufferDistance=null,e.attributeFilter=null,e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.geometry&&(e.geometry.destroy(),e.geometry=null)}}])&&ty(t.prototype,r),n&&ty(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ly(e){"@babel/helpers - typeof";return(ly="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cy(){return(cy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hy(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function fy(e,t){return(fy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function py(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=hy(e);if(t){var o=hy(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ly(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function hy(e){return(hy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fy(e,t)}(i,oh);var t,r,n,o=py(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesByBufferService",r}return t=i,(r=[{key:"destroy",value:function(){cy(hy(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof sy)return sy.toJsonParameters(e)}}])&&uy(t.prototype,r),n&&uy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function dy(e){"@babel/helpers - typeof";return(dy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function by(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vy(){return(vy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Oy(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function my(e,t){return(my=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Oy(e);if(t){var o=Oy(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===dy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wy(e)}(this,r)}}function wy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oy(e){return(Oy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&my(e,t)}(i,lh);var t,r,n,o=gy(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).getFeatureMode="SPATIAL",t.geometry=null,t.fields=null,t.attributeFilter=null,t.spatialQueryMode=jt.CONTAIN,j.extend(wy(t),e),t.CLASS_NAME="SuperMap.GetFeaturesByGeometryParameters",t}return t=i,n=[{key:"toJsonParameters",value:function(e){var t,r,n;return r=cr.fromGeometry(e.geometry),n={datasetNames:e.datasetNames,getFeatureMode:"SPATIAL",geometry:r,spatialQueryMode:e.spatialQueryMode},e.fields&&((t=new ah).name=e.datasetNames,t.fields=e.fields,n.queryParameter=t),e.attributeFilter&&(n.attributeFilter=e.attributeFilter,n.getFeatureMode="SPATIAL_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(n.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(n.hasGeometry=e.hasGeometry),e.targetEpsgCode&&(n.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(n.targetPrj=e.targetPrj),e.aggregations&&(n.aggregations=e.aggregations),j.toJSON(n)}}],(r=[{key:"destroy",value:function(){vy(Oy(i.prototype),"destroy",this).call(this);var e=this;if(e.geometry&&(e.geometry.destroy(),e.geometry=null),e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null}}])&&by(t.prototype,r),n&&by(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _y(e){"@babel/helpers - typeof";return(_y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Py(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xy(){return(xy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jy(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Ey(e,t){return(Ey=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ky(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=jy(e);if(t){var o=jy(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function jy(e){return(jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Cy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ey(e,t)}(i,oh);var t,r,n,o=ky(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesByGeometryService",r}return t=i,(r=[{key:"destroy",value:function(){xy(jy(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return Sy.toJsonParameters(e)}}])&&Py(t.prototype,r),n&&Py(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ty(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ry=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=Yt.ADD,this.IDs=null,this.returnContent=!1,this.isUseBatch=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.EditFeaturesParameters"}var t,r,n;return t=e,n=[{key:"toJsonParameters",value:function(e){var t,r,n;if(e.editType===Yt.DELETE){if(null===e.IDs)return;n={ids:e.IDs}}else if(n=[],e.features){r=e.features.length;for(var o=0;o<r;o++)(t=e.features[o]).geometry=cr.fromGeometry(t.geometry),n.push(t)}return j.toJSON(n)}}],(r=[{key:"destroy",value:function(){var e=this;e.dataSourceName=null,e.dataSetName=null,e.features=null,e.editType=null,e.IDs=null,e.returnContent=null}}])&&Ty(t.prototype,r),n&&Ty(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ay(e){"@babel/helpers - typeof";return(Ay="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ly(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Iy(){return(Iy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fy(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function My(e,t){return(My=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ny(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Fy(e);if(t){var o=Fy(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ay(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Dy(e)}(this,r)}}function Dy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fy(e){return(Fy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var By=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&My(e,t)}(i,ff);var t,r,n,o=Ny(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).returnContent=!1,r.isUseBatch=!1,t&&j.extend(Dy(r),t),r.url=j.urlPathAppend(r.url,"features"),r.CLASS_NAME="SuperMap.EditFeaturesService",r}return t=i,(r=[{key:"destroy",value:function(){Iy(Fy(i.prototype),"destroy",this).call(this);this.returnContent=null,this.isUseBatch=null,this.fromIndex=null,this.toIndex=null}},{key:"processAsync",value:function(e){if(e instanceof Ry){var t=this,r="POST",n="",o=e.editType,i=null;if(t.returnContent=e.returnContent,t.isUseBatch=e.isUseBatch,i=Ry.toJsonParameters(e),o===Yt.DELETE){i=n=j.toJSON(e.IDs);var a=j.urlAppend(t.url,j.getParameterString({ids:n}));fu.urlIsLong(a)?(t.url=j.urlAppend(t.url,j.getParameterString({_method:"DELETE"})),r="POST"):(t.url=a,r="DELETE")}else o===Yt.UPDATE?r="PUT":(t.isUseBatch&&(t.url=j.urlAppend(t.url,"isUseBatch=".concat(t.isUseBatch)),t.returnContent=!1),t.returnContent&&(t.url=j.urlAppend(t.url,"returnContent=true"),r="POST"));t.request({method:r,data:i,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&Ly(t.prototype,r),n&&Ly(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Gy(e){"@babel/helpers - typeof";return(Gy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jy(e,t){return(Jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Vy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Hy(e);if(t){var o=Hy(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Gy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Hy(e){return(Hy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jy(e,t)}(a,af);var r,n,o,i=Vy(a);function a(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e,t)}return r=a,(n=[{key:"getFeaturesByIDs",value:function(e,t,r){var n=this;new _h(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"getFeaturesByBounds",value:function(e,t,r){var n=this;new $h(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"getFeaturesByBuffer",value:function(e,t,r){var n=this;new yy(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"getFeaturesBySQL",value:function(e,t,r){var n=this;new Fh(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"getFeaturesByGeometry",value:function(e,t,r){var n=this;new Cy(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"editFeatures",value:function(e,t){if(e&&e.dataSourceName&&e.dataSetName){var r=this,n=r.url,o=e.dataSourceName,i=e.dataSetName;n=j.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new By(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(r._processParams(e))}}},{key:"_processParams",value:function(e){if(!e)return{};var r=this;if(e.returnContent=null==e.returnContent||e.returnContent,e.fromIndex=e.fromIndex?e.fromIndex:0,e.toIndex=0===e.toIndex?0:e.toIndex?e.toIndex:-1,e.bounds&&(e.bounds=wr.toSuperMapBounds(e.bounds)),e.editType&&(e.editType=e.editType.toLowerCase()),e.geometry&&(e.geometry instanceof t().LngLatBounds?(e.geometry=wr.toSuperMapPolygon(e.geometry),e.geometry.SRID=4326):e.geometry instanceof t().Point?e.geometry=new U(e.geometry.x,e.geometry.y):e.geometry instanceof t().LngLat?(e.geometry=new U(e.geometry.lng,e.geometry.lat),e.geometry.SRID=4326):e.geometry instanceof b||(e.geometry=wr.toSuperMapGeometry(e.geometry))),e.features){var n=[];wr.isArray(e.features)?e.features.map(function(e){return n.push(r._createServerFeature(e)),n}):n.push(r._createServerFeature(e.features)),e.features=n}return e}},{key:"_createServerFeature",value:function(e){var t={},r=[],n=[],o=e.properties;for(var i in o)r.push(i),n.push(o[i]);return t.fieldNames=r,t.fieldValues=n,e.id&&(t.id=e.id),t.geometry=wr.toSuperMapGeometry(e),t}},{key:"_processFormat",value:function(e){return e||Pt.GEOJSON}}])&&Uy(r.prototype,n),o&&Uy(r,o),Object.defineProperty(r,"prototype",{writable:!1}),a}();function Wy(e){"@babel/helpers - typeof";return(Wy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yy(){return(Yy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ky(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Xy(e,t){return(Xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ky(e);if(t){var o=Ky(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Wy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Zy(e)}(this,r)}}function Zy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ky(e){return(Ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xy(e,t)}(i,ff);var t,r,n,o=Qy(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).datasource=null,r.dataset=null,t&&j.extend(Zy(r),t),r.CLASS_NAME="SuperMap.GetFieldsService",r}return t=i,(r=[{key:"destroy",value:function(){Yy(Ky(i.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"processAsync",value:function(){var e=this;e.url=j.urlPathAppend(e.url,"datasources/".concat(e.datasource,"/datasets/").concat(e.dataset,"/fields")),e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&qy(t.prototype,r),n&&qy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ed(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var td=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasource=null,this.dataset=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.FieldParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.datasource=null,this.dataset=null}}])&&ed(t.prototype,r),n&&ed(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rd(e){"@babel/helpers - typeof";return(rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function od(e,t){return(od=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function id(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=sd(e);if(t){var o=sd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===rd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ad(e)}(this,r)}}function ad(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sd(e){return(sd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ld=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&od(e,t)}(i,td);var t,r,n,o=id(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).fieldName=null,t.statisticMode=null,e&&j.extend(ad(t),e),t.CLASS_NAME="SuperMap.FieldStatisticsParameters",t}return t=i,(r=[{key:"destroy",value:function(){this.fieldName=null,this.statisticMode=null}}])&&nd(t.prototype,r),n&&nd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ud(e){"@babel/helpers - typeof";return(ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fd(){return(fd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dd(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function pd(e,t){return(pd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=dd(e);if(t){var o=dd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ud(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yd(e)}(this,r)}}function yd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dd(e){return(dd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pd(e,t)}(i,ff);var t,r,n,o=hd(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).datasource=null,r.dataset=null,r.field=null,r.statisticMode=null,t&&j.extend(yd(r),t),r.CLASS_NAME="SuperMap.FieldStatisticService",r}return t=i,(r=[{key:"destroy",value:function(){fd(dd(i.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null,this.field=null,this.statisticMode=null}},{key:"processAsync",value:function(){var e=this,t="datasources/"+e.datasource+"/datasets/"+e.dataset+"/fields/"+e.field+"/"+e.statisticMode;e.url=j.urlPathAppend(e.url,t),e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&cd(t.prototype,r),n&&cd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function vd(e){"@babel/helpers - typeof";return(vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function md(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gd(e,t){return(gd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Od(e);if(t){var o=Od(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===vd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Od(e){return(Od=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gd(e,t)}(i,af);var t,r,n,o=wd(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(r=[{key:"getFields",value:function(e,t){var r=this;new $y(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},datasource:e.datasource,dataset:e.dataset}).processAsync()}},{key:"getFieldStatisticsInfo",value:function(e,t){var r=this,n=e.fieldName,o=e.statisticMode;o&&!wr.isArray(o)&&(o=[o]),r.currentStatisticResult={fieldName:n},r._statisticsCallback=t,o.forEach(function(t){r.currentStatisticResult[t]=null,r._fieldStatisticRequest(e.datasource,e.dataset,n,t)})}},{key:"_fieldStatisticRequest",value:function(e,t,r,n){var o=this;new bd(o.url,{eventListeners:{scope:o,processCompleted:o._processCompleted,processFailed:o._statisticsCallback},datasource:e,dataset:t,field:r,statisticMode:n,crossOrigin:o.options.crossOrigin,headers:o.options.headers}).processAsync()}},{key:"_processCompleted",value:function(e){var t=this,r=!0,n=e.result;for(var o in this.currentStatisticResult&&null==t.currentStatisticResult[n.mode]&&(this.currentStatisticResult[n.mode]=n.result),t.currentStatisticResult)if(null==t.currentStatisticResult[o]){r=!1;break}r&&t._statisticsCallback({result:t.currentStatisticResult})}}])&&md(t.prototype,r),n&&md(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Pd=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null,j.extend(this,t),this.CLASS_NAME="SuperMap.GetGridCellInfosParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null}}])&&_d(t.prototype,r),n&&_d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function xd(e){"@babel/helpers - typeof";return(xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ed(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kd(){return(kd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rd(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function jd(e,t){return(jd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Cd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Rd(e);if(t){var o=Rd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===xd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Td(e)}(this,r)}}function Td(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rd(e){return(Rd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ad=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jd(e,t)}(i,ff);var t,r,n,o=Cd(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).datasetName=null,r.dataSourceName=null,r.datasetType=null,r.X=null,r.Y=null,t&&j.extend(Td(r),t),r.CLASS_NAME="SuperMap.GetGridCellInfosService",r}return t=i,(r=[{key:"destroy",value:function(){kd(Rd(i.prototype),"destroy",this).call(this);var e=this;e.X=null,e.Y=null,e.datasetName=null,e.dataSourceName=null,e.datasetType=null}},{key:"processAsync",value:function(e){if(e instanceof Pd){j.extend(this,e);var t=this;t.url=j.urlPathAppend(t.url,"datasources/".concat(t.dataSourceName,"/datasets/").concat(t.datasetName)),t.queryRequest(t.getDatasetInfoCompleted,t.getDatasetInfoFailed)}}},{key:"queryRequest",value:function(e,t){this.request({method:"GET",data:null,scope:this,success:e,failure:t})}},{key:"getDatasetInfoCompleted",value:function(e){e=j.transformResult(e),this.datasetType=e.datasetInfo.type,this.queryGridInfos()}},{key:"queryGridInfos",value:function(){var e=this;e.url=j.urlPathAppend(e.url,"GRID"==e.datasetType?"gridValue":"imageValue"),null!=e.X&&null!=e.Y&&(e.url=j.urlAppend(e.url,"x=".concat(e.X,"&y=").concat(e.Y))),e.queryRequest(e.serviceProcessCompleted,e.serviceProcessFailed)}},{key:"getDatasetInfoFailed",value:function(e){this.serviceProcessFailed(e)}}])&&Ed(t.prototype,r),n&&Ed(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ld(e){"@babel/helpers - typeof";return(Ld="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Id(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Md(e,t){return(Md=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Nd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Dd(e);if(t){var o=Dd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ld(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Dd(e){return(Dd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Md(e,t)}(i,af);var t,r,n,o=Nd(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(r=[{key:"getGridCellInfos",value:function(e,t){if(!e)return null;var r=this;new Ad(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}}])&&Id(t.prototype,r),n&&Id(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Bd(e){"@babel/helpers - typeof";return(Bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ud(e,t){return(Ud=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Jd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Vd(e);if(t){var o=Vd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Bd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Vd(e){return(Vd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Hd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ud(e,t)}(i,ff);var t,r,n,o=Jd(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=t||{}).EVENT_TYPES=["processCompleted","processFailed","processRunning"],(r=o.call(this,e,t)).CLASS_NAME="SuperMap.GeoprocessingService",r.headers={},r.crossOrigin=!0,r}return t=i,(r=[{key:"getTools",value:function(){this._get("".concat(this.url,"/list"))}},{key:"getTool",value:function(e){this._get("".concat(this.url,"/").concat(e))}},{key:"execute",value:function(e,t,r){var n={parameter:t=t||null,environment:r=r||null};this._get("".concat(this.url,"/").concat(e,"/execute"),n)}},{key:"submitJob",value:function(e,t,r){var n={parameter:t=t||null,environments:r=r||null};this.request({url:"".concat(this.url,"/").concat(e,"/jobs"),headers:{"Content-type":"application/json"},method:"POST",data:JSON.stringify(n),scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"waitForJobCompletion",value:function(e,t,r){var n=this,o=setInterval(function(){n._get("".concat(n.url,"/").concat(t,"/jobs/").concat(e),null,function(e){var t=e.state.runState;switch(r.statusCallback&&r.statusCallback(t),t){case"FINISHED":clearInterval(o),n.events.triggerEvent("processCompleted",{result:e});break;case"FAILED":case"CANCELED":clearInterval(o),n.events.triggerEvent("processFailed",{result:e})}})},r.interval)}},{key:"getJobInfo",value:function(e,t){this._get("".concat(this.url,"/").concat(e,"/jobs/").concat(t))}},{key:"cancelJob",value:function(e,t){this._get("".concat(this.url,"/").concat(e,"/jobs/").concat(t,"/cancel"))}},{key:"getJobs",value:function(e){var t="".concat(this.url,"/jobs");e&&(t="".concat(this.url,"/").concat(e,"/jobs")),this._get(t)}},{key:"getResults",value:function(e,t,r){var n="".concat(this.url,"/").concat(e,"/jobs/").concat(t,"/results");r&&(n="".concat(n,"/").concat(r)),this._get(n)}},{key:"_get",value:function(e,t,r,n){this.request({url:e,method:"GET",params:t,headers:{"Content-type":"application/json"},scope:this,success:r||this.serviceProcessCompleted,failure:n||this.serviceProcessFailed})}}])&&Gd(t.prototype,r),n&&Gd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function zd(e){"@babel/helpers - typeof";return(zd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qd(e,t){return(qd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Yd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Xd(e);if(t){var o=Xd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===zd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Xd(e){return(Xd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qd(e,t)}(i,af);var t,r,n,o=Yd(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).headers={},r.crossOrigin=!0,r.withCredentials=!0,r.proxy=!0,r}return t=i,(r=[{key:"getTools",value:function(e){new Hd(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).getTools()}},{key:"getTool",value:function(e,t){new Hd(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).getTool(e)}},{key:"execute",value:function(e,t,r,n){new Hd(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:n,processFailed:n}}).execute(e,t,r)}},{key:"submitJob",value:function(e,t,r,n){new Hd(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:n,processFailed:n}}).submitJob(e,t,r)}},{key:"waitForJobCompletion",value:function(e,t,r,n){new Hd(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:n,processFailed:n}}).waitForJobCompletion(e,t,r)}},{key:"getJobInfo",value:function(e,t,r){new Hd(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:r,processFailed:r}}).getJobInfo(e,t)}},{key:"cancelJob",value:function(e,t,r){new Hd(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:r,processFailed:r}}).cancelJob(e,t)}},{key:"getJobs",value:function(e,t){new Hd(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).getJobs(e)}},{key:"getResults",value:function(e,t,r,n){new Hd(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:n,processFailed:n}}).getResults(e,t,r)}}])&&Wd(t.prototype,r),n&&Wd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Zd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Kd=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.memoryData=null,this.type=t,r&&j.extend(this,r),this.CLASS_NAME="SuperMap.Theme"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.memoryData&&(this.memoryData.destroy(),this.memoryData=null),this.type=null}},{key:"toServerJSONObject",value:function(){}}])&&Zd(t.prototype,r),n&&Zd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var eb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.align=Ft.BASELINECENTER,this.backColor=new st(255,255,255),this.foreColor=new st(0,0,0),this.backOpaque=!1,this.sizeFixed=!0,this.fontHeight=6,this.fontWidth=0,this.fontWeight=400,this.fontName="Times New Roman",this.bold=!1,this.italic=!1,this.italicAngle=0,this.shadow=!1,this.strikeout=!1,this.outline=!1,this.opaqueRate=0,this.underline=!1,this.rotation=0,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ServerTextStyle"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e(t);return j.copy(r,t),r.backColor=st.fromJson(t.backColor),r.foreColor=st.fromJson(t.foreColor),r}}],(r=[{key:"destroy",value:function(){var e=this;e.align=null,e.backColor&&(e.backColor.destroy(),e.backColor=null),e.foreColor&&(e.foreColor.destroy(),e.foreColor=null),e.backOpaque=null,e.sizeFixed=null,e.fontHeight=null,e.fontWidth=null,e.fontWeight=null,e.fontName=null,e.bold=null,e.italic=null,e.italicAngle=null,e.shadow=null,e.strikeout=null,e.outline=null,e.opaqueRate=null,e.underline=null,e.rotation=null}}])&&$d(t.prototype,r),n&&$d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function tb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var rb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.end=0,this.start=0,this.visible=!0,this.style=new eb,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}}])&&tb(t.prototype,r),n&&tb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function nb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ob=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.style=new ut,this.unique=null,this.visible=!0,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeUniqueItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return j.copy(r,t),r.style=ut.fromJson(t.style),r}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.unique=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=j.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&nb(t.prototype,r),n&&nb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ib(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ab=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offsetFixed=!1,this.offsetX="0.0",this.offsetY="0.0",t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeOffset"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){this.offsetFixed=null,this.offsetX=null,this.offsetY=null}}])&&ib(t.prototype,r),n&&ib(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function sb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var lb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultStyle=null,this.separator=null,this.separatorEnabled=!1,this.splitIndexes=null,this.styles=new eb,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.LabelMixedTextStyle"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e,n=t.styles;if(j.copy(r,t),r.defaultStyle=new eb(t.defaultStyle),n){r.styles=[];for(var o=0,i=n.length;o<i;o++)r.styles.push(new eb(n[o]))}return r}}}],(r=[{key:"destroy",value:function(){var e=this;if(e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null),e.separator=null,e.separatorEnabled=null,e.splitIndexes&&(e.splitIndexes=null),e.styles){for(var t=0,r=e.styles,n=r.length;t<n;t++)r[t].destroy();e.styles=null}}}])&&sb(t.prototype,r),n&&sb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ub(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var cb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxTextHeight=0,this.maxTextWidth=0,this.minTextHeight=0,this.minTextWidth=0,this.uniformStyle=new eb,this.uniformMixedStyle=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelText"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r.uniformStyle=eb.fromObj(t.uniformStyle),r.uniformMixedStyle=lb.fromObj(t.uniformMixedStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.maxTextHeight=null,e.maxTextWidth=null,e.minTextHeight=null,e.minTextWidth=null,e.uniformStyle&&(e.uniformStyle.destroy(),e.uniformStyle=null),e.uniformMixedStyle&&(e.uniformMixedStyle.destroy(),e.uniformMixedStyle=null)}}])&&ub(t.prototype,r),n&&ub(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function fb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var pb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAlongLine=!0,this.alongLineDirection=Bt.LB_TO_RT,this.angleFixed=!1,this.repeatedLabelAvoided=!1,this.repeatIntervalFixed=!1,this.labelRepeatInterval=0,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelAlongLine"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.isAlongLine=null,e.alongLineDirection=null,e.angleFixed=null,e.repeatedLabelAvoided=null,e.repeatIntervalFixed=null,e.labelRepeatInterval=null}}])&&fb(t.prototype,r),n&&fb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function hb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var yb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.labelBackShape=Gt.NONE,this.backStyle=new ut,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelBackground"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return r.labelBackShape=t.labelBackShape,r.backStyle=ut.fromJson(t.backStyle),r}}}],(r=[{key:"destroy",value:function(){this.labelBackShape=null,this.backStyle&&(this.backStyle.destroy(),this.backStyle=null)}}])&&hb(t.prototype,r),n&&hb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function db(e){"@babel/helpers - typeof";return(db="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vb(){return(vb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ob(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function mb(e,t){return(mb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ob(e);if(t){var o=Ob(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===db(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wb(e)}(this,r)}}function wb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ob(e){return(Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mb(e,t)}(i,Kd);var t,r,n,o=gb(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"LABEL",e)).alongLine=new pb,t.background=new yb,t.items=null,t.uniqueItems=null,t.labelExpression=null,t.labelOverLengthMode=Ut.NONE,t.matrixCells=null,t.maxLabelLength=256,t.numericPrecision=0,t.offset=new ab,t.overlapAvoided=!0,t.rangeExpression=null,t.uniqueExpression=null,t.smallGeometryLabeled=!1,t.text=new cb,t.textSpace=0,e&&j.extend(wb(t),e),t.CLASS_NAME="SuperMap.ThemeLabel",t}return t=i,n=[{key:"fromObj",value:function(e){if(e){var t=new i,r=e.items,n=e.uniqueItems,o=e.matrixCells;if(e.matrixCells=null,j.copy(t,e),t.alongLine=pb.fromObj(e),t.background=yb.fromObj(e),r){t.items=[];for(var a=0,s=r.length;a<s;a++)t.items.push(rb.fromObj(r[a]))}if(n){t.uniqueItems=[];for(var l=0,u=n.length;l<u;l++)t.uniqueItems.push(ob.fromObj(n[l]))}if(o){t.matrixCells=[];for(var c=0,f=o.length;c<f;c++);}return t.offset=ab.fromObj(e),t.text=cb.fromObj(e),t}}}],(r=[{key:"destroy",value:function(){vb(Ob(i.prototype),"destroy",this).call(this);var e=this;if(e.alongLine=null,e.background&&(e.background.destroy(),e.background=null),e.items){for(var t=0,r=e.items,n=r.length;t<n;t++)r[t].destroy();e.items=null}if(e.uniqueItems){for(var o=0,a=e.uniqueItems,s=a.length;o<s;o++)a[o].destory();e.uniqueItems=null}e.labelExpression=null,e.labelOverLengthMode=null,e.matrixCells=null,e.maxLabelLength=null,e.numericPrecision=null,e.overlapAvoided=null,e.rangeExpression=null,e.uniqueExpression=null,e.offset&&(e.offset.destroy(),e.offset=null),e.overlapAvoided=null,e.smallGeometryLabeled=null,e.text&&(e.text.destroy(),e.text=null),e.textSpace=null}},{key:"toJSON",value:function(){return j.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,this.alongLine&&(e.alongLine=this.alongLine.isAlongLine,e.alongLineDirection=this.alongLine.alongLineDirection,e.angleFixed=this.alongLine.angleFixed,e.isLabelRepeated=this.alongLine.isLabelRepeated,e.labelRepeatInterval=this.alongLine.labelRepeatInterval,e.repeatedLabelAvoided=this.alongLine.repeatedLabelAvoided,e.repeatIntervalFixed=this.alongLine.repeatIntervalFixed),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.text&&(e.maxTextHeight=this.text.maxTextHeight,e.maxTextWidth=this.text.maxTextWidth,e.minTextHeight=this.text.minTextHeight,e.minTextWidth=this.text.minTextWidth,e.uniformStyle=this.text.uniformStyle,e.uniformMixedStyle=this.text.uniformMixedStyle),this.background&&(e.labelBackShape=this.background.labelBackShape,e.backStyle=this.background.backStyle),e.labelOverLengthMode=this.labelOverLengthMode,e.maxLabelLength=this.maxLabelLength,e.smallGeometryLabeled=this.smallGeometryLabeled,e.rangeExpression=this.rangeExpression,e.uniqueExpression=this.uniqueExpression,e.numericPrecision=this.numericPrecision,e.items=this.items,e.uniqueItems=this.uniqueItems,e.labelExpression=this.labelExpression,e.overlapAvoided=this.overlapAvoided,e.matrixCells=this.matrixCells,e.textSpace=this.textSpace,e}}])&&bb(t.prototype,r),n&&bb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _b(e){"@babel/helpers - typeof";return(_b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xb(){return(xb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cb(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Eb(e,t){return(Eb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Cb(e);if(t){var o=Cb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jb(e)}(this,r)}}function jb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cb(e){return(Cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Tb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eb(e,t)}(i,Kd);var t,r,n,o=kb(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"UNIQUE",e)).defaultStyle=new ut,t.items=null,t.uniqueExpression=null,t.colorGradientType=Dt.YELLOW_RED,e&&j.extend(jb(t),e),t.CLASS_NAME="SuperMap.ThemeUnique",t}return t=i,n=[{key:"fromObj",value:function(e){var t=new i,r=e.items,n=r?r.length:0;j.extend(t,e),t.items=[],t.defaultStyle=ut.fromJson(e.defaultStyle);for(var o=0;o<n;o++)t.items.push(ob.fromObj(r[o]));return t}}],(r=[{key:"destroy",value:function(){xb(Cb(i.prototype),"destroy",this).call(this);var e=this;if(e.uniqueExpression=null,e.colorGradientType=null,e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=j.copyAttributes(e,this)).defaultStyle&&e.defaultStyle.toServerJSONObject&&(e.defaultStyle=e.defaultStyle.toServerJSONObject()),e.items){for(var t=[],r=e.items.length,n=0;n<r;n++)t.push(e.items[n].toServerJSONObject());e.items=t}return e}}])&&Pb(t.prototype,r),n&&Pb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Rb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ab=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.axesColor=new st(0,0,0),this.axesDisplayed=!1,this.axesGridDisplayed=!1,this.axesTextDisplayed=!1,this.axesTextStyle=new eb,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphAxes"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r.axesColor=st.fromJson(t.axesColor),r.axesTextStyle=eb.fromObj(t.axesTextStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.axesColor&&(e.axesColor.destroy(),e.axesColor=null),e.axesDisplayed=null,e.axesGridDisplayed=null,e.axesTextDisplayed=null,e.axesTextStyle&&(e.axesTextStyle.destroy(),e.axesTextStyle=null)}}])&&Rb(t.prototype,r),n&&Rb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Lb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ib=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxGraphSize=0,this.minGraphSize=0,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphSize"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return j.copy(r,t),r}}],(r=[{key:"destroy",value:function(){this.maxGraphSize=null,this.minGraphSize=null}}])&&Lb(t.prototype,r),n&&Lb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Mb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Nb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.graphTextDisplayed=!1,this.graphTextFormat=At.CAPTION,this.graphTextStyle=new eb,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphText"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return j.copy(r,t),r.graphTextStyle=eb.fromObj(t.graphTextStyle),r}}],(r=[{key:"destroy",value:function(){var e=this;e.graphTextDisplayed=null,e.graphTextFormat=null,e.graphTextStyle&&(e.graphTextStyle.destroy(),e.graphTextStyle=null)}}])&&Mb(t.prototype,r),n&&Mb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Db(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Fb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=new ut,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r.uniformStyle=ut.fromJson(t.uniformStyle),r}}}],(r=[{key:"destroy",value:function(){this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=null}}])&&Db(t.prototype,r),n&&Db(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Bb(e){"@babel/helpers - typeof";return(Bb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ub(){return(Ub="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zb(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Jb(e,t){return(Jb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Vb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=zb(e);if(t){var o=zb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Bb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hb(e)}(this,r)}}function Hb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zb(e){return(zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jb(e,t)}(i,Kd);var t,r,n,o=Vb(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"GRAPH",e)).barWidth=0,t.graduatedMode=Mt.CONSTANT,t.graphAxes=new Ab,t.graphSize=new Ib,t.graphSizeFixed=!1,t.graphText=new Nb,t.graphType=Lt.AREA,t.graphAxesTextDisplayMode=It.NONE,t.items=null,t.memoryKeys=null,t.negativeDisplayed=!1,t.offset=new ab,t.overlapAvoided=!0,t.roseAngle=0,t.startAngle=0,e&&j.extend(Hb(t),e),t.CLASS_NAME="SuperMap.ThemeGraph",t}return t=i,n=[{key:"fromObj",value:function(e){var t=new i,r=e.items,n=r?r.length:0;j.copy(t,e),t.items=[],t.graphAxes=Ab.fromObj(e),t.graphSize=Ib.fromObj(e),t.graphText=Nb.fromObj(e),t.offset=ab.fromObj(e);for(var o=0;o<n;o++)t.items.push(Fb.fromObj(r[o]));return t}}],(r=[{key:"destroy",value:function(){Ub(zb(i.prototype),"destroy",this).call(this);var e=this;if(e.barWidth=null,e.graduatedMode=null,e.graphAxes&&(e.graphAxes.destroy(),e.graphAxes=null),e.graphSize&&(e.graphSize.destroy(),e.graphSize=null),e.graphSizeFixed=null,e.graphText&&(e.graphText.destroy(),e.graphText=null),e.graphType=null,e.items){for(var t=0,r=e.items,n=r.length;t<n;t++)r[t].destroy();e.items=null}e.memoryKeys=null,e.negativeDisplayed=null,e.offset&&(e.offset.destroy(),e.offset=null),e.overlapAvoided=null,e.roseAngle=null,e.startAngle=null,e.graphAxesTextDisplayMode=null}},{key:"toJSON",value:function(){return j.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,this.graphText&&(e.graphTextDisplayed=this.graphText.graphTextDisplayed,e.graphTextFormat=this.graphText.graphTextFormat,e.graphTextStyle=this.graphText.graphTextStyle),this.graphAxes&&(e.axesColor=this.graphAxes.axesColor,e.axesDisplayed=this.graphAxes.axesDisplayed,e.axesGridDisplayed=this.graphAxes.axesGridDisplayed,e.axesTextDisplayed=this.graphAxes.axesTextDisplayed,e.axesTextStyle=this.graphAxes.axesTextStyle),this.graphSize&&(e.maxGraphSize=this.graphSize.maxGraphSize,e.minGraphSize=this.graphSize.minGraphSize),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),e.barWidth=this.barWidth,e.graduatedMode=this.graduatedMode,e.graphSizeFixed=this.graphSizeFixed,e.graphType=this.graphType,e.graphAxesTextDisplayMode=this.graphAxesTextDisplayMode,e.items=this.items,e.memoryKeys=this.memoryKeys,e.negativeDisplayed=this.negativeDisplayed,e.overlapAvoided=this.overlapAvoided,e.roseAngle=this.roseAngle,e.startAngle=this.startAngle,e}}])&&Gb(t.prototype,r),n&&Gb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function qb(e){"@babel/helpers - typeof";return(qb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xb(e,t){return(Xb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Kb(e);if(t){var o=Kb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===qb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Zb(e)}(this,r)}}function Zb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kb(e){return(Kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xb(e,t)}(i,Kd);var t,r,n,o=Qb(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"DOTDENSITY",e)).dotExpression=null,t.style=new ut,t.value=null,e&&j.extend(Zb(t),e),t.CLASS_NAME="SuperMap.ThemeDotDensity",t}return t=i,n=[{key:"fromObj",value:function(e){if(e){var t=new i;return j.copy(t,e),t.style=ut.fromJson(e.style),t}}}],(r=[{key:"destroy",value:function(){var e=this;e.dotExpression=null,e.value=null,e.style&&(e.style.destroy(),e.style=null)}},{key:"toServerJSONObject",value:function(){var e={};return(e=j.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&Yb(t.prototype,r),n&&Yb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ev(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var tv=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.negativeDisplayed=!1,this.negativeStyle=new ut,this.positiveStyle=new ut,this.zeroDisplayed=!1,this.zeroStyle=new ut,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraduatedSymbolStyle"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r.negativeStyle=ut.fromJson(t.negativeStyle),r.positiveStyle=ut.fromJson(t.positiveStyle),r.zeroStyle=ut.fromJson(t.zeroStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.negativeDisplayed=null,e.negativeStyle=null,e.positiveStyle=null,e.zeroDisplayed=null,e.zeroStyle=null}}])&&ev(t.prototype,r),n&&ev(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rv(e){"@babel/helpers - typeof";return(rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ov(){return(ov="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function iv(e,t){return(iv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function av(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=lv(e);if(t){var o=lv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===rv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sv(e)}(this,r)}}function sv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lv(e){return(lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var uv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iv(e,t)}(i,Kd);var t,r,n,o=av(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"GRADUATEDSYMBOL",e)).baseValue=0,t.expression=null,t.graduatedMode=Mt.CONSTAN,t.offset=new ab,t.style=new tv,e&&j.extend(sv(t),e),t.CLASS_NAME="SuperMap.ThemeGraduatedSymbol",t}return t=i,n=[{key:"fromObj",value:function(e){if(e){var t=new i;return j.copy(t,e),t.offset=ab.fromObj(e),t.style=tv.fromObj(e),t}}}],(r=[{key:"destroy",value:function(){ov(lv(i.prototype),"destroy",this).call(this);var e=this;e.expression=null,e.graduatedMode=Mt.CONSTANT,e.offset&&(e.offset.destroy(),e.offset=null),e.style&&(e.style.destroy(),e.style=null)}},{key:"toJSON",value:function(){return j.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,e.baseValue=this.baseValue,e.expression=this.expression,e.graduatedMode=this.graduatedMode,this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.style&&(e.negativeStyle=this.style.negativeStyle,e.negativeDisplayed=this.style.negativeDisplayed,e.positiveStyle=this.style.positiveStyle,e.zeroDisplayed=this.style.zeroDisplayed,e.zeroStyle=this.style.zeroStyle),e}}])&&nv(t.prototype,r),n&&nv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function cv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var fv=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.end=0,this.start=0,this.style=new ut,this.visible=!0,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeRangeItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r.style=ut.fromJson(t.style),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=j.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&cv(t.prototype,r),n&&cv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pv(e){"@babel/helpers - typeof";return(pv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yv(){return(yv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function dv(e,t){return(dv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=mv(e);if(t){var o=mv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===pv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vv(e)}(this,r)}}function vv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mv(e){return(mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dv(e,t)}(i,Kd);var t,r,n,o=bv(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"RANGE",e)).precision="1.0E-12",t.items=null,t.rangeExpression=null,t.rangeMode=Nt.EQUALINTERVAL,t.rangeParameter=0,t.colorGradientType=Dt.YELLOW_RED,e&&j.extend(vv(t),e),t.CLASS_NAME="SuperMap.ThemeRange",t}return t=i,n=[{key:"fromObj",value:function(e){if(e){var t=new i;j.copy(t,e);var r=e.items,n=r?r.length:0;t.items=[];for(var o=0;o<n;o++)t.items.push(fv.fromObj(r[o]));return t}}}],(r=[{key:"destroy",value:function(){yv(mv(i.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.rangeExpression=null,e.rangeMode=null,e.rangeParameter=null,e.colorGradientType=null}}])&&hv(t.prototype,r),n&&hv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function wv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ov=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.bounds=null,this.caption=null,this.description=null,this.name=null,this.queryable=null,this.subLayers=null,this.type=null,this.visible=null,j.extend(this,t),this.CLASS_NAME="SuperMap.UGCLayer"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){j.reset(this)}},{key:"fromJson",value:function(e){e=e||{},j.extend(this,e);var t=this.bounds;t&&(this.bounds=new I(t.leftBottom.x,t.leftBottom.y,t.rightTop.x,t.rightTop.y))}},{key:"toServerJSONObject",value:function(){var e={};return(e=j.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}])&&wv(t.prototype,r),n&&wv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Sv(e){"@babel/helpers - typeof";return(Sv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pv(){return(Pv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function xv(e,t){return(xv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ev(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=kv(e);if(t){var o=kv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Sv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function kv(e){return(kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xv(e,t)}(i,Ov);var t,r,n,o=Ev(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).completeLineSymbolDisplayed=null,t.maxScale=null,t.minScale=null,t.minVisibleGeometrySize=null,t.opaqueRate=null,t.symbolScalable=null,t.symbolScale=null,t.overlapDisplayed=null,t.overlapDisplayedOptions=null,t.CLASS_NAME="SuperMap.UGCMapLayer",t}return t=i,(r=[{key:"destroy",value:function(){Pv(kv(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"fromJson",value:function(e){Pv(kv(i.prototype),"fromJson",this).call(this,e)}},{key:"toServerJSONObject",value:function(){return Pv(kv(i.prototype),"toServerJSONObject",this).call(this)}}])&&_v(t.prototype,r),n&&_v(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Cv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Tv=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.foreignTableName=null,this.joinFilter=null,this.joinType=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.JoinItem"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.foreignTableName=null,this.joinFilter=null,this.joinType=null}},{key:"toServerJSONObject",value:function(){var e={};return e=j.copyAttributes(e,this)}}])&&Cv(t.prototype,r),n&&Cv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Rv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Av=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.bounds=null,this.dataSourceName=null,this.description=null,this.encodeType=null,this.isReadOnly=null,this.name=null,this.prjCoordSys=null,this.tableName=null,this.type=null,j.extend(this,t);var r=this.bounds;r&&(this.bounds=new I(r.leftBottom.x,r.leftBottom.y,r.rightTop.x,r.rightTop.y)),this.CLASS_NAME="SuperMap.DatasetInfo"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){j.reset(this)}},{key:"toServerJSONObject",value:function(){var e={};return(e=j.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}])&&Rv(t.prototype,r),n&&Rv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Lv(e){"@babel/helpers - typeof";return(Lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Iv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mv(){return(Mv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Nv(e,t){return(Nv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Dv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Fv(e);if(t){var o=Fv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Lv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Fv(e){return(Fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nv(e,t)}(i,jv);var t,r,n,o=Dv(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).datasetInfo=null,t.displayFilter=null,t.joinItems=null,t.representationField=null,t.ugcLayerType=null,t.CLASS_NAME="SuperMap.UGCSubLayer",t}return t=i,(r=[{key:"fromJson",value:function(e){if(Mv(Fv(i.prototype),"fromJson",this).call(this,e),this.datasetInfo&&(this.datasetInfo=new Av(this.datasetInfo)),this.joinItems&&this.joinItems.length){for(var t=[],r=0;r<this.joinItems.length;r++)t[r]=new Tv(this.joinItems[r]);this.joinItems=t}}},{key:"destroy",value:function(){Mv(Fv(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"toServerJSONObject",value:function(){var e=Mv(Fv(i.prototype),"toServerJSONObject",this).call(this);if(e.joinItems){for(var t=[],r=0;r<e.joinItems.length;r++)e.joinItems[r].toServerJSONObject&&(t[r]=e.joinItems[r].toServerJSONObject());e.joinItems=t}return e.datasetInfo&&e.datasetInfo.toServerJSONObject&&(e.datasetInfo=e.datasetInfo.toServerJSONObject()),e}}])&&Iv(t.prototype,r),n&&Iv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Gv(e){"@babel/helpers - typeof";return(Gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jv(){return(Jv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Vv(e,t){return(Vv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Hv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=zv(e);if(t){var o=zv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Gv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function zv(e){return(zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vv(e,t)}(i,Bv);var t,r,n,o=Hv(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).theme=null,t.themeElementPosition=null,t.CLASS_NAME="SuperMap.ServerTheme",t}return t=i,(r=[{key:"destroy",value:function(){Jv(zv(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"fromJson",value:function(e){Jv(zv(i.prototype),"fromJson",this).call(this,e);var t=this.theme;switch(t&&t.type){case"LABEL":this.theme=Sb.fromObj(t);break;case"UNIQUE":this.theme=Tb.fromObj(t);break;case"GRAPH":this.theme=Wb.fromObj(t);break;case"DOTDENSITY":this.theme=$b.fromObj(t);break;case"GRADUATEDSYMBOL":this.theme=uv.fromObj(t);break;case"RANGE":this.theme=gv.fromObj(t)}this.themeElementPosition&&(this.themeElementPosition=new A(this.themeElementPosition.x,this.themeElementPosition.y))}},{key:"toServerJSONObject",value:function(){var e=Jv(zv(i.prototype),"toServerJSONObject",this).call(this);return e.themeElementPosition&&e.themeElementPosition.toServerJSONObject&&(e.themeElementPosition=e.themeElementPosition.toServerJSONObject()),e.theme&&e.theme.toServerJSONObject&&(e.theme=e.theme.toServerJSONObject()),e}}])&&Uv(t.prototype,r),n&&Uv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function qv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Yv=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.elevation=null,this.color=null,j.extend(this,t);var r=this.color;r&&(this.color=new st(r.red,r.green,r.blue)),this.CLASS_NAME="SuperMap.ColorDictionary"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){j.reset(this)}},{key:"toServerJSONObject",value:function(){var e={};return e=j.copyAttributes(e,this)}}])&&qv(t.prototype,r),n&&qv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Xv(e){"@babel/helpers - typeof";return(Xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zv(){return(Zv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=em(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Kv(e,t){return(Kv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=em(e);if(t){var o=em(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Xv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function em(e){return(em=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kv(e,t)}(i,Bv);var t,r,n,o=$v(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).colorDictionarys=null,t.brightness=null,t.colorGradientType=null,t.colors=null,t.contrast=null,t.dashStyle=null,t.gridType=null,t.horizontalSpacing=null,t.sizeFixed=null,t.solidStyle=null,t.specialColor=null,t.specialValue=null,t.specialValueTransparent=null,t.verticalSpacing=null,t.CLASS_NAME="SuperMap.Grid",t}return t=i,(r=[{key:"destroy",value:function(){Zv(em(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"fromJson",value:function(e){if(Zv(em(i.prototype),"fromJson",this).call(this,e),this.specialColor&&(this.specialColor=new st(this.specialColor.red,this.specialColor.green,this.specialColor.blue)),this.colors){var t,r=[];for(var n in this.colors)t=this.colors[n],r.push(new st(t.red,t.green,t.blue));this.colors=r}if(this.dashStyle&&(this.dashStyle=new ut(this.dashStyle)),this.solidStyle&&(this.solidStyle=new ut(this.solidStyle)),this.colorDictionary){var o,a=[];for(var s in this.colorDictionary)o=this.colorDictionary[s],a.push(new Yv({elevation:s,color:o}));this.colorDictionarys=a}delete this.colorDictionary}},{key:"toServerJSONObject",value:function(){var e=Zv(em(i.prototype),"toServerJSONObject",this).call(this);return e.dashStyle&&e.dashStyle.toServerJSONObject&&(e.dashStyle=e.dashStyle.toServerJSONObject()),e.solidStyle&&e.solidStyle.toServerJSONObject&&(e.solidStyle=e.solidStyle.toServerJSONObject()),e}}])&&Qv(t.prototype,r),n&&Qv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function rm(e){"@babel/helpers - typeof";return(rm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function om(){return(om="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sm(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function im(e,t){return(im=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function am(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=sm(e);if(t){var o=sm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===rm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function sm(e){return(sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&im(e,t)}(i,Bv);var t,r,n,o=am(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).brightness=null,t.colorSpaceType=null,t.contrast=null,t.displayBandIndexes=null,t.transparent=null,t.transparentColor=null,t.transparentColorTolerance=null,t.CLASS_NAME="SuperMap.Image",t}return t=i,(r=[{key:"destroy",value:function(){om(sm(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"fromJson",value:function(e){om(sm(i.prototype),"fromJson",this).call(this,e),this.transparentColor&&(this.transparentColor=new st(this.transparentColor.red,this.transparentColor.green,this.transparentColor.blue))}},{key:"toServerJSONObject",value:function(){return om(sm(i.prototype),"toServerJSONObject",this).call(this)}}])&&nm(t.prototype,r),n&&nm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function um(e){"@babel/helpers - typeof";return(um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fm(){return(fm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ym(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function pm(e,t){return(pm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ym(e);if(t){var o=ym(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===um(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ym(e){return(ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pm(e,t)}(i,Bv);var t,r,n,o=hm(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).style=null,t.CLASS_NAME="SuperMap.Vector",t}return t=i,(r=[{key:"destroy",value:function(){fm(ym(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"fromJson",value:function(e){fm(ym(i.prototype),"fromJson",this).call(this,e);var t=this.style;t&&(this.style=new ut(t))}},{key:"toServerJSONObject",value:function(){var e=fm(ym(i.prototype),"toServerJSONObject",this).call(this);return e.style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&cm(t.prototype,r),n&&cm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function bm(e){"@babel/helpers - typeof";return(bm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mm(){return(mm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sm(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function gm(e,t){return(gm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Sm(e);if(t){var o=Sm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===bm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Om(e)}(this,r)}}function Om(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sm(e){return(Sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gm(e,t)}(i,ff);var t,r,n,o=wm(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).isTempLayers=!1,t&&j.extend(Om(r),t),r.CLASS_NAME="SuperMap.GetLayersInfoService",r}return t=i,(r=[{key:"destroy",value:function(){mm(Sm(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"processAsync",value:function(){var e=this;e.isTempLayers||(e.url=j.urlPathAppend(e.url,"layers")),e.request({method:"GET",params:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){var t,r;r=(t=!!(e=j.transformResult(e))&&e.length>0?e[0].subLayers.layers:null)?t.length:0,this.handleLayers(r,t),this.events.triggerEvent("processCompleted",{result:e[0]})}},{key:"handleLayers",value:function(e,t){var r;if(e)for(var n=0;n<e;n++){if(t[n].subLayers&&t[n].subLayers.layers&&t[n].subLayers.layers.length>0)this.handleLayers(t[n].subLayers.layers.length,t[n].subLayers.layers);else switch(t[n].ugcLayerType){case"THEME":(r=new Wv).fromJson(t[n]),t[n]=r;break;case"GRID":(r=new tm).fromJson(t[n]),t[n]=r;break;case"IMAGE":(r=new lm).fromJson(t[n]),t[n]=r;break;case"VECTOR":(r=new dm).fromJson(t[n]),t[n]=r}}}}])&&vm(t.prototype,r),n&&vm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Pm(e){"@babel/helpers - typeof";return(Pm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Em(){return(Em="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Tm(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function km(e,t){return(km=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Tm(e);if(t){var o=Tm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Pm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Cm(e)}(this,r)}}function Cm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tm(e){return(Tm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Rm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&km(e,t)}(i,ff);var t,r,n,o=jm(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t),t&&j.extend(Cm(r),t),r.CLASS_NAME="SuperMap.SetLayerInfoService",r}return t=i,(r=[{key:"destroy",value:function(){Em(Tm(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"processAsync",value:function(e){if(e){var t=j.toJSON(e);this.request({method:"PUT",data:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}])&&xm(t.prototype,r),n&&xm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Am(e){"@babel/helpers - typeof";return(Am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Im(){return(Im="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fm(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Mm(e,t){return(Mm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Nm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Fm(e);if(t){var o=Fm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Am(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Dm(e)}(this,r)}}function Dm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fm(e){return(Fm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mm(e,t)}(i,ff);var t,r,n,o=Nm(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).resourceID=null,r.isTempLayers=!1,t&&j.extend(Dm(r),t),r.CLASS_NAME="SuperMap.SetLayersInfoService",r}return t=i,(r=[{key:"destroy",value:function(){Im(Fm(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"processAsync",value:function(e){if(e){var t,r=[],n=this,o="";n.isTempLayers?(n.url=j.urlPathAppend(n.url,"tempLayersSet/"+n.resourceID),o="PUT"):(n.url=j.urlPathAppend(n.url,"tempLayersSet"),o="POST"),e.subLayers||(e.subLayers={layers:[]}),e.subLayers.layers||(e.subLayers.layers=[]);var i=e.subLayers.layers,a=i.length;for(var s in i){if("GRID"===i[s].ugcLayerType){var l={},u=i[s].colorDictionarys;for(var c in u){l[u[c].elevation]=u[c].color}}i[s].colorDictionary=l,delete i[s].colorDictionarys}for(var f=0;f<a;f++)i[f].toJsonObject?r.push(i[f].toJsonObject()):r.push(i[f]);(t=j.extend(t,e)).subLayers={layers:r},t.object=null;var p=j.toJSON([t]);n.request({method:o,data:p,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&Lm(t.prototype,r),n&&Lm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Gm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Um=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerStatusList=[],this.holdTime=15,this.resourceID=null,t&&j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.layerStatusList=null,this.holdTime=null,this.resourceID=null}},{key:"toJSON",value:function(){var e="{";e+='"layers":[';for(var t=[],r=0,n=this.layerStatusList.length;r<n;r++)t.push(this.layerStatusList[r].toJSON());return e+=t,e+="]",e+="}"}}])&&Gm(t.prototype,r),n&&Gm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Jm(e){"@babel/helpers - typeof";return(Jm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hm(){return(Hm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ym(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function zm(e,t){return(zm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Wm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ym(e);if(t){var o=Ym(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Jm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qm(e)}(this,r)}}function qm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ym(e){return(Ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zm(e,t)}(i,ff);var t,r,n,o=Wm(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).lastparams=null,r.mapUrl=e,t&&j.extend(qm(r),t),r.CLASS_NAME="SuperMap.SetLayerStatusService",r}return t=i,(r=[{key:"destroy",value:function(){Hm(Ym(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"processAsync",value:function(e){if(e instanceof Um){var t=this;if(t.url=t.mapUrl,null==e.resourceID)t.url=j.urlPathAppend(t.url,"tempLayersSet"),t.lastparams=e,t.request({method:"POST",scope:t,success:t.createTempLayerComplete,failure:t.serviceProcessFailed});else{t.url=j.urlPathAppend(t.url,"tempLayersSet/"+e.resourceID),t.url=j.urlAppend(t.url,"elementRemain=true&reference="+e.resourceID+"&holdTime="+e.holdTime.toString());var r="[{";r+='"type":"UGC",',null!=e.layerStatusList&&e.layerStatusList.length>0&&(r+='"subLayers":'+e.toJSON()),r+=',"visible":true,',r+='"name":"'+this.getMapName(this.mapUrl)+'"',r+="}]",t.request({method:"PUT",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}},{key:"createTempLayerComplete",value:function(e){(e=j.transformResult(e)).succeed&&(this.lastparams.resourceID=e.newResourceID),this.processAsync(this.lastparams)}},{key:"getMapName",value:function(e){var t=e;"/"===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1));var r=t.lastIndexOf("/");return t.substring(r+1,t.length)}},{key:"serviceProcessCompleted",value:function(e){null!=(e=j.transformResult(e))&&null!=this.lastparams&&(e.newResourceID=this.lastparams.resourceID),this.events.triggerEvent("processCompleted",{result:e})}}])&&Vm(t.prototype,r),n&&Vm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Qm(e){"@babel/helpers - typeof";return(Qm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Km(e,t){return(Km=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=eg(e);if(t){var o=eg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Qm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function eg(e){return(eg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Km(e,t)}(i,af);var t,r,n,o=$m(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(r=[{key:"getLayersInfo",value:function(e){var t=this;new _m(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,eventListeners:{processCompleted:e,processFailed:e}}).processAsync()}},{key:"setLayerInfo",value:function(e,t){if(e){var r=this,n=e.resourceID,o=e.tempLayerName,i=e.layerInfo;if(n&&o){var a=j.urlPathAppend(r.url,"tempLayersSet/"+n+"/"+o);new Rm(a,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(i)}}}},{key:"setLayersInfo",value:function(e,t){if(e){var r=this,n=e.resourceID,o=!!e.isTempLayers&&e.isTempLayers,i=e.layersInfo;if((!o||n)&&i)new Bm(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t},resourceID:n,isTempLayers:o}).processAsync(i)}}},{key:"setLayerStatus",value:function(e,t){if(e){var r=this;new Xm(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(e)}}}])&&Zm(t.prototype,r),n&&Zm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function rg(e){"@babel/helpers - typeof";return(rg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ng(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function og(){return(og="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ig(e,t){return(ig=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ag(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=lg(e);if(t){var o=lg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===rg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sg(e)}(this,r)}}function sg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lg(e){return(lg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ug=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ig(e,t)}(i,ff);var t,r,n,o=ag(i);function i(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).projection=null,r.CLASS_NAME="SuperMap.MapService",t&&j.extend(sg(r),t);var n=sg(r);if(n.projection){var a=n.projection.split(":");a instanceof Array&&(2===a.length&&(n.url=j.urlAppend(n.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(a[1],'"}'))))),1===a.length&&(n.url=j.urlAppend(n.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(a[0],'"}'))))))}return r}return t=i,(r=[{key:"destroy",value:function(){og(lg(i.prototype),"destroy",this).call(this);var e=this;e.events&&(e.events.un(e.eventListeners),e.events.listeners=null,e.events.destroy(),e.events=null,e.eventListeners=null)}},{key:"processAsync",value:function(){this.request({method:"GET",scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){var t=(e=j.transformResult(e)).code>=200&&e.code<300||0==e.code||304===e.code,r=e.code&&t;!e.code||r?this.events&&this.events.triggerEvent("processCompleted",{result:e}):this.events.triggerEvent("processFailed",{error:e})}}])&&ng(t.prototype,r),n&&ng(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function cg(e){"@babel/helpers - typeof";return(cg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pg(){return(pg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function hg(e,t){return(hg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function yg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=dg(e);if(t){var o=dg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===cg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function dg(e){return(dg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hg(e,t)}(i,ff);var t,r,n,o=yg(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.TilesetsService",r}return t=i,(r=[{key:"destroy",value:function(){pg(dg(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(){if(this.url){var e=this;e.url=j.urlPathAppend(e.url,"tilesets"),e.request({method:"GET",scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}}])&&fg(t.prototype,r),n&&fg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function vg(e){"@babel/helpers - typeof";return(vg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gg(e,t){return(gg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Og(e);if(t){var o=Og(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===vg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Og(e){return(Og=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gg(e,t)}(i,af);var t,r,n,o=wg(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(r=[{key:"getMapInfo",value:function(e){var t=this;new ug(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,eventListeners:{scope:t,processCompleted:e,processFailed:e},projection:t.options.projection}).processAsync()}},{key:"getTilesets",value:function(e){var t=this;new bg(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).processAsync()}}])&&mg(t.prototype,r),n&&mg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Pg=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.geometry=t,this.unit=Tt.METER,this.prjCoordSys=null,this.distanceMode=null,r&&j.extend(this,r),this.CLASS_NAME="SuperMap.MeasureParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.geometry=null,this.unit=null,this.prjCoordSys=null}}])&&_g(t.prototype,r),n&&_g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function xg(e){"@babel/helpers - typeof";return(xg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kg(){return(kg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function jg(e,t){return(jg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Cg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Rg(e);if(t){var o=Rg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===xg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Tg(e)}(this,r)}}function Tg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rg(e){return(Rg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ag=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jg(e,t)}(i,ff);var t,r,n,o=Cg(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).measureMode=Ct.DISTANCE,t&&j.extend(Tg(r),t),r.CLASS_NAME="SuperMap.MeasureService",r}return t=i,(r=[{key:"destroy",value:function(){kg(Rg(i.prototype),"destroy",this).call(this);this.measureMode=null}},{key:"processAsync",value:function(e){if(e instanceof Pg){var t,r,n=this,o=e.geometry;if(o){n.url=j.urlPathAppend(n.url,n.measureMode===Ct.AREA?"area":"distance");var i,a,s,l=cr.fromGeometry(o);if(l)t=l.parts[0],r=l.points.splice(0,t),e.prjCoordSys?("object"===xg(e.prjCoordSys)?i='{"epsgCode"'+(a=e.prjCoordSys.projCode).substring(a.indexOf(":"),a.length)+"}":"string"==typeof e.prjCoordSys&&(i='{"epsgCode"'+e.prjCoordSys.substring(e.prjCoordSys.indexOf(":"),e.prjCoordSys.length)+"}"),s={point2Ds:j.toJSON(r),unit:e.unit,prjCoordSys:i,distanceMode:e.distanceMode||"Geodesic"}):s={point2Ds:j.toJSON(r),unit:e.unit,distanceMode:e.distanceMode||"Geodesic"},n.request({method:"GET",params:s,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}}])&&Eg(t.prototype,r),n&&Eg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Lg(e){"@babel/helpers - typeof";return(Lg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ig(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mg(e,t){return(Mg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ng(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Dg(e);if(t){var o=Dg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Lg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Dg(e){return(Dg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mg(e,t)}(i,af);var t,r,n,o=Ng(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(r=[{key:"measureDistance",value:function(e,t){this.measure(e,"DISTANCE",t)}},{key:"measureArea",value:function(e,t){this.measure(e,"AREA",t)}},{key:"measure",value:function(e,t,r){var n=this;new Ag(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,measureMode:t,eventListeners:{scope:n,processCompleted:r,processFailed:r}}).processAsync(n._processParam(e))}},{key:"_processParam",value:function(e){return!e||e.geometry instanceof b||(e.geometry=wr.toSuperMapGeometry(e.geometry)),e}}])&&Ig(t.prototype,r),n&&Ig(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Bg(e){"@babel/helpers - typeof";return(Bg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ug(){return(Ug="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Jg(e,t){return(Jg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Vg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Hg(e);if(t){var o=Hg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Bg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Hg(e){return(Hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jg(e,t)}(i,ff);var t,r,n,o=Vg(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).format=Pt.GEOJSON,r.CLASS_NAME="SuperMap.NetworkAnalystServiceBase",r}return t=i,(r=[{key:"destroy",value:function(){Ug(Hg(i.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(e){var t;(e=j.transformResult(e))&&this.format===Pt.GEOJSON&&"function"==typeof this.toGeoJSONResult&&(t=this.toGeoJSONResult(e)),t||(t=e),this.events.triggerEvent("processCompleted",{result:t})}},{key:"toGeoJSONResult",value:function(e){return null}}])&&Gg(t.prototype,r),n&&Gg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Wg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var qg=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.BurstPipelineAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=null}}])&&Wg(t.prototype,r),n&&Wg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Yg(e){"@babel/helpers - typeof";return(Yg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qg(){return(Qg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$g(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Zg(e,t){return(Zg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Kg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=$g(e);if(t){var o=$g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Yg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function $g(e){return($g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ew=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zg(e,t)}(i,zg);var t,r,n,o=Kg(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.BurstPipelineAnalystService",r}return t=i,(r=[{key:"destroy",value:function(){Qg($g(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(!(e instanceof qg))return null;var t,r=this;if(r.url=j.urlPathAppend(r.url,"burstAnalyse"),t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");if(null===e.edgeID&&null===e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}])&&Xg(t.prototype,r),n&&Xg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function tw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var rw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.returnEdgeFeatures=!1,this.returnEdgeGeometry=!1,this.returnEdgeIDs=!1,this.returnNodeFeatures=!1,this.returnNodeGeometry=!1,this.returnNodeIDs=!1,this.returnPathGuides=!1,this.returnRoutes=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystResultSetting")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.returnEdgeFeatures=null,e.returnEdgeGeometry=null,e.returnEdgeIDs=null,e.returnNodeFeatures=null,e.returnNodeGeometry=null,e.returnNodeIDs=null,e.returnPathGuides=null,e.returnRoutes=null}}])&&tw(t.prototype,r),n&&tw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function nw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ow=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.barrierEdgeIDs=null,this.barrierNodeIDs=null,this.barrierPoints=null,this.weightFieldName=null,this.turnWeightField=null,this.resultSetting=new rw,j.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystParameter")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.barrierEdgeIDs=null,e.barrierNodeIDs=null,e.weightFieldName=null,e.turnWeightField=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.barrierPoints&&e.barrierPoints.length)for(var t in e.barrierPoints)e.barrierPoints[t].destroy();e.barrierPoints=null}}])&&nw(t.prototype,r),n&&nw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function iw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var aw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.nodes=null,this.parameter=new ow,j.extend(this,t),this.CLASS_NAME="SuperMap.ComputeWeightMatrixParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&iw(t.prototype,r),n&&iw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function sw(e){"@babel/helpers - typeof";return(sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uw(){return(uw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function cw(e,t){return(cw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=pw(e);if(t){var o=pw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===sw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function pw(e){return(pw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var hw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cw(e,t)}(i,zg);var t,r,n,o=fw(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.ComputeWeightMatrixService",r}return t=i,(r=[{key:"destroy",value:function(){uw(pw(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof aw){var t,r=this;r.url=j.urlPathAppend(r.url,"weightmatrix"),t={parameter:j.toJSON(e.parameter),nodes:r.getJson(e.isAnalyzeById,e.nodes)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}}])&&lw(t.prototype,r),n&&lw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function yw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var dw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,this.queryType=null,j.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalystStreamParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.edgeID=null,e.nodeID=null,e.weightName=null,e.isUncertainDirectionValid=null,e.type=null}}])&&yw(t.prototype,r),n&&yw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function bw(e){"@babel/helpers - typeof";return(bw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mw(){return(mw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ow(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function gw(e,t){return(gw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ww(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ow(e);if(t){var o=Ow(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===bw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ow(e){return(Ow=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gw(e,t)}(i,zg);var t,r,n,o=ww(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystStreamService",r}return t=i,(r=[{key:"destroy",value:function(){mw(Ow(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof dw){var t,r=this;if(0===e.queryType)r.url=j.urlPathAppend(r.url,"upstreamcirticalfaclilities");else{if(1!==e.queryType)return;r.url=j.urlPathAppend(r.url,"downstreamcirticalfaclilities")}t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID||null===e.edgeID&&null===e.nodeID||(null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed}))}}}])&&vw(t.prototype,r),n&&vw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Pw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.event=null,this.expectFacilityCount=1,this.facilities=null,this.fromEvent=!1,this.isAnalyzeById=!1,this.maxWeight=0,this.parameter=new ow,j.extend(this,t),this.CLASS_NAME="SuperMap.FindClosestFacilitiesParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.event=null,e.expectFacilityCount=null,e.facilities=null,e.fromEvent=null,e.isAnalyzeById=null,e.maxWeight=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&_w(t.prototype,r),n&&_w(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function xw(e){"@babel/helpers - typeof";return(xw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ew(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kw(){return(kw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Tw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function jw(e,t){return(jw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Cw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Tw(e);if(t){var o=Tw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===xw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Tw(e){return(Tw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Rw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jw(e,t)}(i,zg);var t,r,n,o=Cw(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FindClosestFacilitiesService",r}return t=i,(r=[{key:"destroy",value:function(){kw(Tw(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Pw){var t,r=this;r.url=j.urlPathAppend(r.url,"closestfacility"),t={expectFacilityCount:e.expectFacilityCount,fromEvent:e.fromEvent,maxWeight:e.maxWeight,parameter:j.toJSON(e.parameter),event:j.toJSON(e.event),facilities:r.getJson(e.isAnalyzeById,e.facilities)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.facilityPathList)return e;var t=new vr;return e.facilityPathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e}),e}}])&&Ew(t.prototype,r),n&&Ew(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Aw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Lw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expectedSupplyCenterCount=null,this.isFromCenter=!1,this.supplyCenters=null,this.turnWeightField=null,this.weightName=null,j.extend(this,t),this.CLASS_NAME="SuperMap.FindLocationParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.expectedSupplyCenterCount=null,e.isFromCenter=null,e.turnWeightField=null,e.weightName=null,e.supplyCenters){for(var t=0,r=e.supplyCenters,n=r.length;t<n;t++)r[t].destroy();e.supplyCenters=null}}}])&&Aw(t.prototype,r),n&&Aw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Iw(e){"@babel/helpers - typeof";return(Iw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nw(){return(Nw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Dw(e,t){return(Dw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Bw(e);if(t){var o=Bw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Iw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Bw(e){return(Bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Gw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dw(e,t)}(i,zg);var t,r,n,o=Fw(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FindLocationService",r}return t=i,(r=[{key:"destroy",value:function(){Nw(Bw(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Lw){var t,r=this;r.url=j.urlPathAppend(r.url,"location"),t={isFromCenter:e.isFromCenter,expectedSupplyCenterCount:e.expectedSupplyCenterCount,weightName:e.weightName,turnWeightField:e.turnWeightField,returnEdgeFeature:!0,returnEdgeGeometry:!0,returnNodeFeature:!0,mapParameter:j.toJSON(e.mapParameter),supplyCenters:r.getCentersJson(e.supplyCenters)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getCentersJson",value:function(e){for(var t="[",r=e?e.length:0,n=0;n<r;n++)n>0&&(t+=","),t+=j.toJSON(e[n]);return t+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;var t=new vr;return e.demandResults&&(e.demandResults=t.toGeoJSON(e.demandResults)),e.supplyResults&&(e.supplyResults=t.toGeoJSON(e.supplyResults)),e}}])&&Mw(t.prototype,r),n&&Mw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Uw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Jw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.centers=null,this.hasLeastTotalCost=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new ow,j.extend(this,t),this.CLASS_NAME="SuperMap.FindMTSPPathsParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.centers=null,e.hasLeastTotalCost=null,e.isAnalyzeById=null,e.nodes=null,e.maxWeight=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&Uw(t.prototype,r),n&&Uw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Vw(e){"@babel/helpers - typeof";return(Vw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zw(){return(zw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Ww(e,t){return(Ww=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Yw(e);if(t){var o=Yw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Vw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Yw(e){return(Yw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ww(e,t)}(i,zg);var t,r,n,o=qw(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FindMTSPPathsService",r}return t=i,(r=[{key:"destroy",value:function(){zw(Yw(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Jw){var t,r=this,n=r.getJson(e.isAnalyzeById,e.centers),o=r.getJson(e.isAnalyzeById,e.nodes);r.url=j.urlPathAppend(r.url,"mtsppath"),t={centers:n,nodes:o,parameter:j.toJSON(e.parameter),hasLeastTotalCost:e.hasLeastTotalCost},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.pathList)return null;var t=new vr;return e.pathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e}),e}}])&&Hw(t.prototype,r),n&&Hw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Qw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Zw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter=new ow,j.extend(this,t),this.CLASS_NAME="SuperMap.FindPathParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.hasLeastEdgeCount=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&Qw(t.prototype,r),n&&Qw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Kw(e){"@babel/helpers - typeof";return(Kw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function eO(){return(eO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nO(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function tO(e,t){return(tO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=nO(e);if(t){var o=nO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Kw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function nO(e){return(nO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tO(e,t)}(i,zg);var t,r,n,o=rO(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FindPathService",r}return t=i,(r=[{key:"destroy",value:function(){eO(nO(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Zw){var t,r=this;r.url=j.urlPathAppend(r.url,"path"),t={hasLeastEdgeCount:e.hasLeastEdgeCount,parameter:j.toJSON(e.parameter),nodes:r.getJson(e.isAnalyzeById,e.nodes)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.pathList||e.pathList.length<1)return null;var t=new vr;return e.pathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures))}),e}}])&&$w(t.prototype,r),n&&$w(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function iO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var aO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.isCenterMutuallyExclusive=!1,this.centers=null,this.isFromCenter=!1,this.weights=null,this.parameter=new ow,j.extend(this,t),this.CLASS_NAME="SuperMap.FindServiceAreasParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.isCenterMutuallyExclusive=null,e.centers=null,e.isFromCenter=null,e.weights=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&iO(t.prototype,r),n&&iO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function sO(e){"@babel/helpers - typeof";return(sO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uO(){return(uO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pO(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function cO(e,t){return(cO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=pO(e);if(t){var o=pO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===sO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function pO(e){return(pO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var hO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cO(e,t)}(i,zg);var t,r,n,o=fO(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FindServiceAreasService",r}return t=i,(r=[{key:"destroy",value:function(){uO(pO(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof aO){var t,r=this;r.url=j.urlPathAppend(r.url,"servicearea"),t={isFromCenter:e.isFromCenter,isCenterMutuallyExclusive:e.isCenterMutuallyExclusive,parameter:j.toJSON(e.parameter),centers:r.getJson(e.isAnalyzeById,e.centers),weights:r.getJson(!0,e.weights)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.serviceAreaList)return e;var t=new vr;return e.serviceAreaList.map(function(e){return e.serviceRegion&&(e.serviceRegion=t.toGeoJSON(e.serviceRegion)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e.routes&&(e.routes=t.toGeoJSON(e.routes)),e}),e}}])&&lO(t.prototype,r),n&&lO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function yO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var dO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endNodeAssigned=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new ow,j.extend(this,t),this.CLASS_NAME="SuperMap.FindTSPPathsParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.endNodeAssigned=null,e.isAnalyzeById=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&yO(t.prototype,r),n&&yO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function bO(e){"@babel/helpers - typeof";return(bO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mO(){return(mO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=OO(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function gO(e,t){return(gO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=OO(e);if(t){var o=OO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===bO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function OO(e){return(OO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var SO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gO(e,t)}(i,zg);var t,r,n,o=wO(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FindTSPPathsService",r}return t=i,(r=[{key:"destroy",value:function(){mO(OO(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof dO){var t,r=this;r.url=j.urlPathAppend(r.url,"tsppath"),t={parameter:j.toJSON(e.parameter),endNodeAssigned:e.endNodeAssigned,nodes:r.getNodesJson(e)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getNodesJson",value:function(e){var t,r,n,o,i="";if(!1===e.isAnalyzeById){for(t="[",r=0,n=(o=e.nodes).length;r<n;r++)r>0&&(t+=","),t+='{"x":'+o[r].x+',"y":'+o[r].y+"}";i+=t+="]"}else if(!0===e.isAnalyzeById){for(var a="[",s=e.nodes,l=s.length,u=0;u<l;u++)u>0&&(a+=","),a+=s[u];i+=a+="]"}return i}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.tspPathList)return null;var t=new vr;return e.tspPathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures))}),e}}])&&vO(t.prototype,r),n&&vO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var PO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.edgeId="",this.fromNodeId="",this.toNodeId="",this.weightField="",this.edgeWeight="",j.extend(this,t),this.CLASS_NAME="SuperMap.UpdateEdgeWeightParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.edgeId=null,this.fromNodeId=null,this.toNodeId=null,this.weightField=null,this.edgeWeight=null}}])&&_O(t.prototype,r),n&&_O(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function xO(e){"@babel/helpers - typeof";return(xO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kO(){return(kO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TO(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function jO(e,t){return(jO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function CO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=TO(e);if(t){var o=TO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===xO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function TO(e){return(TO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var RO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jO(e,t)}(i,zg);var t,r,n,o=CO(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.UpdateEdgeWeightService",r}return t=i,(r=[{key:"destroy",value:function(){kO(TO(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof PO){var t=this,r=t.parse(e);t.url=j.urlPathAppend(t.url,r);var n=e.edgeWeight?e.edgeWeight:null;t.request({method:"PUT",scope:t,data:n,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"parse",value:function(e){if(e){var t="";for(var r in e)if(""!==e[r]&&"edgeWeight"!==e[r])switch(r){case"edgeId":t+="/edgeweight/"+e[r];break;case"fromNodeId":t+="/fromnode/"+e[r];break;case"toNodeId":t+="/tonode/"+e[r];break;case"weightField":t+="/weightfield/"+e[r]}return t}}}])&&EO(t.prototype,r),n&&EO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function AO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var LO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.nodeId="",this.fromEdgeId="",this.toEdgeId="",this.weightField="",this.turnNodeWeight="",j.extend(this,t),this.CLASS_NAME="SuperMap.UpdateTurnNodeWeightParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.nodeId=null,this.fromEdgeId=null,this.toEdgeId=null,this.weightField=null,this.turnNodeWeight=null}}])&&AO(t.prototype,r),n&&AO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function IO(e){"@babel/helpers - typeof";return(IO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function NO(){return(NO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=BO(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function DO(e,t){return(DO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function FO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=BO(e);if(t){var o=BO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===IO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function BO(e){return(BO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var GO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DO(e,t)}(i,zg);var t,r,n,o=FO(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.UpdateTurnNodeWeightService",r}return t=i,(r=[{key:"destroy",value:function(){NO(BO(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof LO){var t=this,r=t.parse(e);t.url=j.urlPathAppend(t.url,r);var n=e.turnNodeWeight?e.turnNodeWeight:null;t.request({method:"PUT",scope:t,data:n,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"parse",value:function(e){if(e){var t="";for(var r in e)if(""!==e[r]&&"turnNodeWeight"!==e[r])switch(r){case"nodeId":t+="/turnnodeweight/"+e[r];break;case"fromEdgeId":t+="/fromedge/"+e[r];break;case"toEdgeId":t+="/toedge/"+e[r];break;case"weightField":t+="/weightfield/"+e[r]}return t}}}])&&MO(t.prototype,r),n&&MO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function UO(e){"@babel/helpers - typeof";return(UO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function VO(e,t){return(VO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function HO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=zO(e);if(t){var o=zO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===UO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function zO(e){return(zO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var WO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VO(e,t)}(a,af);var r,n,o,i=HO(a);function a(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e,t)}return r=a,(n=[{key:"burstPipelineAnalyst",value:function(e,t){var r=this;new ew(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(r._processParams(e))}},{key:"computeWeightMatrix",value:function(e,t){var r=this;new hw(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(r._processParams(e))}},{key:"findClosestFacilities",value:function(e,t,r){var n=this;new Rw(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"streamFacilityAnalyst",value:function(e,t,r){var n=this;new Sw(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"findLocation",value:function(e,t,r){var n=this;new Gw(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"findPath",value:function(e,t,r){var n=this;new oO(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"findTSPPaths",value:function(e,t,r){var n=this;new SO(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"findMTSPPaths",value:function(e,t,r){var n=this;new Xw(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"findServiceAreas",value:function(e,t,r){var n=this;new hO(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"updateEdgeWeight",value:function(e,t){var r=this;new RO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"updateTurnNodeWeight",value:function(e,t){var r=this;new GO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"_processParams",value:function(e){if(!e)return{};var r=this;if(e.centers&&wr.isArray(e.centers)&&e.centers.map(function(t,n){return e.centers[n]=r._toPointObject(t),e.centers[n]}),e.nodes&&wr.isArray(e.nodes)&&e.nodes.map(function(t,n){return e.nodes[n]=r._toPointObject(t),e.nodes[n]}),e.event&&(e.event=r._toPointObject(e.event)),e.facilities&&wr.isArray(e.facilities)&&e.facilities.map(function(t,n){return e.facilities[n]=r._toPointObject(t),e.facilities[n]}),e.parameter&&e.parameter.barrierPoints){var n=e.parameter.barrierPoints;wr.isArray(n)?n.map(function(t,n){return e.parameter[n]=r._toPointObject(t),e.parameter.barrierPoints[n]}):e.parameter.barrierPoints=[n instanceof t().LngLat?{x:n.lng,y:n.lat}:n]}return e}},{key:"_toPointObject",value:function(e){return wr.isArray(e)?{x:e[0],y:e[1]}:e instanceof t().LngLat?{x:e.lng,y:e.lat}:e instanceof t().Point?{x:e.x,y:e.y}:e}},{key:"_processFormat",value:function(e){return e||Pt.GEOJSON}}])&&JO(r.prototype,n),o&&JO(r,o),Object.defineProperty(r,"prototype",{writable:!1}),a}();function qO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var YO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalyst3DParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null}}])&&qO(t.prototype,r),n&&qO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function XO(e){"@babel/helpers - typeof";return(XO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ZO(){return(ZO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=eS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function KO(e,t){return(KO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=eS(e);if(t){var o=eS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===XO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function eS(e){return(eS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KO(e,t)}(i,YO);var t,r,n,o=$O(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).CLASS_NAME="SuperMap.FacilityAnalystSinks3DParameters",t}return t=i,(r=[{key:"destroy",value:function(){ZO(eS(i.prototype),"destroy",this).call(this)}}])&&QO(t.prototype,r),n&&QO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function rS(e){"@babel/helpers - typeof";return(rS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oS(e,t){return(oS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=aS(e);if(t){var o=aS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===rS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function aS(e){return(aS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oS(e,t)}(i,ff);var t,r,n,o=iS(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystSinks3DService",r}return t=i,(r=[{key:"destroy",value:function(){ff.prototype.destroy.apply(this,arguments)}},{key:"processAsync",value:function(e){if(e instanceof tS){var t,r=this;r.url=j.urlPathAppend(r.url,"sinks"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&nS(t.prototype,r),n&&nS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function lS(e){"@babel/helpers - typeof";return(lS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cS(){return(cS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function fS(e,t){return(fS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=hS(e);if(t){var o=hS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===lS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function hS(e){return(hS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fS(e,t)}(i,YO);var t,r,n,o=pS(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).CLASS_NAME="SuperMap.FacilityAnalystSources3DParameters",t}return t=i,(r=[{key:"destroy",value:function(){cS(hS(i.prototype),"destroy",this).call(this)}}])&&uS(t.prototype,r),n&&uS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function dS(e){"@babel/helpers - typeof";return(dS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vS(){return(vS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function mS(e,t){return(mS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=wS(e);if(t){var o=wS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===dS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function wS(e){return(wS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var OS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mS(e,t)}(i,ff);var t,r,n,o=gS(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystSources3DService",r}return t=i,(r=[{key:"destroy",value:function(){vS(wS(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof yS){var t,r=this;r.url=j.urlPathAppend(r.url,"sources"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&bS(t.prototype,r),n&&bS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function SS(e){"@babel/helpers - typeof";return(SS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function PS(){return(PS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function xS(e,t){return(xS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ES(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=kS(e);if(t){var o=kS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===SS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function kS(e){return(kS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xS(e,t)}(i,YO);var t,r,n,o=ES(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DParameters",t}return t=i,(r=[{key:"destroy",value:function(){PS(kS(i.prototype),"destroy",this).call(this)}}])&&_S(t.prototype,r),n&&_S(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function CS(e){"@babel/helpers - typeof";return(CS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function RS(){return(RS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=IS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function AS(e,t){return(AS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function LS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=IS(e);if(t){var o=IS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===CS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function IS(e){return(IS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var MS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AS(e,t)}(i,ff);var t,r,n,o=LS(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DService",r}return t=i,(r=[{key:"destroy",value:function(){RS(IS(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof jS){var t,r=this;r.url=j.urlPathAppend(r.url,"traceupresult"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&TS(t.prototype,r),n&&TS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function NS(e){"@babel/helpers - typeof";return(NS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FS(){return(FS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=US(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function BS(e,t){return(BS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function GS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=US(e);if(t){var o=US(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===NS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function US(e){return(US=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var JS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BS(e,t)}(i,YO);var t,r,n,o=GS(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DParameters",t}return t=i,(r=[{key:"destroy",value:function(){FS(US(i.prototype),"destroy",this).call(this)}}])&&DS(t.prototype,r),n&&DS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function VS(e){"@babel/helpers - typeof";return(VS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zS(){return(zS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=YS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function WS(e,t){return(WS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=YS(e);if(t){var o=YS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===VS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function YS(e){return(YS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var XS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WS(e,t)}(i,ff);var t,r,n,o=qS(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DService",r}return t=i,(r=[{key:"destroy",value:function(){zS(YS(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof JS){var t,r=this;r.url=j.urlPathAppend(r.url,"tracedownresult"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&HS(t.prototype,r),n&&HS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function QS(e){"@babel/helpers - typeof";return(QS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function KS(){return(KS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function $S(e,t){return($S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function e_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=r_(e);if(t){var o=r_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===QS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return t_(e)}(this,r)}}function t_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r_(e){return(r_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var n_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$S(e,t)}(i,YO);var t,r,n,o=e_(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),e=e||{},t.sourceNodeIDs=null,j.extend(t_(t),e),t.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DParameters",t}return t=i,(r=[{key:"destroy",value:function(){KS(r_(i.prototype),"destroy",this).call(this),this.sourceNodeIDs=null}}])&&ZS(t.prototype,r),n&&ZS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function o_(e){"@babel/helpers - typeof";return(o_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a_(){return(a_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function s_(e,t){return(s_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=u_(e);if(t){var o=u_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u_(e){return(u_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s_(e,t)}(i,ff);var t,r,n,o=l_(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystUpstream3DService",r}return t=i,(r=[{key:"destroy",value:function(){a_(u_(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof n_){var t,r=this;r.url=j.urlPathAppend(r.url,"upstreamcirticalfaclilities"),t={sourceNodeIDs:e.sourceNodeIDs,edgeID:e.edgeID,nodeID:e.nodeID,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&i_(t.prototype,r),n&&i_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function f_(e){"@babel/helpers - typeof";return(f_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h_(e,t){return(h_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=d_(e);if(t){var o=d_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===f_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function d_(e){return(d_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h_(e,t)}(i,af);var t,r,n,o=y_(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(r=[{key:"sinksFacilityAnalyst",value:function(e,t){var r=this;new sS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"sourcesFacilityAnalyst",value:function(e,t){var r=this;new OS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"traceUpFacilityAnalyst",value:function(e,t){var r=this;new MS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"traceDownFacilityAnalyst",value:function(e,t){var r=this;new XS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"upstreamFacilityAnalyst",value:function(e,t){var r=this;new c_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}}])&&p_(t.prototype,r),n&&p_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function v_(e){"@babel/helpers - typeof";return(v_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g_(){return(g_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function w_(e,t){return(w_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=S_(e);if(t){var o=S_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===v_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function S_(e){return(S_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var __=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w_(e,t)}(i,ff);var t,r,n,o=O_(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=t||{}).EVENT_TYPES=["processCompleted","processFailed","processRunning"],(r=o.call(this,e,t)).CLASS_NAME="SuperMap.ProcessingServiceBase",r}return t=i,(r=[{key:"destroy",value:function(){g_(S_(i.prototype),"destroy",this).call(this)}},{key:"getJobs",value:function(e){var t=this;fu.get(lf.appendCredential(e),null,{proxy:t.proxy}).then(function(e){return e.json()}).then(function(e){t.events.triggerEvent("processCompleted",{result:e})}).catch(function(e){t.eventListeners.processFailed({error:e})})}},{key:"addJob",value:function(e,t,r,n){var o=this,i=null;t&&t instanceof r&&(i=new Object,r.toObject(t,i));var a=Object.assign({"Content-Type":"application/x-www-form-urlencoded"},o.headers||{}),s={proxy:o.proxy,headers:a,withCredentials:o.withCredentials,crossOrigin:o.crossOrigin,isInTheSameDomain:o.isInTheSameDomain};fu.post(lf.appendCredential(e),JSON.stringify(i),s).then(function(e){return e.json()}).then(function(e){e.succeed?o.serviceProcessCompleted(e,n):o.serviceProcessFailed(e)}).catch(function(e){o.serviceProcessFailed({error:e})})}},{key:"serviceProcessCompleted",value:function(e,t){e=j.transformResult(e),t=t||1e3;var r=this;if(e)var n=setInterval(function(){fu.get(lf.appendCredential(e.newResourceLocation),{_t:(new Date).getTime()}).then(function(e){return e.json()}).then(function(e){r.events.triggerEvent("processRunning",{id:e.id,state:e.state}),"LOST"!==e.state.runState&&"KILLED"!==e.state.runState&&"FAILED"!==e.state.runState||(clearInterval(n),r.events.triggerEvent("processFailed",{error:e.state.errorMsg,state:e.state.runState})),"FINISHED"===e.state.runState&&e.setting.serviceInfo&&(clearInterval(n),r.events.triggerEvent("processCompleted",{result:e}))}).catch(function(e){clearInterval(n),r.events.triggerEvent("processFailed",{error:e})})},t)}},{key:"serviceProcessFailed",value:function(e){g_(S_(i.prototype),"serviceProcessFailed",this).call(this,e)}}])&&m_(t.prototype,r),n&&m_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function P_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var x_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.alias=null,this.connect=null,this.dataBase=null,this.driver=null,this.engineType=null,this.exclusive=null,this.OpenLinkTable=null,this.password=null,this.readOnly=null,this.server=null,this.user=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.DatasourceConnectionInfo"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.alias=null,e.connect=null,e.dataBase=null,e.driver=null,e.engineType=null,e.exclusive=null,e.OpenLinkTable=null,e.password=null,e.readOnly=null,e.server=null,e.user=null}}])&&P_(t.prototype,r),n&&P_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function E_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var k_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=Ht.UDB,this.datasetName="analystResult",this.datasourceInfo=null,this.outputPath="",j.extend(this,t),this.CLASS_NAME="SuperMap.OutputSetting"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.type=null,e.datasetName=null,e.outputPath=null,e.datasourceInfo instanceof x_&&(e.datasourceInfo.destroy(),e.datasourceInfo=null)}}])&&E_(t.prototype,r),n&&E_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function j_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var C_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=null,this.numericPrecision=1,this.rangeMode=Nt.EQUALINTERVAL,this.rangeCount="",this.colorGradientType=Dt.YELLOW_RED,j.extend(this,t),this.CLASS_NAME="SuperMap.MappingParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.numericPrecision=null,e.rangeMode=null,e.rangeCount=null,e.colorGradientType=null}}])&&j_(t.prototype,r),n&&j_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var R_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=rr.METER,this.radiusUnit=rr.METER,this.areaUnit=tr.SQUAREMILE,this.output=null,this.mappingParameters=null,j.extend(this,t),this.CLASS_NAME="SuperMap.KernelDensityJobParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},"query"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null,this.output instanceof k_&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof C_&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&T_(t.prototype,r),n&&T_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function A_(e){"@babel/helpers - typeof";return(A_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function I_(){return(I_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function M_(e,t){return(M_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function N_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=D_(e);if(t){var o=D_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===A_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function D_(e){return(D_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M_(e,t)}(i,__);var t,r,n,o=N_(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).url=j.urlPathAppend(r.url,"spatialanalyst/density"),r.CLASS_NAME="SuperMap.KernelDensityJobsService",r}return t=i,(r=[{key:"destroy",value:function(){I_(D_(i.prototype),"destroy",this).call(this)}},{key:"getKernelDensityJobs",value:function(){I_(D_(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getKernelDensityJob",value:function(e){I_(D_(i.prototype),"getJobs",this).call(this,j.urlPathAppend(this.url,e))}},{key:"addKernelDensityJob",value:function(e,t){I_(D_(i.prototype),"addJob",this).call(this,this.url,e,R_,t)}}])&&L_(t.prototype,r),n&&L_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function B_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var G_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=jt.CONTAIN,this.output=null,this.mappingParameters=null,j.extend(this,t),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null,this.output instanceof k_&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof C_&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&B_(t.prototype,r),n&&B_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function U_(e){"@babel/helpers - typeof";return(U_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function V_(){return(V_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function H_(e,t){return(H_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function z_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=W_(e);if(t){var o=W_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===U_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function W_(e){return(W_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H_(e,t)}(i,__);var t,r,n,o=z_(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).url=j.urlPathAppend(r.url,"spatialanalyst/query"),r.CLASS_NAME="SuperMap.SingleObjectQueryJobsService",r}return t=i,(r=[{key:"destroy",value:function(){V_(W_(i.prototype),"destroy",this).call(this)}},{key:"getQueryJobs",value:function(){V_(W_(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getQueryJob",value:function(e){V_(W_(i.prototype),"getJobs",this).call(this,j.urlPathAppend(this.url,e))}},{key:"addQueryJob",value:function(e,t){V_(W_(i.prototype),"addJob",this).call(this,this.url,e,G_,t)}}])&&J_(t.prototype,r),n&&J_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Y_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var X_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=nr.AVERAGE,this.fields="",this.type=or.SUMMARYMESH,this.output=null,this.mappingParameters=null,j.extend(this,t),this.CLASS_NAME="SuperMap.SummaryMeshJobParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"type"!==r?"output"!==r?("SUMMARYMESH"===e.type&&"regionDataset"!==r||"SUMMARYREGION"===e.type&&!n(["meshType","resolution","query"],r))&&(t.analyst=t.analyst||{},"query"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):t.type=e[r]:(t.input=t.input||{},t.input[r]=e[r]);function n(e,t){for(var r=e.length;r--;)if(e[r]===t)return!0;return!1}}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null,this.output instanceof k_&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof C_&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Y_(t.prototype,r),n&&Y_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Q_(e){"@babel/helpers - typeof";return(Q_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function K_(){return(K_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function $_(e,t){return($_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=tP(e);if(t){var o=tP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Q_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function tP(e){return(tP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$_(e,t)}(i,__);var t,r,n,o=eP(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).url=j.urlPathAppend(r.url,"spatialanalyst/aggregatepoints"),r.CLASS_NAME="SuperMap.SummaryMeshJobsService",r}return t=i,(r=[{key:"destroy",value:function(){K_(tP(i.prototype),"destroy",this).call(this)}},{key:"getSummaryMeshJobs",value:function(){K_(tP(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryMeshJob",value:function(e){K_(tP(i.prototype),"getJobs",this).call(this,j.urlPathAppend(this.url,e))}},{key:"addSummaryMeshJob",value:function(e,t){K_(tP(i.prototype),"addJob",this).call(this,this.url,e,X_,t)}}])&&Z_(t.prototype,r),n&&Z_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function nP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var oP=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=er.CLIP,this.output=null,this.mappingParameters=null,j.extend(this,t),this.CLASS_NAME="SuperMap.VectorClipJobsParameter"}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null,this.output instanceof k_&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof C_&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&nP(t.prototype,r),n&&nP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function iP(e){"@babel/helpers - typeof";return(iP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sP(){return(sP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function lP(e,t){return(lP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=cP(e);if(t){var o=cP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===iP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function cP(e){return(cP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lP(e,t)}(i,__);var t,r,n,o=uP(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).url=j.urlPathAppend(r.url,"spatialanalyst/vectorclip"),r.CLASS_NAME="SuperMap.VectorClipJobsService",r}return t=i,(r=[{key:"destroy",value:function(){sP(cP(i.prototype),"destroy",this).call(this)}},{key:"getVectorClipJobs",value:function(){sP(cP(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getVectorClipJob",value:function(e){sP(cP(i.prototype),"getJobs",this).call(this,j.urlPathAppend(this.url,e))}},{key:"addVectorClipJob",value:function(e,t){sP(cP(i.prototype),"addJob",this).call(this,this.url,e,oP,t)}}])&&aP(t.prototype,r),n&&aP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function pP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var hP=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",this.output=null,this.mappingParameters=null,j.extend(this,t),this.CLASS_NAME="SuperMap.OverlayGeoJobParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!=r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null,this.output instanceof k_&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof C_&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&pP(t.prototype,r),n&&pP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function yP(e){"@babel/helpers - typeof";return(yP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bP(){return(bP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function vP(e,t){return(vP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=gP(e);if(t){var o=gP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===yP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function gP(e){return(gP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vP(e,t)}(i,__);var t,r,n,o=mP(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).url=j.urlPathAppend(r.url,"spatialanalyst/overlay"),r.CLASS_NAME="SuperMap.OverlayGeoJobsService",r}return t=i,(r=[{key:"destroy",value:function(){bP(gP(i.prototype),"destroy",this).call(this)}},{key:"getOverlayGeoJobs",value:function(){bP(gP(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getOverlayGeoJob",value:function(e){bP(gP(i.prototype),"getJobs",this).call(this,j.urlPathAppend(this.url,e))}},{key:"addOverlayGeoJob",value:function(e,t){bP(gP(i.prototype),"addJob",this).call(this,this.url,e,hP,t)}}])&&dP(t.prototype,r),n&&dP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function OP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var SP=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=rr.METER,this.type=or.SUMMARYMESH,this.output=null,this.mappingParameters=null,j.extend(this,t),this.CLASS_NAME="SuperMap.SummaryRegionJobParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"type"!==r&&"type"!==r?"output"!==r?("SUMMARYREGION"===e.type||"SUMMARYMESH"===e.type&&"regionDataset"!==r)&&(t.analyst=t.analyst||{},"query"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):t.type=e[r]:(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.sumShape=null,this.regionDataset=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null,this.output instanceof k_&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof C_&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&OP(t.prototype,r),n&&OP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _P(e){"@babel/helpers - typeof";return(_P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xP(){return(xP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function EP(e,t){return(EP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=jP(e);if(t){var o=jP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function jP(e){return(jP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var CP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EP(e,t)}(i,__);var t,r,n,o=kP(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).url=j.urlPathAppend(r.url,"spatialanalyst/summaryregion"),r.CLASS_NAME="SuperMap.SummaryRegionJobsService",r}return t=i,(r=[{key:"destroy",value:function(){xP(jP(i.prototype),"destroy",this).call(this)}},{key:"getSummaryRegionJobs",value:function(){xP(jP(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryRegionJob",value:function(e){xP(jP(i.prototype),"getJobs",this).call(this,j.urlPathAppend(this.url,e))}},{key:"addSummaryRegionJob",value:function(e,t){xP(jP(i.prototype),"addJob",this).call(this,this.url,e,SP,t)}}])&&PP(t.prototype,r),n&&PP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function TP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var RP=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=rr.METER,this.dissolveField="",this.output=null,this.mappingParameters=null,!t)return this;j.extend(this,t),this.CLASS_NAME="SuperMap.BuffersAnalystJobsParameter"}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},"bounds"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null,this.output instanceof k_&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof C_&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&TP(t.prototype,r),n&&TP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function AP(e){"@babel/helpers - typeof";return(AP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function IP(){return(IP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=DP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function MP(e,t){return(MP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function NP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=DP(e);if(t){var o=DP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===AP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function DP(e){return(DP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var FP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MP(e,t)}(i,__);var t,r,n,o=NP(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).url=j.urlPathAppend(r.url,"spatialanalyst/buffers"),r.CLASS_NAME="SuperMap.BuffersAnalystJobsService",r}return t=i,(r=[{key:"destroy",value:function(){IP(DP(i.prototype),"destroy",this).call(this)}},{key:"getBuffersJobs",value:function(){IP(DP(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getBuffersJob",value:function(e){IP(DP(i.prototype),"getJobs",this).call(this,j.urlPathAppend(this.url,e))}},{key:"addBuffersJob",value:function(e,t){IP(DP(i.prototype),"addJob",this).call(this,this.url,e,RP,t)}}])&&LP(t.prototype,r),n&&LP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function BP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var GP=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=ir.REGIONNOOVERLAP,this.output=null,this.mappingParameters=null,j.extend(this,t),this.CLASS_NAME="SuperMap.TopologyValidatorJobsParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null,this.output instanceof k_&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof C_&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&BP(t.prototype,r),n&&BP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function UP(e){"@babel/helpers - typeof";return(UP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function VP(){return(VP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function HP(e,t){return(HP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=WP(e);if(t){var o=WP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===UP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function WP(e){return(WP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HP(e,t)}(i,__);var t,r,n,o=zP(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).url=j.urlPathAppend(r.url,"spatialanalyst/topologyvalidator"),r.CLASS_NAME="SuperMap.TopologyValidatorJobsService",r}return t=i,(r=[{key:"destroy",value:function(){VP(WP(i.prototype),"destroy",this).call(this)}},{key:"getTopologyValidatorJobs",value:function(){VP(WP(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getTopologyValidatorJob",value:function(e){VP(WP(i.prototype),"getJobs",this).call(this,j.urlPathAppend(this.url,e))}},{key:"addTopologyValidatorJob",value:function(e,t){VP(WP(i.prototype),"addJob",this).call(this,this.url,e,GP,t)}}])&&JP(t.prototype,r),n&&JP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function YP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var XP=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.groupField="",this.attributeField="",this.statisticModes="",this.output=null,this.mappingParameters=null,j.extend(this,t),this.CLASS_NAME="SuperMap.SummaryAttributesJobsParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.groupField=null,this.attributeField=null,this.statisticModes=null,this.output instanceof k_&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof C_&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&YP(t.prototype,r),n&&YP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function QP(e){"@babel/helpers - typeof";return(QP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function KP(){return(KP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tx(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function $P(e,t){return($P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ex(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=tx(e);if(t){var o=tx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===QP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function tx(e){return(tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$P(e,t)}(i,__);var t,r,n,o=ex(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).url=j.urlPathAppend(r.url,"spatialanalyst/summaryattributes"),r.CLASS_NAME="SuperMap.SummaryAttributesJobsService",r}return t=i,(r=[{key:"destroy",value:function(){KP(tx(i.prototype),"destroy",this).call(this)}},{key:"getSummaryAttributesJobs",value:function(){KP(tx(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryAttributesJob",value:function(e){KP(tx(i.prototype),"getJobs",this).call(this,j.urlPathAppend(this.url,e))}},{key:"addSummaryAttributesJob",value:function(e,t){KP(tx(i.prototype),"addJob",this).call(this,this.url,e,XP,t)}}])&&ZP(t.prototype,r),n&&ZP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function nx(e){"@babel/helpers - typeof";return(nx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ox(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ix(e,t){return(ix=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ax(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=sx(e);if(t){var o=sx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===nx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function sx(e){return(sx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ix(e,t)}(i,af);var t,r,n,o=ax(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).kernelDensityJobs={},r.summaryMeshJobs={},r.queryJobs={},r.summaryRegionJobs={},r.vectorClipJobs={},r.overlayGeoJobs={},r.buffersJobs={},r.topologyValidatorJobs={},r.summaryAttributesJobs={},r}return t=i,(r=[{key:"getKernelDensityJobs",value:function(e,t){var r=this,n=r._processFormat(t);new F_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getKernelDensityJobs()}},{key:"getKernelDensityJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new F_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getKernelDensityJob(e)}},{key:"addKernelDensityJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new F_(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.kernelDensityJobs[e.id]=e.state}},format:a}).addKernelDensityJob(i,r)}},{key:"getKernelDensityJobState",value:function(e){return this.kernelDensityJobs[e]}},{key:"getSummaryMeshJobs",value:function(e,t){var r=this,n=r._processFormat(t);new rP(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getSummaryMeshJobs()}},{key:"getSummaryMeshJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new rP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getSummaryMeshJob(e)}},{key:"addSummaryMeshJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new rP(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryMeshJobs[e.id]=e.state}},format:a}).addSummaryMeshJob(i,r)}},{key:"getSummaryMeshJobState",value:function(e){return this.summaryMeshJobs[e]}},{key:"getQueryJobs",value:function(e,t){var r=this,n=r._processFormat(t);new q_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getQueryJobs()}},{key:"getQueryJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new q_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getQueryJob(e)}},{key:"addQueryJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new q_(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.queryJobs[e.id]=e.state}},format:a}).addQueryJob(i,r)}},{key:"getQueryJobState",value:function(e){return this.queryJobs[e]}},{key:"getSummaryRegionJobs",value:function(e,t){var r=this,n=r._processFormat(t);new CP(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getSummaryRegionJobs()}},{key:"getSummaryRegionJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new CP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getSummaryRegionJob(e)}},{key:"addSummaryRegionJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new CP(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryRegionJobs[e.id]=e.state}},format:a}).addSummaryRegionJob(i,r)}},{key:"getSummaryRegionJobState",value:function(e){return this.summaryRegionJobs[e]}},{key:"getVectorClipJobs",value:function(e,t){var r=this,n=r._processFormat(t);new fP(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getVectorClipJobs()}},{key:"getVectorClipJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new fP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getVectorClipJob(e)}},{key:"addVectorClipJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new fP(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.vectorClipJobs[e.id]=e.state}},format:a}).addVectorClipJob(i,r)}},{key:"getVectorClipJobState",value:function(e){return this.vectorClipJobs[e]}},{key:"getOverlayGeoJobs",value:function(e,t){var r=this,n=r._processFormat(t);new wP(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getOverlayGeoJobs()}},{key:"getOverlayGeoJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new wP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getOverlayGeoJob(e)}},{key:"addOverlayGeoJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new wP(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.overlayGeoJobs[e.id]=e.state}},format:a}).addOverlayGeoJob(i,r)}},{key:"getoverlayGeoJobState",value:function(e){return this.overlayGeoJobs[e]}},{key:"getBuffersJobs",value:function(e,t){var r=this,n=r._processFormat(t);new FP(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getBuffersJobs()}},{key:"getBuffersJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new FP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getBuffersJob(e)}},{key:"addBuffersJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new FP(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.buffersJobs[e.id]=e.state}},format:a}).addBuffersJob(i,r)}},{key:"getBuffersJobState",value:function(e){return this.buffersJobs[e]}},{key:"getTopologyValidatorJobs",value:function(e,t){var r=this,n=r._processFormat(t);new qP(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getTopologyValidatorJobs()}},{key:"getTopologyValidatorJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new qP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getTopologyValidatorJob(e)}},{key:"addTopologyValidatorJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new qP(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.topologyValidatorJobs[e.id]=e.state}},format:a}).addTopologyValidatorJob(i,r)}},{key:"getTopologyValidatorJobState",value:function(e){return this.topologyValidatorJobs[e]}},{key:"getSummaryAttributesJobs",value:function(e,t){var r=this,n=r._processFormat(t);new rx(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getSummaryAttributesJobs()}},{key:"getSummaryAttributesJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new rx(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getSummaryAttributesJob(e)}},{key:"addSummaryAttributesJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new rx(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryAttributesJobs[e.id]=e.state}},format:a}).addSummaryAttributesJob(i,r)}},{key:"getSummaryAttributesJobState",value:function(e){return this.summaryAttributesJobs[e]}},{key:"_processFormat",value:function(e){return e||Pt.GEOJSON}},{key:"_processParams",value:function(e){return e?(e.bounds&&(e.bounds=wr.toSuperMapBounds(e.bounds)),e.query&&(e.query=wr.toSuperMapBounds(e.query)),e.geometryQuery&&(e.geometryQuery=wr.toProcessingParam(e.geometryQuery)),e.geometryClip&&(e.geometryClip=wr.toProcessingParam(e.geometryClip)),e):{}}}])&&ox(t.prototype,r),n&&ox(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ux(e){"@babel/helpers - typeof";return(ux="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fx(){return(fx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bx(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function px(e,t){return(px=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=bx(e);if(t){var o=bx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return yx(this,r)}}function yx(e,t){if(t&&("object"===ux(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dx(e)}function dx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bx(e){return(bx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&px(e,t)}(i,ff);var t,r,n,o=hx(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).returnContent=!1,r.format=Pt.GEOJSON,r.returnFeatureWithFieldCaption=!1,t&&j.extend(dx(r),t),r.CLASS_NAME="SuperMap.QueryService",r.url?(t&&t.format&&(r.format=t.format.toUpperCase()),r.url=j.urlPathAppend(r.url,"queryResults"),r):yx(r)}return t=i,(r=[{key:"destroy",value:function(){fx(bx(i.prototype),"destroy",this).call(this);this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e){if(e instanceof Tf){var t,r=this,n=null;r.returnContent=e.returnContent,t=r.getJsonParameters(e),r.returnContent||(n=e.returnCustomResult)&&(r.url=j.urlAppend(r.url,"returnCustomResult="+n)),r.returnFeatureWithFieldCaption=e.returnFeatureWithFieldCaption,r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){e=j.transformResult(e);var t=new vr;if(e&&e.recordsets)for(var r=0,n=e.recordsets,o=n.length;r<o;r++)n[r].features&&(!0===this.returnFeatureWithFieldCaption&&n[r].features.map(function(e){return e.fieldNames=n[r].fieldCaptions,e}),this.format===Pt.GEOJSON&&(n[r].features=t.toGeoJSON(n[r].features)));this.events.triggerEvent("processCompleted",{result:e})}},{key:"dataFormat",value:function(){return[Pt.GEOJSON,Pt.ISERVER,Pt.FGB]}},{key:"getQueryParameters",value:function(e){return new Tf({customParams:e.customParams,expectCount:e.expectCount,networkType:e.networkType,queryOption:e.queryOption,queryParams:e.queryParams,startRecord:e.startRecord,prjCoordSys:e.prjCoordSys,holdTime:e.holdTime})}}])&&cx(t.prototype,r),n&&cx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function mx(e){"@babel/helpers - typeof";return(mx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wx(){return(wx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Px(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Ox(e,t){return(Ox=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Sx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Px(e);if(t){var o=Px(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===mx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _x(e)}(this,r)}}function _x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Px(e){return(Px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ox(e,t)}(i,Tf);var t,r,n,o=Sx(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).returnContent=!0,t.bounds=null,j.extend(_x(t),e),t.CLASS_NAME="SuperMap.QueryByBoundsParameters",t}return t=i,(r=[{key:"destroy",value:function(){wx(Px(i.prototype),"destroy",this).call(this);this.returnContent=null,this.bounds&&(this.bounds=null)}}])&&gx(t.prototype,r),n&&gx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ex(e){"@babel/helpers - typeof";return(Ex="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jx(){return(jx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rx(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Cx(e,t){return(Cx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Tx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Rx(e);if(t){var o=Rx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ex(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Rx(e){return(Rx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ax=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cx(e,t)}(i,vx);var t,r,n,o=Tx(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.QueryByBoundsService",r}return t=i,(r=[{key:"destroy",value:function(){jx(Rx(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(!(e instanceof xx))return null;var t,r="",n=e.bounds;return t=this.getQueryParameters(e),r+="'queryMode':'BoundsQuery','queryParameters':",r+=j.toJSON(t),r="{"+(r+=",'bounds': {'rightTop':{'y':"+n.top+",'x':"+n.right+"},'leftBottom':{'y':"+n.bottom+",'x':"+n.left+"}}")+"}"}}])&&kx(t.prototype,r),n&&kx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Lx(e){"@babel/helpers - typeof";return(Lx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ix(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mx(){return(Mx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bx(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Nx(e,t){return(Nx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Dx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Bx(e);if(t){var o=Bx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Lx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fx(e)}(this,r)}}function Fx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bx(e){return(Bx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Gx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nx(e,t)}(i,Tf);var t,r,n,o=Dx(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).geometry=null,t.isNearest=null,t.returnContent=!0,j.extend(Fx(t),e),t.CLASS_NAME="SuperMap.QueryByDistanceParameters",t}return t=i,(r=[{key:"destroy",value:function(){Mx(Bx(i.prototype),"destroy",this).call(this);var e=this;e.returnContent=null,e.distance=null,e.isNearest=null,e.geometry&&(e.geometry.destroy(),e.geometry=null)}}])&&Ix(t.prototype,r),n&&Ix(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ux(e){"@babel/helpers - typeof";return(Ux="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vx(){return(Vx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wx(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Hx(e,t){return(Hx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Wx(e);if(t){var o=Wx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ux(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Wx(e){return(Wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hx(e,t)}(i,vx);var t,r,n,o=zx(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.QueryByDistanceService",r}return t=i,(r=[{key:"destroy",value:function(){Vx(Wx(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof Gx){var t="",r=this.getQueryParameters(e),n=cr.fromGeometry(e.geometry);return t+=e.isNearest?"'queryMode':'FindNearest','queryParameters':":"'queryMode':'DistanceQuery','queryParameters':",t+=j.toJSON(r),t="{"+(t+=",'geometry':"+j.toJSON(n)+",'distance':"+e.distance)+"}"}}}])&&Jx(t.prototype,r),n&&Jx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Yx(e){"@babel/helpers - typeof";return(Yx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qx(){return(Qx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=eE(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Zx(e,t){return(Zx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Kx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=eE(e);if(t){var o=eE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Yx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $x(e)}(this,r)}}function $x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eE(e){return(eE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zx(e,t)}(i,Tf);var t,r,n,o=Kx(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).returnContent=!0,j.extend($x(t),e),t.CLASS_NAME="SuperMap.QueryBySQLParameters",t}return t=i,(r=[{key:"destroy",value:function(){Qx(eE(i.prototype),"destroy",this).call(this);this.returnContent=null}}])&&Xx(t.prototype,r),n&&Xx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function rE(e){"@babel/helpers - typeof";return(rE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oE(){return(oE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sE(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function iE(e,t){return(iE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function aE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=sE(e);if(t){var o=sE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===rE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function sE(e){return(sE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iE(e,t)}(i,vx);var t,r,n,o=aE(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.QueryBySQLService",r}return t=i,(r=[{key:"destroy",value:function(){oE(sE(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof tE){var t,r="";return t=this.getQueryParameters(e),r+="'queryMode':'SqlQuery','queryParameters':",r="{"+(r+=j.toJSON(t))+"}"}}}])&&nE(t.prototype,r),n&&nE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function uE(e){"@babel/helpers - typeof";return(uE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fE(){return(fE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dE(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function pE(e,t){return(pE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=dE(e);if(t){var o=dE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===uE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yE(e)}(this,r)}}function yE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dE(e){return(dE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pE(e,t)}(i,Tf);var t,r,n,o=hE(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).returnContent=!0,t.geometry=null,t.spatialQueryMode=jt.INTERSECT,j.extend(yE(t),e),t.CLASS_NAME="SuperMap.QueryByGeometryParameters",t}return t=i,(r=[{key:"destroy",value:function(){fE(dE(i.prototype),"destroy",this).call(this);this.returnContent=null,this.geometry=null,this.spatialQueryMode=null}}])&&cE(t.prototype,r),n&&cE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function vE(e){"@babel/helpers - typeof";return(vE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gE(){return(gE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=SE(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function wE(e,t){return(wE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function OE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=SE(e);if(t){var o=SE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===vE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function SE(e){return(SE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wE(e,t)}(i,vx);var t,r,n,o=OE(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.QueryByGeometryService",r}return t=i,(r=[{key:"destroy",value:function(){gE(SE(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof bE){var t,r="",n=e.geometry,o=cr.fromGeometry(n);return t=this.getQueryParameters(e),r+="'queryMode':'SpatialQuery','queryParameters':",r="{"+(r+=j.toJSON(t)+",'geometry':"+j.toJSON(o)+",'spatialQueryMode':"+j.toJSON(e.spatialQueryMode))+"}"}}}])&&mE(t.prototype,r),n&&mE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function PE(e){"@babel/helpers - typeof";return(PE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function EE(e,t){return(EE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=jE(e);if(t){var o=jE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===PE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function jE(e){return(jE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var CE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EE(e,t)}(a,af);var r,n,o,i=kE(a);function a(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e,t)}return r=a,(n=[{key:"queryByBounds",value:function(e,t,r){var n=this;new Ax(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"queryByDistance",value:function(e,t,r){var n=this;new qx(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"queryBySQL",value:function(e,t,r){var n=this;new lE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"queryByGeometry",value:function(e,t,r){var n=this;new _E(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"_processParams",value:function(e){return e?(e.returnContent=null==e.returnContent||e.returnContent,e.queryParams&&!wr.isArray(e.queryParams)&&(e.queryParams=[e.queryParams]),e.bounds&&(e.bounds instanceof Array&&(e.bounds=new I(e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3])),e.bounds instanceof t().LngLatBounds&&(e.bounds=new I(e.bounds.getSouthWest().lng,e.bounds.getSouthWest().lat,e.bounds.getNorthEast().lng,e.bounds.getNorthEast().lat))),e.geometry&&(e.geometry instanceof t().LngLat&&(e.geometry=new U(e.geometry.lng,e.geometry.lat)),e.geometry instanceof t().Point&&(e.geometry=new U(e.geometry.x,e.geometry.y)),e.geometry instanceof t().LngLatBounds&&(e.geometry=wr.toSuperMapPolygon(e.geometry)),e.geometry instanceof b||(e.geometry=wr.toSuperMapGeometry(e.geometry))),e):{}}},{key:"_processFormat",value:function(e){return e||Pt.GEOJSON}}])&&xE(r.prototype,n),o&&xE(r,o),Object.defineProperty(r,"prototype",{writable:!1}),a}();function TE(e){"@babel/helpers - typeof";return(TE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function AE(){return(AE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ME(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function LE(e,t){return(LE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function IE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ME(e);if(t){var o=ME(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===TE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ME(e){return(ME=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var NE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LE(e,t)}(i,ff);var t,r,n,o=IE(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).format=t.format||Pt.GEOJSON,r.CLASS_NAME="SuperMap.SpatialAnalystBase",r}return t=i,(r=[{key:"destroy",value:function(){AE(ME(i.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(e){var t,r=this;if((e=j.transformResult(e))&&r.format===Pt.GEOJSON&&"function"==typeof r.toGeoJSONResult)if(j.isArray(e)){for(var n=0;n<e.length;n++)e[n]=r.toGeoJSONResult(e[n]);t=e}else t=r.toGeoJSONResult(e);t||(t=e),r.events.triggerEvent("processCompleted",{result:t})}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;e.result&&e.result.resultGeometry&&(e=e.result);var t=new vr;if(e.recordsets)for(var r=0,n=e.recordsets,o=n.length;r<o;r++)n[r].features&&(n[r].features=t.toGeoJSON(n[r].features));else e.recordset&&e.recordset.features&&(e.recordset.features=t.toGeoJSON(e.recordset.features));return e.resultGeometry&&(e.resultGeometry=t.toGeoJSON(e.resultGeometry)),e.regions&&(e.regions=t.toGeoJSON(e.regions)),e}}])&&RE(t.prototype,r),n&&RE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function DE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var FE=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.targetDatasourceName=null,this.totalGridName=null,this.diffuseDatasetGridName=null,this.durationDatasetGridName=null,this.directDatasetGridName=null,this.latitude=null,this.timeMode="MULTIDAYS",this.dayStart=null,this.dayEnd=null,this.hourStart=null,this.hourEnd=null,this.transmittance=null,this.hourInterval=null,this.dayInterval=null,this.deleteExistResultDataset=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.AreaSolarRadiationParameters"}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){var r={};for(var n in e){if("dataset"!==n)"latitude"===n||"timeMode"===n||"dayStart"===n||("dayEnd"===n||"hourStart"===n||"hourEnd"===n)||("transmittance"===n||"hourInterval"===n||"dayInterval"===n)?r[n]=e[n]:t[n]=e[n]}t.parameter=r}}],(r=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.zFactor=1,e.averageCurvatureName=null,e.profileCurvatureName=null,e.planCurvatureName=null,e.deleteExistResultDataset=!0}}])&&DE(t.prototype,r),n&&DE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function BE(e){"@babel/helpers - typeof";return(BE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function UE(){return(UE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=HE(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function JE(e,t){return(JE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function VE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=HE(e);if(t){var o=HE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===BE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function HE(e){return(HE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JE(e,t)}(i,NE);var t,r,n,o=VE(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.AreaSolarRadiationService",r}return t=i,(r=[{key:"destroy",value:function(){UE(HE(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof FE){var t=this,r={};e instanceof FE&&(t.url=j.urlPathAppend(t.url,"datasets/".concat(e.dataset,"/solarradiation"))),t.url=j.urlAppend(t.url,"returnContent=true"),FE.toObject(e,r);var n=j.toJSON(r);t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&GE(t.prototype,r),n&&GE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function WE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var qE=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.exp=null,this.value=100,j.extend(this,t),this.CLASS_NAME="SuperMap.BufferDistance"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.exp=null,this.value=null}}])&&WE(t.prototype,r),n&&WE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function YE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var XE=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endType=Jt.FLAT,this.leftDistance=new qE,this.rightDistance=new qE,this.semicircleLineSegment=4,this.radiusUnit=Rt.METER,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.BufferSetting"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.endType=null,e.leftDistance&&(e.leftDistance.destroy(),e.leftDistance=null),e.rightDistance&&(e.rightDistance.destroy(),e.rightDistance=null),e.semicircleLineSegment=null,e.radiusUnit=null}}])&&YE(t.prototype,r),n&&YE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function QE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ZE=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.bufferSetting=new XE,j.extend(this,t),this.CLASS_NAME="SuperMap.BufferAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.bufferSetting&&(this.bufferSetting.destroy(),this.bufferSetting=null)}}])&&QE(t.prototype,r),n&&QE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function KE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $E=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expectCount=1e3,this.dataset=null,this.dataReturnMode=qt.RECORDSET_ONLY,this.deleteExistResultDataset=!0,j.extend(this,t),this.CLASS_NAME="SuperMap.DataReturnOption"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.expectCount=null,this.dataset=null,this.dataReturnMode=null,this.deleteExistResultDataset=null}}])&&KE(t.prototype,r),n&&KE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ek(e){"@babel/helpers - typeof";return(ek="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rk(){return(rk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ak(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function nk(e,t){return(nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ok(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ak(e);if(t){var o=ak(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ek(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ik(e)}(this,r)}}function ik(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ak(e){return(ak=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nk(e,t)}(i,ZE);var t,r,n,o=ok(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).dataset=null,t.filterQueryParameter=new ah,t.resultSetting=new $E,t.isAttributeRetained=!0,t.isUnion=!1,j.extend(ik(t),e),t.CLASS_NAME="SuperMap.DatasetBufferAnalystParameters",t}return t=i,n=[{key:"toObject",value:function(e,t){for(var r in e)if("bufferSetting"===r)e.bufferSetting.radiusUnit=e.bufferSetting.radiusUnit.toUpperCase(),t.bufferAnalystParameter=e.bufferSetting;else if("resultSetting"===r)t.dataReturnOption=e.resultSetting;else{if("dataset"===r)continue;t[r]=e[r]}}}],(r=[{key:"destroy",value:function(){rk(ak(i.prototype),"destroy",this).call(this);var e=this;e.dataset=null,e.filterQueryParameter&&(e.filterQueryParameter.destroy(),e.filterQueryParameter=null),e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.isAttributeRetained=null,e.isUnion=null}}])&&tk(t.prototype,r),n&&tk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function lk(e){"@babel/helpers - typeof";return(lk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ck(){return(ck="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yk(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function fk(e,t){return(fk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=yk(e);if(t){var o=yk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===lk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hk(e)}(this,r)}}function hk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yk(e){return(yk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fk(e,t)}(i,ZE);var t,r,n,o=pk(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).sourceGeometry=null,t.sourceGeometrySRID=null,e&&j.extend(hk(t),e),t.CLASS_NAME=" SuperMap.GeometryBufferAnalystParameters",t}return t=i,n=[{key:"toObject",value:function(e,t){for(var r in e)if("bufferSetting"===r){var n={};for(var o in e.bufferSetting)n[o]=e.bufferSetting[o];t.analystParameter=n}else"sourceGeometry"===r?t.sourceGeometry=cr.fromGeometry(e.sourceGeometry):t[r]=e[r]}}],(r=[{key:"destroy",value:function(){ck(yk(i.prototype),"destroy",this).call(this);this.sourceGeometry&&(this.sourceGeometry.destroy(),this.sourceGeometry=null)}}])&&uk(t.prototype,r),n&&uk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function bk(e){"@babel/helpers - typeof";return(bk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mk(){return(mk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sk(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function gk(e,t){return(gk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Sk(e);if(t){var o=Sk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===bk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ok(e)}(this,r)}}function Ok(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sk(e){return(Sk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gk(e,t)}(i,NE);var t,r,n,o=wk(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).mode=null,t&&j.extend(Ok(r),t),r.CLASS_NAME="SuperMap.BufferAnalystService",r}return t=i,(r=[{key:"destroy",value:function(){mk(Sk(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},r=this;e instanceof sk?(r.mode="datasets",r.url=j.urlPathAppend(r.url,"datasets/"+e.dataset+"/buffer"),sk.toObject(e,t)):e instanceof dk&&(r.mode="geometry",r.url=j.urlPathAppend(r.url,"geometry/buffer"),dk.toObject(e,t));var n=j.toJSON(t);this.returnContent=!0,r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}},{key:"dataFormat",value:function(){return[Pt.GEOJSON,Pt.ISERVER,Pt.FGB]}}])&&vk(t.prototype,r),n&&vk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Pk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var xk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.DensityKernelAnalystParameters"}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"dataset"!==r&&(t[r]=e[r])}}],(r=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.bounds=null,e.fieldName=null,e.resultGridDatasetResolution=null,e.searchRadius=null,e.targetDatasource=null,e.resultGridName=null,e.deleteExistResultDataset=null}}])&&Pk(t.prototype,r),n&&Pk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ek(e){"@babel/helpers - typeof";return(Ek="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jk(){return(jk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ak(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Ck(e,t){return(Ck=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Tk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ak(e);if(t){var o=Ak(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ek(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Rk(e)}(this,r)}}function Rk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ak(e){return(Ak=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Lk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ck(e,t)}(i,NE);var t,r,n,o=Tk(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).mode=null,t&&j.extend(Rk(r),t),r.CLASS_NAME="SuperMap.DensityAnalystService",r}return t=i,(r=[{key:"destroy",value:function(){jk(Ak(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t=this,r=new Object;e instanceof xk&&(t.url=j.urlPathAppend(t.url,"datasets/"+e.dataset+"/densityanalyst/kernel"),t.mode="kernel"),xk.toObject(e,r);var n=j.toJSON(r);t.url=j.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&kk(t.prototype,r),n&&kk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ik(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Mk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.routeTable=null,this.routeIDField=null,this.attributeFilter=null,this.eventTable=null,this.eventRouteIDField=null,this.measureField=null,this.measureStartField=null,this.measureEndField=null,this.measureOffsetField=null,this.errorInfoField=null,this.retainedFields=null,this.dataReturnOption=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.GenerateSpatialDataParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.routeTable&&(e.routeTable=null),e.routeIDField=null,e.attributeFilter=null,e.eventTable=null,e.eventRouteIDField=null,e.measureField=null,e.measureStartField=null,e.measureEndField=null,e.measureOffsetField=null,e.errorInfoField=null,e.dataReturnOption&&(e.dataReturnOption.destroy(),e.dataReturnOption=null)}}])&&Ik(t.prototype,r),n&&Ik(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Nk(e){"@babel/helpers - typeof";return(Nk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fk(){return(Fk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Uk(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Bk(e,t){return(Bk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Gk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Uk(e);if(t){var o=Uk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Nk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Uk(e){return(Uk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bk(e,t)}(i,NE);var t,r,n,o=Gk(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.GenerateSpatialDataService",r}return t=i,(r=[{key:"destroy",value:function(){Fk(Uk(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Mk){var t,r=this;t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t="datasets/"+e.routeTable+"/linearreferencing/generatespatialdata";return this.url=j.urlPathAppend(this.url,t),this.url=j.urlAppend(this.url,"returnContent=true"),j.toJSON(e)}}])&&Dk(t.prototype,r),n&&Dk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Vk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Hk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.sourceFilter=null,this.referenceFilter=null,this.spatialRelationType=null,this.isBorderInside=null,this.returnFeature=null,this.returnGeoRelatedOnly=null,this.startRecord=0,this.expectCount=500,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.GeoRelationAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.sourceFilter&&e.sourceFilter.destroy(),e.sourceFilter=null,e.referenceFilter&&e.referenceFilter.destroy(),e.referenceFilter=null,e.dataset=null,e.spatialRelationType=null,e.isBorderInside=null,e.returnFeature=null,e.returnGeoRelatedOnly=null,e.startRecord=null,e.expectCount=null}}])&&Vk(t.prototype,r),n&&Vk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function zk(e){"@babel/helpers - typeof";return(zk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qk(){return(qk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qk(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Yk(e,t){return(Yk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Xk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Qk(e);if(t){var o=Qk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===zk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Qk(e){return(Qk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Zk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yk(e,t)}(i,NE);var t,r,n,o=Xk(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.GeoRelationAnalystService",r}return t=i,(r=[{key:"destroy",value:function(){qk(Qk(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Hk){var t=this;t.url=j.urlPathAppend(t.url,"datasets/"+e.dataset+"/georelation");var r=j.toJSON(e);t.url=j.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&Wk(t.prototype,r),n&&Wk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Kk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $k=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.bounds=null,this.searchRadius=0,this.zValueFieldName=null,this.zValueScale=1,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.outputDatasourceName=null,this.pixelFormat=null,this.dataset=null,this.inputPoints=null,this.InterpolationAnalystType="dataset",this.clipParam=null,j.extend(this,t),this.CLASS_NAME="SuperMap.InterpolationAnalystParameters")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)if("inputPoints"===r&&"geometry"===e.InterpolationAnalystType){for(var n=[],o=0;o<e.inputPoints.length;o++){var i=e.inputPoints[o],a={x:i.x,y:i.y,z:i.tag};n.push(a)}t[r]=n}else t[r]=e[r]}}],(r=[{key:"destroy",value:function(){var e=this;e.bounds=null,e.searchRadius=null,e.zValueFieldName=null,e.zValueScale=null,e.resolution=null,e.filterQueryParameter=null,e.outputDatasetName=null,e.pixelFormat=null}}])&&Kk(t.prototype,r),n&&Kk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ej(e){"@babel/helpers - typeof";return(ej="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rj(){return(rj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=aj(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function nj(e,t){return(nj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=aj(e);if(t){var o=aj(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ej(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ij(e)}(this,r)}}function ij(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aj(e){return(aj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nj(e,t)}(i,$k);var t,r,n,o=oj(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).smooth=.1,t.tension=40,t.searchMode=null,t.expectedCount=12,t.maxPointCountForInterpolation=200,t.maxPointCountInNode=50,e&&j.extend(ij(t),e),t.CLASS_NAME="SuperMap.InterpolationRBFAnalystParameters",t}return t=i,n=[{key:"toObject",value:function(e,t){for(var r in e)t[r]=e[r]}}],(r=[{key:"destroy",value:function(){rj(aj(i.prototype),"destroy",this).call(this);var e=this;e.smooth=null,e.tension=null,e.searchMode=null,e.expectedCount=null,e.maxPointCountForInterpolation=null,e.maxPointCountInNode=null}}])&&tj(t.prototype,r),n&&tj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function lj(e){"@babel/helpers - typeof";return(lj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cj(){return(cj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yj(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function fj(e,t){return(fj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=yj(e);if(t){var o=yj(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===lj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hj(e)}(this,r)}}function hj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yj(e){return(yj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fj(e,t)}(i,$k);var t,r,n,o=pj(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),e&&j.extend(hj(t),e),t.CLASS_NAME="SuperMap.InterpolationDensityAnalystParameters",t}return t=i,(r=[{key:"destroy",value:function(){cj(yj(i.prototype),"destroy",this).call(this)}}])&&uj(t.prototype,r),n&&uj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function bj(e){"@babel/helpers - typeof";return(bj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mj(){return(mj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sj(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function gj(e,t){return(gj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Sj(e);if(t){var o=Sj(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===bj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Oj(e)}(this,r)}}function Oj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sj(e){return(Sj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gj(e,t)}(i,$k);var t,r,n,o=wj(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).power=2,t.searchMode=null,t.expectedCount=12,e&&j.extend(Oj(t),e),t.CLASS_NAME="SuperMap.InterpolationIDWAnalystParameters",t}return t=i,(r=[{key:"destroy",value:function(){mj(Sj(i.prototype),"destroy",this).call(this);this.power=null,this.searchMode=null,this.expectedCount=null}}])&&vj(t.prototype,r),n&&vj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Pj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var xj=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.clipRegion=null,this.createResultDataset=!1,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=!0,j.extend(this,t),this.CLASS_NAME="SuperMap.ThiessenAnalystParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.clipRegion&&(e.clipRegion.destroy(),e.clipRegion=null),e.createResultDataset=null,e.resultDatasetName=null,e.resultDatasourceName=null,e.returnResultRegion=null}}])&&Pj(t.prototype,r),n&&Pj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ej(e){"@babel/helpers - typeof";return(Ej="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jj(){return(jj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Aj(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Cj(e,t){return(Cj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Tj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Aj(e);if(t){var o=Aj(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ej(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Rj(e)}(this,r)}}function Rj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Aj(e){return(Aj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Lj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cj(e,t)}(i,$k);var t,r,n,o=Tj(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type=null,t.mean=null,t.angle=0,t.nugget=0,t.range=0,t.sill=0,t.variogramMode=Zt.SPHERICAL,t.exponent=Kt.EXP1,t.searchMode=null,t.expectedCount=12,t.maxPointCountForInterpolation=200,t.maxPointCountInNode=50,e&&j.extend(Rj(t),e),t.CLASS_NAME="SuperMap.InterpolationKrigingAnalystParameters",t}return t=i,(r=[{key:"destroy",value:function(){jj(Aj(i.prototype),"destroy",this).call(this);var e=this;e.type=null,e.mean=null,e.angle=null,e.nugget=null,e.range=null,e.sill=null,e.variogramMode=null,e.exponent=null,e.searchMode=null,e.expectedCount=null,e.maxPointCountForInterpolation=null,e.maxPointCountInNode=null}}])&&kj(t.prototype,r),n&&kj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ij(e){"@babel/helpers - typeof";return(Ij="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nj(){return(Nj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gj(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Dj(e,t){return(Dj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Gj(e);if(t){var o=Gj(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ij(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bj(e)}(this,r)}}function Bj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gj(e){return(Gj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Uj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dj(e,t)}(i,NE);var t,r,n,o=Fj(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).mode=null,t&&j.extend(Bj(r),t),r}return t=i,(r=[{key:"destroy",value:function(){Nj(Gj(i.prototype),"destroy",this).call(this),this.mode=null,this.CLASS_NAME="SuperMap.InterpolationAnalystService"}},{key:"processAsync",value:function(e){var t={},r=this;e instanceof dj?(r.mode="Density","geometry"===e.InterpolationAnalystType?r.url=j.urlPathAppend(r.url,"geometry/interpolation/density"):r.url=j.urlPathAppend(r.url,"datasets/"+e.dataset+"/interpolation/density")):e instanceof _j?(r.mode="IDW","geometry"===e.InterpolationAnalystType?r.url=j.urlPathAppend(r.url,"geometry/interpolation/idw"):r.url=j.urlPathAppend(r.url,"datasets/"+e.dataset+"/interpolation/idw")):e instanceof sj?(r.mode="RBF","geometry"===e.InterpolationAnalystType?r.url=j.urlPathAppend(r.url,"geometry/interpolation/rbf"):r.url=j.urlPathAppend(r.url,"datasets/"+e.dataset+"/interpolation/rbf")):e instanceof Lj&&(r.mode="Kriging","geometry"===e.InterpolationAnalystType?r.url=j.urlPathAppend(r.url,"geometry/interpolation/kriging"):r.url=j.urlPathAppend(r.url,"datasets/"+e.dataset+"/interpolation/kriging")),$k.toObject(e,t);var n=j.toJSON(t);r.url=j.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}])&&Mj(t.prototype,r),n&&Mj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Jj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Vj=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.extractRegion=null,this.expression=null,this.isZip=!1,this.ignoreNoValue=!1,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.MathExpressionAnalysisParameters")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)if("dataset"!==r&&(t[r]=e[r]),"extractRegion"===r&&e[r]){for(var n=e[r].components[0].components,o={},i=[],a=n.length,s=0;s<a-1;s++){var l={};l.x=n[s].x,l.y=n[s].y,i.push(l)}o.points=i,o.type="REGION",t[r]=o}}}],(r=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.bounds=null,e.expression=null,e.isZip=!0,e.ignoreNoValue=!0,e.targetDatasource=null,e.resultGridName=null,e.deleteExistResultDataset=null}}])&&Jj(t.prototype,r),n&&Jj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Hj(e){"@babel/helpers - typeof";return(Hj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wj(){return(Wj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xj(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function qj(e,t){return(qj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Yj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Xj(e);if(t){var o=Xj(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Hj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Xj(e){return(Xj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qj(e,t)}(i,NE);var t,r,n,o=Yj(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.MathExpressionAnalysisService",r}return t=i,(r=[{key:"destroy",value:function(){Wj(Xj(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t=this,r={};e instanceof Vj&&(t.url=j.urlPathAppend(t.url,"datasets/"+e.dataset+"/mathanalyst")),Vj.toObject(e,r);var n=j.toJSON(r);t.url=j.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&zj(t.prototype,r),n&&zj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Zj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Kj=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.operation=Vt.UNION,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.OverlayAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.operation=null}}])&&Zj(t.prototype,r),n&&Zj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $j(e){"@babel/helpers - typeof";return($j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tC(){return(tC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iC(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function rC(e,t){return(rC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=iC(e);if(t){var o=iC(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===$j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oC(e)}(this,r)}}function oC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iC(e){return(iC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var aC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rC(e,t)}(i,Kj);var t,r,n,o=nC(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).operateDataset=null,t.operateDatasetFields=[],t.operateDatasetFilter=new ah,t.operateRegions=[],t.sourceDataset=null,t.sourceDatasetFields=[],t.sourceDatasetFilter=new ah,t.tolerance=0,t.resultSetting=new $E,j.extend(oC(t),e),t.CLASS_NAME="SuperMap.DatasetOverlayAnalystParameters",t}return t=i,n=[{key:"toObject",value:function(e,t){for(var r in e)if("sourceDataset"!==r)if("operateRegions"===r){t.operateRegions=[];var n=e.operateRegions;for(var o in n)n.hasOwnProperty(o)&&(t.operateRegions[o]=cr.fromGeometry(n[o]))}else"resultSetting"===r?t.dataReturnOption=e.resultSetting:t[r]=e[r]}}],(r=[{key:"destroy",value:function(){tC(iC(i.prototype),"destroy",this).call(this);var e=this;if(e.operateDataset=null,e.operateDatasetFields=null,e.operateDatasetFilter&&(e.operateDatasetFilter.destroy(),e.operateDatasetFilter=null),e.operateRegions){for(var t=0,r=e.operateRegions,n=r.length;t<n;t++)r[t].destroy();e.operateRegions=null}e.sourceDataset=null,e.sourceDatasetFields=null,e.sourceDatasetFilter&&(e.sourceDatasetFilter.destroy(),e.sourceDatasetFilter=null),e.tolerance=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null)}}])&&eC(t.prototype,r),n&&eC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function sC(e){"@babel/helpers - typeof";return(sC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uC(){return(uC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hC(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function cC(e,t){return(cC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=hC(e);if(t){var o=hC(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===sC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pC(e)}(this,r)}}function pC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hC(e){return(hC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cC(e,t)}(i,Kj);var t,r,n,o=fC(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),e&&e.operateGeometry&&(t.operateGeometry=e.operateGeometry),e&&e.sourceGeometry&&(t.sourceGeometry=e.sourceGeometry),e&&e.operateGeometries&&(t.operateGeometries=e.operateGeometries),e&&e.sourceGeometries&&(t.sourceGeometries=e.sourceGeometries),e&&j.extend(pC(t),e),t.CLASS_NAME="SuperMap.GeometryOverlayAnalystParameters",t}return t=i,n=[{key:"toObject",value:function(e,t){for(var r in e)if("sourceGeometry"===r)t.sourceGeometry=cr.fromGeometry(e.sourceGeometry);else if("sourceGeometries"===r){for(var n=[],o=0;o<e.sourceGeometries.length;o++)n.push(cr.fromGeometry(e.sourceGeometries[o]));t.sourceGeometries=n}else if("operateGeometry"===r)t.operateGeometry=cr.fromGeometry(e.operateGeometry);else if("operateGeometries"===r){for(var i=[],a=0;a<e.operateGeometries.length;a++)i.push(cr.fromGeometry(e.operateGeometries[a]));t.operateGeometries=i}else t[r]=e[r]}}],(r=[{key:"destroy",value:function(){uC(hC(i.prototype),"destroy",this).call(this);var e=this;e.sourceGeometry&&(e.sourceGeometry.destroy(),e.sourceGeometry=null),e.sourceGeometries&&(e.sourceGeometries.destroy(),e.sourceGeometries=null),e.sourceGeometry&&(e.sourceGeometry.destroy(),e.sourceGeometry=null),e.operateGeometries&&(e.operateGeometries.destroy(),e.operateGeometries=null)}}])&&lC(t.prototype,r),n&&lC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function dC(e){"@babel/helpers - typeof";return(dC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vC(){return(vC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=OC(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function mC(e,t){return(mC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=OC(e);if(t){var o=OC(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===dC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wC(e)}(this,r)}}function wC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OC(e){return(OC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var SC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mC(e,t)}(i,NE);var t,r,n,o=gC(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).mode=null,t&&j.extend(wC(r),t),r.CLASS_NAME="SuperMap.OverlayAnalystService",r}return t=i,(r=[{key:"destroy",value:function(){vC(OC(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},r=this;e instanceof aC?(r.mode="datasets",r.url=j.urlPathAppend(r.url,"datasets/"+e.sourceDataset+"/overlay"),aC.toObject(e,t)):e instanceof yC&&(r.mode="geometry",e.operateGeometries&&e.sourceGeometries?(r.url=j.urlPathAppend(r.url,"geometry/overlay/batch"),r.url=j.urlAppend(r.url,"ignoreAnalystParam=true")):r.url=j.urlPathAppend(r.url,"geometry/overlay"),yC.toObject(e,t)),this.returnContent=!0;var n=j.toJSON(t);r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}},{key:"dataFormat",value:function(){return[Pt.GEOJSON,Pt.ISERVER,Pt.FGB]}}])&&bC(t.prototype,r),n&&bC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var PC=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.sourceRoute=null,this.point=null,this.tolerance=null,this.isIgnoreGap=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.RouteCalculateMeasureParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.sourceRoute=null,e.point=null,e.tolerance&&(e.tolerance=null),e.isIgnoreGap&&(e.isIgnoreGap=!1)}}])&&_C(t.prototype,r),n&&_C(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function xC(e){"@babel/helpers - typeof";return(xC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kC(){return(kC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TC(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function jC(e,t){return(jC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function CC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=TC(e);if(t){var o=TC(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===xC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function TC(e){return(TC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var RC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jC(e,t)}(i,NE);var t,r,n,o=CC(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.RouteCalculateMeasureService",r}return t=i,(r=[{key:"destroy",value:function(){kC(TC(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof PC){var t,r=this;t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){return this.url=j.urlPathAppend(this.url,"geometry/calculatemeasure"),this.url=j.urlAppend(this.url,"returnContent=true"),j.toJSON(e)}}])&&EC(t.prototype,r),n&&EC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function AC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var LC=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.sourceRoute=null,this.dataset=null,this.routeIDField=null,this.routeID=null,this.type=null,this.measure=null,this.offset=0,this.isIgnoreGap=!1,this.startMeasure=null,this.endMeasure=null;var r=t.sourceRoute,n={};if(r&&r instanceof b&&r.components){n.type=r.type,n.parts=r.parts;for(var o=[],i=0,a=r.components.length;i<a;i++)o=o.concat(r.components[i].components);n.points=o,t.sourceRoute=n}j.extend(this,t),this.CLASS_NAME="SuperMap.RouteLocatorParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.sourceRoute=null,e.type=null,e.measure=null,e.offset=0,e.isIgnoreGap=!1,e.startMeasure=null,e.endMeasure=null,e.dataset=null,e.routeID=null,e.routeIDField=null}}])&&AC(t.prototype,r),n&&AC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function IC(e){"@babel/helpers - typeof";return(IC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function NC(){return(NC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=BC(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function DC(e,t){return(DC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function FC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=BC(e);if(t){var o=BC(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===IC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function BC(e){return(BC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var GC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DC(e,t)}(i,NE);var t,r,n,o=FC(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.RouteLocatorService",r}return t=i,(r=[{key:"destroy",value:function(){NC(BC(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof LC){var t,r=this;t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t="geometry/routelocator";return e.dataset&&(t="datasets/"+e.dataset+"/linearreferencing/routelocator",e.sourceRoute=null),this.url=j.urlPathAppend(this.url,t),this.url=j.urlAppend(this.url,"returnContent=true"),j.toJSON(e)}}])&&MC(t.prototype,r),n&&MC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function UC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var JC=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipRegion=null,this.datumValue=0,this.expectedZValues=null,this.interval=0,this.resampleTolerance=0,this.smoothMethod=zt.BSPLINE,this.smoothness=0,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParametersSetting"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.clipRegion&&(e.clipRegion.destroy(),e.clipRegion=null),e.datumValue=null,e.expectedZValues=null,e.interval=null,e.resampleTolerance=null,e.smoothMethod=null,e.smoothness=null}},{key:"toJSON",value:function(){var e="'datumValue':"+j.toJSON(this.datumValue);if(e+=",'interval':"+j.toJSON(this.interval),e+=",'resampleTolerance':"+j.toJSON(this.resampleTolerance),e+=",'smoothMethod':"+j.toJSON(this.smoothMethod),e+=",'smoothness':"+j.toJSON(this.smoothness),null!=this.expectedZValues&&(e+=",'expectedZValues':"+j.toJSON(this.expectedZValues)),null!=this.clipRegion){var t=this.clipRegion;this.clipRegion instanceof b&&this.clipRegion.components&&(t=cr.fromGeometry(this.clipRegion)),e+=",'clipRegion':"+j.toJSON(t)}return"{"+e+"}"}}])&&UC(t.prototype,r),n&&UC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function VC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var HC=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolution=0,this.extractParameter=new JC,this.resultSetting=new $E,this.surfaceAnalystMethod=Wt.ISOLINE,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.resolution=null,e.extractParameter&&(e.extractParameter.destroy(),e.extractParameter=null),e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.surfaceAnalystMethod=null}}])&&VC(t.prototype,r),n&&VC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function zC(e){"@babel/helpers - typeof";return(zC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qC(){return(qC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ZC(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function YC(e,t){return(YC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function XC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ZC(e);if(t){var o=ZC(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===zC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return QC(e)}(this,r)}}function QC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZC(e){return(ZC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var KC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YC(e,t)}(i,HC);var t,r,n,o=XC(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).dataset=null,t.filterQueryParameter=new ah,t.zValueFieldName=null,e&&j.extend(QC(t),e),t.CLASS_NAME="SuperMap.DatasetSurfaceAnalystParameters",t}return t=i,n=[{key:"toObject",value:function(e,t){for(var r in e)if("filterQueryParameter"===r&&(t.filterQueryParameter=e.filterQueryParameter),"extractParameter"===r)e.extractParameter.clipRegion instanceof b&&e.extractParameter.clipRegion.components&&(e.extractParameter.clipRegion=cr.fromGeometry(e.extractParameter.clipRegion)),t.extractParameter=e.extractParameter;else{if("dataset"===r)continue;if("surfaceAnalystMethod"===r)continue;t[r]=e[r]}}}],(r=[{key:"destroy",value:function(){qC(ZC(i.prototype),"destroy",this).call(this);var e=this;e.dataset=null,e.filterQueryParameter&&(e.filterQueryParameter.destroy(),e.filterQueryParameter=null),e.zValueFieldName=null}}])&&WC(t.prototype,r),n&&WC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function $C(e){"@babel/helpers - typeof";return($C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tT(){return(tT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function rT(e,t){return(rT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=iT(e);if(t){var o=iT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===$C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oT(e)}(this,r)}}function oT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iT(e){return(iT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var aT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rT(e,t)}(i,HC);var t,r,n,o=nT(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).points=null,t.zValues=null,e&&j.extend(oT(t),e),t.CLASS_NAME="SuperMap.GeometrySurfaceAnalystParameters",t}return t=i,(r=[{key:"destroy",value:function(){tT(iT(i.prototype),"destroy",this).call(this);if(this.points){for(var e=0,t=this.points,r=t.length;e<r;e++)t[e].destroy();this.points=null}this.zValues=null}}])&&eT(t.prototype,r),n&&eT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function sT(e){"@babel/helpers - typeof";return(sT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uT(){return(uT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function cT(e,t){return(cT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=pT(e);if(t){var o=pT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===sT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function pT(e){return(pT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var hT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cT(e,t)}(i,NE);var t,r,n,o=fT(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.SurfaceAnalystService",r}return t=i,(r=[{key:"destroy",value:function(){uT(pT(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof HC){var t,r=this;t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t="",r={};if(e instanceof KC)this.url=j.urlPathAppend(this.url,"datasets/"+e.dataset+"/"+e.surfaceAnalystMethod.toLowerCase()),KC.toObject(e,r),t=j.toJSON(r);else{if(!(e instanceof aT))return;this.url=j.urlPathAppend(this.url,"geometry/"+e.surfaceAnalystMethod.toLowerCase()),t=j.toJSON(e)}return this.returnContent=!0,t}},{key:"dataFormat",value:function(){return[Pt.GEOJSON,Pt.ISERVER,Pt.FGB]}}])&&lT(t.prototype,r),n&&lT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function yT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var dT=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName="",this.planCurvatureName="",this.deleteExistResultDataset=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.TerrainCurvatureCalculationParameters")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"dataset"!==r&&(t[r]=e[r])}}],(r=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.zFactor=1,e.averageCurvatureName=null,e.profileCurvatureName=null,e.planCurvatureName=null,e.deleteExistResultDataset=!0}}])&&yT(t.prototype,r),n&&yT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function bT(e){"@babel/helpers - typeof";return(bT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mT(){return(mT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=OT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function gT(e,t){return(gT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=OT(e);if(t){var o=OT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===bT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function OT(e){return(OT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ST=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gT(e,t)}(i,NE);var t,r,n,o=wT(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.TerrainCurvatureCalculationService",r}return t=i,(r=[{key:"destroy",value:function(){mT(OT(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t=this,r={};e instanceof dT&&(t.url=j.urlPathAppend(t.url,"datasets/"+e.dataset+"/terraincalculation/curvature")),dT.toObject(e,r);var n=j.toJSON(r);t.url=j.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&vT(t.prototype,r),n&&vT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _T(e){"@babel/helpers - typeof";return(_T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xT(){return(xT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ET(e,t){return(ET=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=CT(e);if(t){var o=CT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jT(e)}(this,r)}}function jT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CT(e){return(CT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var TT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ET(e,t)}(i,xj);var t,r,n,o=kT(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).filterQueryParameter=null,t.dataset=null,e&&j.extend(jT(t),e),t.CLASS_NAME="SuperMap.DatasetThiessenAnalystParameters",t}return t=i,n=[{key:"toObject",value:function(e,t){for(var r in e)"clipRegion"===r?t.clipRegion=cr.fromGeometry(e.clipRegion):t[r]=e[r]}}],(r=[{key:"destroy",value:function(){xT(CT(i.prototype),"destroy",this).call(this);this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null)}}])&&PT(t.prototype,r),n&&PT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function RT(e){"@babel/helpers - typeof";return(RT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function LT(){return(LT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=DT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function IT(e,t){return(IT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function MT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=DT(e);if(t){var o=DT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===RT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return NT(e)}(this,r)}}function NT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DT(e){return(DT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var FT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IT(e,t)}(i,xj);var t,r,n,o=MT(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).points=null,e&&j.extend(NT(t),e),t.CLASS_NAME="SuperMap.GeometryThiessenAnalystParameters",t}return t=i,n=[{key:"toObject",value:function(e,t){for(var r in e)"clipRegion"===r?t.clipRegion=cr.fromGeometry(e.clipRegion):t[r]=e[r]}}],(r=[{key:"destroy",value:function(){LT(DT(i.prototype),"destroy",this).call(this);if(this.points){for(var e=this.points.length-1;e>=0;e--)this.points[e].destroy();this.points=null}}}])&&AT(t.prototype,r),n&&AT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function BT(e){"@babel/helpers - typeof";return(BT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function UT(){return(UT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function JT(e,t){return(JT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function VT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=zT(e);if(t){var o=zT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===BT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return HT(e)}(this,r)}}function HT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zT(e){return(zT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var WT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JT(e,t)}(i,NE);var t,r,n,o=VT(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).mode=null,t&&j.extend(HT(r),t),r.CLASS_NAME="SuperMap.ThiessenAnalystService",r}return t=i,(r=[{key:"destroy",value:function(){UT(zT(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},r=this;e instanceof TT?(r.mode="datasets",r.url=j.urlPathAppend(r.url,"datasets/"+e.dataset+"/thiessenpolygon"),TT.toObject(e,t)):e instanceof FT&&(r.mode="geometry",r.url=j.urlPathAppend(r.url,"geometry/thiessenpolygon"),FT.toObject(e,t));var n=j.toJSON(t);this.returnContent=!0,r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}},{key:"dataFormat",value:function(){return[Pt.GEOJSON,Pt.ISERVER,Pt.FGB]}}])&&GT(t.prototype,r),n&&GT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function qT(e){"@babel/helpers - typeof";return(qT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function XT(){return(XT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$T(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function QT(e,t){return(QT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ZT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=$T(e);if(t){var o=$T(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===qT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return KT(e)}(this,r)}}function KT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $T(e){return($T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QT(e,t)}(i,NE);var t,r,n,o=ZT(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t),t&&j.extend(KT(r),t),r.CLASS_NAME="SuperMap.GeometryBatchAnalystService",r}return t=i,(r=[{key:"processAsync",value:function(e){var t=this;t.url=j.urlPathAppend(t.url,"geometry/batchanalyst"),t.url=j.urlAppend(t.url,"returnContent=true&ignoreAnalystParam=true");var r=t._processParams(e),n=j.toJSON(r);t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}},{key:"_processParams",value:function(e){var t=this;if(j.isArray(e)){var r=[];return e.map(function(e){return r.push(t._toJSON(e)),e}),r}}},{key:"_toJSON",value:function(e){var t={};if("buffer"===e.analystName)t.analystName="buffer",t.param={},dk.toObject(e.param,t.param);else if("overlay"===e.analystName)t.analystName="overlay",t.param={},yC.toObject(e.param,t.param);else if("interpolationDensity"===e.analystName)t.analystName="interpolationDensity",t.param={},$k.toObject(e.param,t.param);else if("interpolationidw"===e.analystName)t.analystName="interpolationidw",t.param={},$k.toObject(e.param,t.param);else if("interpolationRBF"===e.analystName)t.analystName="interpolationRBF",t.param={},$k.toObject(e.param,t.param);else if("interpolationKriging"===e.analystName)t.analystName="interpolationKriging",t.param={},$k.toObject(e.param,t.param);else{if("thiessenpolygon"!==e.analystName)return e;t.analystName="thiessenpolygon",t.param={},FT.toObject(e.param,t.param)}return t}},{key:"destroy",value:function(){XT($T(i.prototype),"destroy",this).call(this)}}])&&YT(t.prototype,r),n&&YT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function tR(e){"@babel/helpers - typeof";return(tR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nR(e,t){return(nR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=iR(e);if(t){var o=iR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===tR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function iR(e){return(iR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var aR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nR(e,t)}(i,af);var t,r,n,o=oR(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(r=[{key:"getAreaSolarRadiationResult",value:function(e,t,r){var n=this;new zE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"bufferAnalysis",value:function(e,t,r){var n=this;new _k(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"densityAnalysis",value:function(e,t,r){var n=this;new Lk(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"generateSpatialData",value:function(e,t,r){var n=this;new Jk(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"geoRelationAnalysis",value:function(e,t,r){var n=this;new Zk(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"interpolationAnalysis",value:function(e,t,r){var n=this;new Uj(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"mathExpressionAnalysis",value:function(e,t,r){var n=this;new Qj(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"overlayAnalysis",value:function(e,t,r){var n=this;new SC(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"routeCalculateMeasure",value:function(e,t,r){var n=this;new RC(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"routeLocate",value:function(e,t,r){var n=this;new GC(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"surfaceAnalysis",value:function(e,t,r){var n=this;new hT(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"terrainCurvatureCalculate",value:function(e,t,r){var n=this;new ST(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"thiessenAnalysis",value:function(e,t,r){var n=this;new WT(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"geometrybatchAnalysis",value:function(e,t,r){for(var n=new eR(this.url,{eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}),o=[],i=0;i<e.length;i++){var a=e[i];o.push({analystName:a.analystName,param:this._processParams(a.param)})}n.processAsync(o)}},{key:"_processParams",value:function(e){if(!e)return{};if(e.bounds&&(e.bounds=wr.toSuperMapBounds(e.bounds)),e.inputPoints)for(var t=0;t<e.inputPoints.length;t++){var r=e.inputPoints[t];wr.isArray(r)&&(e.inputPoints[t]={x:r[0],y:r[1],tag:r[2]})}if(e.points)for(var n=0;n<e.points.length;n++){var o=e.points[n];e.points[n]=wr.toSuperMapPoint(o)}if(e.point&&(e.point=wr.toSuperMapPoint(e.point)),e.extractRegion&&(e.extractRegion=wr.toSuperMapGeometry(e.extractRegion)),e.extractParameter&&e.extractParameter.clipRegion&&(e.extractParameter.clipRegion=wr.toSuperMapGeometry(e.extractParameter.clipRegion)),e.clipParam&&e.clipParam.clipRegion&&(e.clipParam.clipRegion=wr.toSuperMapGeometry(e.clipParam.clipRegion)),e.sourceRoute&&e.sourceRoute){var i={type:"LINEM"};i.parts=[e.sourceRoute.geometry.coordinates.length],i.points=[];for(var a=0;a<e.sourceRoute.geometry.coordinates.length;a++){var s=e.sourceRoute.geometry.coordinates[a];i.points=i.points.concat({x:s[0],y:s[1],measure:s[2]})}e.sourceRoute=i}if(e.operateRegions&&wr.isArray(e.operateRegions)&&e.operateRegions.map(function(t,r){return e.operateRegions[r]=wr.toSuperMapGeometry(t),e.operateRegions[r]}),e.sourceGeometry){var l=null;e.sourceGeometrySRID&&(l=e.sourceGeometrySRID),e.sourceGeometry=wr.toSuperMapGeometry(e.sourceGeometry),l&&(e.sourceGeometry.SRID=l),delete e.sourceGeometry.sourceGeometrySRID}if(e.operateGeometry&&(e.operateGeometry=wr.toSuperMapGeometry(e.operateGeometry)),e.sourceGeometries){for(var u=[],c=0;c<e.sourceGeometries.length;c++)u.push(wr.toSuperMapGeometry(e.sourceGeometries[c]));e.sourceGeometries=u}if(e.operateGeometries){for(var f=[],p=0;p<e.operateGeometries.length;p++)f.push(wr.toSuperMapGeometry(e.operateGeometries[p]));e.operateGeometries=f}return e.sourceRoute&&e.sourceRoute.components&&wr.isArray(e.sourceRoute.components)&&e.sourceRoute.components.map(function(t,r){return e.sourceRoute.components[r]=wr.toSuperMapGeometry(t),e.sourceRoute.components[r]}),e}},{key:"_processFormat",value:function(e){return e||Pt.GEOJSON}}])&&rR(t.prototype,r),n&&rR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function sR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var lR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetNames=null,this.dataSourceNames=null,this.joinItems=null,this.themes=null,this.displayFilters=null,this.displayOrderBys=null,this.fieldValuesDisplayFilter=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.datasetNames=null,e.dataSourceNames=null,e.joinItems){for(var t=0,r=e.joinItems,n=r.length;t<n;t++)r[t].destroy();e.joinItems=null}if(e.themes){for(var o=0,i=e.themes,a=i.length;o<a;o++)i[o].destroy();e.themes=null}}}])&&sR(t.prototype,r),n&&sR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function uR(e){"@babel/helpers - typeof";return(uR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fR(){return(fR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dR(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function pR(e,t){return(pR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=dR(e);if(t){var o=dR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===uR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yR(e)}(this,r)}}function yR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dR(e){return(dR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pR(e,t)}(i,ff);var t,r,n,o=hR(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t),t&&j.extend(yR(r),t),r.url=j.urlPathAppend(r.url,"tempLayersSet"),r.CLASS_NAME="SuperMap.ThemeService",r}return t=i,(r=[{key:"destroy",value:function(){fR(dR(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof lR){var t,r=this;t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t,r="",n=null,o=null,i=null;r+="[{'type': 'UGC','subLayers': {'layers': [";for(var a=0;a<e.themes.length;a++){n=e.themes[a];var s=j.toJSON(n);if(r+="{'theme': "+(s=s.slice(0,-1))+"},'type': 'UGC','ugcLayerType': 'THEME',",(o=e.displayFilters)&&o.length>0&&(1===o.length?r+="'displayFilter':\""+o[0]+'",':r+="'displayFilter':\""+o[a]+'",'),(i=e.displayOrderBy)&&i.length>0&&(1===i.length?r+="'displayOrderBy':'"+i[0]+"',":r+="'displayOrderBy':'"+i[a]+"',"),(t=e.fieldValuesDisplayFilter)&&(r+="'fieldValuesDisplayFilter':"+j.toJSON(t)+","),e.joinItems&&e.joinItems.length>0&&e.joinItems[a]&&(r+="'joinItems':["+j.toJSON(e.joinItems[a])+"],"),e.datasetNames&&e.dataSourceNames){var l=e.datasetNames[a]?a:e.datasetNames.length-1,u=e.dataSourceNames[a]?a:e.dataSourceNames.length-1;r+="'datasetInfo': {'name': '"+e.datasetNames[l]+"','dataSourceName': '"+e.dataSourceNames[u]+"'}},"}else r+="},"}e.themes&&e.themes.length>0&&(r=r.substring(0,r.length-1)),r+="]},";var c=this.url.split("/");return r+="'name': '"+c[c.length-2]+"'}]"}}])&&cR(t.prototype,r),n&&cR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function vR(e){"@babel/helpers - typeof";return(vR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gR(e,t){return(gR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=OR(e);if(t){var o=OR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===vR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function OR(e){return(OR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var SR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gR(e,t)}(i,af);var t,r,n,o=wR(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(r=[{key:"getThemeInfo",value:function(e,t){var r=this;new bR(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}}])&&mR(t.prototype,r),n&&mR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var PR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.keyWord=null,this.returnPosition=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.StopQueryParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){j.reset(this)}}])&&_R(t.prototype,r),n&&_R(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function xR(e){"@babel/helpers - typeof";return(xR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ER(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kR(){return(kR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=RR(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function jR(e,t){return(jR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function CR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=RR(e);if(t){var o=RR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===xR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return TR(e)}(this,r)}}function TR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RR(e){return(RR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var AR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jR(e,t)}(i,ff);var t,r,n,o=CR(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t),t=t||{},j.extend(TR(r),t),r.CLASS_NAME="SuperMap.StopQueryService",r}return t=i,(r=[{key:"destroy",value:function(){kR(RR(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"processAsync",value:function(e){if(e instanceof PR){var t=this;t.url=j.urlPathAppend(t.url,"stops/keyword/"+e.keyWord),t.request({method:"GET",params:{returnPosition:e.returnPosition},scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&ER(t.prototype,r),n&&ER(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function LR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var IR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.transferLines=null,this.points=null,j.extend(this,t),this.CLASS_NAME="SuperMap.TransferPathParameters"}var t,r,n;return t=e,n=[{key:"toJson",value:function(e){if(e)return j.toJSON(e)}}],(r=[{key:"destroy",value:function(){j.reset(this)}}])&&LR(t.prototype,r),n&&LR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function MR(e){"@babel/helpers - typeof";return(MR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function DR(){return(DR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=GR(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function FR(e,t){return(FR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function BR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=GR(e);if(t){var o=GR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===MR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function GR(e){return(GR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var UR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FR(e,t)}(i,ff);var t,r,n,o=BR(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.TransferPathService",r}return t=i,(r=[{key:"destroy",value:function(){DR(GR(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof IR){var t,r=this;r.url=j.urlPathAppend(r.url,"path"),t={points:j.toJSON(e.points),transferLines:j.toJSON(e.transferLines)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&NR(t.prototype,r),n&&NR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function JR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var VR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.solutionCount=6,this.transferPreference=Qt.NONE,this.transferTactic=Xt.LESS_TIME,this.walkingRatio=null,this.points=!1,this.evadeLines=null,this.evadeStops=null,this.priorLines=null,this.priorStops=null,this.travelTime=null,j.extend(this,t),this.CLASS_NAME="SuperMap.TransferSolutionParameters"}var t,r,n;return t=e,n=[{key:"toJson",value:function(e){if(e)return j.toJSON(e)}}],(r=[{key:"destroy",value:function(){j.reset(this)}}])&&JR(t.prototype,r),n&&JR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function HR(e){"@babel/helpers - typeof";return(HR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function WR(){return(WR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=XR(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function qR(e,t){return(qR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function YR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=XR(e);if(t){var o=XR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===HR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function XR(e){return(XR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var QR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qR(e,t)}(i,ff);var t,r,n,o=YR(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.TransferSolutionService",r}return t=i,(r=[{key:"destroy",value:function(){WR(XR(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof VR){var t,r=this;r.url=j.urlPathAppend(r.url,"solutions"),t={points:j.toJSON(e.points),walkingRatio:e.walkingRatio,transferTactic:e.transferTactic,solutionCount:e.solutionCount,transferPreference:e.transferPreference},e.evadeLines&&(t.evadeLines=j.toJSON(e.evadeLines)),e.evadeStops&&(t.evadeStops=j.toJSON(e.evadeStops)),e.priorLines&&(t.priorLines=j.toJSON(e.priorLines)),e.priorStops&&(t.priorStops=j.toJSON(e.priorStops)),e.travelTime&&(t.travelTime=e.travelTime),r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&zR(t.prototype,r),n&&zR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ZR(e){"@babel/helpers - typeof";return(ZR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $R(e,t){return($R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=tA(e);if(t){var o=tA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ZR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function tA(e){return(tA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$R(e,t)}(a,af);var r,n,o,i=eA(a);function a(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e,t)}return r=a,(n=[{key:"queryStop",value:function(e,t){var r=this;new AR(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"analysisTransferPath",value:function(e,t){var r=this;new UR(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(r._processParams(e))}},{key:"analysisTransferSolution",value:function(e,t){var r=this;new QR(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(r._processParams(e))}},{key:"_processParams",value:function(e){return e?(e.transferLines&&!wr.isArray(e.transferLines)&&(e.transferLines=[e.transferLines]),e.points&&wr.isArray(e.points)&&e.points.map(function(r,n){return e.points[n]=r instanceof t().LngLat?{x:r.lng,y:r.lat}:r,e.points[n]}),e):{}}}])&&KR(r.prototype,n),o&&KR(r,o),Object.defineProperty(r,"prototype",{writable:!1}),a}();function nA(e){"@babel/helpers - typeof";return(nA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function iA(){return(iA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cA(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function aA(e,t){return(aA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=cA(e);if(t){var o=cA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return lA(this,r)}}function lA(e,t){if(t&&("object"===nA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return uA(e)}function uA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cA(e){return(cA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aA(e,t)}(i,ff);var t,r,n,o=sA(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t),t&&j.extend(uA(r),t),r.CLASS_NAME="SuperMap.WebPrintingService",r.url?r:lA(r)}return t=i,(r=[{key:"destroy",value:function(){iA(cA(i.prototype),"destroy",this).call(this)}},{key:"createWebPrintingJob",value:function(e){if(e){e.layoutOptions&&e.layoutOptions.legendOptions&&(!e.layoutOptions.legendOptions.title&&(e.layoutOptions.legendOptions.title=""),e.layoutOptions.legendOptions.picAsBase64=e.layoutOptions.legendOptions.picAsBase64&&e.layoutOptions.legendOptions.picAsBase64.replace(/^data:.+;base64,/,""),e.layoutOptions.legendOptions.customItems&&e.layoutOptions.legendOptions.customItems.hasOwnProperty("picAsBase64")&&(e.layoutOptions.legendOptions.customItems.picAsBase64=e.layoutOptions.legendOptions.customItems.picAsBase64.replace(/^data:.+;base64,/,"")));var t=this;t.request({url:t._processUrl("jobs"),method:"POST",data:j.toJSON(e),scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"getPrintingJob",value:function(e){var t=this,r=t._processUrl("jobs/".concat(e));t.request({url:r,method:"GET",scope:t,success:function(e){t.rollingProcess(e,r)},failure:t.serviceProcessFailed})}},{key:"getPrintingJobResult",value:function(e){var t=this;t.request({url:t._processUrl("jobs/".concat(e,"/result")),method:"GET",scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}},{key:"getLayoutTemplates",value:function(){var e=this;e.request({url:e._processUrl("layouts"),method:"GET",scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}},{key:"rollingProcess",value:function(e,t){var r=this;if(e)var n=setInterval(function(){r.request({url:t,method:"GET",scope:r,success:function(e){switch(e.status){case"FINISHED":clearInterval(n),r.serviceProcessCompleted(e);break;case"ERROR":clearInterval(n),r.serviceProcessFailed(e);break;case"RUNNING":r.events.triggerEvent("processRunning",e)}},failure:r.serviceProcessFailed})},1e3)}},{key:"_processUrl",value:function(e){return e?j.urlPathAppend(this.url,e):this.url}}])&&oA(t.prototype,r),n&&oA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function pA(e){"@babel/helpers - typeof";return(pA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yA(e,t){return(yA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function dA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=bA(e);if(t){var o=bA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===pA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function bA(e){return(bA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yA(e,t)}(a,af);var r,n,o,i=dA(a);function a(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e,t)}return r=a,(n=[{key:"createWebPrintingJob",value:function(e,t){if(e){var r=this;new fA(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).createWebPrintingJob(r._processParams(e))}}},{key:"getPrintingJob",value:function(e,t){var r=this;new fA(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).getPrintingJob(e)}},{key:"getPrintingJobResult",value:function(e,t){var r=this;new fA(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).getPrintingJobResult(e)}},{key:"getLayoutTemplates",value:function(e){var t=this;new fA(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).getLayoutTemplates()}},{key:"_processParams",value:function(e){return e.layoutOptions&&e.layoutOptions.littleMapOptions&&(e.layoutOptions.littleMapOptions.center=this._toPointObject(e.layoutOptions.littleMapOptions.center)),e.exportOptions&&(e.exportOptions.center=this._toPointObject(e.exportOptions.center)),e}},{key:"_toPointObject",value:function(e){return wr.isArray(e)?{x:e[0],y:e[1]}:e instanceof U||e instanceof t().Point?{x:e.x,y:e.y}:e instanceof t().LngLat?{x:e.lng,y:e.lat}:e}}])&&hA(r.prototype,n),o&&hA(r,o),Object.defineProperty(r,"prototype",{writable:!1}),a}();function mA(e){"@babel/helpers - typeof";return(mA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function SA(){return(SA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=EA(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function _A(e,t){return(_A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function PA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=EA(e);if(t){var o=EA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===mA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xA(e)}(this,r)}}function xA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EA(e){return(EA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_A(e,t)}(i,ff);var t,r,n,o=PA(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).options=t||{},t&&j.extend(xA(r),t),r.CLASS_NAME="SuperMap.ImageService",r}return t=i,(r=[{key:"destroy",value:function(){SA(EA(i.prototype),"destroy",this).call(this)}},{key:"getCollections",value:function(){var e=j.convertPath("/collections"),t=j.urlPathAppend(this.url,e);this.request({method:"GET",url:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"getCollectionByID",value:function(e){var t={collectionId:e},r=j.convertPath("/collections/{collectionId}",t),n=j.urlPathAppend(this.url,r);this.request({method:"GET",url:n,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"search",value:function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gA(Object(r),!0).forEach(function(t){wA(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gA(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e||{}),r=j.convertPath("/search"),n=j.urlPathAppend(this.url,r);this.request({method:"POST",url:n,data:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}])&&OA(t.prototype,r),n&&OA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function jA(e){"@babel/helpers - typeof";return(jA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function TA(e,t){return(TA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function RA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=AA(e);if(t){var o=AA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===jA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function AA(e){return(AA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var LA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TA(e,t)}(i,af);var t,r,n,o=RA(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(r=[{key:"getCollections",value:function(e){var t=this;new kA(this.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).getCollections()}},{key:"getCollectionByID",value:function(e,t){var r=this;new kA(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).getCollectionByID(e)}},{key:"search",value:function(e,t){var r=this;new kA(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).search(e)}}])&&CA(t.prototype,r),n&&CA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function IA(e){"@babel/helpers - typeof";return(IA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function NA(){return(NA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=GA(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function DA(e,t){return(DA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function FA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=GA(e);if(t){var o=GA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===IA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return BA(e)}(this,r)}}function BA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GA(e){return(GA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var UA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DA(e,t)}(i,ff);var t,r,n,o=FA(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).options=t||{},t&&j.extend(BA(r),t),r.CLASS_NAME="SuperMap.ImageCollectionService",r}return t=i,(r=[{key:"destroy",value:function(){NA(GA(i.prototype),"destroy",this).call(this)}},{key:"getLegend",value:function(e){var t={collectionId:this.options.collectionId},r=j.convertPath("/collections/{collectionId}/legend",t),n=j.urlPathAppend(this.url,r);this.request({method:"GET",url:n,params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"getStatistics",value:function(){var e={collectionId:this.options.collectionId},t=j.convertPath("/collections/{collectionId}/statistics",e),r=j.urlPathAppend(this.url,t);this.request({method:"GET",url:r,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"getTileInfo",value:function(){var e={collectionId:this.options.collectionId},t=j.convertPath("/collections/{collectionId}/tileInfo",e),r=j.urlPathAppend(this.url,t);this.request({method:"GET",url:r,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"deleteItemByID",value:function(e){var t={collectionId:this.options.collectionId,featureId:e},r=j.convertPath("/collections/{collectionId}/items/{featureId}",t),n=j.urlPathAppend(this.url,r);this.request({method:"DELETE",url:n,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"getItemByID",value:function(e){var t={collectionId:this.options.collectionId,featureId:e},r=j.convertPath("/collections/{collectionId}/items/{featureId}",t),n=j.urlPathAppend(this.url,r);this.request({method:"GET",url:n,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}])&&MA(t.prototype,r),n&&MA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function JA(e){"@babel/helpers - typeof";return(JA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function HA(e,t){return(HA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=WA(e);if(t){var o=WA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===JA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function WA(e){return(WA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HA(e,t)}(i,af);var t,r,n,o=zA(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(r=[{key:"getLegend",value:function(e,t){var r=this;new UA(this.url,{collectionId:r.options.collectionId,proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).getLegend(e)}},{key:"getStatistics",value:function(e){var t=this;new UA(t.url,{collectionId:t.options.collectionId,proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).getStatistics()}},{key:"getTileInfo",value:function(e){var t=this;new UA(t.url,{collectionId:t.options.collectionId,proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).getTileInfo()}},{key:"deleteItemByID",value:function(e,t){var r=this;new UA(this.url,{collectionId:r.options.collectionId,proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).deleteItemByID(e)}},{key:"getItemByID",value:function(e,t){var r=this;new UA(r.url,{collectionId:r.options.collectionId,proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).getItemByID(e)}}])&&VA(t.prototype,r),n&&VA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(),YA=window.SuperMap=window.SuperMap||{};function XA(e){"@babel/helpers - typeof";return(XA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ZA(e,t){return(ZA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function KA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=$A(e);if(t){var o=$A(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===XA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function $A(e){return($A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}YA.Components=window.SuperMap.Components||{};var eL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZA(e,t)}(i,Ue);var t,r,n,o=KA(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},t.CLASS_NAME="SuperMap.Format.WKT",t.extract={point:function(e){return e.x+" "+e.y},multipoint:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.point.apply(this,[e.components[r]])+")");return t.join(",")},linestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.point.apply(this,[e.components[r]]));return t.join(",")},multilinestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.linestring.apply(this,[e.components[r]])+")");return t.join(",")},polygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.linestring.apply(this,[e.components[r]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.polygon.apply(this,[e.components[r]])+")");return t.join(",")},collection:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extractGeometry.apply(this,[e.components[r]]));return t.join(",")}},t.parse={point:function(e){var t=f.trim(e).split(this.regExes.spaces);return new Be(new U(t[0],t[1]))},multipoint:function(e){for(var t,r=f.trim(e).split(","),n=[],o=0,i=r.length;o<i;++o)t=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.point.apply(this,[t]).geometry);return new Be(new ee(n))},linestring:function(e){for(var t=f.trim(e).split(","),r=[],n=0,o=t.length;n<o;++n)r.push(this.parse.point.apply(this,[t[n]]).geometry);return new Be(new he(r))},multilinestring:function(e){for(var t,r=f.trim(e).split(this.regExes.parenComma),n=[],o=0,i=r.length;o<i;++o)t=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.linestring.apply(this,[t]).geometry);return new Be(new $e(n))},polygon:function(e){for(var t,r,n,o=f.trim(e).split(this.regExes.parenComma),i=[],a=0,s=o.length;a<s;++a)t=o[a].replace(this.regExes.trimParens,"$1"),r=this.parse.linestring.apply(this,[t]).geometry,n=new we(r.components),i.push(n);return new Be(new Ee(i))},multipolygon:function(e){for(var t,r=f.trim(e).split(this.regExes.doubleParenComma),n=[],o=0,i=r.length;o<i;++o)t=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.polygon.apply(this,[t]).geometry);return new Be(new it(n))},geometrycollection:function(e){e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var t=f.trim(e).split("|"),r=[],n=0,o=t.length;n<o;++n)r.push(this.read(t[n]));return r}},t}return t=i,(r=[{key:"read",value:function(e){var t,r,n;e=e.replace(/[\n\r]/g," ");var o=this.regExes.typeStr.exec(e);return o&&(r=o[1].toLowerCase(),n=o[2],this.parse[r]&&(t=this.parse[r].apply(this,[n]))),t}},{key:"write",value:function(e){var t,r,n;e.constructor===Array?(t=e,n=!0):(t=[e],n=!1);var o=[];n&&o.push("GEOMETRYCOLLECTION(");for(var i=0,a=t.length;i<a;++i)n&&i>0&&o.push(","),r=t[i].geometry,o.push(this.extractGeometry(r));return n&&o.push(")"),o.join("")}},{key:"extractGeometry",value:function(e){var t=e.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[t]?("collection"===t?"GEOMETRYCOLLECTION":t.toUpperCase())+"("+this.extract[t].apply(this,[e])+")":null}}])&&QA(t.prototype,r),n&&QA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function tL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var rL=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=this;t=t||{},this.speed=t.speed&&t.speed>=0?t.speed:1,this.frequency=t.speed&&t.frequency>=0?t.frequency:1e3,this.startTime=t.startTime&&null!=t.startTime?t.startTime:0,this.endTime=t.endTime&&null!=t.endTime&&t.endTime>=r.startTime?t.endTime:+new Date,this.repeat=void 0===t.repeat||t.repeat,this.reverse=void 0!==t.reverse&&t.reverse,this.currentTime=null,this.oldTime=null,this.running=!1,this.EVENT_TYPES=["start","pause","stop"],r.events=new Mn(this,null,this.EVENT_TYPES),r.speed=Number(r.speed),r.frequency=Number(r.frequency),r.startTime=Number(r.startTime),r.endTime=Number(r.endTime),r.startTime=Date.parse(new Date(r.startTime)),r.endTime=Date.parse(new Date(r.endTime)),r.currentTime=r.startTime,this.CLASS_NAME="SuperMap.TimeControlBase"}var t,r,n;return t=e,(r=[{key:"updateOptions",value:function(e){var t=this;(e=e||{}).speed&&e.speed>=0&&(t.speed=e.speed,t.speed=Number(t.speed)),e.speed&&e.frequency>=0&&(t.frequency=e.frequency,t.frequency=Number(t.frequency)),e.startTime&&null!=e.startTime&&(t.startTime=e.startTime,t.startTime=Date.parse(new Date(t.startTime))),e.endTime&&null!=e.endTime&&e.endTime>=t.startTime&&(t.endTime=e.endTime,t.endTime=Date.parse(new Date(t.endTime))),null!=e.repeat&&(t.repeat=e.repeat),null!=e.reverse&&(t.reverse=e.reverse)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.tick(),e.events.triggerEvent("start",e.currentTime))}},{key:"pause",value:function(){this.running=!1,this.events.triggerEvent("pause",this.currentTime)}},{key:"stop",value:function(){var e=this;e.currentTime=e.startTime,e.running&&(e.running=!1),e.events.triggerEvent("stop",e.currentTime)}},{key:"toggle",value:function(){this.running?this.pause():this.start()}},{key:"setSpeed",value:function(e){return e>=0&&(this.speed=e,!0)}},{key:"getSpeed",value:function(){return this.speed}},{key:"setFrequency",value:function(e){return e>=0&&(this.frequency=e,!0)}},{key:"getFrequency",value:function(){return this.frequency}},{key:"setStartTime",value:function(e){var t=this;return!((e=Date.parse(new Date(e)))>t.endTime)&&(t.startTime=e,t.currentTime<t.startTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getStartTime",value:function(){return this.startTime}},{key:"setEndTime",value:function(e){var t=this;return t.endTime=Date.parse(new Date(t.endTime)),!(e<t.startTime)&&(t.endTime=e,t.currentTime>=t.endTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getEndTime",value:function(){return this.endTime}},{key:"setCurrentTime",value:function(e){var t=this;return t.currentTime=Date.parse(new Date(t.currentTime)),e>=t.startTime&&e<=t.endTime&&(t.currentTime=e,t.startTime=t.currentTime,t.tick(),!0)}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"setRepeat",value:function(e){this.repeat=e}},{key:"getRepeat",value:function(){return this.repeat}},{key:"setReverse",value:function(e){this.reverse=e}},{key:"getReverse",value:function(){return this.reverse}},{key:"getRunning",value:function(){return this.running}},{key:"destroy",value:function(){var e=this;e.speed=null,e.frequency=null,e.startTime=null,e.endTime=null,e.currentTime=null,e.repeat=null,e.running=!1,e.reverse=null}},{key:"tick",value:function(){}}])&&tL(t.prototype,r),n&&tL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function nL(e){"@babel/helpers - typeof";return(nL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function iL(){return(iL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uL(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function aL(e,t){return(aL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=uL(e);if(t){var o=uL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===nL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return lL(e)}(this,r)}}function lL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uL(e){return(uL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aL(e,t)}(i,rL);var t,r,n,o=sL(i);function i(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=lL(r=o.call(this,t));return n.callback=e,Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},o=function(){return r.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o}),n.update=n.update.bind(n),n.oldTime=n.currentTime,n.CLASS_NAME="SuperMap.TimeFlowControl",r}return t=i,(r=[{key:"updateOptions",value:function(e){e=e||{},iL(uL(i.prototype),"updateOptions",this).call(this,e)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.reverse?e.currentTime===e.startTime&&(e.oldTime=e.endTime,e.currentTime=e.oldTime):e.oldTime===e.endTime&&(e.currentTime=e.startTime,e.oldTime=e.currentTime),e.tick())}},{key:"stop",value:function(){iL(uL(i.prototype),"stop",this).call(this);var e=this;e.oldTime=e.currentTime,e.running&&(e.running=!1),e.intervalId&&window.clearTimeout(e.intervalId)}},{key:"destroy",value:function(){iL(uL(i.prototype),"destroy",this).call(this);this.oldTime=null,this.callback=null}},{key:"tick",value:function(){var e=this;e.intervalId&&window.clearInterval(e.intervalId),e.intervalId=null,e.update(),e.intervalId=window.setInterval(e.update,e.frequency)}},{key:"update",value:function(){var e=this;if(e.running)if(e.callback&&e.callback(e.currentTime),e.reverse){if(e.currentTime===e.startTime){if(!e.repeat)return e.running=!1,null;e.oldTime=e.endTime,e.currentTime=e.oldTime}else e.currentTime=e.oldTime,e.oldTime-=e.speed;e.oldTime<=e.startTime&&(e.oldTime=e.startTime)}else{if(e.currentTime===e.endTime){if(!e.repeat)return e.running=!1,e.stop(),null;e.stop(),e.currentTime=e.startTime,e.oldTime=e.currentTime,e.start()}else e.oldTime=e.currentTime,e.currentTime+=e.speed;e.currentTime>=e.endTime&&(e.currentTime=e.endTime)}}}])&&oL(t.prototype,r),n&&oL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function fL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var pL=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t){var n=t.substr(t.length-1,1);this.serviceUrl="/"===n?t.substr(0,t.length-2):t}this.options=r||{},this.CLASS_NAME="SuperMap.iManagerServiceBase"}var t,r,n;return t=e,(r=[{key:"request",value:function(e,t,r,n){(n=n||{headers:{Accept:"*/*","Content-Type":"application/json"}}).hasOwnProperty("withCredentials")||(n.withCredentials=!0),n.crossOrigin=this.options.crossOrigin,n.headers=this.options.headers;var o=lf.imanagerToken;return o&&(n.headers||(n.headers=[]),n.headers["X-Auth-Token"]=o),r&&(r=JSON.stringify(r)),fu.commit(e,t,r,n).then(function(e){return e.json()})}}])&&fL(t.prototype,r),n&&fL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function hL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var yL=function(e,t,r){return t&&hL(e.prototype,t),r&&hL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.nodeSpec="SMALL",this.nodeCount=1,this.nodeName="",this.password="",this.description="",this.physicalMachineName="",this.ips=[],this.userName="",j.extend(this,t)});function dL(e){"@babel/helpers - typeof";return(dL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vL(e,t){return(vL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=gL(e);if(t){var o=gL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===dL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function gL(e){return(gL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vL(e,t)}(i,pL);var t,r,n,o=mL(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e)}return t=i,(r=[{key:"load",value:function(){return this.request("GET",this.serviceUrl+"/web/api/service.json")}},{key:"createIServer",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/server.json",new yL(e))}},{key:"createIPortal",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/portal.json",new yL(e))}},{key:"iServerList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/server.json")}},{key:"iPortalList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/portal.json")}},{key:"startNodes",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/started.json",e)}},{key:"stopNodes",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/stopped.json",e)}}])&&bL(t.prototype,r),n&&bL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function OL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var SL=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=r||{},this.serviceUrl=t,this.CLASS_NAME="SuperMap.iPortalServiceBase",this.withCredentials=r.withCredentials||!1,this.crossOrigin=r.crossOrigin,this.headers=r.headers}var t,r,n;return t=e,(r=[{key:"request",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{headers:this.headers,crossOrigin:this.crossOrigin,withCredentials:this.withCredentials};return t=lf.appendCredential(t),fu.commit(e,t,r,n).then(function(e){return e.json()})}}])&&OL(t.prototype,r),n&&OL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var PL=function(e,t,r){return t&&_L(e.prototype,t),r&&_L(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.resourceType="",this.pageSize=12,this.currentPage=1,this.orderBy="UPDATETIME",this.orderType="DESC",this.searchType="PUBLIC",this.tags=[],this.dirIds=[],this.resourceSubTypes=[],this.aggregationTypes=[],this.text="",this.groupIds=[],this.departmentIds=[],j.extend(this,t)});function xL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var EL=function(e,t,r){return t&&xL(e.prototype,t),r&&xL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.content=[],this.total=0,this.currentPage=1,this.pageSize=12,this.aggregations=null,j.extend(this,t)});function kL(e){"@babel/helpers - typeof";return(kL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function CL(e,t){return(CL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function TL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=AL(e);if(t){var o=AL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===kL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return RL(e)}(this,r)}}function RL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AL(e){return(AL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var LL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CL(e,t)}(i,SL);var t,r,n,o=TL(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e),t=t||{},r.authorizeSetting=[],r.bounds="",r.bounds4326="",r.checkStatus="",r.createTime=0,r.description=null,r.dirId=null,r.epsgCode=0,r.heatLevel=0,r.id=0,r.name="",r.personalDirId=null,r.resourceId=0,r.resourceSubType=null,r.resourceType=null,r.serviceRootUrlId=null,r.tags=null,r.thumbnail=null,r.updateTime=0,r.userName="",r.sourceJSON={},j.extend(RL(r),t),r.resourceUrl=e+"/web/"+r.resourceType.replace("_","").toLowerCase()+"s/"+r.resourceId,r.withCredentials&&(r.resourceUrl=e+"/web/mycontent/"+r.resourceType.replace("_","").toLowerCase()+"s/"+r.resourceId),r}return t=i,(r=[{key:"load",value:function(){var e=this;return e.request("GET",e.resourceUrl+".json").then(function(t){if(t.error)return t;e.sourceJSON=t})}},{key:"update",value:function(){var e=this.resourceType.replace("_","").toLowerCase();"data"===e&&(this.resourceUrl=this.resourceUrl+"/attributes.json");var t=JSON.stringify(this.sourceJSON);if("service"===e){var r={authorizeSetting:this.sourceJSON.authorizeSetting,metadata:this.sourceJSON.metadata,tags:this.sourceJSON.tags,thumbnail:this.sourceJSON.thumbnail,tokenRefreshUrl:this.sourceJSON.tokenRefreshUrl};t=JSON.stringify(r)}return this.request("PUT",this.resourceUrl,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}])&&jL(t.prototype,r),n&&jL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function IL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ML=function(e,t,r){return t&&IL(e.prototype,t),r&&IL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.ids=[],this.entities=[],this.resourceType="",j.extend(this,t)});function NL(e){"@babel/helpers - typeof";return(NL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FL(e,t){return(FL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function BL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=GL(e);if(t){var o=GL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===NL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function GL(e){return(GL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var UL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FL(e,t)}(i,SL);var t,r,n,o=BL(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).iportalUrl=e,t=t||{},r.withCredentials=t.withCredentials||!1,r}return t=i,(r=[{key:"load",value:function(){return fu.get(this.iportalUrl+"/web")}},{key:"queryResources",value:function(e){if(!(e instanceof PL))return new Promise(function(e){e("queryParams is not instanceof iPortalQueryParam !")});var t=this,r=this.iportalUrl+"/gateway/catalog/resource/search.json";return e.t=(new Date).getTime(),this.request("GET",r,e).then(function(e){var r=[];e.content.forEach(function(e){r.push(new LL(t.iportalUrl,e))});var n=new EL;return n.content=r,n.total=e.total,n.currentPage=e.currentPage,n.pageSize=e.pageSize,n.aggregations=e.aggregations,n})}},{key:"updateResourcesShareSetting",value:function(e){if(!(e instanceof ML))return new Promise(function(e){e("shareParams is not instanceof iPortalShareParam !")});var t=e.resourceType.replace("_","").toLowerCase()+"s";"datas"===t&&(t="mycontent/"+t);var r={ids:e.ids,entities:e.entities},n=this.iportalUrl+"/web/"+t+"/sharesetting.json";return this.request("PUT",n,JSON.stringify(r)).then(function(e){return e})}}])&&DL(t.prototype,r),n&&DL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function JL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var VL=function(e,t,r){return t&&JL(e.prototype,t),r&&JL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.permissionType="",this.entityType="",this.entityName="GUEST",this.entityId=null,j.extend(this,t)});function HL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var zL=function(e,t,r){return t&&HL(e.prototype,t),r&&HL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.rootUrl="",this.tags=[],this.entities=[],j.extend(this,t)});function WL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var qL=function(e,t,r){return t&&WL(e.prototype,t),r&&WL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type="",this.tags=[],this.entities=[],this.metadata={},this.addedMapNames=[],this.addedSceneNames=[],j.extend(this,t)});function YL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var XL=function(e,t,r){return t&&YL(e.prototype,t),r&&YL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.fileName="",this.type="",this.tags=[],this.dataMetaInfo={},j.extend(this,t)});function QL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ZL=function(e,t,r){return t&&QL(e.prototype,t),r&&QL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.xField="",this.yField="",this.fileEncoding="UTF-8",this.xIndex=1,this.yIndex=1,this.fieldTypes=[],this.separator="",this.firstRowIsHead=!0,this.url="",this.dataStoreInfo={},j.extend(this,t)});function KL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $L=function(e,t,r){return t&&KL(e.prototype,t),r&&KL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type="",this.url="",this.connectionInfo={},j.extend(this,t)});function eI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var tI=function(e,t,r){return t&&eI(e.prototype,t),r&&eI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.dataBase="",this.server="",j.extend(this,t)});function rI(e){"@babel/helpers - typeof";return(rI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oI(e,t){return(oI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=aI(e);if(t){var o=aI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===rI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function aI(e){return(aI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oI(e,t)}(i,SL);var t,r,n,o=iI(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).iportalUrl=e,t}return t=i,(r=[{key:"deleteResources",value:function(e){var t=e.resourceType.replace("_","").toLowerCase(),r=this.iportalUrl+"/web/"+t+"s.json?ids="+encodeURI(JSON.stringify(e.ids));return"data"===t?(r=this.iportalUrl+"/web/mycontent/datas/delete.json",this.request("POST",r,JSON.stringify(e.ids))):this.request("DELETE",r)}},{key:"addMap",value:function(e){if(!(e instanceof zL))return this.getErrMsgPromise("addMapParams is not instanceof IPortalAddResourceParam !");var t={rootUrl:e.rootUrl,tags:e.tags,authorizeSetting:e.entities},r=this.iportalUrl+"/web/maps/batchaddmaps.json";return this.request("POST",r,JSON.stringify(t)).then(function(e){return e})}},{key:"addScene",value:function(e){if(!(e instanceof zL))return this.getErrMsgPromise("addSceneParams is not instanceof IPortalAddResourceParam !");var t={rootUrl:e.rootUrl,tags:e.tags,authorizeSetting:e.entities},r=this.iportalUrl+"/web/scenes/batchaddscenes.json";return this.request("POST",r,JSON.stringify(t)).then(function(e){return e})}},{key:"registerService",value:function(e){if(!(e instanceof qL))return this.getErrMsgPromise("registerParams is not instanceof IPortalRegisterServiceParam !");var t={type:e.type,tags:e.tags,authorizeSetting:e.entities,metadata:e.metadata,addedMapNames:e.addedMapNames,addedSceneNames:e.addedSceneNames},r=this.iportalUrl+"/web/services.json";return this.request("POST",r,JSON.stringify(t)).then(function(e){return e})}},{key:"getErrMsgPromise",value:function(e){return new Promise(function(t){t(e)})}},{key:"uploadDataRequest",value:function(e,t){var r=this.iportalUrl+"/web/mycontent/datas/"+e+"/upload.json";return this.request("POST",r,t)}},{key:"addData",value:function(e,t){var r=this;if(!(e instanceof XL))return this.getErrMsgPromise("params is not instanceof iPortalAddDataParam !");var n,o=this.iportalUrl+"/web/mycontent/datas.json",i={fileName:e.fileName,tags:e.tags,type:e.type},a=e.type.toLowerCase();if("excel"===a||"csv"===a){if(!(e.dataMetaInfo instanceof ZL))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");n={xField:e.dataMetaInfo.xField,yField:e.dataMetaInfo.yField},"csv"===a&&(n.fileEncoding=e.dataMetaInfo.fileEncoding),i.coordType="WGS84",i.dataMetaInfo=n}else if("hdfs"===a||"hbase"===a){if(!(e.dataMetaInfo instanceof ZL))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");if(!(e.dataMetaInfo.dataStoreInfo instanceof $L))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo is not instanceof iPortalDataStoreInfoParam !");var s={type:e.dataMetaInfo.dataStoreInfo.type};switch(a){case"hdfs":s.url=e.dataMetaInfo.dataStoreInfo.url,n={url:e.dataMetaInfo.url,dataStoreInfo:s};break;case"hbase":if(!(e.dataMetaInfo.dataStoreInfo.connectionInfo instanceof tI))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo.connectionInfo is not instanceof iPortalDataConnectionInfoParam !");s.connectionInfo={dataBase:e.dataMetaInfo.dataStoreInfo.connectionInfo.dataBase,server:e.dataMetaInfo.dataStoreInfo.connectionInfo.server,engineType:"HBASE"},s.datastoreType="SPATIAL",n={dataStoreInfo:s}}i.dataMetaInfo=n}return this.request("POST",o,JSON.stringify(i)).then(function(e){return"hdfs"===a||"hbase"===a?e:e.childID?r.uploadDataRequest(e.childID,t):e.customResult})}},{key:"publishOrUnpublish",value:function(e,t){if(!e.dataId||!e.serviceType)return this.getErrMsgPromise("option.dataID and option.serviceType are Required!");var r=e.dataId,n=e.dataServiceId,o=e.serviceType,i=this.iportalUrl+"/web/mycontent/datas/"+r+"/publishstatus.json?serviceType="+o;return n&&(i+="&dataServiceId="+n),this.request("PUT",i,JSON.stringify(t)).then(function(e){return t?(n||(n=e.customResult),n):e})}},{key:"getDataPublishedStatus",value:function(e,t){var r=this.iportalUrl+"/web/mycontent/datas/"+e+"/publishstatus.json?dataServiceId="+t+"&forPublish=true";return this.request("GET",r)}},{key:"unPublishDataService",value:function(e){return this.publishOrUnpublish(e,!1)}},{key:"publishDataService",value:function(e){return this.publishOrUnpublish(e,!0)}}])&&nI(t.prototype,r),n&&nI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function lI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var uI=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.aggName=null,this.aggFieldName=null,this.CLASS_NAME="SuperMap.AggregationParameter",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.aggName=null,this.aggFieldName=null,this.aggType=null}}])&&lI(t.prototype,r),n&&lI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function cI(e){"@babel/helpers - typeof";return(cI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pI(e,t){return(pI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=dI(e);if(t){var o=dI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===cI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yI(e)}(this,r)}}function yI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dI(e){return(dI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pI(e,t)}(i,uI);var t,r,n,o=hI(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).subAggs=null,t.aggType=null,t.CLASS_NAME="SuperMap.BucketAggParameter",j.extend(yI(t),e),t}return t=i,(r=[{key:"destroy",value:function(){this.subAggs&&(this.subAggs=null)}}])&&fI(t.prototype,r),n&&fI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function vI(e){"@babel/helpers - typeof";return(vI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gI(){return(gI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_I(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function wI(e,t){return(wI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function OI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=_I(e);if(t){var o=_I(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===vI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return SI(e)}(this,r)}}function SI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _I(e){return(_I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var PI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wI(e,t)}(i,uI);var t,r,n,o=OI(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).aggType=sr.AVG,j.extend(SI(t),e),t.CLASS_NAME="SuperMap.MetricsAggParameter",t}return t=i,(r=[{key:"destroy",value:function(){gI(_I(i.prototype),"destroy",this).call(this);this.aggType=null}}])&&mI(t.prototype,r),n&&mI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function xI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var EI=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=!0,this.isExactClip=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ClipParameter"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.clipDatasetName=null,e.clipDatasourceName=null,e.clipRegion=null,e.isClipInRegion=null,e.isExactClip=null}},{key:"toJSON",value:function(){return j.toJSON({isClipInRegion:this.isClipInRegion,clipDatasetName:this.clipDatasetName,clipDatasourceName:this.clipDatasourceName,isExactClip:this.isExactClip,clipRegion:cr.fromGeometry(this.clipRegion)})}}])&&xI(t.prototype,r),n&&xI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function kI(e){"@babel/helpers - typeof";return(kI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function CI(){return(CI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=LI(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function TI(e,t){return(TI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function RI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=LI(e);if(t){var o=LI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===kI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return AI(e)}(this,r)}}function AI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LI(e){return(LI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var II=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TI(e,t)}(i,bI);var t,r,n,o=RI(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).precision=5,j.extend(AI(t),e),t.aggType=ar.GEOHASH_GRID,t.CLASS_NAME="SuperMap.GeoHashGridAggParameter",t}return t=i,n=[{key:"toJsonParameters",value:function(e){var t={aggName:e.aggName,aggFieldName:e.aggFieldName,aggType:e.aggType,precision:e.precision};return j.toJson(t)}}],(r=[{key:"destroy",value:function(){CI(LI(i.prototype),"destroy",this).call(this),this.aggType=null,this.precision=null}}])&&jI(t.prototype,r),n&&jI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function MI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var NI=function(e,t,r){return t&&MI(e.prototype,t),r&&MI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="LabelMatrixCell"});function DI(e){"@babel/helpers - typeof";return(DI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function BI(e,t){return(BI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function GI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=JI(e);if(t){var o=JI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===DI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return UI(e)}(this,r)}}function UI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JI(e){return(JI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var VI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BI(e,t)}(i,NI);var t,r,n,o=GI(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).height=0,t.pathField=null,t.rotation=0,t.width=0,t.sizeFixed=!1,t.type="IMAGE",e&&j.extend(UI(t),e),t.CLASS_NAME="SuperMap.LabelImageCell",t}return t=i,(r=[{key:"destroy",value:function(){var e=this;e.height=null,e.pathField=null,e.rotation=null,e.width=null,e.sizeFixed=null}}])&&FI(t.prototype,r),n&&FI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function HI(e){"@babel/helpers - typeof";return(HI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function WI(e,t){return(WI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=XI(e);if(t){var o=XI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===HI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return YI(e)}(this,r)}}function YI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XI(e){return(XI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var QI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WI(e,t)}(i,NI);var t,r,n,o=qI(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).style=new ut,t.symbolIDField=null,t.type="SYMBOL",e&&j.extend(YI(t),e),t.CLASS_NAME="SuperMap.LabelSymbolCell",t}return t=i,(r=[{key:"destroy",value:function(){this.style&&(this.style.destroy(),this.style=null),this.symbolIDField=null}}])&&zI(t.prototype,r),n&&zI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ZI(e){"@babel/helpers - typeof";return(ZI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $I(e,t){return($I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=rM(e);if(t){var o=rM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ZI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return tM(e)}(this,r)}}function tM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rM(e){return(rM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$I(e,t)}(i,NI);var t,r,n,o=eM(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).themeLabel=new Sb,t.type="THEME",e&&j.extend(tM(t),e),t.CLASS_NAME=" SuperMap.LabelThemeCell",t}return t=i,(r=[{key:"destroy",value:function(){this.themeLabel&&(this.themeLabel.destroy(),this.themeLabel=null)}}])&&KI(t.prototype,r),n&&KI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function oM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var iM=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerName=null,this.isVisible=null,this.displayFilter=null,this.fieldValuesDisplayFilter=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.LayerStatus"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.layerName=null,this.isVisible=null,this.displayFilter=null}},{key:"toJSON",value:function(){var e="{";e+='"type":"UGC",';var t=[];return this.layerName&&(t.push('"name":"'+this.layerName+'"'),t.push('"visible":'+this.isVisible)),this.displayFilter&&t.push('"displayFilter":"'+this.displayFilter+'"'),(this.minScale||0==this.minScale)&&t.push('"minScale":'+this.minScale),(this.maxScale||0==this.maxScale)&&t.push('"maxScale":'+this.maxScale),this.fieldValuesDisplayFilter&&t.push('"fieldValuesDisplayFilter":'+j.toJSON(this.fieldValuesDisplayFilter)),e+=t,e+="}"}}])&&oM(t.prototype,r),n&&oM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function aM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var sM=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasourceConnectionInfo=null,this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.LinkItem"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.datasourceConnectionInfo instanceof x_&&(e.datasourceConnectionInfo.destroy(),e.datasourceConnectionInfo=null),e.foreignKeys=null,e.foreignTable=null,e.linkFields=null,e.linkFilter=null,e.name=null,e.primaryKeys=null}}])&&aM(t.prototype,r),n&&aM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function lM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var uM=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.allowPointOverlap=!0,this.allowPointWithTextDisplay=!0,this.allowTextOverlap=!1,this.allowTextAndPointOverlap=!0,this.allowThemeGraduatedSymbolOverlap=!1,this.allowThemeGraphOverlap=!1,this.horizontalOverlappedSpaceSize=0,this.verticalOverlappedSpaceSize=0,j.extend(this,t),this.ugcLayer=new Ov(t),this.CLASS_NAME="SuperMap.OverlapDisplayedOptions"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){j.reset(this)}},{key:"fromJson",value:function(e){this.ugcLayer.fromJson.apply(this,[e])}},{key:"toServerJSONObject",value:function(){return this.ugcLayer.toServerJSONObject.apply(this,arguments)}},{key:"toString",value:function(){var e=this.ugcLayer.toServerJSONObject.apply(this,arguments),t="{";for(var r in e)e.hasOwnProperty(r)&&(t+="'"+r+"':"+e[r]+",");return t=t.substr(0,t.length-1),t+="}"}}])&&lM(t.prototype,r),n&&lM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function cM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var fM=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.resourceID=null,this.tempLayerName=null,this.layerInfo=null,j.extend(this,t),this.CLASS_NAME="SuperMap.SetLayerInfoParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.resourceID=null,this.tempLayerName=null,this.layerInfo=null}}])&&cM(t.prototype,r),n&&cM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var hM=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.isTempLayers=null,this.resourceID=null,this.layersInfo=null,j.extend(this,t),this.CLASS_NAME="SuperMap.SetLayersInfoParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.isTempLayers=null,this.resourceID=null,this.layersInfo=null}}])&&pM(t.prototype,r),n&&pM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function yM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var dM=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.SupplyCenter"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({maxWeight:t.maxWeight,nodeID:t.nodeID,resourceValue:t.resourceValue,type:t.type})}}],(r=[{key:"destroy",value:function(){this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null}}])&&yM(t.prototype,r),n&&yM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function bM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var vM=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.flowEnabled=!1,this.leaderLineDisplayed=!1,this.leaderLineStyle=new ut,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeFlow"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r.leaderLineStyle=ut.fromJson(t.leaderLineStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.flowEnabled=null,e.leaderLineDisplayed=null,e.leaderLineStyle&&(e.leaderLineStyle.destroy(),e.leaderLineStyle=null)}}])&&bM(t.prototype,r),n&&bM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function mM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var gM=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.color=new st,this.end=0,this.start=0,this.visible=!0,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridRangeItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r.color=st.fromJson(t.color),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.color&&(e.color.destroy(),e.color=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=j.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}])&&mM(t.prototype,r),n&&mM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function wM(e){"@babel/helpers - typeof";return(wM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function SM(){return(SM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=EM(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function _M(e,t){return(_M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function PM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=EM(e);if(t){var o=EM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===wM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xM(e)}(this,r)}}function xM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EM(e){return(EM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_M(e,t)}(i,Kd);var t,r,n,o=PM(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"GRIDRANGE",e)).items=null,t.rangeMode=Nt.EQUALINTERVAL,t.rangeParameter=0,t.colorGradientType=Dt.YELLOW_RED,t.reverseColor=!1,e&&j.extend(xM(t),e),t.CLASS_NAME="SuperMap.ThemeGridRange",t}return t=i,n=[{key:"fromObj",value:function(e){if(e){var t=new i;j.copy(t,e);var r=e.items,n=r?r.length:0;t.items=[];for(var o=0;o<n;o++)t.items.push(gM.fromObj(r[o]));return t}}}],(r=[{key:"destroy",value:function(){SM(EM(i.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.reverseColor=null,e.rangeMode=null,e.rangeParameter=null,e.colorGradientType=null}}])&&OM(t.prototype,r),n&&OM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function jM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var CM=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.color=new st,this.unique=null,this.visible=!0,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridUniqueItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return j.copy(r,t),r.color=st.fromJson(t.color),r}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.unique=null,e.color&&(e.color.destroy(),e.color=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=j.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}])&&jM(t.prototype,r),n&&jM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function TM(e){"@babel/helpers - typeof";return(TM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function AM(){return(AM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=NM(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function LM(e,t){return(LM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function IM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=NM(e);if(t){var o=NM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===TM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return MM(e)}(this,r)}}function MM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NM(e){return(NM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var DM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LM(e,t)}(i,Kd);var t,r,n,o=IM(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"GRIDUNIQUE",e)).defaultcolor=new st,t.items=null,e&&j.extend(MM(t),e),t.CLASS_NAME="SuperMap.ThemeGridUnique",t}return t=i,n=[{key:"fromObj",value:function(e){var t=new i,r=e.items,n=r?r.length:0;j.extend(t,e),t.items=[],t.defaultcolor=st.fromJson(e.defaultcolor);for(var o=0;o<n;o++)t.items.push(CM.fromObj(r[o]));return t}}],(r=[{key:"destroy",value:function(){AM(NM(i.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.defaultcolor&&(e.defaultcolor.destroy(),e.defaultcolor=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=j.copyAttributes(e,this)).defaultcolor&&e.defaultcolor.toServerJSONObject&&(e.defaultcolor=e.defaultcolor.toServerJSONObject()),e.items){for(var t=[],r=e.items.length,n=0;n<r;n++)t.push(e.items[n].toServerJSONObject());e.items=t}return e}}])&&RM(t.prototype,r),n&&RM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function FM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var BM=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.unique=null,this.offsetX=0,this.offsetY=0,this.visible=!0,this.style=new eb,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelUniqueItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.unique=null,e.caption=null,e.offsetX=null,e.offsetY=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}}])&&FM(t.prototype,r),n&&FM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function GM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var UM=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.srcData=t,this.targetData=r,this.CLASS_NAME="SuperMap.ThemeMemoryData"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.srcData=null,this.targetData=null}},{key:"toJSON",value:function(){if(this.srcData&&this.targetData){for(var e="",t=Math.min(this.srcData.length,this.targetData.length),r=0;r<t;r++)e+="'"+this.srcData[r]+"':'"+this.targetData[r]+"',";return r>0&&(e=e.substring(0,e.length-1)),"{"+e+"}"}return null}}])&&GM(t.prototype,r),n&&GM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function JM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var VM=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.lineID=null,this.lineName=null,this.lineAliasName=null,this.startStopIndex=null,this.startStopName=null,this.startStopAliasName=null,this.endStopIndex=null,this.endStopName=null,this.endStopAliasName=null,j.extend(this,t),this.CLASS_NAME="SuperMap.TransferLine"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({lineID:t.lineID,lineName:t.lineName,lineAliasName:t.lineAliasName,startStopIndex:t.startStopIndex,startStopName:t.startStopName,startStopAliasName:t.startStopAliasName,endStopIndex:t.endStopIndex,endStopName:t.endStopName,endStopAliasName:t.endStopAliasName})}}],(r=[{key:"destroy",value:function(){j.reset(this)}}])&&JM(t.prototype,r),n&&JM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function HM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var zM=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type=null,j.extend(this,t),this.CLASS_NAME="SuperMap.RasterFunctionParameter"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.type=null}}])&&HM(t.prototype,r),n&&HM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function WM(e){"@babel/helpers - typeof";return(WM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function YM(){return(YM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=KM(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function XM(e,t){return(XM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function QM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=KM(e);if(t){var o=KM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===WM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ZM(e)}(this,r)}}function ZM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KM(e){return(KM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XM(e,t)}(i,zM);var t,r,n,o=QM(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).redIndex=0,t.nirIndex=1,t.colorMap="0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff",t.type=lr.NDVI,j.extend(ZM(t),e),t.CLASS_NAME="SuperMap.NDVIParameter",t}return t=i,(r=[{key:"destroy",value:function(){YM(KM(i.prototype),"destroy",this).call(this),this.redIndex=null,this.nirIndex=null,this.colorMap=null}},{key:"toJSON",value:function(){return{redIndex:this.redIndex,nirIndex:this.nirIndex,colorMap:this.colorMap,type:this.type}}}])&&qM(t.prototype,r),n&&qM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function eN(e){"@babel/helpers - typeof";return(eN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rN(){return(rN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=aN(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function nN(e,t){return(nN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=aN(e);if(t){var o=aN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===eN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return iN(e)}(this,r)}}function iN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aN(e){return(aN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nN(e,t)}(i,zM);var t,r,n,o=oN(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).altitude=45,t.azimuth=315,t.zFactor=1,t.type=lr.HILLSHADE,j.extend(iN(t),e),t.CLASS_NAME="SuperMap.HillshadeParameter",t}return t=i,(r=[{key:"destroy",value:function(){rN(aN(i.prototype),"destroy",this).call(this),this.altitude=null,this.azimuth=null,this.zFactor=null}},{key:"toJSON",value:function(){return{altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,type:this.type}}}])&&tN(t.prototype,r),n&&tN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function lN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var uN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobCustomItems",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.name=null,this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={name:this.name};return this.title&&(e.title=this.title),this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),j.toJSON(e)}}])&&lN(t.prototype,r),n&&lN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function cN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var fN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobImage",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={};return this.picAsUrl&&(e.picAsUrl=this.picAsUrl),this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),j.toJSON(e)}}])&&cN(t.prototype,r),n&&cN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var hN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.layerType=null,this.url=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayers",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.name=null,this.layerType=null,this.url=null}}])&&pN(t.prototype,r),n&&pN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function yN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var dN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers=null,this.customItems=null,this.CLASS_NAME="SuperMap.WebPrintingJobLegendOptions",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers instanceof hN&&(this.layers.destroy(),this.layers=null),this.customItems instanceof uN&&(this.customItems.destroy(),this.customItems=null)}},{key:"toJSON",value:function(){var e={title:this.title||""};return this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64?e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,""):this.customItems&&(e.customItems=this.customItems),j.toJSON(e)}}])&&yN(t.prototype,r),n&&yN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function bN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var vN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.center=null,this.scale=null,this.layerNames=null,this.image=null,this.layers=null,this.CLASS_NAME="SuperMap.WebPrintingJobLittleMapOptions",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.center=null,this.scale=null,this.layerNames=null,this.image instanceof fN&&(this.image.destroy(),this.image=null),this.layers instanceof hN&&(this.layers.destroy(),this.layers=null)}},{key:"toJSON",value:function(){var e={scale:this.scale,center:this.center};return this.layerNames?e.layerNames=this.layerNames:this.layers&&(e.layers=this.layers),this.image&&(e.image=this.image),j.toJSON(e)}}])&&bN(t.prototype,r),n&&bN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function mN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var gN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobNorthArrowOptions",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={};return this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),j.toJSON(e)}}])&&mN(t.prototype,r),n&&mN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function wN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ON=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null,this.CLASS_NAME="SuperMap.WebPrintingJobScaleBarOptions",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null}},{key:"toJSON",value:function(){var e={scaleText:this.scaleText||"",type:this.type||"BAR",intervals:this.intervals||"",unit:this.unit||"METER"};return this.orientation&&(e.orientation=this.orientation),j.toJSON(e)}}])&&wN(t.prototype,r),n&&wN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function SN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var _N=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=null,this.url=null,this.token=null,this.value=null,this.CLASS_NAME="SuperMap.WebPrintingJobContent",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.type="WEBMAP",this.url=null,this.token=null,this.value=null}},{key:"toJSON",value:function(){var e={type:this.type};return this.token&&(e.token=this.token),this.url?e.url=this.url:this.value&&(e.value=this.value),j.toJSON(e)}}])&&SN(t.prototype,r),n&&SN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function PN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var xN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.scaleBarOptions=null,this.northArrowOptions=null,this.littleMapOptions=null,this.legendOptions=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayoutOptions",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.scaleBarOptions instanceof ON&&(this.scaleBarOptions.destroy(),this.scaleBarOptions=null),this.northArrowOptions instanceof gN&&(this.northArrowOptions.destroy(),this.northArrowOptions=null),this.littleMapOptions instanceof vN&&(this.littleMapOptions.destroy(),this.littleMapOptions=null),this.legendOptions instanceof dN&&(this.legendOptions.destroy(),this.legendOptions=null)}},{key:"toJSON",value:function(){var e={templateName:this.templateName,title:this.title,subTitle:this.subTitle,author:this.author,copyright:this.copyright};return this.scaleBarOptions&&(e.scaleBarOptions=this.scaleBarOptions),this.northArrowOptions&&(e.northArrowOptions=this.northArrowOptions),this.littleMapOptions&&(e.littleMapOptions=this.littleMapOptions),this.legendOptions&&(e.legendOptions=this.legendOptions),j.toJSON(e)}}])&&PN(t.prototype,r),n&&PN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function EN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var kN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.format=null,this.dpi=96,this.scale=null,this.rotation=null,this.center=null,this.CLASS_NAME="SuperMap.WebPrintingJobExportOptions",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.format=null,this.dpi=null,this.scale=null,this.rotation=null,this.center=null,this.outputSize=null}},{key:"toJSON",value:function(){var e={format:this.format||"PDF",dpi:this.dpi,scale:this.scale,center:this.center};return this.rotation&&(e.rotation=this.rotation),this.outputSize&&(e.outputSize=this.outputSize),j.toJSON(e)}}])&&EN(t.prototype,r),n&&EN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function jN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var CN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.content=null,this.layoutOptions=null,this.exportOptions=null,j.extend(this,t),this.CLASS_NAME="SuperMap.WebPrintingJobParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.content instanceof _N&&(this.content.destroy(),this.content=null),this.layoutOptions instanceof xN&&(this.layoutOptions.destroy(),this.layoutOptions=null),this.exportOptions instanceof kN&&(this.exportOptions.destroy(),this.exportOptions=null)}}])&&jN(t.prototype,r),n&&jN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function TN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var RN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.include=void 0,this.exclude=void 0,this.CLASS_NAME="SuperMap.FieldsFilter",j.extend(this,t)}var t,r,n;return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("include")&&(r.include=t.include),t.hasOwnProperty("exclude")&&(r.exclude=t.exclude)),r}}],(r=[{key:"destroy",value:function(){this.include=void 0,this.exclude=void 0}}])&&TN(t.prototype,r),n&&TN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function AN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var LN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.field=void 0,this.direction=e.Direction.ASC,this.CLASS_NAME="SuperMap.Sortby",j.extend(this,t)}var t,r,n;return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("field")&&(r.field=t.field),t.hasOwnProperty("direction")&&(r.direction=t.direction)),r}}],(r=[{key:"destroy",value:function(){this.field=void 0,this.direction="ASC"}}])&&AN(t.prototype,r),n&&AN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function IN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}LN.Direction={ASC:"ASC",DESC:"DESC"};var MN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bbox=void 0,this.collections=void 0,this.ids=void 0,this.limit=void 0,this.fields=void 0,this.query=void 0,this.sortby=void 0,this.CLASS_NAME="SuperMap.ImageSearchParameter",j.extend(this,t)}var t,r,n;return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("bbox")&&(r.bbox=t.bbox),t.hasOwnProperty("collections")&&(r.collections=t.collections),t.hasOwnProperty("ids")&&(r.ids=t.ids),t.hasOwnProperty("limit")&&(r.limit=t.limit),t.hasOwnProperty("fields")&&(r.fields=RN.constructFromObject&&RN.constructFromObject(t.fields,{})||t.fields),t.hasOwnProperty("query")&&(r.query=t.query),t.hasOwnProperty("sortby")&&(r.sortby=t.sortby,t.sortby&&(r.sortby=t.sortby.map(function(e){return LN.constructFromObject&&LN.constructFromObject(e,{})||e})))),r}}],(r=[{key:"destroy",value:function(){var e=this;e.bbox=void 0,e.collections=void 0,e.ids=void 0,e.limit=void 0,e.fields=void 0,e.query=void 0,e.sortby=void 0}}])&&IN(t.prototype,r),n&&IN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function NN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var DN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stretchType=void 0,this.stdevCoefficient=void 0,this.gaussianCoefficient=void 0,this.useMedianValue=void 0,this.minPercent=void 0,this.maxPercent=void 0,this.CLASS_NAME="SuperMap.ImageStretchOption",j.extend(this,t)}var t,r,n;return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("stretchType")&&(r.stretchType=t.stretchType),t.hasOwnProperty("stdevCoefficient")&&(r.stdevCoefficient=t.stdevCoefficient),t.hasOwnProperty("gaussianCoefficient")&&(r.gaussianCoefficient=t.gaussianCoefficient),t.hasOwnProperty("useMedianValue")&&(r.useMedianValue=t.useMedianValue),t.hasOwnProperty("minPercent")&&(r.minPercent=t.minPercent),t.hasOwnProperty("maxPercent")&&(r.maxPercent=t.maxPercent)),r}}],(r=[{key:"destroy",value:function(){var e=this;e.stretchType=void 0,e.stdevCoefficient=void 0,e.gaussianCoefficient=void 0,e.useMedianValue=void 0,e.minPercent=void 0,e.maxPercent=void 0}}])&&NN(t.prototype,r),n&&NN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function FN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}DN.StretchType={NONE:"NONE",GAUSSIAN:"GAUSSIAN",PERCENTCLIP:"PERCENTCLIP",MINIMUMMAXIMUM:"MINIMUMMAXIMUM",STANDARDDEVIATION:"STANDARDDEVIATION"};var BN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.displayMode=void 0,this.displayBands=void 0,this.stretchOption=void 0,this.interpolationMode=void 0,this.colorScheme=void 0,this.colorTable=void 0,this.brightness=void 0,this.contrast=void 0,this.noData=void 0,this.noDataColor=void 0,this.noDataTransparent=void 0,this.backgroundValue=void 0,this.backgroundColor=void 0,this.backgroundTransparent=void 0,this.gridFunctions=void 0,this.CLASS_NAME="SuperMap.ImageRenderingRule",j.extend(this,t)}var t,r,n;return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("displayMode")&&(r.displayMode=t.displayMode),t.hasOwnProperty("displayBands")&&(r.displayBands=t.displayBands),t.hasOwnProperty("stretchOption")&&(r.stretchOption=DN.constructFromObject&&DN.constructFromObject(t.stretchOption,{})||t.stretchOption),t.hasOwnProperty("interpolationMode")&&(r.interpolationMode=t.interpolationMode),t.hasOwnProperty("colorScheme")&&(r.colorScheme=t.colorScheme),t.hasOwnProperty("colorTable")&&(r.colorTable=t.colorTable),t.hasOwnProperty("brightness")&&(r.brightness=t.brightness),t.hasOwnProperty("contrast")&&(r.contrast=t.contrast),t.hasOwnProperty("noData")&&(r.noData=t.noData),t.hasOwnProperty("noDataColor")&&(r.noDataColor=t.noDataColor),t.hasOwnProperty("backgroundValue")&&(r.backgroundValue=t.backgroundValue),t.hasOwnProperty("noDataTransparent")&&(r.noDataTransparent=t.noDataTransparent),t.hasOwnProperty("backgroundColor")&&(r.backgroundColor=t.backgroundColor),t.hasOwnProperty("backgroundTransparent")&&(r.backgroundTransparent=t.backgroundTransparent),t.hasOwnProperty("gridFunctions")&&(r.gridFunctions=t.gridFunctions)),r}}],(r=[{key:"destroy",value:function(){var e=this;e.displayMode=void 0,e.displayBands=void 0,e.stretchOption=void 0,e.interpolationMode=void 0,e.colorScheme=void 0,e.colorTable=void 0,e.brightness=void 0,e.contrast=void 0,e.noData=void 0,e.noDataColor=void 0,e.noDataTransparent=void 0,e.backgroundValue=void 0,e.backgroundColor=void 0,e.backgroundTransparent=void 0,e.gridFuncOptions=void 0}}])&&FN(t.prototype,r),n&&FN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function GN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}BN.DisplayMode={COMPOSITE:"COMPOSITE",STRETCHED:"Stretched"},BN.InterpolationMode={NEARESTNEIGHBOR:"NEARESTNEIGHBOR",HIGHQUALITYBILINEAR:"HIGHQUALITYBILINEAR",DEFAULT:"DEFAULT"};var UN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFHillShade",j.extend(this,t)}var t,r,n;return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("girdFuncName")&&(r.girdFuncName=t.girdFuncName),t.hasOwnProperty("Azimuth")&&(r.Azimuth=t.Azimuth),t.hasOwnProperty("Altitude")&&(r.Altitude=t.Altitude),t.hasOwnProperty("ZFactor")&&(r.ZFactor=t.ZFactor)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1}}])&&GN(t.prototype,r),n&&GN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function JN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var VN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.girdFuncName="GFAspect",this.Azimuth=void 0,this.CLASS_NAME="SuperMap.ImageGFAspect",j.extend(this,t)}var t,r,n;return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("girdFuncName")&&(r.girdFuncName=t.girdFuncName),t.hasOwnProperty("Azimuth")&&(r.Azimuth=t.Azimuth)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFAspect",this.Azimuth=void 0}}])&&JN(t.prototype,r),n&&JN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function HN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var zN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.girdFuncName="GFOrtho",this.CLASS_NAME="SuperMap.ImageGFOrtho",j.extend(this,t)}var t,r,n;return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("girdFuncName")&&(r.girdFuncName=t.girdFuncName)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFOrtho"}}])&&HN(t.prototype,r),n&&HN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function WN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var qN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFSlope",j.extend(this,t)}var t,r,n;return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("girdFuncName")&&(r.girdFuncName=t.girdFuncName),t.hasOwnProperty("Altitude")&&(r.Altitude=t.Altitude),t.hasOwnProperty("ZFactor")&&(r.ZFactor=t.ZFactor)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1}}])&&WN(t.prototype,r),n&&WN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function YN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var XN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},j.extend(this,t),this.CLASS_NAME="SuperMap.OnlineServiceBase"}var t,r,n;return t=e,(r=[{key:"request",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t=lf.appendCredential(t),n.crossOrigin=this.options.crossOrigin,n.headers=this.options.headers,fu.commit(e,t,r,n).then(function(e){return e.json()})}}])&&YN(t.prototype,r),n&&YN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function QN(e){"@babel/helpers - typeof";return(QN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function KN(e,t){return(KN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=tD(e);if(t){var o=tD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===QN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return eD(e)}(this,r)}}function eD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tD(e){return(tD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KN(e,t)}(i,XN);var t,r,n,o=$N(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e),t=t||{},r.MD5=null,r.type=null,r.userName=null,r.fileName=null,r.size=null,r.serviceStatus=null,r.serviceId=null,r.id=null,r.lastModfiedTime=null,r.status=null,r.storageId=null,r.publishInfo=null,r.authorizeSetting=null,r.nickname=null,r.tags=[],r.description=null,r.dataItemServices=null,r.coordType=null,r.dataCheckResult=null,r.dataMetaInfo=null,r.thumbnail=null,j.extend(eD(r),t),r.id&&(r.serviceUrl=e+"/"+r.id),r.CLASS_NAME="SuperMap.OnlineData",r}return t=i,(r=[{key:"load",value:function(){if(this.serviceUrl){var e=this;return e.request("GET",this.serviceUrl).then(function(t){j.extend(e,t)})}}},{key:"getPublishedServices",value:function(){return this.dataItemServices}},{key:"getAuthorizeSetting",value:function(){return this.authorizeSetting}}])&&ZN(t.prototype,r),n&&ZN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function nD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var oD=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootUrl="https://www.supermapol.com",this.webUrl=this.rootUrl+"/web";var t=this.webUrl+"/mycontent";this.mDatasUrl=t+"/datas",this.CLASS_NAME="SuperMap.Online"}var t,r,n;return t=e,(r=[{key:"load",value:function(){return fu.get(this.rootUrl).then(function(e){return e})}},{key:"login",value:function(){lf.loginOnline(this.rootUrl,!0)}},{key:"queryDatas",value:function(e){var t=this,r=t.mDatasUrl;return e&&(e=e.toJSON()),fu.get(r,e).then(function(e){if(e&&e.content&&!(e.content.length<1)){for(var r=[],n=e.content,o=n.length,i=0;i<o;i++){var a=n[i],s=new rD(t.mDatasUrl,a);r.push(s)}return r}})}}])&&nD(t.prototype,r),n&&nD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function iD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var aD=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.userNames=null,this.types=null,this.fileName=null,this.serviceStatuses=null,this.serviceId=null,this.ids=null,this.keywords=null,this.orderBy=null,this.tags=null,this.filterFields=null,j.extend(this,t),this.CLASS_NAME="SuperMap.OnlineQueryDatasParameter"}var t,r,n;return t=e,(r=[{key:"toJSON",value:function(){var e=this,t={types:e.types,fileName:e.fileName,serviceStatuses:e.serviceStatuses,serviceId:e.serviceId,ids:e.ids,keywords:e.keywords,orderBy:e.orderBy,tags:e.tags,filterFields:e.filterFields};for(var r in t)null==t[r]&&delete t[r];return t}}])&&iD(t.prototype,r),n&&iD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function sD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var lD=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.serviceIds=null,this.clientType=$t.SERVER,this.limitation=null,j.extend(this,t),this.CLASS_NAME="SuperMap.KeyServiceParameter"}var t,r,n;return t=e,(r=[{key:"toJSON",value:function(){return{name:this.name,serviceIds:this.serviceIds,clientType:this.clientType,limitation:this.limitation}}}])&&sD(t.prototype,r),n&&sD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function uD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var cD=function(e,t,r){return t&&uD(e.prototype,t),r&&uD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.server=null,this.tokenServiceUrl=null,this.keyServiceUrl=null,j.extend(this,r),this.CLASS_NAME="SuperMap.ServerInfo",this.type=this.type||xt.ISERVER,this.server||console.error("server url require is not  undefined");var n="/services/security/tokens";this.type===xt.ISERVER&&this.server.indexOf("iserver")<0&&(n="/iserver"+n),this.tokenServiceUrl||(this.tokenServiceUrl=j.urlPathAppend(this.server,n)),this.keyServiceUrl||(this.type===xt.IPORTAL?this.keyServiceUrl=j.urlPathAppend(this.server,"/web/mycontent/keys/register"):this.type===xt.ONLINE&&(this.keyServiceUrl=j.urlPathAppend(this.server,"/web/mycontent/keys")))});function fD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var pD=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userName=null,this.password=null,this.clientType=$t.NONE,this.ip=null,this.referer=null,this.expiration=60,j.extend(this,t),this.CLASS_NAME="SuperMap.TokenServiceParameter"}var t,r,n;return t=e,(r=[{key:"toJSON",value:function(){return{userName:this.userName,password:this.password,clientType:this.clientType,ip:this.ip,referer:this.referer,expiration:this.expiration}}}])&&fD(t.prototype,r),n&&fD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),hD=function(){try{return elasticsearch}catch(e){return{}}}(),yD=r.n(hD);function dD(e){return function(e){if(Array.isArray(e))return bD(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return bD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bD(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var mD=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=r||{},this.url=t;try{this.client=new(yD().Client)({host:this.url})}catch(e){this.client=new(yD().Client)({node:{url:new URL(this.url)}})}this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=new Mn(this,null,this.EVENT_TYPES),this.eventListeners=null,j.extend(this,r),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)}var t,r,n;return t=e,(r=[{key:"setGeoFence",value:function(e){this.geoFence=e}},{key:"bulk",value:function(e,t){return this.client.bulk(e,this._handleCallback(t))}},{key:"clearScroll",value:function(e,t){return this.client.clearScroll(e,this._handleCallback(t))}},{key:"count",value:function(e,t){return this.client.count(e,this._handleCallback(t))}},{key:"create",value:function(e,t){return this.client.create(e,this._handleCallback(t))}},{key:"delete",value:function(e,t){return this.client.delete(e,this._handleCallback(t))}},{key:"deleteByQuery",value:function(e,t){return this.client.deleteByQuery(e,this._handleCallback(t))}},{key:"deleteScript",value:function(e,t){return this.client.deleteScript(e,this._handleCallback(t))}},{key:"deleteTemplate",value:function(e,t){return this.client.deleteTemplate(e,this._handleCallback(t))}},{key:"exists",value:function(e,t){return this.client.exists(e,this._handleCallback(t))}},{key:"existsSource",value:function(e,t){return this.client.existsSource(e,this._handleCallback(t))}},{key:"explain",value:function(e,t){return this.client.explain(e,this._handleCallback(t))}},{key:"fieldCaps",value:function(e,t){return this.client.fieldCaps(e,this._handleCallback(t))}},{key:"get",value:function(e,t){return this.client.get(e,this._handleCallback(t))}},{key:"getScript",value:function(e,t){return this.client.getScript(e,this._handleCallback(t))}},{key:"getSource",value:function(e,t){return this.client.getSource(e,this._handleCallback(t))}},{key:"getTemplate",value:function(e,t){return this.client.getTemplate(e,this._handleCallback(t))}},{key:"index",value:function(e,t){return this.client.index(e,this._handleCallback(t))}},{key:"info",value:function(e,t){return this.client.info(e,this._handleCallback(t))}},{key:"mget",value:function(e,t){return this.client.mget(e,this._handleCallback(t))}},{key:"msearch",value:function(e,t){var r=this;return r.client.msearch(e).then(function(e){return e=e.body||e,r._update(e.responses,t),e},function(e){return t(e),r.events.triggerEvent("error",{error:e}),e})}},{key:"msearchTemplate",value:function(e,t){return this.client.msearchTemplate(e,this._handleCallback(t))}},{key:"mtermvectors",value:function(e,t){return this.client.mtermvectors(e,this._handleCallback(t))}},{key:"ping",value:function(e,t){return this.client.ping(e,this._handleCallback(t))}},{key:"putScript",value:function(e,t){return this.client.putScript(e,this._handleCallback(t))}},{key:"putTemplate",value:function(e,t){return this.client.putTemplate(e,this._handleCallback(t))}},{key:"reindex",value:function(e,t){return this.client.reindex(e,this._handleCallback(t))}},{key:"reindexRessrottle",value:function(e,t){return this.client.reindexRessrottle(e,this._handleCallback(t))}},{key:"renderSearchTemplate",value:function(e,t){return this.client.renderSearchTemplate(e,this._handleCallback(t))}},{key:"scroll",value:function(e,t){return this.client.scroll(e,this._handleCallback(t))}},{key:"search",value:function(e,t){var r=this;return r.client.search(e).then(function(e){return e=e.body||e,r._update(e,t),e},function(e){return t&&t(e),r.events.triggerEvent("error",{error:e}),e})}},{key:"searchShards",value:function(e,t){return this.client.searchShards(e,this._handleCallback(t))}},{key:"searchTemplate",value:function(e,t){return this.client.searchTemplate(e,this._handleCallback(t))}},{key:"suggest",value:function(e,t){return this.client.suggest(e,this._handleCallback(t))}},{key:"termvectors",value:function(e,t){return this.client.termvectors(e,this._handleCallback(t))}},{key:"update",value:function(e,t){return this.client.update(e,this._handleCallback(t))}},{key:"updateByQuery",value:function(e,t){return this.client.updateByQuery(e,this._handleCallback(t))}},{key:"_handleCallback",value:function(e){return function(){var t=Array.from(arguments),r=t.shift(),n=t.shift(),o=n&&n.body;if(o){var i=n;t=[i.statusCode,i.headers],n=o}e.call.apply(e,[this,r,n].concat(dD(t)))}}},{key:"_update",value:function(e,t){var r=this;e&&(r.data=e,r.openGeoFence&&r.geoFence&&r._validateDatas(e),r.events.triggerEvent("change",{data:r.data}),r.change?r.change&&r.change(e):t&&t(void 0,{responses:e}))}},{key:"_validateDatas",value:function(e){if(e){e instanceof Array||(e=[e]);var t,r=e.length;for(t=0;t<r;t++)this._validateData(e[t])}}},{key:"_validateData",value:function(e){var t=this;e.hits.hits.map(function(r){var n=r._source,o=t._getMeterPerMapUnit(t.geoFence.unit),i=t.geoFence.center[0]*o,a=t.geoFence.center[1]*o,s=n.x*o,l=n.y*o;return t._distance(s,l,i,a)>t.geoFence.radius&&(t.outOfGeoFence&&t.outOfGeoFence(e),t.events.triggerEvent("outOfGeoFence",{data:e})),r})}},{key:"_distance",value:function(e,t,r,n){return Math.sqrt((e-r)*(e-r)+(t-n)*(t-n))}},{key:"_getMeterPerMapUnit",value:function(e){var t;return"meter"===e?t=1:"degree"===e&&(t=2*Math.PI*6378137/360),t}}])&&vD(t.prototype,r),n&&vD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function gD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var wD=new Hr,OD=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"createCanvas",value:function(e,t){var r=document.createElement("canvas");return r.height=e,r.width=t,r.getContext("2d")}},{key:"getLinearGradient",value:function(e,t,r,n,o){this._ctx||(this._ctx=this.getContext());for(var i=this._ctx.createLinearGradient(e,t,r,n),a=o.length,s=1/(a-1),l=0,u=0;u<a;u++)i.addColorStop(l,o[u]),l+=s;return i.__nonRecursion=!0,i}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getStepColors",value:function(e,t,r){e=wD.toRGBA(e),t=wD.toRGBA(t),e=wD.getData(e);for(var n=[],o=((t=wD.getData(t))[0]-e[0])/r,i=(t[1]-e[1])/r,a=(t[2]-e[2])/r,s=(t[3]-e[3])/r,l=0,u=e[0],c=e[1],f=e[2],p=e[3];l<r;l++)n[l]=wD.toColor([wD.adjust(Math.floor(u),[0,255]),wD.adjust(Math.floor(c),[0,255]),wD.adjust(Math.floor(f),[0,255]),p.toFixed(4)-0],"hex"),u+=o,c+=i,f+=a,p+=s;return u=t[0],c=t[1],f=t[2],p=t[3],n[l]=wD.toColor([u,c,f,p],"hex"),n}},{key:"getGradientColors",value:function(e,t,r){var n,o,i,a=[],s=e.length;if(void 0!==t){if(s>=t)if("RANGE"===r)for(o=0;o<t;o++)a.push(e[o]);else for(o=0;o<t;o++){var l=Math.floor(o/2);if(o%2==0)a.push(e[l]);else{var u=e.length-1-l;a.push(e[u])}}else{for(n=Math.ceil(t/(s-1)),o=0,i=s-1;o<i;o++){var c=this.getStepColors(e[o],e[o+1],n);o<i-1&&c.pop(),a=a.concat(c)}for(var f=a.length-t,p=0;p<f;p++)a.splice(2,1)}return a}}}],(r=null)&&gD(t.prototype,r),n&&gD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function SD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var _D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"newInstance",value:function(){return this.geostatsInstance||(this.geostatsInstance=new window.geostats),this.geostatsInstance}},{key:"getInstance",value:function(e){var t=this.newInstance();return t.setSerie(e),t}},{key:"getArrayStatistic",value:function(e,t){return e.length?"Sum"===t||"æ±å"===t?this.getSum(e):"Maximum"===t||"æå¤§å¼"===t?this.getMax(e):"Minimum"===t||"æå°å¼"===t?this.getMin(e):"Average"===t||"å¹³åå¼"===t?this.getMean(e):"Median"===t||"ä¸­ä½æ°"===t?this.getMedian(e):"times"===t||"è®¡æ°"===t?this.getTimes(e):void 0:0}},{key:"getArraySegments",value:function(e,t,r){return"offset"===t?this.getEqInterval(e,r):"jenks"===t?this.getJenks(e,r):"square"===t?this.getMin(e)>=0&&this.getSqrtInterval(e,r):"logarithm"===t?this.getMin(e)>0&&this.getGeometricProgression(e,r):void 0}},{key:"getSum",value:function(e){return this.getInstance(e).sum()}},{key:"getMax",value:function(e){return this.getInstance(e).max()}},{key:"getMin",value:function(e){return this.getInstance(e).min()}},{key:"getMean",value:function(e){return this.getInstance(e).mean()}},{key:"getMedian",value:function(e){return this.getInstance(e).median()}},{key:"getTimes",value:function(e){return e.length}},{key:"getEqInterval",value:function(e,t){return this.getInstance(e).getClassEqInterval(t)}},{key:"getJenks",value:function(e,t){return this.getInstance(e).getClassJenks(t)}},{key:"getSqrtInterval",value:function(e,t){return e=e.map(function(e){return Math.sqrt(e)}),this.getInstance(e).getClassEqInterval(t).map(function(e){return e*e})}},{key:"getGeometricProgression",value:function(e,t){return this.getInstance(e).getClassGeometricProgression(t)}}],(r=null)&&SD(t.prototype,r),n&&SD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),PD=r(820),xD=r.n(PD);function ED(e){"@babel/helpers - typeof";return(ED="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function CD(e,t,r){return t&&jD(e.prototype,t),r&&jD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var TD=function(){function e(t){kD(this,e),this.env=null,this.parser=null,this.ruleSet=null,this.cartoStr="",this.shaders=null,"string"==typeof t&&(this.cartoStr=t,this.env={frames:[],errors:[],error:function(e){this.errors.push(e)}},this.parser=this.getParser(this.env),this.parse(t),this.shaders=this.toShaders())}return CD(e,[{key:"getParser",value:function(t){var r,n,o,i,a,s,l,u,c,f=this;function p(){i=l[o],a=n,u=n}function h(){l[o]=i,u=n=a}function y(){n>u&&(l[o]=l[o].slice(n-u),u=n)}function d(e){var t,i,a,s;if(e instanceof Function)return e.call(c.parsers);if("string"==typeof e)t=r.charAt(n)===e?e:null,i=1,y();else{if(y(),!(t=e.exec(l[o])))return null;i=t[0].length}if(t){var f=n+=i;for(s=n+l[o].length-i;n<s&&(32===(a=r.charCodeAt(n))||10===a||9===a);)n++;return l[o]=l[o].slice(i+(n-f)),u=n,0===l[o].length&&o<l.length-1&&o++,"string"==typeof t?t:1===t.length?t[0]:t}}function b(e){var n,o={index:s,filename:t.filename,message:"Parse error.",line:0,column:-1};for(var i in o)0===e[i]&&(e[i]=o[i]);n=e.filename&&f.env.inputs&&f.env.inputs[e.filename]?f.env.inputs[e.filename]:r,e.line=(n.slice(0,e.index).match(/\n/g)||"").length+1;for(var a=e.index;a>=0&&"\n"!==n.charAt(a);a--)e.column++;return new Error([e.filename,e.line,e.column,e.message].join(";"))}return this.env=t=t||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},c={parse:function(i){var a,c=null;if(n=o=u=s=0,l=[],r=i.replace(/\r\n/g,"\n"),t.filename&&(f.env.inputs[t.filename]=r),l=function(e){for(var t,n,o,i,a=0,s=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,l=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,u=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,f=0,p=e[0],h=0;h<r.length;)if(s.lastIndex=h,(t=s.exec(r))&&t.index===h&&(h+=t[0].length,p.push(t[0])),o=r.charAt(h),l.lastIndex=u.lastIndex=h,(t=u.exec(r))&&t.index===h)h+=t[0].length,p.push(t[0]);else if(n||"/"!==o||"/"!==(i=r.charAt(h+1))&&"*"!==i||!(t=l.exec(r))||t.index!==h){switch(o){case"{":if(!n){f++,p.push(o);break}case"}":if(!n){f--,p.push(o),e[++a]=p=[];break}case"(":if(!n){n=!0,p.push(o);break}case")":if(n){n=!1,p.push(o);break}default:p.push(o)}h++}else h+=t[0].length,p.push(t[0]);return 0!==f&&(c={index:h-1,type:"Parse",message:f>0?"missing closing `}`":"missing opening `{`"}),e.map(function(e){return e.join("")})}([[]]),c)throw b(c);var p=function(e,t){var r=e.specificity,n=t.specificity;return r[0]!=n[0]?n[0]-r[0]:r[1]!=n[1]?n[1]-r[1]:r[2]!=n[2]?n[2]-r[2]:n[3]-r[3]};return(a=new e.Tree.Ruleset([],d(this.parsers.primary))).root=!0,a.toList=function(e){e.error=function(t){e.errors||(e.errors=new Error("")),e.errors.message?e.errors.message+="\n"+b(t).message:e.errors.message=b(t).message},e.frames=e.frames||[];var t=this.flatten([],[],e);return t.sort(p),t},a},parsers:{primary:function(){for(var e,t=[];(e=d(this.rule)||d(this.ruleset)||d(this.comment))||d(/^[\s\n]+/)||(e=d(this.invalid));)e&&t.push(e);return t},invalid:function(){var t=d(/^[^;\n]*[;\n]/);if(t)return new e.Tree.Invalid(t,a)},comment:function(){var t;if("/"===r.charAt(n))return"/"===r.charAt(n+1)?new e.Tree.Comment(d(/^\/\/.*/),!0):(t=d(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new e.Tree.Comment(t):void 0},entities:{quoted:function(){if('"'===r.charAt(n)||"'"===r.charAt(n)){var t=d(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return t?new e.Tree.Quoted(t[1]||t[2]):void 0}},field:function(){if(d("[")){var t=d(/(^[^\]]+)/);if(d("]"))return t?new e.Tree.Field(t[1]):void 0}},comparison:function(){var e=d(/^=~|=|!=|<=|>=|<|>/);if(e)return e},keyword:function(){var t=d(/^[A-Za-z\u4e00-\u9fa5-]+[A-Za-z-0-9\u4e00-\u9fa5_]*/);if(t)return new e.Tree.Keyword(t)},call:function(){var t,r;if(t=/^([\w\-]+|%)\(/.exec(l[o])){if("url"===(t=t[1]))return null;n+=t.length;if(d("("),r=d(this.entities.arguments),d(")"))return t?new e.Tree.Call(t,r,n):void 0}},arguments:function(){for(var e,t=[];e=d(this.expression);){t.push(e);if(!d(","))break}return t},literal:function(){return d(this.entities.dimension)||d(this.entities.keywordcolor)||d(this.entities.hexcolor)||d(this.entities.quoted)},url:function(){var t;if("u"===r.charAt(n)&&d(/^url\(/)){t=d(this.entities.quoted)||d(this.entities.variable)||d(/^[\-\w%@_match\/.&=:;#+?~]+/)||"";return d(")")?new e.Tree.URL(void 0!==t.value||t instanceof e.Tree.Variable?t:new e.Tree.Quoted(t)):new e.Tree.Invalid(t,a,"Missing closing ) in URL.")}},variable:function(){var o,i=n;if("@"===r.charAt(n)&&(o=d(/^@[\w-]+/)))return new e.Tree.Variable(o,i,t.filename)},hexcolor:function(){var t;if("#"===r.charAt(n)&&(t=d(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new e.Tree.Color(t[1])},keywordcolor:function(){var t=l[o].match(/^[a-z]+/);if(t&&t[0]in e.Tree.Reference.data.colors)return new e.Tree.Color(e.Tree.Reference.data.colors[d(/^[a-z]+/)])},dimension:function(){var t=r.charCodeAt(n);if(!(t>57||t<45||47===t)){var o=d(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return o?new e.Tree.Dimension(o[1],o[2],a):void 0}}},variable:function(){var e;if("@"===r.charAt(n)&&(e=d(/^(@[\w-]+)\s*:/)))return e[1]},entity:function(){var e=d(this.entities.call)||d(this.entities.literal),t=d(this.entities.field)||d(this.entities.variable),r=d(this.entities.url)||d(this.entities.keyword);return e||t||r},end:function(){var e;return d(";")||("string"==typeof(e="}")?r.charAt(n)===e:!!e.test(l[o]))},element:function(){var t=d(/^(?:[.#][\w\u4e00-\u9fa5\-]+|\*|Map)/);if(t)return new e.Tree.Element(t)},attachment:function(){var e=d(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(e)return e[1]},selector:function(){for(var t,o,i,s,l,u=[],c=new e.Tree.Filterset,f=[],p=0,h=0;(i=d(this.element))||(l=d(this.zoom))||(s=d(this.filter))||(t=d(this.attachment));){if(p++,i)u.push(i);else if(l)f.push(l),h++;else if(s){var y=c.add(s);if(y)throw b({message:y,index:n-1});h++}else{if(o)throw b({message:"Encountered second attachment name.",index:n-1});o=t}var v=r.charAt(n);if("{"===v||"}"===v||";"===v||","===v)break}if(p)return new e.Tree.Selector(c,f,u,o,h,a)},filter:function(){p();var r,n,o;if(d("[")&&(r=d(/^[a-zA-Z0-9\-_]+/)||d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.keyword)||d(this.entities.field))&&(r instanceof e.Tree.Quoted&&(r=new e.Tree.Field(r.toString())),(n=d(this.entities.comparison))&&(o=d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.dimension)||d(this.entities.keyword)||d(this.entities.field)))){if(!d("]"))throw b({message:"Missing closing ] of filter.",index:a-1});return r.is||(r=new e.Tree.Field(r)),new e.Tree.Filter(r,n,o,a,t.filename)}},zoom:function(){p();var t,r;if(d(/^\[\s*zoom/g)&&(t=d(this.entities.comparison))&&(r=d(this.entities.variable)||d(this.entities.dimension))&&d("]"))return new e.Tree.Zoom(t,r,a);h()},block:function(){var e;if(d("{")&&(e=d(this.primary))&&d("}"))return e},ruleset:function(){var t,r,n=[];for(p();t=d(this.selector);){for(n.push(t);d(this.comment););if(!d(","))break;for(;d(this.comment););}if(t)for(;d(this.comment););if(n.length>0&&(r=d(this.block))){if(1===n.length&&n[0].elements.length&&"Map"===n[0].elements[0].value){var o=new e.Tree.Ruleset(n,r);return o.isMap=!0,o}return new e.Tree.Ruleset(n,r)}h()},rule:function(){var o,i,l=r.charAt(n);if(p(),"."!==l&&"#"!==l&&(o=d(this.variable)||d(this.property))){if((i=d(this.value))&&d(this.end))return new e.Tree.Rule(o,i,a,t.filename);s=n,h()}},font:function(){for(var t,r=[],n=[];t=d(this.entity);)n.push(t);if(r.push(new e.Tree.Expression(n)),d(","))for(;(t=d(this.expression))&&(r.push(t),d(",")););return new e.Tree.Value(r)},value:function(){for(var t,r=[];(t=d(this.expression))&&(r.push(t),d(",")););return r.length>1?new e.Tree.Value(r.map(function(e){return e.value[0]})):1===r.length?new e.Tree.Value(r):void 0},sub:function(){var e;if(d("(")&&(e=d(this.expression))&&d(")"))return e},multiplication:function(){var t,r,n,o;if(t=d(this.operand)){for(;(n=d("/")||d("*")||d("%"))&&(r=d(this.operand));)o=new e.Tree.Operation(n,[o||t,r],a);return o||t}},addition:function(){var t,o,i,s;if(t=d(this.multiplication)){for(;(i=d(/^[-+]\s+/)||" "!=r.charAt(n-1)&&(d("+")||d("-")))&&(o=d(this.multiplication));)s=new e.Tree.Operation(i,[s||t,o],a);return s||t}},operand:function(){return d(this.sub)||d(this.entity)},expression:function(){for(var t,r=[];t=d(this.addition)||d(this.entity);)r.push(t);if(r.length>0)return new e.Tree.Expression(r)},property:function(){var e=d(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(e)return e[1]}}}}},{key:"parse",value:function(e){var t=this.parser;return this.ruleSet=t.parse(e)}},{key:"toShaders",value:function(){if(this.ruleSet){var e=this.ruleSet;if(e){var t=e.toList(this.env);t.reverse();var r={},n=[];this._toShaders(r,n,t);for(var o=[],i={},a=0,s=t.length;a<s;++a){var l=t[a],u=l.attachment,c=r[n[a]],f=[];if(!i[u]){var p=0;for(var h in c)if("zoom"!==h&&"frames"!==h&&"attachment"!==h&&"elements"!=h)if("layer-index"===h){var y=(c[h].join("\n"),null);Object.defineProperty(f,"layerIndex",{configurable:!0,enumerable:!1,value:y})}else f[p++]=function(e,t){if(!Array.isArray(e))return e;var r=e.join("\n"),n='attributes["FEATUREID"]&&attributes["FEATUREID"]',o=r.indexOf(n);if(o>=0){if(!t.featureFilter){var i=o+n.length,a=r.indexOf(")",i+1),s="featureId&&(featureId"+r.substring(i,a)+")";Object.defineProperty(t,"featureFilter",{configurable:!0,enumerable:!1,value:function(e){return!!s}})}return{property:h,getValue:Function("attributes","zoom","seftFilter","var _value = null; var isExcute=typeof seftFilter=='function'?sefgFilter():seftFilter;if(isExcute){"+r+";} return _value; ")}}return{property:h,getValue:Function("attributes","zoom","var _value = null;"+r+"; return _value; ")}}(c[h],f);Object.defineProperty(f,"attachment",{configurable:!0,enumerable:!1,value:u}),Object.defineProperty(f,"elements",{configurable:!0,enumerable:!1,value:l.elements}),o.push(f),i[n[a]]=!0}Object.defineProperty(f,"zoom",{configurable:!0,enumerable:!1,value:l.zoom})}return o}}return null}},{key:"_toShaders",value:function(t,r,n){for(var o=0,i=n.length;o<i;++o){for(var a=n[o],s=[],l=0,u=a.elements.length;l<u;l++)s.push(a.elements[l]);var c=a.filters.filters,f=[];for(var p in c)f.push(c[p].id);var h=s.join("/")+"::"+a.attachment+"_"+f.join("_");r.push(h);var y=t[h]=t[h]||{};y.zoom=e.Tree.Zoom.all;var d=a.toJS(this.env);for(var b in d)(y[b]=y[b]||[]).push(d[b].join("\n"))}}},{key:"getShaders",value:function(){return this.shaders}},{key:"destroy",value:function(){this.cartoStr=null,this.env=null,this.ruleSet=null,this.parser=null,this.shaders=null}}]),e}(),RD={version:"2.1.1",style:{"filter-mode":{type:["all","first"],doc:"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)","default-value":"all","default-meaning":"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."},"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},layer:{name:{"default-value":"",type:"string",required:!0,"default-meaning":"No layer name has been provided",doc:"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"},srs:{"default-value":"",type:"string","default-meaning":"No srs value is provided and the value will be inherited from the Map's srs",doc:"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"},status:{"default-value":!0,type:"boolean","default-meaning":"This layer will be marked as active and available for processing",doc:"A property that can be set to false to disable this layer from being processed"},minzoom:{"default-value":"0",type:"float","default-meaning":"The layer will be visible at the minimum possible scale",doc:"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},maxzoom:{"default-value":"1.79769e+308",type:"float","default-meaning":"The layer will be visible at the maximum possible scale",doc:"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},queryable:{"default-value":!1,type:"boolean","default-meaning":"The layer will not be available for the direct querying of data values",doc:"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"},"clear-label-cache":{"default-value":!1,type:"boolean","default-meaning":"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",doc:"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"},"group-by":{"default-value":"",type:"string","default-meaning":"No special layer grouping will be used during rendering",doc:"https://github.com/mapnik/mapnik/wiki/Grouped-rendering"},"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"maximum-extent":{"default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."}},symbolizers:{"*":{"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},map:{"background-color":{css:"background-color","default-value":"none","default-meaning":"transparent",type:"color",doc:"Map Background color"},"background-image":{css:"background-image",type:"uri","default-value":"","default-meaning":"transparent",doc:"An image that is repeated below all features on a map as a background.",description:"Map Background image"},srs:{css:"srs",type:"string","default-value":"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs","default-meaning":"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",doc:"Map spatial reference (proj4 string)"},"buffer-size":{css:"buffer-size","default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".'},"maximum-extent":{css:"","default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."},base:{css:"base","default-value":"","default-meaning":"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",type:"string",doc:"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."},"paths-from-xml":{css:"","default-value":!0,"default-meaning":"Paths read from XML will be interpreted from the location of the XML",type:"boolean",doc:"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"},"minimum-version":{css:"","default-value":"none","default-meaning":"Mapnik version will not be detected and no error will be thrown about compatibility",type:"string",doc:"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"},"font-directory":{css:"font-directory",type:"uri","default-value":"none","default-meaning":"No map-specific fonts will be registered",doc:"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"},gamma:{css:"polygon-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon edges"},"gamma-method":{css:"polygon-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},clip:{css:"polygon-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"},"stroke-gamma":{css:"line-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of stroke line"},"stroke-gamma-method":{css:"line-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},"stroke-dasharray":{css:"line-dasharray",type:"numbers",doc:"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.","default-value":"none","default-meaning":"solid line"},"stroke-dashoffset":{css:"line-dash-offset",type:"numbers",doc:"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)","default-value":"none","default-meaning":"solid line"},"stroke-miterlimit":{css:"line-miterlimit",type:"float",doc:"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.","default-value":4,"default-meaning":"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"},clip:{css:"line-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},offset:{css:"line-offset",type:"float","default-value":0,"default-meaning":"no offset",doc:"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."},rasterizer:{css:"line-rasterizer",type:["full","fast"],"default-value":"full",doc:"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."},"geometry-transform":{css:"line-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},placement:{css:"marker-placement",type:["point","line","interior"],"default-value":"point","default-meaning":"Place markers at the center point (centroid) of the geometry",doc:"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"},"multi-policy":{css:"marker-multi-policy",type:["each","whole","largest"],"default-value":"each","default-meaning":"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",doc:"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."},"marker-type":{css:"marker-type",type:["arrow","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"expression"},height:{css:"marker-height","default-value":10,doc:"The height of the marker, if using one of the default types.",type:"expression"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"allow-overlap":{css:"marker-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping markers are shown or hidden.","default-meaning":"Do not allow makers to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"marker-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},spacing:{css:"marker-spacing",doc:"Space between repeated labels","default-value":100,type:"float"},"max-error":{css:"marker-max-error",type:"float","default-value":.2,doc:"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."},transform:{css:"marker-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},clip:{css:"marker-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"marker-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"marker-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"marker-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},shield:{name:{css:"shield-name",type:"expression",serialization:"content",doc:'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]'},file:{css:"shield-file",required:!0,type:"uri","default-value":"none",doc:"Image file to render behind the shield text"},"face-name":{css:"shield-face-name",type:"string",validate:"font",doc:"Font name and style to use for the shield text","default-value":"",required:!0},"unlock-image":{css:"shield-unlock-image",type:"boolean",doc:"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image","default-value":!1,"default-meaning":"text alignment relative to the shield image uses the center of the image as the anchor for text positioning."},size:{css:"shield-size",type:"float",doc:"The size of the shield text in pixels"},fill:{css:"shield-fill",type:"color",doc:"The color of the shield text"},placement:{css:"shield-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."},"avoid-edges":{css:"shield-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.",type:"boolean","default-value":!1},"allow-overlap":{css:"shield-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping shields are shown or hidden.","default-meaning":"Do not allow shields to overlap with other map elements already placed."},"minimum-distance":{css:"shield-min-distance",type:"float","default-value":0,doc:"Minimum distance to the next shield symbol, not necessarily the same shield."},spacing:{css:"shield-spacing",type:"float","default-value":0,doc:"The spacing between repeated occurrences of the same shield on a line"},"minimum-padding":{css:"shield-min-padding","default-value":0,doc:"Determines the minimum amount of padding that a shield gets relative to other shields",type:"float"},"wrap-width":{css:"shield-wrap-width",type:"unsigned","default-value":0,doc:"Length of a chunk of text in characters before wrapping text"},"wrap-before":{css:"shield-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"shield-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long names."},"halo-fill":{css:"shield-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"shield-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},"character-spacing":{css:"shield-character-spacing",type:"unsigned","default-value":0,doc:"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."},"line-spacing":{css:"shield-line-spacing",doc:"Vertical spacing between lines of multiline labels (in pixels)",type:"unsigned"},dx:{css:"shield-text-dx",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"shield-text-dy",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"shield-dx":{css:"shield-dx",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},"shield-dy":{css:"shield-dy",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},opacity:{css:"shield-opacity",type:"float",doc:"(Default 1.0) - opacity of the image used for the shield","default-value":1},"text-opacity":{css:"shield-text-opacity",type:"float",doc:"(Default 1.0) - opacity of the text placed on top of the shield","default-value":1},"horizontal-alignment":{css:"shield-horizontal-alignment",type:["left","middle","right","auto"],doc:"The shield's horizontal alignment from its centerpoint","default-value":"auto"},"vertical-alignment":{css:"shield-vertical-alignment",type:["top","middle","bottom","auto"],doc:"The shield's vertical alignment from its centerpoint","default-value":"middle"},"text-transform":{css:"shield-text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"justify-alignment":{css:"shield-justify-alignment",type:["left","center","right","auto"],doc:"Define how text in a shield's label is justified","default-value":"auto"},clip:{css:"shield-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"shield-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"line-pattern":{file:{css:"line-pattern-file",type:"uri","default-value":"none",required:!0,doc:"An image file to be repeated and warped along a line"},clip:{css:"line-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"line-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"polygon-pattern":{file:{css:"polygon-pattern-file",type:"uri","default-value":"none",required:!0,doc:"Image to use as a repeated pattern fill within a polygon"},alignment:{css:"polygon-pattern-alignment",type:["local","global"],"default-value":"local",doc:"Specify whether to align pattern fills to the layer or to the map."},gamma:{css:"polygon-pattern-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon pattern edges"},opacity:{css:"polygon-pattern-opacity",type:"float",doc:"(Default 1.0) - Apply an opacity level to the image used for the pattern","default-value":1,"default-meaning":"The image is rendered without modifications"},clip:{css:"polygon-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},raster:{opacity:{css:"raster-opacity","default-value":1,"default-meaning":"opaque",type:"float",doc:"The opacity of the raster symbolizer on top of other symbolizers."},"filter-factor":{css:"raster-filter-factor","default-value":-1,"default-meaning":"Allow the datasource to choose appropriate downscaling.",type:"float",doc:"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."},scaling:{css:"raster-scaling",type:["near","fast","bilinear","bilinear8","bicubic","spline16","spline36","hanning","hamming","hermite","kaiser","quadric","catrom","gaussian","bessel","mitchell","sinc","lanczos","blackman"],"default-value":"near",doc:"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."},"mesh-size":{css:"raster-mesh-size","default-value":16,"default-meaning":"Reprojection mesh will be 1/16 of the resolution of the source image",type:"unsigned",doc:"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."},"comp-op":{css:"raster-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},"allow-overlap":{css:"point-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping points are shown or hidden.","default-meaning":"Do not allow points to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"point-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"},placement:{css:"point-placement",type:["centroid","interior"],doc:"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.","default-value":"centroid"},transform:{css:"point-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},"comp-op":{css:"point-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},text:{name:{css:"text-name",type:"expression",required:!0,"default-value":"",serialization:"content",doc:"Value to use for a text label. Data columns are specified using brackets like [column_name]"},"face-name":{css:"text-face-name",type:"string",validate:"font",doc:"Font name and style to render a label in",required:!0},size:{css:"text-size",type:"float","default-value":10,doc:"Text size in pixels"},"text-ratio":{css:"text-ratio",doc:"Define the amount of text (of the total) present on successive lines when wrapping occurs","default-value":0,type:"unsigned"},"wrap-width":{css:"text-wrap-width",doc:"Length of a chunk of text in characters before wrapping text","default-value":0,type:"unsigned"},"wrap-before":{css:"text-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"text-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long text."},spacing:{css:"text-spacing",type:"unsigned",doc:"Distance between repeated text labels on a line (aka. label-spacing)"},"character-spacing":{css:"text-character-spacing",type:"float","default-value":0,doc:"Horizontal spacing adjustment between characters in pixels"},"line-spacing":{css:"text-line-spacing","default-value":0,type:"unsigned",doc:"Vertical spacing adjustment between lines in pixels"},"label-position-tolerance":{css:"text-label-position-tolerance","default-value":0,type:"unsigned",doc:"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"},"max-char-angle-delta":{css:"text-max-char-angle-delta",type:"float","default-value":"22.5",doc:"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."},fill:{css:"text-fill",doc:"Specifies the color for the text","default-value":"#000000",type:"color"},opacity:{css:"text-opacity",doc:"A number from 0 to 1 specifying the opacity for the text","default-value":1,"default-meaning":"Fully opaque",type:"float"},"halo-fill":{css:"text-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"text-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},dx:{css:"text-dx",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"text-dy",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"vertical-alignment":{css:"text-vertical-alignment",type:["top","middle","bottom","auto"],doc:"Position of label relative to point position.","default-value":"auto","default-meaning":'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.'},"avoid-edges":{css:"text-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.","default-value":!1,type:"boolean"},"minimum-distance":{css:"text-min-distance",doc:"Minimum permitted distance to the next text symbolizer.",type:"float"},"minimum-padding":{css:"text-min-padding",doc:"Determines the minimum amount of padding that a text symbolizer gets relative to other text",type:"float"},"minimum-path-length":{css:"text-min-path-length",type:"float","default-value":0,"default-meaning":"place labels on all paths",doc:"Place labels only on paths longer than this value."},"allow-overlap":{css:"text-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping text is shown or hidden.","default-meaning":"Do not allow text to overlap with other text - overlapping markers will not be shown."},orientation:{css:"text-orientation",type:"expression",doc:"Rotate the text."},placement:{css:"text-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"Control the style of placement of a point versus the geometry it is attached to."},"placement-type":{css:"text-placement-type",doc:'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.',type:["dummy","simple"],"default-value":"dummy"},placements:{css:"text-placements",type:"string","default-value":"",doc:'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` '},"text-transform":{css:"text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"horizontal-alignment":{css:"text-horizontal-alignment",type:["left","middle","right","auto"],doc:"The text's horizontal alignment from its centerpoint","default-value":"auto"},"justify-alignment":{css:"text-align",type:["left","right","center","auto"],doc:"Define how text is justified","default-value":"auto","default-meaning":"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"},clip:{css:"text-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"text-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},building:{fill:{css:"building-fill","default-value":"#FFFFFF",doc:"The color of the buildings walls.",type:"color"},"fill-opacity":{css:"building-fill-opacity",type:"float",doc:"The opacity of the building as a whole, including all walls.","default-value":1},height:{css:"building-height",doc:"The height of the building in pixels.",type:"expression","default-value":"0"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},filter:{value:["true","false","null","point","linestring","polygon","collection"]}};function AD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}TD.mapnik_reference={version:{latest:RD,"2.1.1":RD}},TD.Tree={},TD.Tree.operate=function(e,t,r){switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"%":return t%r;case"/":return t/r}},TD.Tree.functions={rgb:function(e,t,r){return this.rgba(e,t,r,1)},rgba:function(e,t,r,n){var o=this,i=[e,t,r].map(function(e){return o.number(e)});return n=o.number(n),i.some(isNaN)||isNaN(n)?null:new TD.Tree.Color(i,n)},stop:function(e){var t,r;return arguments.length>1&&(t=arguments[1]),arguments.length>2&&(r=arguments[2]),{is:"tag",val:e,color:t,mode:r,toString:function(n){return'\n\t<stop value="'+e.ev(n)+'"'+(t?' color="'+t.ev(n)+'" ':"")+(r?' mode="'+r.ev(n)+'" ':"")+"/>"}}},hsl:function(e,t,r){return this.hsla(e,t,r,1)},hsla:function(e,t,r,n){if([e=this.number(e)%360/360,t=this.number(t),r=this.number(r),n=this.number(n)].some(isNaN))return null;var o=r<=.5?r*(t+1):r+t-r*t,i=2*r-o;return this.rgba(255*a(e+1/3),255*a(e),255*a(e-1/3),n);function a(e){return 6*(e=e<0?e+1:e>1?e-1:e)<1?i+(o-i)*e*6:2*e<1?o:3*e<2?i+(o-i)*(2/3-e)*6:i}},hue:function(e){return"toHSL"in e?new TD.Tree.Dimension(Math.round(e.toHSL().h)):null},saturation:function(e){return"toHSL"in e?new TD.Tree.Dimension(Math.round(100*e.toHSL().s),"%"):null},lightness:function(e){return"toHSL"in e?new TD.Tree.Dimension(Math.round(100*e.toHSL().l),"%"):null},alpha:function(e){return"toHSL"in e?new TD.Tree.Dimension(e.toHSL().a):null},saturate:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.s+=t.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},desaturate:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.s-=t.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},lighten:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.l+=t.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},darken:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.l-=t.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},fadein:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.a+=t.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},fadeout:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.a-=t.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},spin:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL(),n=(r.h+t.value)%360;return r.h=n<0?360+n:n,this.hsla_simple(r)},replace:function(e,t,r){return"field"===e.is?e.toString+".replace("+t.toString()+", "+r.toString()+")":e.replace(t,r)},mix:function(e,t,r){var n=r.value/100,o=2*n-1,i=e.toHSL().a-t.toHSL().a,a=((o*i==-1?o:(o+i)/(1+o*i))+1)/2,s=1-a,l=[e.rgb[0]*a+t.rgb[0]*s,e.rgb[1]*a+t.rgb[1]*s,e.rgb[2]*a+t.rgb[2]*s],u=e.alpha*n+t.alpha*(1-n);return new TD.Tree.Color(l,u)},greyscale:function(e){return this.desaturate(e,new TD.Tree.Dimension(100))},"%":function(e){for(var t=Array.prototype.slice.call(arguments,1),r=e.value,n=0;n<t.length;n++)r=r.replace(/%s/,t[n].value).replace(/%[da]/,t[n].toString());return r=r.replace(/%%/g,"%"),new TD.Tree.Quoted(r)},hsla_simple:function(e){return this.hsla(e.h,e.s,e.l,e.a)},number:function(e){return e instanceof TD.Tree.Dimension?parseFloat("%"===e.unit?e.value/100:e.value):"number"==typeof e?e:NaN},clamp:function(e){return Math.min(1,Math.max(0,e))}},TD.Tree.Call=function(){function e(t,r,n){kD(this,e),this.is="call",this.name=t,this.args=r,this.index=n}return CD(e,[{key:"ev",value:function(e){for(var t=this.args.map(function(t){return t.ev(e)}),r=0;r<t.length;r++)if("undefined"===t[r].is)return{is:"undefined",value:"undefined"};if(this.name in TD.Tree.functions){if(TD.Tree.functions[this.name].length<=t.length){var n=TD.Tree.functions[this.name].apply(TD.Tree.functions,t);return null===n?(e.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n}return e.error({message:"incorrect number of arguments for "+this.name+"(). "+TD.Tree.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}var o=TD.Tree.Reference.mapnikFunctions[this.name];if(void 0===o){var i=xD()(TD.Tree.Reference.mapnikFunctions),a=this.name,s=i.map(function(e){return[e[0],TD.Tree.Reference.editDistance(a,e[0]),e[1]]}).sort(function(e,t){return e[1]-t[1]});return e.error({message:"unknown function "+this.name+"(), did you mean "+s[0][0]+"("+s[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}return o!==t.length&&-1!==o?(e.error({message:"function "+this.name+"() takes "+o+" arguments and was given "+t.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):(this.args=t,this)}},{key:"toString",value:function(e,t){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}}]),e}(),TD.Tree.Color=function(){function e(t,r){kD(this,e),this.is="color",Array.isArray(t)?this.rgb=t.slice(0,3):6==t.length?this.rgb=t.match(/.{2}/g).map(function(e){return parseInt(e,16)}):this.rgb=t.split("").map(function(e){return parseInt(e+e,16)}),"number"==typeof r?this.alpha=r:4===t.length?this.alpha=t[3]:this.alpha=1}return CD(e,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return"rgba("+this.rgb.map(function(e){return Math.round(e)}).concat(this.alpha).join(", ")+")"}},{key:"operate",value:function(e,t,r){var n=[];r instanceof TD.Tree.Color||(r=r.toColor());for(var o=0;o<3;o++)n[o]=TD.Tree.operate(t,this.rgb[o],r.rgb[o]);return new TD.Tree.Color(n)}},{key:"toHSL",value:function(){var e,t,r=this.rgb[0]/255,n=this.rgb[1]/255,o=this.rgb[2]/255,i=this.alpha,a=Math.max(r,n,o),s=Math.min(r,n,o),l=(a+s)/2,u=a-s;if(a===s)e=t=0;else{switch(t=l>.5?u/(2-a-s):u/(a+s),a){case r:e=(n-o)/u+(n<o?6:0);break;case n:e=(o-r)/u+2;break;case o:e=(r-n)/u+4}e/=6}return{h:360*e,s:t,l:l,a:i}}}]),e}(),TD.Tree.Comment=function(){function e(t,r){kD(this,e),this.value=t,this.silent=!!r}return CD(e,[{key:"toString",value:function(e){return"\x3c!--"+this.value+"--\x3e"}},{key:"ev",value:function(){return this}}]),e}(),TD.Tree.Definition=function(){function e(t,r){kD(this,e),this.elements=t.elements,this.rules=r,this.ruleIndex={};for(var n=0;n<this.rules.length;n++)"zoom"in this.rules[n]&&(this.rules[n]=this.rules[n].clone()),this.rules[n].zoom=t.zoom,this.ruleIndex[this.rules[n].updateID()]=!0;this.filters=t.filters,this.zoom=t.zoom,this.attachment=t.attachment||"__default__",this.specificity=t.specificity()}return CD(e,[{key:"toString",value:function(){for(var e=this.filters.toString(),t=0;t<this.rules.length;t++)e+="\n    "+this.rules[t];return e}},{key:"toJS",value:function(e){var t={},r=this.zoom,n=this.filters.toJS(e),o=[r];function i(r){if(r instanceof TD.Tree.Rule)t[r.name]=t[r.name]||[],n?t[r.name].push("if("+n+"){"+r.value.toJS(e)+"}"):t[r.name].push(r.value.toJS(e));else if(r instanceof TD.Tree.Ruleset){var o=r.toJS(e);for(var i in o)for(var a in t[i]=t[i]||[],o[i])t[i].push(o[i][a])}}for(var a in n&&o.push(n),n=o.join(" && "),this.rules)i(this.rules[a]);return t}}]),e}(),TD.Tree.Dimension=function(){function e(t,r,n){kD(this,e),this.is="float",this.physical_units=["m","cm","in","mm","pt","pc"],this.screen_units=["px","%"],this.all_units=["m","cm","in","mm","pt","pc","px","%"],this.densities={m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},this.value=parseFloat(t),this.unit=r||null,this.index=n}return CD(e,[{key:"ev",value:function(e){if(this.unit&&this.all_units.indexOf(this.unit)<0)return e.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&this.physical_units.indexOf(this.unit)>=0){if(!e.ppi)return e.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*e.ppi,this.unit="px"}return this}},{key:"toColor",value:function(){return new TD.Tree.Color([this.value,this.value,this.value])}},{key:"round",value:function(){return this.value=Math.round(this.value),this}},{key:"toString",value:function(){return this.value.toString()}},{key:"operate",value:function(e,t,r){return"%"===this.unit&&"%"!==r.unit?(e.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===r.unit?"*"===t||"/"===t||"%"===t?(e.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new TD.Tree.Dimension(TD.Tree.operate(t,this.value,this.value*r.value*.01),this.unit):new TD.Tree.Dimension(TD.Tree.operate(t,this.value,r.value),this.unit||r.unit)}}]),e}(),TD.Tree.Element=function(){function e(t){kD(this,e),this.value=t.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard")}return CD(e,[{key:"specificity",value:function(){return["id"===this.type?1:0,"class"===this.type?1:0]}},{key:"toString",value:function(){return this.value}}]),e}(),TD.Tree.Expression=function(){function e(t){kD(this,e),this.is="expression",this.value=t}return CD(e,[{key:"ev",value:function(e){return this.value.length>1?new TD.Tree.Expression(this.value.map(function(t){return t.ev(e)})):this.value[0].ev(e)}},{key:"toString",value:function(e){return this.value.map(function(t){return t.toString(e)}).join(" ")}}]),e}(),TD.Tree.Field=function(){function e(t){kD(this,e),this.is="field",this.value=t||""}return CD(e,[{key:"toString",value:function(){return'["'+this.value.toUpperCase()+'"]'}},{key:"ev",value:function(){return this}}]),e}(),TD.Tree.Filter=function(){function e(t,r,n,o,i){kD(this,e),this.ops={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]},this.key=t,this.op=r,this.val=n,this.index=o,this.filename=i,this.id=this.key+this.op+this.val}return CD(e,[{key:"ev",value:function(e){return this.key=this.key.ev(e),this.val=this.val.ev(e),this}},{key:"toString",value:function(){return"["+this.id+"]"}}]),e}(),TD.Tree.Filterset=function(){function e(){kD(this,e),this.filters={}}return CD(e,[{key:"toJS",value:function(e){function t(e){var t=e.op;"="===t&&(t="==");var r=e.val;void 0!==e._val&&(r=e._val.toString(!0)),e.key&&"scale"===e.key.value?r=+r:"string"!=typeof r&&"object"!==ED(r)||(r="'"+r+"'");var n="attributes";return n+"&&"+n+e.key+"&&"+n+e.key+" "+t+r}var r=[];for(var n in this.filters)r.push(t(this.filters[n]));return r.join(" && ")}},{key:"toString",value:function(){var e=[];for(var t in this.filters)e.push(this.filters[t].id);return e.sort().join("\t")}},{key:"ev",value:function(e){for(var t in this.filters)this.filters[t].ev(e);return this}},{key:"clone",value:function(){var e=new TD.Tree.Filterset;for(var t in this.filters)e.filters[t]=this.filters[t];return e}},{key:"cloneWith",value:function(e){var t=[];for(var r in e.filters){var n=this.addable(e.filters[r]);if(!1===n)return!1;!0===n&&t.push(e.filters[r])}if(!t.length)return null;var o=new TD.Tree.Filterset;for(r in this.filters)o.filters[r]=this.filters[r];for(;r=t.shift();)o.add(r);return o}},{key:"addable",value:function(e){var t=e.key.toString(),r=e.val.toString();switch(r.match(/^[0-9]+(\.[0-9]*)?_match/)&&(r=parseFloat(r)),e.op){case"=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val.toString()==r&&null:void 0===this.filters[t+"!="+r]&&(!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r)&&(!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r)&&!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r))));case"=~":return!0;case"!=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val!==r&&null:void 0!==this.filters[t+"!="+r]?null:void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r?null:void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r?null:void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r)||null;case">":return t+"="in this.filters?!(this.filters[t+"="].val<=r)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=r)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r)||null));case">=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val<r)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=r)||null));case"<":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>=r)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=r)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r)||null));case"<=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>r)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=r)||null))}}},{key:"conflict",value:function(e){var t=e.key.toString(),r=e.val.toString();return isNaN(parseFloat(r))||(r=parseFloat(r)),("="===e.op&&void 0!==this.filters[t+"="]&&r!=this.filters[t+"="].val.toString()||"!="===e.op&&void 0!==this.filters[t+"="]&&r==this.filters[t+"="].val.toString()||"="===e.op&&void 0!==this.filters[t+"!="]&&r===this.filters[t+"!="].val.toString())&&e.toString()+" added to "+this.toString()+" produces an invalid filter"}},{key:"add",value:function(e,t){var r,n=e.key.toString(),o=e.op,i=this.conflict(e);if(i)return i;if("="===o){for(var a in this.filters)this.filters[a].key===n&&delete this.filters[a];this.filters[n+"="]=e}else if("!="===o)this.filters[n+"!="+e.val]=e;else if("=~"===o)this.filters[n+"=~"+e.val]=e;else if(">"===o){for(var s in this.filters)this.filters[s].key===n&&this.filters[s].val<=e.val&&delete this.filters[s];this.filters[n+">"]=e}else if(">="===o){for(var l in this.filters)r=+this.filters[l].val.toString(),this.filters[l].key===n&&r<e.val&&delete this.filters[l];void 0!==this.filters[n+"!="+e.val]?(delete this.filters[n+"!="+e.val],e.op=">",this.filters[n+">"]=e):this.filters[n+">="]=e}else if("<"===o){for(var u in this.filters)r=+this.filters[u].val.toString(),this.filters[u].key===n&&r>=e.val&&delete this.filters[u];this.filters[n+"<"]=e}else if("<="===o){for(var c in this.filters)r=+this.filters[c].val.toString(),this.filters[c].key===n&&r>e.val&&delete this.filters[c];void 0!==this.filters[n+"!="+e.val]?(delete this.filters[n+"!="+e.val],e.op="<",this.filters[n+"<"]=e):this.filters[n+"<="]=e}}}]),e}(),TD.Tree.Fontset=CD(function e(t,r){kD(this,e),this.fonts=r,this.name="fontset-"+t.effects.length}),TD.Tree.Invalid=function(){function e(t,r,n){kD(this,e),this.is="invalid",this.chunk=t,this.index=r,this.type="syntax",this.message=n||"Invalid code: "+this.chunk}return CD(e,[{key:"ev",value:function(e){return e.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}}]),e}(),TD.Tree.Keyword=function(){function e(t){kD(this,e),this.value=t;var r={transparent:"color",true:"boolean",false:"boolean"};this.is=r[t]?r[t]:"keyword"}return CD(e,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return this.value}}]),e}(),TD.Tree.Literal=function(){function e(t){kD(this,e),this.value=t||"",this.is="field"}return CD(e,[{key:"toString",value:function(){return this.value}},{key:"ev",value:function(){return this}}]),e}(),TD.Tree.Operation=function(){function e(t,r,n){kD(this,e),this.is="operation",this.op=t.trim(),this.operands=r,this.index=n}return CD(e,[{key:"ev",value:function(e){var t,r=this.operands[0].ev(e),n=this.operands[1].ev(e);return"undefined"===r.is||"undefined"===n.is?{is:"undefined",value:"undefined"}:(r instanceof TD.Tree.Dimension&&n instanceof TD.Tree.Color&&("*"===this.op||"+"===this.op?(t=n,n=r,r=t):e.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),r instanceof TD.Tree.Quoted&&n instanceof TD.Tree.Quoted&&"+"!==this.op?(e.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r instanceof TD.Tree.Field||n instanceof TD.Tree.Field||r instanceof TD.Tree.Literal||n instanceof TD.Tree.Literal?"color"===r.is||"color"===n.is?(e.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new TD.Tree.Literal(r.ev(e).toString(!0)+this.op+n.ev(e).toString(!0)):void 0===r.operate?(e.error({message:"Cannot do math with type "+r.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r.operate(e,this.op,n))}}]),e}(),TD.Tree.Quoted=function(){function e(t){kD(this,e),this.is="string",this.value=t||""}return CD(e,[{key:"toString",value:function(e){var t=this.value.replace(/&/g,"&amp;"),r=t.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===e?"'"+r+"'":t}},{key:"ev",value:function(){return this}},{key:"operate",value:function(e,t,r){return new TD.Tree.Quoted(TD.Tree.operate(t,this.toString(),r.toString(this.contains_field)))}}]),e}(),TD.Tree.Reference={_validateValue:{font:function(e,t){return!e.validation_data||!e.validation_data.fonts||-1!=e.validation_data.fonts.indexOf(t)}},setData:function(e){this.data=e,this.selector_cache=function(e){var t={};for(var r in e.symbolizers)for(var n in e.symbolizers[r])e.symbolizers[r][n].hasOwnProperty("css")&&(t[e.symbolizers[r][n].css]=[e.symbolizers[r][n],r,n]);return t}(e),this.mapnikFunctions=function(e){var t={};for(var r in e.symbolizers)for(var n in e.symbolizers[r])if("functions"===e.symbolizers[r][n].type)for(var o=0;o<e.symbolizers[r][n].functions.length;o++){var i=e.symbolizers[r][n].functions[o];t[i[0]]=i[1]}return t}(e),this.required_cache=function(e){var t={};for(var r in e.symbolizers)for(var n in t[r]=[],e.symbolizers[r])e.symbolizers[r][n].required&&t[r].push(e.symbolizers[r][n].css);return t}(e)},setVersion:function(e){return!!TD.mapnik_reference.version.hasOwnProperty(e)&&(this.setData(TD.mapnik_reference.version[e]),!0)},selectorData:function(e,t){if(this.selector_cache&&this.selector_cache[e])return this.selector_cache[e][t]},validSelector:function(e){return!!this.selector_cache[e]},selectorName:function(e){return this.selectorData(e,2)},selector:function(e){return this.selectorData(e,0)},symbolizer:function(e){return this.selectorData(e,1)},requiredProperties:function(e,t){var r=this.required_cache[e];for(var n in r)if(!(r[n]in t))return"Property "+r[n]+" required for defining "+e+" styles."},isFont:function(e){return"font"===this.selector(e).validate},editDistance:function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;for(var r=[],n=0;n<=t.length;n++)r[n]=[n];for(var o=0;o<=e.length;o++)r[0][o]=o;for(n=1;n<=t.length;n++)for(o=1;o<=e.length;o++)t.charAt(n-1)===e.charAt(o-1)?r[n][o]=r[n-1][o-1]:r[n][o]=Math.min(r[n-1][o-1]+1,Math.min(r[n][o-1]+1,r[n-1][o]+1));return r[t.length][e.length]},validValue:function(e,t,r){var n;if(this.selector(t)){if("keyword"===r.value[0].is)return function(e,t){return"object"===ED(this.selector(t).type)?-1!==this.selector(t).type.indexOf(e.value[0].value):"string"===this.selector(t).type}(r,t);if("undefined"===r.value[0].is)return!0;if("numbers"===this.selector(t).type){for(n in r.value)if("float"!==r.value[n].is)return!1;return!0}if("tags"===this.selector(t).type){if(!r.value)return!1;if(!r.value[0].value)return"tag"===r.value[0].is;for(n=0;n<r.value[0].value.length;n++)if("tag"!==r.value[0].value[n].is)return!1;return!0}if("functions"==this.selector(t).type)return function(e,t){if("string"===e.value[0].is)return!0;for(var r in e.value)for(var n in e.value[r].value){if("call"!==e.value[r].value[n].is)return!1;var o=find(this.selector(t).functions,function(t){return t[0]===e.value[r].value[n].name});if(!(o&&-1===o[1]||o&&o[1]===e.value[r].value[n].args.length))return!1}return!0}(r,t);if("expression"===this.selector(t).type)return!0;if("unsigned"===this.selector(t).type)return"float"===r.value[0].is&&(r.value[0].round(),!0);if(this.selector(t).validate){for(n=0;n<r.value.length;n++)if(this.selector(t).type===r.value[n].is&&this._validateValue[this.selector(t).validate](e,r.value[n].value))return!0;return!1}return this.selector(t).type===r.value[0].is}return!1}},TD.Tree.Reference.setVersion("latest"),TD.Tree.Rule=function(){function e(t,r,n,o){kD(this,e),this.is="rule";var i=t.split("/");this.name=i.pop(),this.instance=i.length?i[0]:"__default__",this.value=r instanceof TD.Tree.Value?r:new TD.Tree.Value([r]),this.index=n,this.symbolizer=TD.Tree.Reference.symbolizer(this.name),this.filename=o,this.variable="@"===t.charAt(0)}return CD(e,[{key:"clone",value:function(){var e=Object.create(TD.Tree.Rule.prototype);return e.name=this.name,e.value=this.value,e.index=this.index,e.instance=this.instance,e.symbolizer=this.symbolizer,e.filename=this.filename,e.variable=this.variable,e}},{key:"updateID",value:function(){return this.id=this.zoom+"#"+this.instance+"#"+this.name}},{key:"toString",value:function(){return"["+TD.Tree.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value}},{key:"ev",value:function(e){return new TD.Tree.Rule(this.name,this.value.ev(e),this.index,this.filename)}}]),e}(),TD.Tree.Ruleset=function(){function e(t,r){kD(this,e),this.is="ruleset",this.selectors=t,this.rules=r,this._lookups={}}return CD(e,[{key:"ev",value:function(e){var t,r,n=new TD.Tree.Ruleset(this.selectors,this.rules.slice(0));for(n.root=this.root,e.frames.unshift(n),t=0;t<n.rules.length;t++)r=n.rules[t],n.rules[t]=r.ev?r.ev(e):r;return e.frames.shift(),n}},{key:"match",value:function(e){return!e||0===e.length}},{key:"variables",value:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(e,t){return t instanceof TD.Tree.Rule&&!0===t.variable&&(e[t.name]=t),e},{})}},{key:"variable",value:function(e){return this.variables()[e]}},{key:"rulesets",value:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(e){return e instanceof TD.Tree.Ruleset})}},{key:"find",value:function(e,t){t=t||this;var r=[],n=e.toString();return n in this._lookups?this._lookups[n]:(this.rulesets().forEach(function(n){if(n!==t)for(var o=0;o<n.selectors.length;o++)if(e.match(n.selectors[o])){e.elements.length>1?Array.prototype.push.apply(r,n.find(new TD.Tree.Selector(null,null,e.elements.slice(1)),t)):r.push(n);break}}),this._lookups[n]=r)}},{key:"evZooms",value:function(e){for(var t=0;t<this.selectors.length;t++){for(var r=TD.Tree.Zoom.all,n=0;n<this.selectors[t].zoom.length;n++)r=this.selectors[t].zoom[n].ev(e).zoom;this.selectors[t].zoom=r}}},{key:"flatten",value:function(e,t,r){var n,o,i=[];for(0===this.selectors.length&&(r.frames=r.frames.concat(this.rules)),this.evZooms(r),n=0;n<this.selectors.length;n++){var a=this.selectors[n];if(a.filters)if(t.length)for(o=0;o<t.length;o++){var s=t[o],l=s.filters.cloneWith(a.filters);if(null===l){if(s.zoom===a.zoom&&s.attachment===a.attachment&&s.elements.join()===a.elements.join()){i.push(s);continue}l=s.filters}else if(!l)continue;var u=Object.create(TD.Tree.Selector.prototype);u.filters=l,u.zoom=a.zoom,u.elements=s.elements.concat(a.elements),s.attachment&&a.attachment?u.attachment=s.attachment+"/"+a.attachment:u.attachment=a.attachment||s.attachment,u.conditions=s.conditions+a.conditions,u.index=a.index,i.push(u)}else i.push(a)}var c=[];for(n=0;n<this.rules.length;n++){var f=this.rules[n];f instanceof TD.Tree.Ruleset?f.flatten(e,i,r):f instanceof TD.Tree.Rule?c.push(f):f instanceof TD.Tree.Invalid&&r.error(f)}var p=!!c.length&&c[0].index;for(n=0;n<i.length;n++)!1!==p&&(i[n].index=p),e.push(new TD.Tree.Definition(i[n],c.slice()));return e}}]),e}(),TD.Tree.Selector=function(){function e(t,r,n,o,i,a){kD(this,e),this.elements=n||[],this.attachment=o,this.filters=t||{},this.zoom=void 0!==r?r:TD.Tree.Zoom.all,this.conditions=i,this.index=a}return CD(e,[{key:"specificity",value:function(){return this.elements.reduce(function(e,t){var r=t.specificity();return e[0]+=r[0],e[1]+=r[1],e},[0,0,this.conditions,this.index])}}]),e}(),TD.Tree.URL=function(){function e(t,r){kD(this,e),this.is="uri",this.value=t,this.paths=r}return CD(e,[{key:"toString",value:function(){return this.value.toString()}},{key:"ev",value:function(e){return new TD.Tree.URL(this.value.ev(e),this.paths)}}]),e}(),TD.Tree.Value=function(){function e(t){kD(this,e),this.is="value",this.value=t}return CD(e,[{key:"ev",value:function(e){return 1===this.value.length?this.value[0].ev(e):new TD.Tree.Value(this.value.map(function(t){return t.ev(e)}))}},{key:"toJS",value:function(e){var t=this.ev(e),r=t.toString();return"color"===t.is||"uri"===t.is||"string"===t.is||"keyword"===t.is?r="'"+r+"'":"field"===t.is?r=r.replace(/\[(.*)\]/g,"attributes['_match1']"):t.value&&"object"===ED(t.value)&&(r="["+r+"]"),"_value = "+r+";"}},{key:"toString",value:function(e,t,r,n){return this.value.map(function(t){return t.toString(e,n)}).join(r||", ")}},{key:"clone",value:function(){var e=Object.create(TD.Tree.Value.prototype);return Array.isArray(e)?e.value=this.value.slice():e.value=this.value,e.is=this.is,e}}]),e}(),TD.Tree.Variable=function(){function e(t,r,n){kD(this,e),this.is="variable",this.name=t,this.index=r,this.filename=n}return CD(e,[{key:"toString",value:function(){return this.name}},{key:"ev",value:function(e){if(this._css)return this._css;var t=e.frames.filter(function(e){return e.name===this.name}.bind(this));return t.length?t[0].value.ev(e):(e.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})}}]),e}(),TD.Tree.Zoom=function(){function e(t,r,n){kD(this,e),this.op=t,this.value=r,this.index=n}return CD(e,[{key:"setZoom",value:function(e){return this.zoom=e,this}},{key:"ev",value:function(e){var t=parseInt(this.value.ev(e).toString(),10);switch((t>TD.Tree.Zoom.maxZoom||t<0)&&e.error({message:"Only zoom levels between 0 and "+TD.Tree.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom="zoom && zoom === "+t,this;case">":this.zoom="zoom && zoom > "+t;break;case">=":this.zoom="zoom && zoom >= "+t;break;case"<":this.zoom="zoom && zoom < "+t;break;case"<=":this.zoom="zoom && zoom <= "+t}return this}},{key:"toString",value:function(){for(var e="",t=0;t<=TD.Tree.Zoom.maxZoom;t++)e+=this.zoom&1<<t?"X":".";return e}}]),e}(),TD.Tree.Zoom.all=23,TD.Tree.Zoom.maxZoom=22,TD.Tree.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100};var LD=function(e,t,r){return t&&AD(e.prototype,t),r&&AD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,j.extend(this,t)});function ID(e){"@babel/helpers - typeof";return(ID="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ND(){return(ND="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=BD(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function DD(e,t){return(DD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function FD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=BD(e);if(t){var o=BD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ID(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function BD(e){return(BD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var GD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DD(e,t)}(i,Cr);var t,r,n,o=FD(i);function i(e,t,r,n,a,s){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(l=o.call(this,e,t,r,n,a,s)).shapeFactory=new Va,l.shapeParameters=null,l.RelativeCoordinate=!1,l.setting=null,l.origonPoint=null,l.chartBox=null,l.chartBounds=null,l.width=null,l.height=null,l.XOffset=0,l.YOffset=0,l.DVBParameter=null,l.dataViewBox=null,l.DVBCodomain=null,l.DVBCenterPoint=null,l.DVBUnitValue=null,l.DVBOrigonPoint=null,l.DVBWidth=null,l.DVBHeight=null,l.origonPointOffset=null,l.fields=r||[],l.dataValues=null,l.lonlat=a||l.data.geometry.getBounds().getCenterLonLat(),n&&n.width&&n.height&&n.codomain&&(l.setting=n),l.CLASS_NAME="SuperMap.Feature.Theme.Graph",l}return t=i,(r=[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,ND(BD(i.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var e=this.setting;if(!(e.width&&e.height&&e.codomain))return!1;var t=void 0===e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,r=Cr.getDataValues(this.data,this.fields,t);this.dataValues=r||[],this.width=parseFloat(e.width),this.height=parseFloat(e.height),this.DVBCodomain=e.codomain,this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var n=this.width,o=this.height,i=this.location;this.origonPoint=[i[0]-n/2,i[1]-o/2];var a=this.origonPoint;this.chartBox=[a[0],a[1]+o,a[0]+n,a[1]];var s=this.chartBox,l=this.DVBParameter;this.dataViewBox=[s[0]+l[0],s[1]-l[1],s[2]-l[2],s[3]+l[3]];var u=this.dataViewBox;return!(u[0]>=u[2]||u[1]<=u[3])&&(this.DVBOrigonPoint=[u[0],u[3]],this.DVBWidth=Math.abs(u[2]-u[0]),this.DVBHeight=Math.abs(u[1]-u[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-a[0],this.DVBOrigonPoint[1]-a[1]],!0)}},{key:"resetLocation",value:function(e){e&&(this.lonlat=e);var t=this.getLocalXY(this.lonlat);t[0]+=this.XOffset,t[1]+=this.YOffset,this.location=t;var r=this.width,n=this.height,o=this.location;return this.chartBounds=new I(o[0]-r/2,o[1]+n/2,o[0]+r/2,o[1]-n/2),this.resetLinearGradient(),o}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var e=this.shapes,t=this.location,r=0,n=e.length;r<n;r++){e[r].refOriginalPosition=t;var o=e[r].style;for(var i in o)switch(i){case"pointList":for(var a=o[i],s=0,l=a.length;s<l;s++)a[s][0]-=t[0],a[s][1]-=t[1];break;case"x":o[i]-=t[0];break;case"y":o[i]-=t[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}])&&MD(t.prototype,r),n&&MD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function UD(e){"@babel/helpers - typeof";return(UD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function VD(){return(VD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WD(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function HD(e,t){return(HD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=WD(e);if(t){var o=WD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===UD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function WD(e){return(WD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Cr.getDataValues=function(e,t,r){if(!e.attributes)return!1;for(var n=[],o=e.attributes,i=0;i<t.length;i++)for(var a in o)if(a===t[i])try{!isNaN(r)&&r>=0?n.push(parseFloat(o[a].toString()).toFixed(r)):n.push(parseFloat(o[a].toString()))}catch(e){throw new Error("not a number")}return n.length===t.length&&n};var qD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HD(e,t)}(i,GD);var t,r,n,o=zD(i);function i(e,t,r,n,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,e,t,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Bar",s}return t=i,(r=[{key:"destroy",value:function(){VD(WD(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},t=this.setting;if(t.barLinearGradient||(t.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.dataViewBox,o=this.dataValues;if(!(o.length<1)){for(var i=0,a=o.length;i<a;i++)if(o[i]<r[0]||o[i]>r[1])return;var s=this.calculateXShapeInfo();if(s){var l=s.xPositions,u=s.width;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(Va.Background(this.shapeFactory,this.chartBox,t)),(void 0===t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(Va.GraphAxis(this.shapeFactory,n,t,s)));for(var c=0;c<o.length;c++){var f=n[1]-(o[c]-r[0])/this.DVBUnitValue,p=[[l[c]-u/2,n[1]-1],[l[c]+u/2,n[1]-1],[l[c]+u/2,f],[l[c]-u/2,f]],h=new fi(p);if(void 0===t.showShadow||t.showShadow){if(t.barShadowStyle){var y=t.barShadowStyle;y.shadowBlur&&(e.shadowBlur=y.shadowBlur),y.shadowColor&&(e.shadowColor=y.shadowColor),y.shadowOffsetX&&(e.shadowOffsetX=y.shadowOffsetX),y.shadowOffsetY&&(e.shadowOffsetY=y.shadowOffsetY)}h.style={},j.copyAttributesWithClip(h.style,e)}h.refDataID=this.data.id,h.dataInfo={field:this.fields[c],value:o[c]},void 0!==t.barHoverAble&&(h.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(h.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(h))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((e=r.xShapeBlank)[0]+e[2]+(n-1)*e[1]);if(s<=n)return null;i=s/n}else e=[i=a/(2*n+1),i,i];for(var l=0,u=0;u<n;u++)0==u?l=e[0]+i/2:l+=i+e[1],o.push(t[0]+l);return{xPositions:o,width:i}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var e=this.shapes.length,t=this.setting.barLinearGradient,r=-1,n=0;n<e;n++){var o=this.shapes[n];if("SuperMap.LevelRenderer.Shape.SmicPolygon"===o.CLASS_NAME){var i=o.style,a=this.location[0]+i.pointList[0][0],s=this.location[0]+i.pointList[1][0];++r>=t.length&&(r%=t.length);var l=t[r][0],u=t[r][1],c=(new Hr).getLinearGradient(a,0,s,0,[[0,l],[1,u]]);o.style.color=c}}}}])&&JD(t.prototype,r),n&&JD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function YD(e){"@babel/helpers - typeof";return(YD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function QD(){return(QD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$D(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ZD(e,t){return(ZD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function KD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=$D(e);if(t){var o=$D(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===YD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function $D(e){return($D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZD(e,t)}(i,GD);var t,r,n,o=KD(i);function i(e,t,r,n,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,e,t,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Bar3D",s}return t=i,(r=[{key:"destroy",value:function(){QD($D(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,25,20,20]:e.dataViewBoxParameter=[5,5,5,5]),e.axisUseArrow=void 0===e.axisUseArrow||e.axisUseArrow,e.axisXLabelsOffset=void 0!==e.axisXLabelsOffset?e.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var t=this.DVBCodomain;this.DVBUnitValue=(t[1]-t[0])/this.DVBHeight;var r=this.dataViewBox,n=this.dataValues;if(!(n.length<1)){for(var o=0,i=n.length;o<i;o++)if(n[o]<t[0]||n[o]>t[1])return;var a=this.calculateXShapeInfo();if(a){var s=a.xPositions,l=a.width;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(Va.Background(this.shapeFactory,this.chartBox,e)),(!e.axis3DParameter||isNaN(e.axis3DParameter)||e.axis3DParameter<15)&&(e.axis3DParameter=20),(void 0===e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(Va.GraphAxis(this.shapeFactory,r,e,a)));for(var u=e.bar3DParameter&&!isNaN(e.bar3DParameter)?e.bar3DParameter:10,c=0;c<n.length;c++){var f=r[1]-(n[c]-t[0])/this.DVBUnitValue,p=s[c]-l/2,h=s[c]+l/2,y=[[p,f],[h,f],[h-u,f+u],[p-u,f+u]],d=[[h,f],[h-u,f+u],[h-u,r[1]+u],[h,r[1]]],b=[[p-u,r[1]+u],[h-u,r[1]+u],[h-u,f+u],[p-u,f+u]];u<=0&&(b=[[p,r[1]],[h,r[1]],[h,f],[p,f]]);var v=new fi(y),m=new fi(d),g=new fi(b);e.barSideStyle=e.barSideStyle?e.barSideStyle:e.barFaceStyle,e.barSideStyleByFields=e.barSideStyleByFields?e.barSideStyleByFields:e.barFaceStyleByFields,e.barSideStyleByCodomain=e.barSideStyleByCodomain?e.barSideStyleByCodomain:e.barFaceStyleByCodomain,e.barTopStyle=e.barTopStyle?e.barTopStyle:e.barFaceStyle,e.barTopStyleByFields=e.barTopStyleByFields?e.barTopStyleByFields:e.barFaceStyleByFields,e.barTopStyleByCodomain=e.barTopStyleByCodomain?e.barTopStyleByCodomain:e.barFaceStyleByCodomain,g.style=Va.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barFaceStyle,e.barFaceStyleByFields,e.barFaceStyleByCodomain,c,n[c]),m.style=Va.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barSideStyle,e.barSideStyleByFields,e.barSideStyleByCodomain,c,n[c]),v.style=Va.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barTopStyle,e.barTopStyleByFields,e.barTopStyleByCodomain,c,n[c]),e.barSideHoverStyle=e.barSideHoverStyle?e.barSideHoverStyle:e.barFaceHoverStyle,e.barTopHoverStyle=e.barTopHoverStyle?e.barTopHoverStyle:e.barFaceHoverStyle,g.highlightStyle=Va.ShapeStyleTool({stroke:!0},e.barFaceHoverStyle),m.highlightStyle=Va.ShapeStyleTool({stroke:!0},e.barSideHoverStyle),v.highlightStyle=Va.ShapeStyleTool({stroke:!0},e.barTopHoverStyle),v.refDataID=m.refDataID=g.refDataID=this.data.id,v.isHoverByRefDataID=m.isHoverByRefDataID=g.isHoverByRefDataID=!0,v.refDataHoverGroup=m.refDataHoverGroup=g.refDataHoverGroup=j.createUniqueID("lr_shg"),v.dataInfo=m.dataInfo=g.dataInfo={field:this.fields[c],value:n[c]},void 0!==e.barHoverAble&&(v.hoverable=m.hoverable=g.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(v.clickable=m.clickable=g.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(m)),this.shapes.push(this.shapeFactory.createShape(v)),this.shapes.push(this.shapeFactory.createShape(g))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((e=r.xShapeBlank)[0]+e[2]+(n-1)*e[1]);if(s<=n)return null;i=s/n}else e=[i=a/(2*n+1),i,i];for(var l=0,u=0;u<n;u++)0==u?l=e[0]+i/2:l+=i+e[1],o.push(t[0]+l);return{xPositions:o,width:i}}}])&&XD(t.prototype,r),n&&XD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function tF(e){"@babel/helpers - typeof";return(tF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nF(){return(nF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=aF(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function oF(e,t){return(oF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=aF(e);if(t){var o=aF(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===tF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function aF(e){return(aF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oF(e,t)}(i,GD);var t,r,n,o=iF(i);function i(e,t,r,n,a,s){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(l=o.call(this,e,t,r,n,a,s)).setting=null,n&&n.codomain&&(l.setting=n,l.DVBCodomain=l.setting.codomain),l.CLASS_NAME="SuperMap.Feature.Theme.RankSymbol",l}return t=i,(r=[{key:"destroy",value:function(){this.setting=null,nF(aF(i.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var e=this.setting;e.XOffset&&(this.XOffset=e.XOffset),e.YOffset&&(this.YOffset=e.YOffset),this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var t=this.width,r=this.height,n=this.location;this.origonPoint=[n[0]-t/2,n[1]-r/2];var o=this.origonPoint;this.chartBox=[o[0],o[1]+r,o[0]+t,o[1]];var i=this.chartBox,a=this.DVBParameter;this.dataViewBox=[i[0]+a[0],i[1]-a[1],i[2]-a[2],i[3]+a[3]];var s=this.dataViewBox;return!(s[0]>=s[2]||s[1]<=s[3])&&(this.DVBOrigonPoint=[s[0],s[3]],this.DVBWidth=Math.abs(s[2]-s[0]),this.DVBHeight=Math.abs(s[1]-s[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-o[0],this.DVBOrigonPoint[1]-o[1]],!0)}}])&&rF(t.prototype,r),n&&rF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function lF(e){"@babel/helpers - typeof";return(lF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cF(){return(cF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hF(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function fF(e,t){return(fF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=hF(e);if(t){var o=hF(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===lF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function hF(e){return(hF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fF(e,t)}(i,sF);var t,r,n,o=pF(i);function i(e,t,r,n,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,e,t,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Circle",s}return t=i,(r=[{key:"destroy",value:function(){cF(hF(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var e=this.setting;if(!e.codomain)return!1;var t=void 0===e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,r=Cr.getDataValues(this.data,this.fields,t);this.dataValues=r||[];var n=this.dataValues;e.maxR||(e.maxR=100),e.minR||(e.minR=0);var o=this.DVBCodomain;o&&o[1]-o[0]>0?this.DVBUnitValue=e.maxR/(o[1]-o[0]):this.DVBUnitValue=e.maxR;var i=this.DVBUnitValue,a=n[0]*i+e.minR;if(this.width=2*a,this.height=2*a,this.initBaseParameter()&&(!o||!(n[0]<o[0]||n[0]>o[1]))){var s=this.DVBCenterPoint,l=new Wi(s[0],s[1],a);l.style=Va.ShapeStyleTool(null,e.circleStyle,null,null,0),void 0!==e.fillColor?l.style.fillColor=e.fillColor:l.style.fillColor="#ff9277",l.highlightStyle=Va.ShapeStyleTool(null,e.circleHoverStyle),void 0!==e.circleHoverAble&&(l.hoverable=e.circleHoverAble),void 0!==e.circleClickAble&&(l.clickable=e.circleClickAble),l.refDataID=this.data.id,l.dataInfo={field:this.fields[0],r:a,value:n[0]},this.shapes.push(this.shapeFactory.createShape(l)),this.shapesConvertToRelativeCoordinate()}}}])&&uF(t.prototype,r),n&&uF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function dF(e){"@babel/helpers - typeof";return(dF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vF(){return(vF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wF(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function mF(e,t){return(mF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=wF(e);if(t){var o=wF(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===dF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function wF(e){return(wF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var OF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mF(e,t)}(i,GD);var t,r,n,o=gF(i);function i(e,t,r,n,a,s){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(l=o.call(this,e,t,r,n,a,s)).CLASS_NAME="SuperMap.Feature.Theme.Line",l}return t=i,(r=[{key:"destroy",value:function(){vF(wF(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues;if(!(o.length<1)){var i=this.calculateXShapeInfo();if(i){var a,s,l=i.xPositions;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(Va.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(Va.GraphAxis(this.shapeFactory,t,e,i));for(var u=[],c=[],f=0,p=o.length;f<p;f++){if(o[f]<r[0]||o[f]>r[1])return null;a=l[f],s=t[1]-(o[f]-r[0])/n;var h=new Zo(a,s);h.style=Va.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,f,o[f]),h.highlightStyle=Va.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(h.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(h.clickable=e.pointClickAble),h.refDataID=this.data.id,h.dataInfo={field:this.fields[f],value:o[f]},c.push(this.shapeFactory.createShape(h));var y=[a,s];u.push(y)}var d=new oi(u);d.style=Va.ShapeStyleTool({strokeColor:"#ee9900"},e.lineStyle),d.clickable=!1,d.hoverable=!1;var b=this.shapeFactory.createShape(d);this.shapes.push(b),this.shapes=this.shapes.concat(c),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((e=r.xShapeBlank)[0]+e[1]);if(s<=n)return null;a=s/(n-1)}else e=[a=i/(n+1),a,a];for(var l=0,u=0;u<n;u++)0==u?l=e[0]:l+=a,o.push(t[0]+l);return{xPositions:o,width:0}}}])&&bF(t.prototype,r),n&&bF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function SF(e){"@babel/helpers - typeof";return(SF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function PF(){return(PF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kF(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function xF(e,t){return(xF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function EF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=kF(e);if(t){var o=kF(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===SF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function kF(e){return(kF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xF(e,t)}(i,GD);var t,r,n,o=EF(i);function i(e,t,r,n,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,e,t,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Pie",s}return t=i,(r=[{key:"destroy",value:function(){PF(kF(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting,t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){e.useBackground&&this.shapes.push(Va.Background(this.shapeFactory,this.chartBox,e));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,c=0,f=u,p=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,h=0;h<r.length;h++){var y=Math.abs(r[h]);(c=0===h?u+y*s:h===y.length-1?f:u+y*s)-u>=360&&(c=359.9999999);var d=new xi(l[0],l[1],p,u,c);if(void 0===e.sectorStyleByFields){var b=h%t.length;d.style=Va.ShapeStyleTool(null,e.sectorStyle,t,null,b)}else d.style=Va.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,h,r[h]);d.highlightStyle=Va.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(d.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(d.clickable=e.sectorClickAble),d.refDataID=this.data.id,d.dataInfo={field:this.fields[h],value:r[h]},this.shapes.push(this.shapeFactory.createShape(d)),u=c}this.shapesConvertToRelativeCoordinate()}}}}])&&_F(t.prototype,r),n&&_F(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function CF(e){"@babel/helpers - typeof";return(CF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function RF(){return(RF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=IF(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function AF(e,t){return(AF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function LF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=IF(e);if(t){var o=IF(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===CF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function IF(e){return(IF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var MF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AF(e,t)}(i,GD);var t,r,n,o=LF(i);function i(e,t,r,n,a,s){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(l=o.call(this,e,t,r,n,a,s)).CLASS_NAME="SuperMap.Feature.Theme.Point",l}return t=i,(r=[{key:"destroy",value:function(){RF(IF(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues,i=this.calculateXShapeInfo();if(i){var a,s,l=i.xPositions;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(Va.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(Va.GraphAxis(this.shapeFactory,t,e,i));for(var u=0,c=o.length;u<c;u++){if(o[u]<r[0]||o[u]>r[1])return null;a=l[u],s=t[1]-(o[u]-r[0])/n;var f=new Zo(a,s);f.style=Va.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,u,o[u]),f.highlightStyle=Va.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(f.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(f.clickable=e.pointClickAble),f.refDataID=this.data.id,f.dataInfo={field:this.fields[u],value:o[u]},this.shapes.push(this.shapeFactory.createShape(f))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((e=r.xShapeBlank)[0]+e[1]);if(s<=n)return null;a=s/(n-1)}else e=[a=i/(n+1),a,a];for(var l=0,u=0;u<n;u++)0==u?l=e[0]:l+=a,o.push(t[0]+l);return{xPositions:o,width:0}}}])&&TF(t.prototype,r),n&&TF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function NF(e){"@babel/helpers - typeof";return(NF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FF(){return(FF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=UF(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function BF(e,t){return(BF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function GF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=UF(e);if(t){var o=UF(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===NF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function UF(e){return(UF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var JF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BF(e,t)}(i,GD);var t,r,n,o=GF(i);function i(e,t,r,n,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,e,t,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Ring",s}return t=i,(r=[{key:"destroy",value:function(){FF(UF(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],t=this.setting;t.useBackground&&this.shapes.push(Va.Background(this.shapeFactory,this.chartBox,t));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,c=0,f=u,p=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,h=t.innerRingRadius>=0&&t.innerRingRadius<p,y=void 0!==t.innerRingRadius&&!isNaN(t.innerRingRadius)&&h?t.innerRingRadius:0,d=0;d<r.length;d++){var b=Math.abs(r[d]);c=0===d?u+b*s:d===b.length-1?f:u+b*s;var v=new xi(l[0],l[1],p,u,c,y);if(void 0===t.sectorStyleByFields){var m=d%e.length;v.style=Va.ShapeStyleTool(null,t.sectorStyle,e,null,m)}else v.style=Va.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,d,r[d]);v.highlightStyle=Va.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(v.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(v.clickable=t.sectorClickAble),v.refDataID=this.data.id,v.dataInfo={field:this.fields[d],value:r[d]},this.shapes.push(this.shapeFactory.createShape(v)),u=c}this.shapesConvertToRelativeCoordinate()}}}}])&&DF(t.prototype,r),n&&DF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();var VF="EXCEL",HF="CSV",zF="GEOJSON",WF="JSON";function qF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var YF=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initView()}var t,r,n;return t=e,(r=[{key:"_initView",value:function(){var e=document.createElement("div");e.hidden=!0,e.setAttribute("class","component-messageboxcontainer component-border-bottom-orange");var t=document.createElement("div");t.setAttribute("class","icon"),this.icon=document.createElement("span"),this.icon.setAttribute("class","supermapol-icons-message-warning"),t.appendChild(this.icon),e.appendChild(t);var r=document.createElement("div");r.setAttribute("class","component-messagebox"),r.innerHTML="",e.appendChild(r),this.messageBox=r;var n=document.createElement("div");n.setAttribute("class","component-messagebox__cancelbtncontainer");var o=document.createElement("button");o.setAttribute("class","component-messagebox__cancelBtn"),o.innerHTML="x",o.onclick=this.closeView.bind(this),n.appendChild(o),e.appendChild(n),this.messageBoxContainer=e,document.body.appendChild(this.messageBoxContainer)}},{key:"closeView",value:function(){this.messageBoxContainer.hidden=!0}},{key:"showView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warring";"success"===t?(this.icon.setAttribute("class","supermapol-icons-message-success"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-green")):"failure"===t?(this.icon.setAttribute("class","supermapol-icons-message-failure"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-red")):"warring"===t&&(this.icon.setAttribute("class","supermapol-icons-message-warning"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-orange")),this.messageBox.innerHTML=e,this.messageBoxContainer.hidden=!1}}])&&qF(t.prototype,r),n&&qF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),XF=function(){try{return echarts}catch(e){return{}}}(),QF=r.n(XF),ZF={"en-US":{title_dataFlowService:"Data Flow Service",title_distributedAnalysis:"Distributed Analysis",title_clientComputing:"Client Computing",title_dataServiceQuery:"Data Service Query",title_searchCity:"Search city",title_searchLayer:" Search layer",text_input_value_inputDataFlowUrl:"Please enter the data stream service address such as: ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"Display feature information",text_subscribe:"subscribe",text_cancelSubscribe:"unsubscribe",text_densityAnalysis:"Density Analysis",text_CalculateTheValuePerUnitArea:"Calculate the value per unit area within the neighborhood shape",text_option_selectDataset:"Please select a dataset",text_label_dataset:"Dataset",text_option_simplePointDensityAnalysis:"Simple point density analysis",text_option_nuclearDensityAnalysis:"Nuclear density analysis",text_label_analyticalMethod:"Analytical method",text_option_quadrilateral:"Quadrilateral",text_option_hexagon:"hexagon",text_label_meshType:"Mesh type",text_option_notSet:"Not set",text_label_weightField:"Weight field",text_label_gridSizeInMeters:"Grid size",text_label_searchRadius:"Search radius",text_label_queryRange:"Scope of analysis",text_label_areaUnit:"Area unit",text_option_equidistantSegmentation:"Equidistant segmentation",text_option_logarithm:"Logarithm",text_option_equalCountingSegment:"Equal counting segment",text_option_squareRootSegmentation:"Square root segmentation",text_label_thematicMapSegmentationMode:"Thematic map segmentation mode",text_label_thematicMapSegmentationParameters:"Thematic map segmentation parameters",text_option_greenOrangePurpleGradient:"Green orange purple gradient",text_option_greenOrangeRedGradient:"Green orange red gradient",text_option_rainbowGradient:"Rainbow gradient",text_option_spectralGradient:"Spectral gradient",text_option_terrainGradient:"Terrain gradient",text_label_thematicMapColorGradientMode:"Thematic map color gradient mode",text_label_resultLayerName:"Result layer name",text_chooseFile:"Open File",text_isoline:"Isoline",text_extractDiscreteValue:"Extract discrete value generation curve",text_buffer:"Buffer",text_specifyTheDistance:"Specify the distance to create the surrounding area",text_label_analysisLayer:"Analysis layer",text_label_extractField:"Extract field",text_label_extractedValue:"Extracted value",text_label_distanceAttenuation:"Distance attenuation",text_label_gridSize:"gridSize",text_label_bufferRadius:"Buffer radius",text_label_defaultkilometers:"Default 10 kilometers",text_label_kilometer:"kilometer",text_label_unit:"unit",text_retainOriginal:"Retain original object field",text_mergeBuffer:"Merge buffer",text_label_color:"Color",text_label_buffer:"[Buffer]",text_label_isolines:"[Isolines]",text_label_queryRangeTips:"The default is the full range of input data. Example: -74.050, 40.650, -73.850, 40.850",text_label_queryModel:"Query mode",text_label_IDArrayOfFeatures:"ID array of features",text_label_maxFeatures:"The maximum number of features that can be returned",text_label_bufferDistance:"Buffer distance",text_label_queryRange1:"Query range",text_label_spatialQueryMode:"Spatial query mode",text_label_featureFilter:"Feature filter",text_label_geometricObject:"Geometric object",text_label_queryMode:"Query mode",text_label_searchTips:"Search for city locations or layer features",text_label_chooseSearchLayers:"Select a query layer",text_loadSearchCriteria:"Load search criteria",text_saveSearchCriteria:"Save search criteria",btn_analyze:"Analyze",btn_analyzing:"Analyzing",btn_emptyTheAnalysisLayer:"Empty the analysis layer",btn_cancelAnalysis:"Cancel",btn_query:"Query",btn_querying:"Querying",btn_emptyTheRresultLayer:"Clear all result layers","msg_dataReturnedIsEmpty.":"The request is successful and the data returned by the query is empty.",msg_dataFlowServiceHasBeenSubscribed:"The data stream service has been subscribed to.",msg_inputDataFlowUrlFirst:"Please enter the data stream service address first.",msg_datasetOrMethodUnsupport:"This dataset does not support this analysis type. Please reselect the dataset.",msg_selectDataset:"Please select a data set!",msg_setTheWeightField:"Please set the weight field!",msg_theFieldNotSupportAnalysis:"The field you currently select does not support analysis!",msg_resultIsEmpty:"The result of the analysis is empty!",msg_openFileFail:"Failed to open file!",msg_fileTypeUnsupported:"File format is not supported!",msg_fileSizeExceeded:"File size exceeded! The file size should not exceed 10M!",msg_dataInWrongGeoJSONFormat:"Wrong data format! Non standard GEOJSON format data!",msg_dataInWrongFormat:"Wrong data format! Non standard EXCEL, CSV or GEOJSON format data!",msg_searchKeywords:"Search keywords cannot be empty. Please enter your search criteria.",msg_searchGeocodeField:"Did not match the address matching service data!",msg_cityGeocodeField:"The address matching service of the current city is not configured.",msg_getFeatureField:"No related vector features found!",msg_dataflowservicesubscribed:"The data stream service has been subscribed to.",msg_subscribesucceeded:"The data stream service subscription was successful.",msg_crsunsupport:"Does not support the coordinate system of the current map",msg_tilematrixsetunsupport:"Incoming TileMatrixSet is not supported",msg_jsonResolveFiled:"JSON format parsing failureï¼",msg_requestContentFiled:"Failed to request data through iportal!",msg_getdatafailed:"Failed to get data!"},"zh-CN":{title_dataFlowService:"æ°æ®æµæå¡",title_distributedAnalysis:"åå¸å¼åæ",title_clientComputing:"å®¢æ·ç«¯è®¡ç®",title_dataServiceQuery:"æ°æ®æå¡æ¥è¯¢",title_searchCity:"æç´¢åå¸",title_searchLayer:"æç´¢å¾å±",text_input_value_inputDataFlowUrl:"è¯·è¾å¥æ°æ®æµæå¡å°åå¦:ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"æ¾ç¤ºè¦ç´ ä¿¡æ¯",text_subscribe:"è®¢é",text_cancelSubscribe:"åæ¶è®¢é",text_densityAnalysis:"å¯åº¦åæ",text_CalculateTheValuePerUnitArea:"è®¡ç®ç¹æå®é»åå½¢ç¶åçæ¯åä½é¢ç§¯éå¼",text_option_selectDataset:"è¯·éæ©æ°æ®é",text_label_dataset:"æ°æ®é",text_option_simplePointDensityAnalysis:"ç®åç¹å¯åº¦åæ",text_option_nuclearDensityAnalysis:"æ ¸å¯åº¦åæ",text_label_analyticalMethod:"åææ¹æ³",text_option_quadrilateral:"åè¾¹å½¢",text_option_hexagon:"å­è¾¹å½¢",text_label_meshType:"ç½æ ¼é¢ç±»å",text_option_notSet:"æªè®¾ç½®",text_label_weightField:"æéå­æ®µ",text_label_gridSizeInMeters:"ç½æ ¼å¤§å°",text_label_searchRadius:"æç´¢åå¾",text_label_queryRange:"åæèå´",text_label_areaUnit:"é¢ç§¯åä½",text_option_equidistantSegmentation:"ç­è·ç¦»åæ®µ",text_option_logarithm:"å¯¹æ°",text_option_equalCountingSegment:"ç­è®¡æ°åæ®µ",text_option_squareRootSegmentation:"å¹³æ¹æ ¹åæ®µ",text_label_thematicMapSegmentationMode:"ä¸é¢å¾åæ®µæ¨¡å¼",text_label_thematicMapSegmentationParameters:"ä¸é¢å¾åæ®µåæ°",text_option_greenOrangePurpleGradient:"ç»¿æ©ç´«æ¸å",text_option_greenOrangeRedGradient:"ç»¿æ©çº¢æ¸å",text_option_rainbowGradient:"å½©è¹æ¸å",text_option_spectralGradient:"åè°±æ¸å",text_option_terrainGradient:"å°å½¢æ¸å",text_label_thematicMapColorGradientMode:"ä¸é¢å¾é¢è²æ¸åæ¨¡å¼",text_label_resultLayerName:"ç»æå¾å±åç§°",text_chooseFile:"éæ©æä»¶",text_isoline:"ç­å¼çº¿",text_extractDiscreteValue:"æåç¦»æ£å¼çææ²çº¿",text_buffer:"ç¼å²åº",text_specifyTheDistance:"æå®è·ç¦»åå»ºå¨è¾¹åºå",text_label_analysisLayer:"åæå¾å±",text_label_extractField:"æåå­æ®µ",text_label_extractedValue:"æåå¼",text_label_distanceAttenuation:"è·ç¦»è¡°å",text_label_gridSize:"æ æ ¼å¤§å°",text_label_bufferRadius:"ç¼å²åå¾",text_label_defaultkilometers:"é»è®¤10åç±³",text_option_kilometer:"åç±³",text_label_unit:"åä½",text_retainOriginal:"ä¿çåå¯¹è±¡å­æ®µå±æ§",text_mergeBuffer:"åå¹¶ç¼å²åº",text_label_color:"é¢è²",text_label_buffer:"[ç¼å²åº]",text_label_isolines:"[ç­å¼çº¿]",text_label_queryRangeTips:"é»è®¤ä¸ºè¾å¥æ°æ®çå¨å¹èå´ãèä¾ï¼-74.050,40.650,-73.850,40.850",text_label_IDArrayOfFeatures:"è¦ç´  ID æ°ç»",text_label_maxFeatures:"æå¤å¯è¿åçè¦ç´ æ°é",text_label_bufferDistance:"ç¼å²åºè·ç¦»",text_label_queryRange1:"æ¥è¯¢èå´",text_label_spatialQueryMode:"ç©ºé´æ¥è¯¢æ¨¡å¼",text_label_featureFilter:"è¦ç´ è¿æ»¤å¨",text_label_geometricObject:"å ä½å¯¹è±¡",text_label_queryMode:"æ¥è¯¢æ¨¡å¼",text_label_searchTips:"æç´¢åå¸å°ç¹æå¾å±è¦ç´ ",text_label_chooseSearchLayers:"éæ©æ¥è¯¢å¾å±",text_loadSearchCriteria:"å è½½æç´¢æ¡ä»¶",text_saveSearchCriteria:"ä¿å­æç´¢æ¡ä»¶",btn_analyze:"åæ",btn_analyzing:"åæä¸­",btn_emptyTheAnalysisLayer:"æ¸ç©ºåæå¾å±",btn_cancelAnalysis:"åæ¶",btn_query:"æ¥è¯¢",btn_querying:"æ¥è¯¢ä¸­",btn_emptyTheRresultLayer:"æ¸é¤ææç»æå¾å±",msg_dataFlowServiceHasBeenSubscribed:"å·²è®¢éè¯¥æ°æ®æµæå¡ã",msg_inputDataFlowUrlFirst:"è¯·åè¾å¥æ°æ®æµæå¡å°åã",msg_datasetOrMethodUnsupport:"è¯¥æ°æ®éä¸æ¯ææ¬åæç±»åï¼è¯·éæ°éæ©æ°æ®é",msg_selectDataset:"è¯·éæ©æ°æ®éï¼",msg_setTheWeightField:"è¯·è®¾ç½®æéå­æ®µï¼",msg_theFieldNotSupportAnalysis:"æ¨å½åéæ©çå­æ®µä¸æ¯æåæï¼",msg_resultIsEmpty:"åæçç»æä¸ºç©ºï¼",msg_dataReturnedIsEmpty:"è¯·æ±æåï¼æ¥è¯¢è¿åçæ°æ®ä¸ºç©ºã",msg_openFileFail:"æå¼æä»¶å¤±è´¥ï¼",msg_fileTypeUnsupported:"ä¸æ¯æè¯¥æä»¶æ ¼å¼ï¼",msg_fileSizeExceeded:"æä»¶å¤§å°è¶éï¼æä»¶å¤§å°ä¸å¾è¶è¿ 10Mï¼",msg_dataInWrongGeoJSONFormat:"æ°æ®æ ¼å¼éè¯¯ï¼éæ åç GEOJSON æ ¼å¼æ°æ®ï¼",msg_dataInWrongFormat:"æ°æ®æ ¼å¼éè¯¯ï¼éæ åç EXCEL, CSV æ GEOJSON æ ¼å¼æ°æ®ï¼",msg_searchKeywords:"æç´¢å³é®å­ä¸è½ä¸ºç©ºï¼è¯·è¾å¥æç´¢æ¡ä»¶ã",msg_searchGeocodeField:"æªå¹éå°å°åå¹éæå¡æ°æ®ï¼",msg_cityGeocodeField:"æªéç½®å½ååå¸çå°åå¹éæå¡ã",msg_getFeatureField:"æªæ¥æ¾å°ç¸å³ç¢éè¦ç´ ï¼",msg_dataflowservicesubscribed:"å·²è®¢éè¯¥æ°æ®æµæå¡ã",msg_subscribesucceeded:"æ°æ®æµæå¡è®¢éæåã",msg_crsunsupport:"ä¸æ¯æå½åå°å¾çåæ ç³»",msg_tilematrixsetunsupport:"ä¸æ¯æä¼ å¥çTileMatrixSet",msg_jsonResolveFiled:"jsonæ ¼å¼è§£æå¤±è´¥ï¼",msg_requestContentFiled:"éè¿iportalè¯·æ±æ°æ®å¤±è´¥ï¼",msg_getdatafailed:"è·åæ°æ®å¤±è´¥ï¼"},code:null,defaultCode:"en-US",getCode:function(){return ZF.code||ZF.setCode(),ZF.code},setCode:function(){var e=this.getLanguageFromCookie();e?ZF.code=e:(e=ZF.defaultCode,0===(e="Netscape"===navigator.appName?navigator.language:navigator.browserLanguage).indexOf("zh")&&(e="zh-CN"),0===e.indexOf("en")&&(e="en-US"),ZF.code=e)},getLanguageFromCookie:function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){for(var r=e[t];" "===r.charAt(0);)r=r.substring(1);if(-1!==r.indexOf("language="))return r.substring("language=".length,r.length)}return""},i18n:function(e){var t=ZF[ZF.getCode()],r=t&&t[e];return r||(r=e),r}},KF=function(){try{return XLSX}catch(e){return{}}}(),$F={rABS:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsBinaryString,rABF:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsArrayBuffer,rAT:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsText,readFile:function(e,t,r,n,o){WF===e||zF===e?this.readTextFile(t,r,n,o):VF!==e&&HF!==e||this.readXLSXFile(t,r,n,o)},readTextFile:function(e,t,r,n){var o=new FileReader;o.onloadend=function(e){t&&t.call(n,e.target.result)},o.onerror=function(e){r&&r.call(n,e)},this.rAT?o.readAsText(e.file,"utf-8"):o.readAsBinaryString(e.file)},readXLSXFile:function(e,t,r,n){var o=new FileReader;o.onloadend=function(e){var o=new Uint8Array(e.target.result),i=KF.read(o,{type:"array"});try{if(i&&i.SheetNames&&i.SheetNames.length>0){var a=i.SheetNames[0],s=KF.utils.sheet_to_csv(i.Sheets[a]);t&&t.call(n,s)}}catch(e){r&&r.call(n,e)}},o.onerror=function(e){r&&r.call(n,e)},this.rABF&&o.readAsArrayBuffer(e.file)},processDataToGeoJson:function(e,t,r,n,o){var i=null;if("EXCEL"===e||"CSV"===e)i=this.processExcelDataToGeoJson(t),r&&r.call(o,i);else if("JSON"===e||"GEOJSON"===e){var a=t;"string"==typeof a&&(a=JSON.parse(a)),"ISERVER"===a.type?i=a.data.recordsets[0].features:"FeatureCollection"===a.type?i=a:n&&n.call(o,ZF.i18n("msg_dataInWrongGeoJSONFormat")),r&&r.call(o,i)}else n&&n.call(o,ZF.i18n("msg_dataInWrongFormat"))},processExcelDataToGeoJson:function(e){for(var t=this.string2Csv(e),r=t.colTitles,n=-1,o=-1,i=0,a=r.length;i<a;i++)this.isXField(r[i])&&(n=i),this.isYField(r[i])&&(o=i);for(var s=[],l=0,u=t.rows.length;l<u;l++){var c=t.rows[l],f=Number(c[n]),p=Number(c[o]),h={};for(var y in t.colTitles){h[t.colTitles[y]]=t.rows[l][y]}var d={type:"Feature",geometry:{type:"Point",coordinates:[f,p]},properties:h};s.push(d)}return s},isXField:function(e){var t=e.toLowerCase();return"x"===t||"smx"===t||"jd"===t||"ç»åº¦"===t||"ä¸ç»"===t||"longitude"===t||"lot"===t||"lon"===t||"lng"===t||"xåæ "===t},isYField:function(e){var t=e.toLowerCase();return"y"===t||"smy"===t||"wd"===t||"çº¬åº¦"===t||"åçº¬"===t||"latitude"===t||"lat"===t||"yåæ "===t},string2Csv:function(e,t){var r=e.split("\n"),n={};n.colTitles=t?[]:r[0].split(","),n.rows=[];for(var o=t?0:1;o<r.length;o++)r[o]&&n.rows.push(r[o].split(","));return n}};function eB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var tB=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasets=t,this.EVENT_TYPES=["getdatafailed"],this.events=new Mn(this,null,this.EVENT_TYPES)}var t,r,n;return t=e,(r=[{key:"getDatasetInfo",value:function(e){var t=this.datasets.url,r=this;fu.get(t).then(function(e){return e.json()}).then(function(t){if(t.datasetInfo){var n=t.datasetInfo;r.datasetsInfo={dataSourceName:n.dataSourceName,datasetName:n.name,mapName:t.name},e({result:r.datasetsInfo})}}).catch(function(e){console.log(e),r._fireFailedEvent(e)})}},{key:"getDataFeatures",value:function(e,t){var r,n,o=e.result,i={name:o.datasetName+"@"+o.dataSourceName};Object.assign(i,this.datasets.queryInfo),r=new ah(i),n=new Rh({queryParameter:r,datasetNames:[o.dataSourceName+":"+o.datasetName],fromIndex:0,toIndex:1e5}),new Fh(o.dataUrl,{eventListeners:{processCompleted:t,processFailed:function(){}}}).processAsync(n)}},{key:"getLayerFeatures",value:function(e,t){var r,n,o=e.result,i={name:o.mapName};Object.assign(i,this.datasets.queryInfo),r=new ah(i),n=new tE({queryParams:[r],expectCount:1e5}),new lE(o.dataUrl,{eventListeners:{processCompleted:t,processFailed:function(){}}}).processAsync(n)}},{key:"getDataInfoByIptl",value:function(e){this.getServiceInfo(this.datasets.url,e)}},{key:"getServiceInfo",value:function(e,t){var r=this;fu.get(e,null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json()}).then(function(n){var o;!1!==n.succeed?n.dataItemServices&&n.dataItemServices.length>0?(n.dataItemServices.forEach(function(n){if("RESTDATA"===n.serviceType&&"PUBLISHED"===n.serviceStatus)o=n;else{if("RESTMAP"!==n.serviceType||"PUBLISHED"!==n.serviceStatus)return void r.getDatafromContent(e,t);o=n}}),o&&r.getDatafromRest(o.serviceType,o.address,t)):r.getDatafromContent(e,t):r._fireFailedEvent(n)}).catch(function(e){console.log(e),r._fireFailedEvent(e)})}},{key:"getDatafromContent",value:function(e,t){var r=this,n={result:{}},o=this;e+="/content.json?pageSize=9999999&currentPage=1",fu.get(e,null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json()}).then(function(e){if(!1!==e.succeed){if(e.type){if("JSON"===e.type||"GEOJSON"===e.type){if(e.content=JSON.parse(e.content.trim()),!e.content.features)return void console.log(ZF.i18n("msg_jsonResolveFiled"));var i=r._formatGeoJSON(e.content);n.result.features={type:e.content.type,features:i}}else if("EXCEL"===e.type||"CSV"===e.type){var a=r._excelData2Feature(e.content);n.result.features={type:"FeatureCollection",features:a}}t(n,"content")}}else o._fireFailedEvent(e)},this).catch(function(e){console.log(e),o._fireFailedEvent(e)})}},{key:"getDatafromRest",value:function(e,t,r){var n=this,o=this.datasets.withCredentials;if("RESTDATA"===e){var i,a,s="".concat(t,"/data/datasources");fu.get(s,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){i=e.datasourceNames[0],s="".concat(t,"/data/datasources/").concat(i,"/datasets"),fu.get(s,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){return a=e.datasetNames[0],n.getDatafromRestData("".concat(t,"/data"),[i+":"+a],r),[i+":"+a]}).catch(function(e){n._fireFailedEvent(e)})}).catch(function(e){n._fireFailedEvent(e)})}else{var l,u,c,f="".concat(t,"/maps");fu.get(f,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){l=e[0].name,c=e[0].path,f=f="".concat(t,"/maps/").concat(l,"/layers"),fu.get(f,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){return u=e[0].subLayers.layers[0].caption,n.getDatafromRestMap(u,c,r),u}).catch(function(e){n._fireFailedEvent(e)})}).catch(function(e){n._fireFailedEvent(e)})}}},{key:"getDatafromRestData",value:function(e,t,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"SmID>0",this._getFeatureBySQL(e,t,this.datasets.queryInfo,function(e){r(e,"RESTDATA")},function(e){console.log(e),n._fireFailedEvent(e)})}},{key:"getDatafromRestMap",value:function(e,t,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"smid=1",this._queryFeatureBySQL(t,e,this.datasets.queryInfo,null,null,function(e){r(e,"RESTMAP")},function(e){console.log(e),n._fireFailedEvent(e)})}},{key:"_getFeatureBySQL",value:function(e,t,r,n,o){var i,a,s={name:t.join().replace(":","@")};Object.assign(s,r),i=new ah(s),a=new Rh({queryParameter:i,datasetNames:t,fromIndex:0,toIndex:1e5,returnContent:!0}),new Fh(e,{eventListeners:{processCompleted:function(e){n&&n(e)},processFailed:function(e){o&&o(e)}}}).processAsync(a)}},{key:"_queryFeatureBySQL",value:function(e,t,r,n,o,i,a,s,l,u){var c,f,p={name:t};Object.assign(p,r),c=new ah(p),n&&(c.fields=n);var h={queryParams:[c]};u&&(h.queryOption=kt.ATTRIBUTE),s&&(h.startRecord=s),l&&(h.expectCount=l),o&&(h.prjCoordSys={epsgCode:o}),f=new tE(h),this._queryBySQL(e,f,function(e){"processCompleted"===e.type?i(e):a(e)})}},{key:"_queryBySQL",value:function(e,t,r,n){new lE(e,{eventListeners:{scope:this,processCompleted:r,processFailed:r},format:this._processFormat(n)}).processAsync(t)}},{key:"_processFormat",value:function(e){return e||Pt.GEOJSON}},{key:"_formatGeoJSON",value:function(e){var t=e.features;return t.forEach(function(e,t){e.properties.index=t}),t}},{key:"_excelData2Feature",value:function(e){for(var t=e.colTitles,r=-1,n=-1,o=0,i=t.length;o<i;o++)$F.isXField(t[o])&&(r=o),$F.isYField(t[o])&&(n=o);for(var a=[],s=0,l=e.rows.length;s<l;s++){var u=e.rows[s],c=Number(u[r]),f=Number(u[n]),p={};for(var h in e.colTitles){p[e.colTitles[h]]=e.rows[s][h]}p.index=s+"";var y={type:"Feature",geometry:{type:"Point",coordinates:[c,f]},properties:p};a.push(y)}return a}},{key:"_fireFailedEvent",value:function(e){var t=e?{error:e,message:ZF.i18n("msg_getdatafailed")}:{message:ZF.i18n("msg_getdatafailed")};this.events.triggerEvent("getdatafailed",t)}}])&&eB(t.prototype,r),n&&eB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rB(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return nB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nB(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function nB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var iB=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasets=t.datasets,this.xField=[],this.yField=[],this.grid={top:"50px",bottom:"50px",left:"50px",right:"60px"},this.chartType=t.type||"bar",this._initXYField(t.chartOptions),this.EVENT_TYPES=["getdatafailed"],this.events=new Mn(this,null,this.EVENT_TYPES)}var t,r,n;return t=e,(r=[{key:"_initXYField",value:function(e){var t=this;e&&e.length>0&&e.forEach(function(e){e.xAxis&&t.xField.push({field:e.xAxis.field,name:e.xAxis.name}),e.yAxis&&t.yField.push({field:e.yAxis.field,name:e.yAxis.name})})}},{key:"getDatasetInfo",value:function(e){var t=this;this.createChart=e,this.datasets&&this._checkUrl(this.datasets.url)&&(this.chartModel=new tB(this.datasets),"iServer"===this.datasets.type?this.chartModel.getDatasetInfo(this._getDatasetInfoSuccess.bind(this)):"iPortal"===this.datasets.type&&this.chartModel.getDataInfoByIptl(this._getDataInfoSuccess.bind(this)),this.chartModel.events.on({getdatafailed:function(e){t.events.triggerEvent("getdatafailed",e)}}))}},{key:"_getDatasetInfoSuccess",value:function(e){var t=this.datasets.url,r=t.indexOf("rest");if(r>0){var n=t.indexOf("/",r+5),o=t.substring(r+5,n),i=t.substring(0,r+4)+"/data";if("maps"===o){var a=t.indexOf("/",n+1),s=t.substring(n+1,a);i=t.substring(0,r+4)+"/maps/"+s,e.result.dataUrl=i,this._getLayerFeatures(e)}else"data"===o&&(e.result.dataUrl=i,this._getDataFeatures(e))}}},{key:"_getDataInfoSuccess",value:function(e,t){"RESTMAP"===t?this._getChartDatasFromLayer(e):this._getChartDatas(e)}},{key:"_getDataFeatures",value:function(e){this.chartModel.getDataFeatures(e,this._getChartDatas.bind(this))}},{key:"_getLayerFeatures",value:function(e){this.chartModel.getLayerFeatures(e,this._getChartDatasFromLayer.bind(this))}},{key:"_getChartDatas",value:function(e){if(e){this.features=e.result.features;var t=this.features.features,r={};if(t.length){var n=t[0],o=[],i=[];for(var a in n.properties)o.push(a),i.push(this._getDataType(n.properties[a]));for(var s in r={features:t,fieldCaptions:o,fieldTypes:i,fieldValues:[]},i){var l=[];for(var u in t){var c=t[u],f=r.fieldCaptions[s],p=c.properties[f];l.push(p)}r.fieldValues.push(l)}this.createChart(r)}}}},{key:"_getChartDatasFromLayer",value:function(e){if(e.result.recordsets){var t=e.result.recordsets[0],r=t.features.features;this.features=t.features;var n={};if(r.length){for(var o in(n={features:t.features,fieldCaptions:t.fieldCaptions,fieldTypes:t.fieldTypes,fieldValues:[]}).fieldCaptions){var i=[];for(var a in r){var s=r[a],l=n.fieldCaptions[o],u=s.properties[l];i.push(u)}n.fieldValues.push(i)}this.createChart(n)}}}},{key:"_createChartOptions",value:function(e){return this.calculatedData=this._createChartDatas(e),this.updateChartOptions(this.chartType)}},{key:"changeType",value:function(e){if(e!==this.chartType)return this.chartType=e,this.updateChartOptions(this.chartType)}},{key:"updateData",value:function(e,t,r){this.updateChart=r,this.xField=[],this.yField=[],this._initXYField(t),e.type=e.type||"iServer",e.withCredentials=e.withCredentials||!1,this.datasets=e,this.getDatasetInfo(this._updateDataSuccess.bind(this))}},{key:"_updateDataSuccess",value:function(e){var t=this._createChartOptions(e);this.updateChart(t)}},{key:"updateChartOptions",value:function(e,t){if(this.calculatedData){var r=this.grid,n=this._createChartSeries(this.calculatedData,e),o=[];for(var i in this.calculatedData.XData)o.push({value:this.calculatedData.XData[i].fieldsData});var a={type:"category",name:this.xField[0].name||"X",data:o,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},s={type:"value",name:this.yFieldName||"Y",data:{},nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},l={formatter:"{b0}: {c0}"},u="#404a59";return t&&(t.grid&&(r=t.grid),t.tooltip&&(l=t.tooltip),t.backgroundColor&&(u=t.backgroundColor)),{backgroundColor:u,grid:r,series:n,xAxis:a,yAxis:s,tooltip:l}}}},{key:"_createChartDatas",value:function(e){var t=0,r=[],n=e.fieldCaptions,o=this;n.forEach(function(e,r){o.xField[0]&&e===o.xField[0].field&&(t=r)}),this.yFieldName="",this.yField.forEach(function(e,t){0!==t&&(o.yFieldName=o.yFieldName+","),o.yFieldName=o.yFieldName+e.name,n.forEach(function(t,n){t===e.field&&r.push(n)})});var i=this._getAttrData(e,t),a=[];if(r.length>0)r.forEach(function(t){var r=[];for(var n in e.fieldValues[t])r.push({value:e.fieldValues[t][n]});a.push(r)});else{for(var s=[],l=[],u=i.length,c=0;c<u;c++){for(var f=!1,p=0,h=l.length;p<h;p++)if(i[c].fieldsData===l[p].fieldsData){s[p].value++,l[p].recordIndexs.push(c),f=!0;break}f||i[c].fieldsData&&(l.push({fieldsData:i[c].fieldsData,recordIndexs:[c]}),s.push({value:1}))}i=l,a=[s]}return{XData:i,YData:a}}},{key:"_getAttrData",value:function(e,t){0===t&&(this.xField=[{field:e.fieldCaptions[t],name:e.fieldCaptions[t]}]);for(var r=[],n=0,o=e.fieldValues[t].length;n<o;n++){var i=e.fieldValues[t][n];r.push({recordIndexs:n,fieldsData:i})}return r}},{key:"_createChartSeries",value:function(e,t){var r=[];return e.YData.forEach(function(e){var n,o=0,i=[],a=rB(e);try{for(a.s();!(n=a.n()).done;){o=n.value.value,i.push({value:o})}}catch(e){a.e(e)}finally{a.f()}var s={type:t,data:i,name:"y"};r.push(s)}),r}},{key:"_isDate",value:function(e){return/((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/gi.test(e)}},{key:"_isNumber",value:function(e){var t=Number(e);return 0===t||!isNaN(t)}},{key:"_getDataType",value:function(e){if(null!==e&&void 0!==e&&""!==e){if(this._isDate(e))return"DATE";if(this._isNumber(e))return"NUMBER"}return"STRING"}},{key:"_checkUrl",value:function(e){return!(""===e||!this._isMatchUrl(e))&&(!/^http[s]?:\/\/localhost/.test(e)&&!/^http[s]?:\/\/127.0.0.1/.test(e))}},{key:"_isMatchUrl",value:function(e){return new RegExp("(https?|http|file|ftp)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(e)}},{key:"getStyle",value:function(){return{grid:this.grid,tooltip:this.tooltip,backgroundColor:this.backgroundColor}}},{key:"getFeatures",value:function(){return this.features}},{key:"setStyle",value:function(e){return this.updateChartOptions(this.chartType,e)}}])&&oB(t.prototype,r),n&&oB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function aB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var sB=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domID=t,this.chartType=r.type||"bar",r.datasets.type=r.datasets.type||"iServer",r.datasets.withCredentials=r.datasets.withCredentials||!1,this.viewModel=new iB(r),this._fillDataToView()}var t,r,n;return t=e,(r=[{key:"onAdd",value:function(e){this.addChart=e}},{key:"_fillDataToView",value:function(){var e=new YF;this.viewModel.getDatasetInfo(this._createChart.bind(this)),this.viewModel.events.on({getdatafailed:function(t){e.showView(t.message)}})}},{key:"getStyle",value:function(){return this.viewModel.getStyle()}},{key:"getFeatures",value:function(){return this.viewModel.getFeatures()}},{key:"setStyle",value:function(e){var t=this.viewModel.setStyle(e);this._updateChart(t)}},{key:"changeType",value:function(e){if(this.chartType!==e){this.chartType=e;var t=this.viewModel.changeType(e);this._updateChart(t)}}},{key:"updateData",value:function(e,t){var r=this;this.viewModel.updateData(e,t,function(e){r._updateChart(e),r.addChart&&r.addChart()})}},{key:"_createChart",value:function(e){this.echart=QF().init(document.getElementById(this.domID),null,{renderer:"canvas"});var t=this.viewModel._createChartOptions(e);this.echart.setOption(t),this.addChart&&this.addChart()}},{key:"_updateChart",value:function(e){this.echart&&(this.echart.clear(),this.echart.setOption(e))}}])&&aB(t.prototype,r),n&&aB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function lB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var uB=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.id=t.id?t.id:null,this.rootContainer=null}var t,r,n;return t=e,(r=[{key:"getElement",value:function(){return this.id&&(this.rootContainer.id=this.id),this.rootContainer}},{key:"_initView",value:function(){}},{key:"showView",value:function(){this.rootContainer.hidden=!1}},{key:"closeView",value:function(){this.rootContainer.hidden=!0}}])&&lB(t.prototype,r),n&&lB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function cB(e){"@babel/helpers - typeof";return(cB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pB(e,t){return(pB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=yB(e);if(t){var o=yB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===cB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function yB(e){return(yB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pB(e,t)}(i,uB);var t,r,n,o=hB(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var r=e.title?e.title:"";return t._initView(r),t}return t=i,(r=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-container");var r=document.createElement("div");r.setAttribute("class","component-title");var n=document.createElement("div");n.innerHTML=e,r.appendChild(n),t.appendChild(r);var o=document.createElement("div");return o.setAttribute("class","component-content"),t.appendChild(o),this.content=o,this.rootContainer=t,t}},{key:"getContentElement",value:function(){return this.content}},{key:"appendContent",value:function(e){this.content.appendChild(e)}}])&&fB(t.prototype,r),n&&fB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function bB(e){"@babel/helpers - typeof";return(bB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mB(e,t){return(mB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=wB(e);if(t){var o=wB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===bB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function wB(e){return(wB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var OB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mB(e,t)}(i,uB);var t,r,n,o=gB(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e))._initView(e),t}return t=i,(r=[{key:"_initView",value:function(e){var t=this._createElement("div","component-selecttool");e.labelName&&(this._createElement("label","component-selecttool__lable--describe",t).innerHTML=e.labelName);var r=this._createElement("div","component-selecttool--chart",t);r.setAttribute("tabindex","1");var n=this._createElement("div","component-selecttool__name",r);n.title=e.optionsArr[0],n.innerHTML=e.optionsArr[0];var o=this._createElement("div","component-selecttool__trianglebtn--chart",r),i=this._createElement("div","component-triangle-down-img",o),a=this._createElement("div","component-selecttool__content",r),s=this._createElement("div","component-selecttool__content--chart",a),l=this._createElement("div","component-selecttool__scrollarea__content",s);l.setAttribute("tabindex","1"),this.createOptions(l,e.optionsArr),this.optionClickEvent(l,n,e.optionsClickCb),this._selectClickEvent(r,a,i),this.rootContainer=t}},{key:"createOptions",value:function(e,t){for(var r in t){var n=this._createElement("div","component-selecttool__option",e);n.title=t[r],n.innerHTML=t[r]}}},{key:"_selectClickEvent",value:function(e,t,r){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",r.className="component-triangle-down-img"):(t.style.display="block",r.className="triangle-up-img"),e.preventDefault(),e.stopPropagation()},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation())},e.onblur=function(){t.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(e,t,r){var n=document.createElement(e||"div");return t&&(n.className=t),r&&r.appendChild(n),n}},{key:"optionClickEvent",value:function(e,t,r){for(var n=function(){var n=e.children[o];n.onclick=function(){t.innerHTML=n.innerHTML,t.title=n.title,n.getAttribute("data-value")&&t.setAttribute("data-value",n.getAttribute("data-value")),r&&r(n)}},o=0;o<e.children.length;o++)n()}}])&&vB(t.prototype,r),n&&vB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function SB(e){"@babel/helpers - typeof";return(SB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function PB(e,t){return(PB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=EB(e);if(t){var o=EB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===SB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function EB(e){return(EB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PB(e,t)}(i,uB);var t,r,n,o=xB(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e))._initView(e),t}return t=i,(r=[{key:"_initView",value:function(e){var t=document.createElement("div");t.className="component-dropdownbox--container";var r=document.createElement("div");r.setAttribute("tabindex","1"),r.className="component-dropdownbox",t.appendChild(r);var n=document.createElement("div");r.appendChild(n),this._createDropDownOption(e[0],n);var o=document.createElement("div");o.className="component-dropdownbox__triangle-btn",r.appendChild(o);var i=document.createElement("div");i.className="component-triangle-down-img",o.appendChild(i);var a={parentEle:r,dropDownContent:["component-dropdownbox__content component-dropdownbox__content--chart","dropDownContent"],scrollareaContent:"component-selecttool__scrollarea__content",optionsArr:e,triangleBtn:i,dropDownTopContainer:n};this._createDropDownBox(a),this.rootContainer=t}},{key:"_createDropDownBox",value:function(e){var t=e.parentEle,r=e.dropDownTopContainer,n=document.createElement("div");n.className=e.dropDownContent[0],t.appendChild(n);var o=document.createElement("div");o.className=e.scrollareaContent,n.appendChild(o);for(var i=e.optionsArr,a=0;a<i.length;a++)this._createDropDownOption(i[a],o);var s=e.triangleBtn;this._dropDownClickEvent(t,n,s),this._eleOnblur(t,n,s);for(var l=o.children,u=function(e){l[e].onclick=function(){r.innerHTML=l[e].outerHTML}},c=0;c<l.length;c++)u(c)}},{key:"_createDropDownOption",value:function(e,t){var r=document.createElement("div");r.className="component-dropdownbox__item";var n=e;n.dataValue&&r.setAttribute("data-value",n.dataValue),t.appendChild(r);var o=document.createElement("div");o.className="component-dropdownbox__item__img",r.appendChild(o);var i=document.createElement("div");n.icon.className&&(i.className=n.icon.className),n.icon.background&&(i.style.background=n.icon.background),o.appendChild(i);var a=document.createElement("div");a.className="component-dropdownbox__item__title",a.title=n.title,a.innerHTML=n.title,r.appendChild(a);var s=document.createElement("div");s.className="component-dropdownbox__item__remark",s.title=n.remark,s.innerHTML=n.remark,r.appendChild(s)}},{key:"_dropDownClickEvent",value:function(e,t,r){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",r.className="component-triangle-down-img"):(t.style.display="block",r.className="triangle-up-img"),e.preventDefault(),e.stopPropagation()},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation())}}},{key:"_eleOnblur",value:function(e,t,r){e.onblur=function(){t.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(e,t,r){var n=document.createElement(e||"div");return t&&(n.className=t),r&&r.appendChild(n),n}}])&&_B(t.prototype,r),n&&_B(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function jB(e){"@babel/helpers - typeof";return(jB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function TB(e,t){return(TB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function RB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=AB(e);if(t){var o=AB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===jB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function AB(e){return(AB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var LB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TB(e,t)}(i,uB);var t,r,n,o=RB(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},t=o.call(this,e),e.title=e.title?e.title:"",t._initView(e.title),t}return t=i,(r=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-popcontainer");var r=document.createElement("div");r.setAttribute("class","component-popcontainer__header");var n=document.createElement("label");n.setAttribute("class","component-popcontainer__header__title"),n.innerHTML=e,r.appendChild(n);var o=document.createElement("span");o.setAttribute("class","supermapol-icons-clear component-popcontainer__header__close"),o.onclick=this.closeView.bind(this),t.appendChild(o),t.appendChild(r);var i=document.createElement("div");i.setAttribute("class","component-popcontainer__content"),this.content=i,t.appendChild(i),this.rootContainer=t}},{key:"appendContent",value:function(e){this.content.appendChild(e)}}])&&CB(t.prototype,r),n&&CB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function IB(e){"@babel/helpers - typeof";return(IB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function NB(e,t){return(NB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function DB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=FB(e);if(t){var o=FB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===IB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function FB(e){return(FB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var BB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NB(e,t)}(i,LB);var t,r,n,o=DB(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e.title=e.title?e.title:"å±æ§",(t=o.call(this,e)).rootContainer.firstChild.hidden=!0,e.attributes=e.attributes?e.attributes:[],t._createAttributesTable(e.attributes),t}return t=i,(r=[{key:"_createAttributesTable",value:function(e){var t=document.createElement("table");t.setAttribute("class","component-popcontainer__content__table");var r=document.createElement("tbody"),n=!0;for(var o in e){var i=document.createElement("tr");n&&i.setAttribute("class","component-popcontainer__content__td--color");var a=document.createElement("td"),s=document.createElement("Span");s.innerHTML=o,a.appendChild(s);var l=document.createElement("td");l.innerHTML=e[o],i.appendChild(a),i.appendChild(l),r.appendChild(i),n=!n}t.appendChild(r),this.appendContent(t)}}])&&MB(t.prototype,r),n&&MB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function GB(e){"@babel/helpers - typeof";return(GB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function JB(e,t){return(JB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function VB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=HB(e);if(t){var o=HB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===GB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function HB(e){return(HB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JB(e,t)}(i,uB);var t,r,n,o=VB(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e))._initView(),t}return t=i,(r=[{key:"_initView",value:function(){var e=document.createElement("div");e.setAttribute("class","component-tabpage");var t=document.createElement("ul");this.header=t;var r=document.createElement("div");r.setAttribute("class","component-tabpage__content"),this.content=r,e.appendChild(t),e.appendChild(r),this.rootContainer=e}},{key:"setTabs",value:function(e){this.removeAllTabs(),this.appendTabs(e)}},{key:"appendTabs",value:function(e){for(var t=0;t<e.length;t++){var r=document.createElement("span");r.index=t,r.appendChild(document.createTextNode(e[t].title)),r.onclick=this._changeTabsPage.bind(this);var n=e[t].content;n.index=t,n.hidden=!0,this.header.appendChild(r),this.content.appendChild(n)}this.header.firstChild.setAttribute("class","on"),this.content.firstChild.hidden=!1}},{key:"removeTab",value:function(e){this.header.removeChild(this.header.children[e]),this.content.removeChild(this.content.children[e])}},{key:"removeAllTabs",value:function(){for(var e=this.header.children.length;e>0;e--)this.header.removeChild(this.header.children[e]),this.content.removeChild(this.content.children[e])}},{key:"_changeTabsPage",value:function(e){for(var t=e.target.index,r=0;r<this.header.children.length;r++)this.header.children[r].setAttribute("class",""),this.content.children[r].hidden=!0,r===t&&(this.header.children[r].setAttribute("class","on"),this.content.children[r].hidden=!1)}}])&&UB(t.prototype,r),n&&UB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function WB(e){"@babel/helpers - typeof";return(WB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function YB(e,t){return(YB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function XB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=QB(e);if(t){var o=QB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===WB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function QB(e){return(QB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ZB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YB(e,t)}(i,zB);var t,r,n,o=XB(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).rootContainer.classList.add("component-citytabpage--noneBoxShadow"),t.config=e.config,j.isArray(t.config)?(t.header.hidden=!0,t._createCityItem("åå¸",t.config),t.content.style.border="none"):(t._createTabs(),t.header.onclick=function(e){for(var r=0;r<t.header.children.length;r++)t.header.children[r].setAttribute("class","");e.target.setAttribute("class","on"),t._createCityContent(e.target.innerHTML)}),t}return t=i,(r=[{key:"_createTabs",value:function(){if(j.isArray(this.config))for(var e=0;e<this.config.length;e++){var t="";for(var r in this.config[e])t+=r;var n=document.createElement("li");n.innerHTML=t,this.header.appendChild(n)}else for(var o in this.config){var i=document.createElement("li");i.innerHTML=o,this.header.appendChild(i)}this.header.firstChild.setAttribute("class","on"),this._createCityContent(this.header.firstChild.innerHTML)}},{key:"_createCityContent",value:function(e){for(var t=this.content.children.length;t>0;t--)this.content.removeChild(this.content.children[t-1]);var r=this.config[e];for(var n in r)this._createCityItem(n,r[n])}},{key:"_createCityItem",value:function(e,t){var r=document.createElement("div"),n=document.createElement("div");n.setAttribute("class","component-citytabpag__py-key"),n.innerHTML=e,r.appendChild(n);var o=document.createElement("div");o.setAttribute("class","component-citytabpag__content");for(var i=0;i<t.length;i++){var a=document.createElement("span");a.innerHTML=t[i],o.appendChild(a)}"HOT"===e&&(o.style.width="428px"),r.appendChild(o),this.content.appendChild(r)}}])&&qB(t.prototype,r),n&&qB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function KB(e){"@babel/helpers - typeof";return(KB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function eG(e,t){return(eG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tG(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=rG(e);if(t){var o=rG(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===KB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function rG(e){return(rG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nG=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eG(e,t)}(i,uB);var t,r,n,o=tG(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).navTabsTitle=null,t.navTabsContent=null,e.tabs=e.tabs?e.tabs:[],t._initView(e.tabs),t}return t=i,(r=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-navtabspage");var r=document.createElement("span");r.setAttribute("class","supermapol-icons-close"),r.onclick=this.closeView.bind(this),t.appendChild(r);var n=document.createElement("div");this.navTabsTitle=n,n.setAttribute("class","component-navtabspage__title"),t.appendChild(n);var o=document.createElement("div");this.navTabsContent=o,o.setAttribute("class","component-navtabspage__content"),t.appendChild(o),e.length>0&&this.appendTabs(e),this.rootContainer=t}},{key:"setTabs",value:function(e){this.removeAllTabs(),this.appendTabs(e)}},{key:"appendTabs",value:function(e){for(var t=0;t<e.length;t++){var r=document.createElement("span");r.index=t,r.appendChild(document.createTextNode(e[t].title)),r.onclick=this._changeTabsPage.bind(this);var n=e[t].content;n.index=t,n.hidden=!0,this.navTabsTitle.appendChild(r),this.navTabsContent.appendChild(n)}this.navTabsTitle.firstChild.setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.firstChild.hidden=!1}},{key:"removeTab",value:function(e){this.navTabsTitle.removeChild(this.navTabsTitle.children[e]),this.navTabsContent.removeChild(this.navTabsContent.children[e])}},{key:"removeAllTabs",value:function(){for(var e=this.navTabsTitle.children.length;e>0;e--)this.navTabsTitle.removeChild(this.navTabsTitle.children[e]),this.navTabsContent.removeChild(this.navTabsContent.children[e])}},{key:"_changeTabsPage",value:function(e){for(var t=e.target.index,r=0;r<this.navTabsTitle.children.length;r++)this.navTabsTitle.children[r].setAttribute("class",""),this.navTabsContent.children[r].hidden=!0,r===t&&(this.navTabsTitle.children[r].setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.children[r].hidden=!1)}}])&&$B(t.prototype,r),n&&$B(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function oG(e){"@babel/helpers - typeof";return(oG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function aG(e,t){return(aG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sG(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=lG(e);if(t){var o=lG(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===oG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function lG(e){return(lG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var uG=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aG(e,t)}(i,uB);var t,r,n,o=sG(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).currentPage=0,t.pageNumberLis=[],t.currentPageNumberLis=[],t.linkageEvent=null,e.contents=e.contents?e.contents:null,e.pageCounts=e.pageCounts?e.pageCounts:0,t._initView(e.contents,e.pageCounts),t}return t=i,(r=[{key:"setLinkageEvent",value:function(e){this.linkageEvent=e}},{key:"_initView",value:function(e,t){var r=document.createElement("div");r.setAttribute("class","component-pagination");var n=document.createElement("div");n.setAttribute("class","component-pagination__content"),r.appendChild(n),this.content=n;var o=document.createElement("ul");o.setAttribute("class","component-pagination__link"),o.onclick=this._changePageEvent.bind(this),r.appendChild(o),this._createLink(o),this.link=o,e&&this.setContent(e),0!==t&&this.setPageLink(t),this.rootContainer=r}},{key:"setContent",value:function(e){this.clearContent(),this.appendContent(e)}},{key:"appendContent",value:function(e){this.content.appendChild(e)}},{key:"clearContent",value:function(){for(var e=this.content.children.length-1;e>=0;e--)this.content.removeChild(this.content.children[e])}},{key:"setPageLink",value:function(e){this.pageNumberLis=[],this.currentPageNumberLis=[],this.clearPageLink(),this._createPageLi(e),this._appendPageLink()}},{key:"_createPageLi",value:function(e){for(var t=0;t<e;t++){var r=document.createElement("li");r.innerHTML=t+1,this.pageNumberLis.push(r)}if(this.pageNumberLis[0].setAttribute("class","active"),this.currentPage=1,e<5)this.currentPageNumberLis=this.pageNumberLis;else for(var n=0;n<5;n++)this.currentPageNumberLis.push(this.pageNumberLis[n])}},{key:"_appendPageLink",value:function(){for(var e=0;e<this.currentPageNumberLis.length;e++)this.link.insertBefore(this.currentPageNumberLis[e],this.link.childNodes[this.link.children.length-2]);for(var t=0;t<this.currentPageNumberLis.length;t++)this.currentPageNumberLis[t].setAttribute("class",""),Number(this.currentPageNumberLis[t].innerHTML)===this.currentPage&&this.currentPageNumberLis[t].setAttribute("class","active");this._changeDisableState(),this.linkageEvent&&this.linkageEvent(this.currentPage)}},{key:"clearPageLink",value:function(){for(var e=this.link.children.length-3;e>1;e--)this.link.removeChild(this.link.children[e])}},{key:"_createLink",value:function(e){for(var t=0;t<4;t++){var r=document.createElement("li");r.setAttribute("class","disable");var n=document.createElement("span");r.appendChild(n),0===t?(n.id="first",n.setAttribute("class","supermapol-icons-first")):1===t?(n.id="prev",n.setAttribute("class","supermapol-icons-prev")):2===t?(n.id="next",n.setAttribute("class","supermapol-icons-next")):3===t&&(n.id="last",n.setAttribute("class","supermapol-icons-last")),e.appendChild(r)}}},{key:"_changePageEvent",value:function(e){var t=e.target;if("disable"!==t.parentElement.classList[0]){var r;if(t.id)r=t.id;else{if(!Number(t.innerHTML))return;r=Number(t.innerHTML)}this._prePageNum(r),this.clearPageLink(),this._appendPageLink()}}},{key:"_changeDisableState",value:function(){this.link.children[0].setAttribute("class",""),this.link.children[1].setAttribute("class",""),this.link.children[this.link.children.length-1].setAttribute("class",""),this.link.children[this.link.children.length-2].setAttribute("class",""),1===this.currentPage&&(this.link.children[0].setAttribute("class","disable"),this.link.children[1].setAttribute("class","disable")),this.currentPage===this.pageNumberLis.length&&(this.link.children[this.link.children.length-1].setAttribute("class","disable"),this.link.children[this.link.children.length-2].setAttribute("class","disable"))}},{key:"_prePageNum",value:function(e){var t=[];if(this.currentPage="first"===e?1:"last"===e?this.pageNumberLis.length:"prev"===e?this.currentPage-1:"next"===e?this.currentPage+1:e,this.pageNumberLis.length<=5)for(var r=0;r<this.pageNumberLis.length;r++)t.push(this.pageNumberLis[r]);else if(this.currentPage<=3)for(var n=0;n<5;n++)t.push(this.pageNumberLis[n]);else if(this.currentPage>=this.pageNumberLis.length-3)for(var o=this.pageNumberLis.length-5;o<this.pageNumberLis.length;o++)t.push(this.pageNumberLis[o]);else for(var i=this.currentPage-3;i<=this.currentPage+1;i++)t.push(this.pageNumberLis[i]);t.length>0&&(this.currentPageNumberLis=t)}}])&&iG(t.prototype,r),n&&iG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function cG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cG(Object(r),!0).forEach(function(t){pG(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cG(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function pG(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hG(e){var t,r=(t={},["(",")","ï¼","ï¼",",","ï¼"].forEach(function(e,r){t[e]="$".concat(r)}),t);for(var n in r)for(var o=r[n],i=new RegExp("\\".concat(n),"g");i.test(e);)e=e.replace(i,o);return e}function yG(e,t){var r=e;return e.replace(/&|\||>|<|=|!/g," ").split(" ").filter(function(e){return e}).forEach(function(e){var n=t.find(function(t){return t===e});if(bG(e)&&n&&(r=r.replace(n,"$"+n)),n){var o=hG(n);r=r.replace(n,o)}}),r}function dG(e){var t={};for(var r in e){var n=r;bG(r)&&(n="$"+r),t[n=hG(n)]=e[r]}return t}function bG(e){return/^\d/.test(e)}YA.Lang=ZF,YA.i18n=YA.Lang.i18n,YA.Util=fG(fG({},YA.Util),j),YA.Browser=x,YA.INCHES_PER_UNIT=C,YA.METERS_PER_INCH=T,YA.DOTS_PER_INCH=96,YA.IS_GECKO=k,YA.setCORS=function(e){Ql=e},YA.isCORS=uu,YA.setRequestTimeout=function(e){return Zl=e},YA.getRequestTimeout=cu,YA.FetchRequest=fu,YA.inherit=function(e,t){var r,n,o,i=function(){};for(i.prototype=t.prototype,e.prototype=new i,r=2,n=arguments.length;r<n;r++)"function"==typeof(o=arguments[r])&&(o=o.prototype),j.extend(e.prototype,o)},YA.mixin=c,YA.String=f,YA.Number=p,YA.Function=h,YA.Array=y,YA.Date=Rn,YA.Event=An,YA.Bounds=I,YA.Credential=Tn,YA.Events=Mn,YA.Feature=je,YA.Geometry=b,YA.Pixel=l,YA.Size=a,YA.Feature.Vector=Be,YA.Geometry.Collection=Y,YA.Geometry.Curve=ae,YA.Geometry.GeoText=kr,YA.Geometry.LinearRing=we,YA.Geometry.LineString=he,YA.Geometry.MultiLineString=$e,YA.Geometry.MultiPoint=ee,YA.Geometry.MultiPolygon=it,YA.Geometry.Point=U,YA.Geometry.Polygon=Ee,YA.Geometry.Rectangle=jn,YA.Components.Chart=sB,YA.Components.ChartViewModel=iB,YA.Components.MessageBox=YF,YA.Components.AttributesPopContainer=BB,YA.Components.CityTabsPage=ZB,YA.Components.CommonContainer=dB,YA.Components.DropDownBox=kB,YA.Components.IndexTabsPageContainer=zB,YA.Components.NavTabsPage=nG,YA.Components.PaginationContainer=uG,YA.Components.PopContainer=LB,YA.Components.Select=OB,YA.Components.TemplateBase=uB,YA.Components.FileReaderUtil=$F,YA.TimeControlBase=rL,YA.TimeFlowControl=cL,YA.Format=YA.Format||Ue,YA.Format.GeoJSON=vr,YA.Format.JSON=qe,YA.Format.WKT=eL,YA.iManager=wL,YA.iManagerCreateNodeParam=yL,YA.iManagerServiceBase=pL,YA.iPortal=UL,YA.iPortalAddDataParam=XL,YA.iPortalAddResourceParam=zL,YA.iPortalDataConnectionInfoParam=tI,YA.iPortalDataMetaInfoParam=ZL,YA.iPortalDataStoreInfoParam=$L,YA.iPortalQueryParam=PL,YA.iPortalQueryResult=EL,YA.iPortalRegisterServiceParam=qL,YA.iPortalResource=LL,YA.iPortalServiceBase=SL,YA.iPortalShareEntity=VL,YA.iPortalShareParam=ML,YA.iPortalUser=sI,YA.AddressMatchService=Sf,YA.AggregationParameter=uI,YA.AreaSolarRadiationParameters=FE,YA.AreaSolarRadiationService=zE,YA.BucketAggParameter=bI,YA.BufferAnalystParameters=ZE,YA.BufferAnalystService=_k,YA.BufferDistance=qE,YA.BuffersAnalystJobsParameter=RP,YA.BuffersAnalystJobsService=FP,YA.BufferSetting=XE,YA.BurstPipelineAnalystParameters=qg,YA.BurstPipelineAnalystService=ew,YA.ChartFeatureInfoSpecsService=Xf,YA.ChartQueryFilterParameter=Af,YA.ChartQueryParameters=If,YA.ChartQueryService=Jf,YA.ClipParameter=EI,YA.ColorDictionary=Yv,YA.CommonServiceBase=ff,YA.ComputeWeightMatrixParameters=aw,YA.ComputeWeightMatrixService=hw,YA.CreateDatasetParameters=Ep,YA.DataFlowService=lp,YA.DataReturnOption=$E,YA.DatasetBufferAnalystParameters=sk,YA.DatasetInfo=Av,YA.DatasetOverlayAnalystParameters=aC,YA.DatasetService=Pp,YA.DatasetSurfaceAnalystParameters=KC,YA.DatasetThiessenAnalystParameters=TT,YA.DatasourceConnectionInfo=x_,YA.DatasourceService=Jp,YA.DensityAnalystService=Lk,YA.DensityKernelAnalystParameters=xk,YA.EditFeaturesParameters=Ry,YA.EditFeaturesService=By,YA.FacilityAnalyst3DParameters=YO,YA.FacilityAnalystSinks3DParameters=tS,YA.FacilityAnalystSinks3DService=sS,YA.FacilityAnalystSources3DParameters=yS,YA.FacilityAnalystSources3DService=OS,YA.FacilityAnalystStreamParameters=dw,YA.FacilityAnalystStreamService=Sw,YA.FacilityAnalystTracedown3DParameters=JS,YA.FacilityAnalystTracedown3DService=XS,YA.FacilityAnalystTraceup3DParameters=jS,YA.FacilityAnalystTraceup3DService=MS,YA.FacilityAnalystUpstream3DParameters=n_,YA.FacilityAnalystUpstream3DService=c_,YA.FieldParameters=td,YA.FieldsFilter=RN,YA.FieldStatisticService=bd,YA.FieldStatisticsParameters=ld,YA.FilterParameter=ah,YA.FindClosestFacilitiesParameters=Pw,YA.FindClosestFacilitiesService=Rw,YA.FindLocationParameters=Lw,YA.FindLocationService=Gw,YA.FindMTSPPathsParameters=Jw,YA.FindMTSPPathsService=Xw,YA.FindPathParameters=Zw,YA.FindPathService=oO,YA.FindServiceAreasParameters=aO,YA.FindServiceAreasService=hO,YA.FindTSPPathsParameters=dO,YA.FindTSPPathsService=SO,YA.GenerateSpatialDataParameters=Mk,YA.GenerateSpatialDataService=Jk,YA.GeoCodingParameter=hf,YA.GeoDecodingParameter=df,YA.GeoHashGridAggParameter=II,YA.GeometryBatchAnalystService=eR,YA.GeometryBufferAnalystParameters=dk,YA.GeometryOverlayAnalystParameters=yC,YA.GeometrySurfaceAnalystParameters=aT,YA.GeometryThiessenAnalystParameters=FT,YA.GeoprocessingService=Hd,YA.GeoRelationAnalystParameters=Hk,YA.GeoRelationAnalystService=Zk,YA.GetFeaturesByBoundsParameters=Wh,YA.GetFeaturesByBoundsService=$h,YA.GetFeaturesByBufferParameters=sy,YA.GetFeaturesByBufferService=yy,YA.GetFeaturesByGeometryParameters=Sy,YA.GetFeaturesByGeometryService=Cy,YA.GetFeaturesByIDsParameters=bh,YA.GetFeaturesByIDsService=_h,YA.GetFeaturesBySQLParameters=Rh,YA.GetFeaturesBySQLService=Fh,YA.GetFeaturesParametersBase=lh,YA.GetFeaturesServiceBase=oh,YA.GetFieldsService=$y,YA.GetGridCellInfosParameters=Pd,YA.GetGridCellInfosService=Ad,YA.GetLayersInfoService=_m,YA.Grid=tm,YA.HillshadeParameter=sN,YA.Image=lm,YA.ImageCollectionService=UA,YA.ImageGFAspect=VN,YA.ImageGFHillShade=UN,YA.ImageGFOrtho=zN,YA.ImageGFSlope=qN,YA.ImageRenderingRule=BN,YA.ImageSearchParameter=MN,YA.ImageService=kA,YA.ImageStretchOption=DN,YA.InterpolationAnalystParameters=$k,YA.InterpolationAnalystService=Uj,YA.InterpolationDensityAnalystParameters=dj,YA.InterpolationIDWAnalystParameters=_j,YA.InterpolationKrigingAnalystParameters=Lj,YA.InterpolationRBFAnalystParameters=sj,YA.JoinItem=Tv,YA.KernelDensityJobParameter=R_,YA.KernelDensityJobsService=F_,YA.LabelImageCell=VI,YA.LabelMatrixCell=NI,YA.LabelMixedTextStyle=lb,YA.LabelSymbolCell=QI,YA.LabelThemeCell=nM,YA.LayerStatus=iM,YA.LinkItem=sM,YA.MappingParameters=C_,YA.MapService=ug,YA.MathExpressionAnalysisParameters=Vj,YA.MathExpressionAnalysisService=Qj,YA.MeasureParameters=Pg,YA.MeasureService=Ag,YA.MetricsAggParameter=PI,YA.NDVIParameter=$M,YA.NetworkAnalystServiceBase=zg,YA.OutputSetting=k_,YA.OverlapDisplayedOptions=uM,YA.OverlayAnalystParameters=Kj,YA.OverlayAnalystService=SC,YA.OverlayGeoJobParameter=hP,YA.OverlayGeoJobsService=wP,YA.PointWithMeasure=bt,YA.ProcessingServiceBase=__,YA.QueryByBoundsParameters=xx,YA.QueryByBoundsService=Ax,YA.QueryByDistanceParameters=Gx,YA.QueryByDistanceService=qx,YA.QueryByGeometryParameters=bE,YA.QueryByGeometryService=_E,YA.QueryBySQLParameters=tE,YA.QueryBySQLService=lE,YA.QueryParameters=Tf,YA.QueryService=vx,YA.RasterFunctionParameter=zM,YA.Route=_t,YA.RouteCalculateMeasureParameters=PC,YA.RouteCalculateMeasureService=RC,YA.RouteLocatorParameters=LC,YA.RouteLocatorService=GC,YA.ServerColor=st,YA.ServerFeature=Lo,YA.ServerGeometry=cr,YA.ServerStyle=ut,YA.ServerTextStyle=eb,YA.ServerTheme=Wv,YA.SetDatasourceParameters=Hp,YA.SetLayerInfoParameters=fM,YA.SetLayerInfoService=Rm,YA.SetLayersInfoParameters=hM,YA.SetLayersInfoService=Bm,YA.SetLayerStatusParameters=Um,YA.SetLayerStatusService=Xm,YA.SingleObjectQueryJobsParameter=G_,YA.SingleObjectQueryJobsService=q_,YA.Sortby=LN,YA.SpatialAnalystBase=NE,YA.StopQueryParameters=PR,YA.StopQueryService=AR,YA.SummaryAttributesJobsParameter=XP,YA.SummaryAttributesJobsService=rx,YA.SummaryMeshJobParameter=X_,YA.SummaryMeshJobsService=rP,YA.SummaryRegionJobParameter=SP,YA.SummaryRegionJobsService=CP,YA.SupplyCenter=dM,YA.SurfaceAnalystParameters=HC,YA.SurfaceAnalystParametersSetting=JC,YA.SurfaceAnalystService=hT,YA.TerrainCurvatureCalculationParameters=dT,YA.TerrainCurvatureCalculationService=ST,YA.Theme=Kd,YA.ThemeDotDensity=$b,YA.ThemeFlow=vM,YA.ThemeGraduatedSymbol=uv,YA.ThemeGraduatedSymbolStyle=tv,YA.ThemeGraph=Wb,YA.ThemeGraphAxes=Ab,YA.ThemeGraphItem=Fb,YA.ThemeGraphSize=Ib,YA.ThemeGraphText=Nb,YA.ThemeGridRange=kM,YA.ThemeGridRangeItem=gM,YA.ThemeGridUnique=DM,YA.ThemeGridUniqueItem=CM,YA.ThemeLabel=Sb,YA.ThemeLabelAlongLine=pb,YA.ThemeLabelBackground=yb,YA.ThemeLabelItem=rb,YA.ThemeLabelText=cb,YA.ThemeLabelUniqueItem=BM,YA.ThemeMemoryData=UM,YA.ThemeOffset=ab,YA.ThemeParameters=lR,YA.ThemeRange=gv,YA.ThemeRangeItem=fv,YA.ThemeService=bR,YA.ThemeUnique=Tb,YA.ThemeUniqueItem=ob,YA.ThiessenAnalystParameters=xj,YA.ThiessenAnalystService=WT,YA.TilesetsService=bg,YA.TopologyValidatorJobsParameter=GP,YA.TopologyValidatorJobsService=qP,YA.TransferLine=VM,YA.TransferPathParameters=IR,YA.TransferPathService=UR,YA.TransferSolutionParameters=VR,YA.TransferSolutionService=QR,YA.TransportationAnalystParameter=ow,YA.TransportationAnalystResultSetting=rw,YA.UGCLayer=Ov,YA.UGCMapLayer=jv,YA.UGCSubLayer=Bv,YA.UpdateDatasetParameters=jp,YA.UpdateEdgeWeightParameters=PO,YA.UpdateEdgeWeightService=RO,YA.UpdateTurnNodeWeightParameters=LO,YA.UpdateTurnNodeWeightService=GO,YA.Vector=dm,YA.VectorClipJobsParameter=oP,YA.VectorClipJobsService=fP,YA.WebPrintingJobContent=_N,YA.WebPrintingJobCustomItems=uN,YA.WebPrintingJobExportOptions=kN,YA.WebPrintingJobImage=fN,YA.WebPrintingJobLayers=hN,YA.WebPrintingJobLayoutOptions=xN,YA.WebPrintingJobLegendOptions=dN,YA.WebPrintingJobLittleMapOptions=vN,YA.WebPrintingJobNorthArrowOptions=gN,YA.WebPrintingJobParameters=CN,YA.WebPrintingJobScaleBarOptions=ON,YA.WebPrintingService=fA,YA.Online=oD,YA.OnlineData=rD,YA.OnlineQueryDatasParameter=aD,YA.ServiceStatus={DOES_NOT_INVOLVE:"DOES_NOT_INVOLVE",PUBLISH_FAILED:"PUBLISH_FAILED",PUBLISHED:"PUBLISHED",PUBLISHING:"PUBLISHING",UNPUBLISHED:"UNPUBLISHED",UNPUBLISHED_FAILED:"UNPUBLISHED_FAILED"},YA.DataItemType={GEOJSON:"GEOJSON",UGCV5_MVT:"UGCV5_MVT",JSON:"JSON",AUDIO:"AUDIO",COLOR:"COLOR",COLORSCHEME:"COLORSCHEME",CSV:"CSV",EXCEL:"EXCEL",FILLSYMBOL:"FILLSYMBOL",IMAGE:"IMAGE",LAYERTEMPLATE:"LAYERTEMPLATE",LAYOUTTEMPLATE:"LAYOUTTEMPLATE",LINESYMBOL:"LINESYMBOL",MAPTEMPLATE:"MAPTEMPLATE",MARKERSYMBOL:"MARKERSYMBOL",MBTILES:"MBTILES",PHOTOS:"PHOTOS",SHP:"SHP",SMTILES:"SMTILES",SVTILES:"SVTILES",THEMETEMPLATE:"THEMETEMPLATE",TPK:"TPK",UDB:"UDB",UGCV5:"UGCV5",UNKNOWN:"UNKNOWN",VIDEO:"VIDEO",WORKENVIRONMENT:"WORKENVIRONMENT",WORKSPACE:"WORKSPACE"},YA.DataItemOrderBy={FILENAME:"FILENAME",ID:"ID",LASTMODIFIEDTIME:"LASTMODIFIEDTIME",NICKNAME:"NICKNAME",SERVICESTATUS:"SERVICESTATUS",SIZE:"SIZE",STATUS:"STATUS",TYPE:"TYPE",UPDATETIME:"UPDATETIME",USERNAME:"USERNAME"},YA.FilterField={LINKPAGE:"LINKPAGE",MAPTITLE:"MAPTITLE",NICKNAME:"NICKNAME",RESTITLE:"RESTITLE",USERNAME:"USERNAME"},YA.OnlineServiceBase=XN,YA.Feature=YA.Feature||{},YA.Feature.Theme=Cr,YA.Feature.Theme.Bar=qD,YA.Feature.Theme.Bar3D=eF,YA.Feature.Theme.Circle=yF,YA.Feature.Theme.Graph=GD,YA.Feature.Theme.Line=OF,YA.Feature.Theme.Pie=jF,YA.Feature.Theme.Point=MF,YA.Feature.Theme.RankSymbol=sF,YA.Feature.Theme.Ring=JF,YA.Feature.Theme.ThemeVector=Ka,YA.Feature.ShapeParameters=Ho,YA.Feature.ShapeParameters.Circle=Wi,YA.Feature.ShapeParameters.Image=Bi,YA.Feature.ShapeParameters.Label=Ai,YA.Feature.ShapeParameters.Line=oi,YA.Feature.ShapeParameters.Point=Zo,YA.Feature.ShapeParameters.Polygon=fi,YA.Feature.ShapeParameters.Rectangle=mi,YA.Feature.ShapeParameters.Sector=xi,YA.Feature.ShapeFactory=Va,YA.LevelRenderer=Ro,YA.KeyServiceParameter=lD,YA.SecurityManager=lf,YA.ServerInfo=cD,YA.TokenServiceParameter=pD,YA.ThemeStyle=LD,YA.CartoCSS=TD,YA.ElasticSearch=mD,YA.ArrayStatistic=_D,YA.ColorsPickerUtil=OD,YA.DataFormat=Pt,YA.ServerType=xt,YA.GeometryType=Et,YA.QueryOption=kt,YA.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},YA.SpatialQueryMode=jt,YA.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},YA.MeasureMode=Ct,YA.Unit=Tt,YA.BufferRadiusUnit=Rt,YA.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},YA.ThemeGraphTextFormat=At,YA.ThemeGraphType=Lt,YA.GraphAxesTextDisplayMode=It,YA.GraduatedMode=Mt,YA.RangeMode=Nt,YA.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},YA.ColorGradientType=Dt,YA.TextAlignment=Ft,YA.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},YA.AlongLineDirection=Bt,YA.LabelBackShape=Gt,YA.LabelOverLengthMode=Ut,YA.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},YA.OverlayOperationType=Vt,YA.OutputType=Ht,YA.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},YA.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},YA.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},YA.BufferEndType=Jt,YA.SmoothMethod=zt,YA.SurfaceAnalystMethod=Wt,YA.DataReturnMode=qt,YA.EditType=Yt,YA.TransferTactic=Xt,YA.TransferPreference=Qt,YA.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},YA.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"},YA.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},YA.UGCLayerType={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"},YA.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},YA.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},YA.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},YA.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},YA.VariogramMode=Zt,YA.Exponent=Kt,YA.ClientType=$t,YA.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},YA.ClipAnalystMode=er,YA.AnalystAreaUnit=tr,YA.AnalystSizeUnit=rr,YA.StatisticAnalystMode=nr,YA.SummaryType=or,YA.TopologyValidatorRule=ir,YA.BucketAggType=ar,YA.MetricsAggType=sr,YA.GetFeatureMode={BOUNDS:"BOUNDS",BUFFER:"BUFFER",ID:"ID",SPATIAL:"SPATIAL",SQL:"SQL"},YA.RasterFunctionType=lr,YA.ResourceType={MAP:"MAP",SERVICE:"SERVICE",SCENE:"SCENE",DATA:"DATA",INSIGHTS_WORKSPACE:"INSIGHTS_WORKSPACE",MAP_DASHBOARD:"MAP_DASHBOARD"},YA.OrderBy={UPDATETIME:"UPDATETIME",HEATLEVEL:"HEATLEVEL",RELEVANCE:"RELEVANCE"},YA.OrderType={ASC:"ASC",DESC:"DESC"},YA.SearchType={PUBLIC:"PUBLIC",MY_RES:"MY_RES",MYGROUP_RES:"MYGROUP_RES",MYDEPARTMENT_RES:"MYDEPARTMENT_RES",SHARETOME_RES:"SHARETOME_RES"},YA.AggregationTypes={TAG:"TAG",TYPE:"TYPE"},YA.PermissionType={SEARCH:"SEARCH",READ:"READ",READWRITE:"READWRITE",DELETE:"DELETE",DOWNLOAD:"DOWNLOAD"},YA.EntityType={DEPARTMENT:"DEPARTMENT",GROUP:"GROUP",IPORTALGROUP:"IPORTALGROUP",ROLE:"ROLE",USER:"USER"},YA.WebExportFormatType={PNG:"PNG",PDF:"PDF"},YA.WebScaleOrientationType={HORIZONTALLABELSBELOW:"HORIZONTALLABELSBELOW",HORIZONTALLABELSABOVE:"HORIZONTALLABELSABOVE",VERTICALLABELSLEFT:"VERTICALLABELSLEFT",VERTICALLABELSRIGHT:"VERTICALLABELSRIGHT"},YA.WebScaleType={LINE:"LINE",BAR:"BAR",BAR_SUB:"BAR_SUB"},YA.WebScaleUnit={METER:"METER",FOOT:"FOOT",DEGREES:"DEGREES"};var vG=function(){try{return convert}catch(e){return{}}}(),mG=r.n(vG),gG=function(){try{return canvg}catch(e){return{}}}(),wG=r.n(gG);function OG(e){"@babel/helpers - typeof";return(OG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _G(e,t){return(_G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function PG(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=xG(e);if(t){var o=xG(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===OG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function xG(e){return(xG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var EG=["559082264.0287178","279541132.0143589","139770566.0071794","69885283.00358972","34942641.50179486","17471320.75089743","8735660.375448715","4367830.1877224357","2183915.093862179","1091957.546931089","545978.7734655447","272989.7734655447","272989.3867327723","136494.6933663862","68247.34668319309","34123.67334159654","17061.83667079827","8530.918335399136","4265.459167699568","2132.729583849784"],kG=["5.590822640287176E8","2.795411320143588E8","1.397705660071794E8","6.98852830035897E7","3.494264150179485E7","1.7471320750897426E7","8735660.375448713","4367830.187724357","2183915.0938621783","1091957.5469310891","545978.7734655446","272989.3867327723","136494.69336638614","68247.34668319307","34123.673341596535","17061.836670798268","8530.918335399134"],jG=["GoogleCRS84Quad","GoogleMapsCompatible"],CG=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_G(e,t)}(a,t().Evented);var r,n,o,i=PG(a);function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this)).mapId=e,t=t||{},r.server=t.server,r.credentialKey=t.credentialKey,r.credentialValue=t.credentialValue,r.withCredentials=t.withCredentials||!1,r.target=t.target||"map",r._canvgsV=[],r._createWebMap(),r.on("mapinitialized",function(){r.map.on("remove",function(){r._stopCanvg()})}),r}return r=a,(n=[{key:"resize",value:function(){this.map.resize()}},{key:"setMapId",value:function(e){this.mapId=e,this._createWebMap()}},{key:"setWebMapOptions",value:function(e){this.server=e.server,this._createWebMap()}},{key:"setMapOptions",value:function(e){var t=e.center,r=e.zoom,n=e.maxBounds,o=e.minZoom,i=e.maxZoom,a=e.isWorldCopy,s=e.bearing,l=e.pitch;t&&t.length&&this.map.setCenter(t),r&&this.map.setZoom(r),n&&this.map.setMaxBounds(n),o&&this.map.setMinZoom(o),i&&this.map.setMaxZoom(i),a&&this.map.setRenderWorldCopies(a),s&&this.map.setBearing(s),l&&this.map.setPitch(l)}},{key:"_createWebMap",value:function(){var e=this.server.split("");"/"!==e[e.length-1]&&(this.server+="/");var t=this.server+"web/maps/"+this.mapId+"/map";this.credentialValue&&this.credentialKey&&(t+="?"+this.credentialKey+"="+this.credentialValue);var r="getUrlResource.json?url=";if(this.excludePortalProxyUrl&&this.server.indexOf(r)>-1){var n=this.server.split(r);n.length>1&&(t=n[0]+r+this.server+"web/maps/"+this.mapId+"/map.json")}this._getMapInfo(t)}},{key:"_createMap",value:function(e){var r=[],n=e.layers;n&&n.length>0&&n.forEach(function(e){e.labelStyle&&r.push(e.labelStyle.fontFamily)},this),r.push("'supermapol-icons'");var o,i=r.join(","),a=e.center,s=e.level||0,l=0;if(e.minScale&&e.maxScale)l=this._transformScaleToZoom(e.minScale,t().CRS?t().CRS.get(this.baseProjection):"EPSG:3857");else{var u=this._getResolution(t().CRS?t().CRS.get(this.baseProjection).getExtent():[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892])/this._getResolution(e.extent);l=+Math.log(u)/Math.LN2.toFixed(2)}s+=l,o=a?this._unproject([a.x,a.y]):new(t().LngLat)(0,0),this.map=new(t().Map)({container:this.target,center:o,zoom:s,style:{version:8,sources:{},layers:[]},crs:this.baseProjection,localIdeographFontFamily:i||""}),this.fire("mapinitialized")}},{key:"_getMapInfo",value:function(e){var t=this,r=-1===e.indexOf(".json")?"".concat(e,".json"):e;fu.get(r,null,{withCredentials:this.withCredentials}).then(function(e){return e.json()}).then(function(e){t.baseProjection=e.projection,t.mapParams={title:e.title,description:e.description};if(!(t.baseProjection in{"EPSG:4490":"EPSG:4490","EPSG:4214":"EPSG:4214","EPSG:4610":"EPSG:4610","EPSG:3857":"EPSG:3857","EPSG:4326":"EPSG:4326"}))throw Error(ZF.i18n("msg_crsunsupport"));t._createMap(e,t.mapSetting);var r=e.layers;t.map.on("load",function(){t._addBaseMap(e),r&&0!==r.length?t._addLayers(r):t._sendMapToUser(0,0)})}).catch(function(e){t.fire("getmapfailed",{error:e})})}},{key:"_addBaseMap",value:function(e){this._createBaseLayer(e)}},{key:"_createBaseLayer",value:function(e){var t=e.baseLayer||e,r=t.layerType;(r.indexOf("TIANDITU_VEC")>-1||r.indexOf("TIANDITU_IMG")>-1||r.indexOf("TIANDITU_TER")>-1)&&(r=r.substr(0,12));var n;switch(r){case"TIANDITU_VEC":case"TIANDITU_IMG":case"TIANDITU_TER":this._createTiandituLayer(e);break;case"BING":this._createBingLayer(t.name);break;case"WMS":this._createWMSLayer(t);break;case"WMTS":this._createWMTSLayer(t);break;case"TILE":case"SUPERMAP_REST":this._createDynamicTiledLayer(t);break;case"CLOUD":case"CLOUD_BLACK":case"OSM":case"JAPAN_ORT":case"JAPAN_RELIEF":case"JAPAN_PALE":case"JAPAN_STD":case"GOOGLE_CN":case"GOOGLE":n={CLOUD:"http://t2.dituhui.com/FileService/image?map=quanguo&type=web&x={x}&y={y}&z={z}",CLOUD_BLACK:"http://t3.dituhui.com/MapService/getGdp?x={x}&y={y}&z={z}",OSM:"http://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",GOOGLE:"https://www.google.cn/maps/vt/pb=!1m4!1m3!1i{z}!2i{x}!3i{y}!2m3!1e0!2sm!3i380072576!3m8!2szh-CN!3scn!5e1105!12m4!1e68!2m2!1sset!2sRoadmap!4e0!5m1!1e0",GOOGLE_CN:"https://mt{0-3}.google.cn/vt/lyrs=m&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}",JAPAN_STD:"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",JAPAN_PALE:"https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png",JAPAN_RELIEF:"https://cyberjapandata.gsi.go.jp/xyz/relief/{z}/{x}/{y}.png",JAPAN_ORT:"https://cyberjapandata.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg"}[r],this._createXYZLayer(t,n);break;case"MAPBOXSTYLE":this._createMapboxStyle(t)}}},{key:"_createMapboxStyle",value:function(e){var t,r=this,n=e.dataSource,o=void 0===n?{}:n,i=o.serverId,a=o.url;t=void 0!==i?"".concat(this.server,"web/datas/").concat(i,"/download"):a,fu.get(t,null,{withCredentials:this.withCredentials,withoutFormatSuffix:!0,headers:{"Content-Type":"application/json;chartset=uft-8"}}).then(function(e){return e.json()}).then(function(e){r._matchStyleObject(e),r.map.setStyle(e)})}},{key:"_matchStyleObject",value:function(e){var t=e.sprite,r=e.glyphs;t&&"object"===OG(t)&&(e.sprite=Object.values(t)[0]),r&&"object"===OG(r)&&(e.glyphs=Object.values(r)[0])}},{key:"_createTiandituLayer",value:function(e){var t=this._getTiandituUrl(e),r=e.baseLayer.layerType,n=Boolean(e.baseLayer.labelLayerVisible),o=t.labelUrl,i=t.tiandituUrl;this._addBaselayer(i,"tianditu-layers-"+r),n&&this._addBaselayer(o,"tianditu-label-layers-"+r)}},{key:"_createWMTSLayer",value:function(e){var t=this,r=this._getWMTSUrl(e);this._filterWMTSIsMatched(e,function(n,o){n&&t._addBaselayer([r],"wmts-layers"+e.name,0,o)})}},{key:"_filterWMTSIsMatched",value:function(e,t){var r=this,n=!1,o=22,i=e.url;fu.get(i,null,{withCredentials:!1,withoutFormatSuffix:!0}).then(function(e){return e.text()}).then(function(i){var a=mG()?mG():window.convert,s=JSON.parse(a.xml2json(i,{compact:!0,spaces:4})).Capabilities.Contents.TileMatrixSet;Array.isArray(s)||(s=[s]);for(var l=0;l<s.length;l++)if(s[l]["ows:Identifier"]&&s[l]["ows:Identifier"]._text===e.tileMatrixSet)if(jG.indexOf(s[l].WellKnownScaleSet._text)>-1)n=!0;else{if(!s[l].WellKnownScaleSet||"Custom"!==s[l].WellKnownScaleSet._text)throw Error(ZF.i18n("msg_tilematrixsetunsupport"));for(var u=[],c="EPSG:3857"===r.map.crs?EG:kG,f=0,p=c.length;f<p&&s[l].TileMatrix[f]&&c[f]===s[l].TileMatrix[f].ScaleDenominator._text;f++)u.push(c[f]);if(o=u.length-1,0===u.length)throw Error(ZF.i18n("msg_tilematrixsetunsupport"));n=!0}t(n,o)}).catch(function(e){r.fire("getwmtsfailed",{error:e,map:r.map})})}},{key:"_createBingLayer",value:function(e){this.addLayer(["https://dynamic.t0.tiles.ditu.live.com/comp/ch/{quadkey}?it=G,TW,L,LA&mkt=zh-cn&og=109&cstl=w4c&ur=CN&n=z"],"bing-layers-"+e)}},{key:"_createXYZLayer",value:function(e,t){var r=[];if("OSM"===e.layerType){for(var n=t.match(/\w\-\w/g)[0],o=n[0],i=n[2],a="",s=97;s<123;s++)a+=String.fromCharCode(s);for(var l=a.split(""),u=l.indexOf(o),c=l.indexOf(i),f=l.slice(u,c+1),p=0;p<f.length;p++){var h=t.replace(/{\w\-\w}/g,f[p]);r.push(h)}}else if("GOOGLE_CN"===e.layerType)for(var y=t.match(/\d\-\d/g)[0],d=y[0],b=y[2],v=d;v<=b;v++){var m=t.replace(/{\d\-\d}/g,v);r.push(m)}else r=[t];this._addBaselayer(r,"XYZ-layers-"+e.name)}},{key:"_createDynamicTiledLayer",value:function(e){var t=e.url,r=e.layerID||e.name,n=e.minzoom,o=e.maxzoom;this._addBaselayer([t],r,n,o,!0)}},{key:"_createWMSLayer",value:function(e){var t=this._getWMSUrl(e);this._addBaselayer([t],"WMS-layers-"+e.name)}},{key:"_createVectorLayer",value:function(e,t){var r=e.style,n=e.featureType,o=e.layerID,i=e.visible,a={};a.style=this._transformStyleToMapBoxGl(r,n),a.layout={visibility:i};var s={type:"geojson",data:{type:"FeatureCollection",features:t}};this._addOverlayToMap(n,s,o,a),"POLYGON"===n&&r.strokeColor&&this._addStrokeLineForPoly(r,s,o+"-strokeLine",i)}},{key:"_getTiandituUrl",value:function(e){for(var t=/t0/gi,r={},n=e.baseLayer.layerType.split("_")[1].toLowerCase(),o=Boolean(e.baseLayer.labelLayerVisible),i="https://t0.tianditu.gov.cn/{layer}_{proj}/wmts?",a=i,s="EPSG:4326"===this.baseProjection?"c":"w",l={service:"WMTS",request:"GetTile",style:"default",version:"1.0.0",layer:n,tilematrixSet:s,format:"tiles",width:256,height:256},u=(i+=this._getParamString(l,i)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",n).replace("{proj}",s),c=[],f=0;f<8;f++)c.push(u.replace(t,"t".concat(f)));if(r.tiandituUrl=c,o){var p={vec:"cva",ter:"cta",img:"cia"}[n];l.layer=p,a=(a+=this._getParamString(l,a)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",p).replace("{proj}",s);for(var h=[],y=0;y<8;y++)h.push(a.replace(t,"t".concat(y)));r.labelUrl=h}return r}},{key:"_getWMSUrl",value:function(e){var t=e.url,r=(t=t.split("?")[0]).split("/"),n={service:"WMS",request:"GetMap",layers:r[r.length-1],styles:"",format:"image/png",transparent:"true",version:"1.1.1",width:256,height:256,srs:this.baseProjection},o="EPSG:4326"===this.baseProjection?"{bbox-epsg-4326}":"{bbox-epsg-3857}";return t+=this._getParamString(n,t)+"&bbox=".concat(o)}},{key:"_addLayers",value:function(e){var t=this;this.layers=e;var r,n=0,o=e.length;e.forEach(function(e,i){if(e.dataSource&&e.dataSource.serverId||"MARKER"===e.layerType){var a=e.dataSource?e.dataSource.serverId:e.serverId,s="".concat(t.server,"web/datas/").concat(a,"/content.json?pageSize=9999999&currentPage=1");a&&fu.get(s,null,{withCredentials:t.withCredentials}).then(function(e){return e.json()}).then(function(a){if(!1===a.succeed)return n++,t._sendMapToUser(n,o),void t.fire("getlayersfailed",{error:a.error,map:t.map});a.type&&("JSON"===a.type||"GEOJSON"===a.type?(a.content=JSON.parse(a.content.trim()),r=t._formatGeoJSON(a.content,e)):"EXCEL"!==a.type&&"CSV"!==a.type||(r=t._excelData2Feature(a.content,e)),t._addLayer(e,r,i),n++,t._sendMapToUser(n,o))}).catch(function(e){n++,t._sendMapToUser(n,o),t.fire("getlayersfailed",{error:e,map:t.map})})}else if("SUPERMAP_REST"===e.layerType||"TILE"===e.layerType||"WMS"===e.layerType||"WMTS"===e.layerType)t._createBaseLayer(e),n++,t._sendMapToUser(n,o);else if(e.dataSource&&"REST_DATA"===e.dataSource.type){var l=e.dataSource;t._getFeatureBySQL(l.url,[l.dataSourseName||e.name],function(a){r=t._parseGeoJsonData2Feature({allDatas:{features:a.result.features.features},fileCode:e.projection,featureProjection:t.baseProjection}),t._addLayer(e,r,i),n++,t._sendMapToUser(n,o)},function(e){n++,t._sendMapToUser(n,o),t.fire("getfeaturesfailed",{error:e})})}else e.dataSource&&"REST_MAP"===e.dataSource.type&&e.dataSource.url&&t._queryFeatureBySQL(e.dataSource.url,e.dataSource.layerName,"smid=1",null,null,function(r){var a=r&&r.result.recordsets,s=a&&a[0],l=s.fields;if(s&&l){var u=[];for(var c in l){var f=l[c];0===f.indexOf("Sm")&&"SmID"!==f||u.push(f)}t._getFeatures(u,e,function(r){t._addLayer(e,r,i),n++,t._sendMapToUser(n,o)},function(e){n++,t.fire("getfeaturesfailed",{error:e,map:t.map})})}},function(e){t.fire("getlayersfailed",{error:e,map:t.map})})},this)}},{key:"_getFeatures",value:function(e,t,r,n){var o=this,i=t.dataSource,a=t.projection;this._queryFeatureBySQL(i.url,i.layerName,null,e,null,function(e){var t=e.result.recordsets[0].features.features,n=o._parseGeoJsonData2Feature({allDatas:{features:t},fileCode:a,featureProjection:o.baseProjection},"JSON");r(n)},function(e){n(e)})}},{key:"_addLayer",value:function(e,t,r){var n=e.layerType;e.layerID=n+"-"+e.name+"-"+r,e.visible=e.visible?"visible":"none",t[0]&&"Polygon"===t[0].geometry.type&&(t=this._handleMultyPolygon(t)),e.style&&e.filterCondition&&"RANGE"!==n&&"UNIQUE"!==n&&(t=this._getFiterFeatures(e.filterCondition,t)),"VECTOR"===n?"POINT"===e.featureType?"SYMBOL_POINT"===e.style.type?this._createSymbolLayer(e,t):this._createGraphicLayer(e,t):this._createVectorLayer(e,t):"UNIQUE"===n?this._createUniqueLayer(e,t):"RANGE"===n?this._createRangeLayer(e,t):"HEAT"===n?this._createHeatLayer(e,t):"MARKER"===n&&this._createMarkerLayer(e,t),e.labelStyle&&e.labelStyle.labelField&&this._addLabelLayer(e,t)}},{key:"_addLabelLayer",value:function(e,t){var r=e.labelStyle;this.map.addLayer({id:e.layerID+"label",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:t}},paint:{"text-color":r.fill},layout:{"text-field":"{".concat(r.labelField,"}"),"text-size":parseFloat(r.fontSize)||12,"text-offset":r.offsetX?[r.offsetX/10||0,r.offsetY/10||0]:[0,-1.5],"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],visibility:e.visible}})}},{key:"_createSymbolLayer",value:function(e,t){document.getElementById("".concat(this.target)).classList.add("supermapol-icons-map");var r=e.style,n=e.style.unicode,o=String.fromCharCode(parseInt(n.replace(/^&#x/,""),16)),i=e.layerID;this.map.addSource(i+"-source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:i,type:"symbol",source:i+"-source",paint:{"text-color":r.fillColor},layout:{"text-field":o,"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],visibility:e.visible}}),this.map.getSource(i+"-source").setData({type:"FeatureCollection",features:t})}},{key:"_createGraphicLayer",value:function(e,t){var r=this,n=e.style,o={},i=e.layerID,a={type:"geojson",data:{type:"FeatureCollection",features:t}};if("IMAGE_POINT"===n.type){var s=n.imageInfo,l=s.img;l&&l.src||(s.url=this.server+s.url),this.map.loadImage(s.url||l.src,function(t,o){t&&console.log(t);var s=2*Number.parseFloat((n.radius/o.height).toFixed(2));r.map.addImage("imageIcon",o),r.map.addLayer({id:i,type:"symbol",source:a,layout:{"icon-image":"imageIcon","icon-size":s,visibility:e.visible}})})}else if("SVG_POINT"===n.type){var u=n.url;this.svgDiv||(this.svgDiv=document.createElement("div"),document.body.appendChild(this.svgDiv)),this._getCanvasFromSVG(u,this.svgDiv,function(t){var o=t.toDataURL("img/png");o&&r.map.loadImage(o,function(o,s){o&&console.log(o);var l=Number.parseFloat((n.radius/t.width).toFixed(2));r.map.addImage("imageIcon",s),r.map.addLayer({id:i,type:"symbol",source:a,layout:{"icon-image":"imageIcon","icon-size":l,visibility:e.visible}})},r)})}else o.style=this._transformStyleToMapBoxGl(n,e.featureType),o.layout={visibility:e.visible},this._addOverlayToMap("POINT",a,i,o)}},{key:"_createUniqueLayer",value:function(e,t){var r=this._getUniqueStyleGroup(e,t);t=this._getFiterFeatures(e.filterCondition,t);var n=e.style,o={},i=e.themeSetting.themeField,a=e.featureType,s=["match",["get","index"]],l=e.layerID;t.forEach(function(e){r.forEach(function(t){t.value===e.properties[i]&&s.push(e.properties.index,t.color)})}),s.push("#ffffff"),o.style=this._transformStyleToMapBoxGl(n,a,s);var u=e.visible;o.layout={visibility:u};var c={type:"geojson",data:{type:"FeatureCollection",features:t}};this._addOverlayToMap(a,c,l,o),"POLYGON"===a&&n.strokeColor&&this._addStrokeLineForPoly(n,c,l+"-strokeLine",u)}},{key:"_getUniqueStyleGroup",value:function(e,t){var r=e.featureType,n=e.style,o=e.themeSetting,i=o.themeField,a=o.colors,s=[],l=o.customSettings;for(var u in t){var c=t[u].properties[i],f=!1;for(var p in s)if(s[p]===c){f=!0;break}f||s.push(c)}var h=a||this.defaultParameters.colors;h=OD.getGradientColors(h,s.length);var y=[];return s.forEach(function(e,t){var o=h[t];e in l&&(o=l[e]),"LINE"===r?n.strokeColor=o:n.fillColor=o,y.push({color:o,value:e})},this),y}},{key:"_getWMTSUrl",value:function(e){var t={service:"WMTS",request:"GetTile",version:"1.0.0",style:"default",layer:e.layer,tilematrixSet:e.tileMatrixSet,format:"image/png"},r=e.url;return r+=this._getParamString(t,r)+"&tilematrix={z}&tilerow={y}&tilecol={x}"}},{key:"_createMarkerLayer",value:function(e,t){var r=this;t&&t.forEach(function(t){var n=t.geometry.type.toUpperCase(),o=t.dv_v5_markerStyle;"POINT"===n&&o.text&&(n="TEXT");var i=r.setFeatureInfo(t);t.properties.useStyle=o,t.properties.featureInfo=i,"POINT"===n&&o.src&&-1===o.src.indexOf("http://")&&-1===o.src.indexOf("https://")&&(o.src=r.server+o.src);var a={type:"geojson",data:t},s=t.properties.index,l=n+"-"+s;if("POINT"===n&&o.src&&o.src.indexOf("svg")<=-1&&r.map.loadImage(o.src,function(t,n){t&&console.log(t),r.map.addImage(s+"",n),r.map.addLayer({id:l,type:"symbol",source:a,layout:{"icon-image":s+"","icon-size":o.scale,visibility:e.visible}})},r),"POINT"===n&&o.src&&o.src.indexOf("svg")>-1&&(r.svgDiv||(r.svgDiv=document.createElement("div"),document.body.appendChild(r.svgDiv)),r._getCanvasFromSVG(o.src,r.svgDiv,function(t){var n=t.toDataURL("img/png");n&&r.map.loadImage(n,function(t,n){t&&console.log(t),r.map.addImage(s+"",n),r.map.addLayer({id:l,type:"symbol",source:a,layout:{"icon-image":s+"","icon-size":o.scale,visibility:e.visible}})},r)})),!o.src){var u={layout:{}};"LINESTRING"===n&&o.lineCap&&(n="LINE",u.layout={"line-cap":o.lineCap});var c=e.visible;u.layout.visibility=c,u.style=r._transformStyleToMapBoxGl(o,n),r._addOverlayToMap(n,a,l,u),"POLYGON"===n&&o.strokeColor&&r._addStrokeLineForPoly(o,a,l+"-strokeLine",c)}},this)}},{key:"setFeatureInfo",value:function(e){var t,r=e.dv_v5_markerInfo;if(!r||!r.dataViz_title)return r;t=r;var n=e.properties;for(var o in t)n[o]&&(t[o]=n[o],delete n[o]);return t}},{key:"_createHeatLayer",value:function(e,t){var r=e.themeSetting,n={};n.gradient=r.colors.slice(),n.radius=parseInt(r.radius);var o=r.customSettings;for(var i in o)n.gradient[i]=o[i];r.weight&&this._changeWeight(t,r.weight);var a=["interpolate",["linear"],["heatmap-density"]],s=(1/n.gradient.length).toFixed(2);n.gradient.forEach(function(e,t){a.push(t*s),0===t&&(e=wr.hexToRgba(e,0)),a.push(e)});var l={"heatmap-color":a,"heatmap-radius":r.radius+15,"heatmap-intensity":{base:1,stops:[[0,.8],[22,1]]}};if(t[0].weight&&t.length>=4){var u=[];t.forEach(function(e){u.push(e.weight)});var c=_D.getMax(u),f=_D.getMin(u);l["heatmap-weight"]=["interpolate",["linear"],["get","weight"],f,0,c,1]}this.map.addLayer({id:e.layerID,type:"heatmap",source:{type:"geojson",data:{type:"FeatureCollection",features:t}},paint:l})}},{key:"_changeWeight",value:function(e,t){this.fieldMaxValue={},this._getMaxValue(e,t);var r=this.fieldMaxValue[t];e.forEach(function(e){var n=e.properties[t];e.weight=n/r})}},{key:"_getMaxValue",value:function(e,t){var r,n=[],o=t;this.fieldMaxValue[o]||(e.forEach(function(e){(r=e.properties)&&parseFloat(r[o])&&n.push(parseFloat(r[o]))}),this.fieldMaxValue[o]=_D.getArrayStatistic(n,"Maximum"))}},{key:"_createRangeLayer",value:function(e,t){var r=e.themeSetting.themeField,n=e.style,o=e.featureType,i=this._getRangeStyleGroup(e,t),a={type:"geojson",data:{type:"FeatureCollection",features:t=this._getFiterFeatures(e.filterCondition,t)}},s=["match",["get","index"]];t.forEach(function(e){for(var t=parseFloat(e.properties[r]),n=0;n<i.length;n++)i[n].start<=t&&t<i[n].end&&s.push(e.properties.index,i[n].color);!t&&s.push(e.properties.index,"rgba(0, 0, 0, 0)")},this),s.push("rgba(0, 0, 0, 0)");var l={layout:{}};"LINE"===o&&n.lineCap&&(l.layout={"line-cap":n.lineCap});var u=e.visible;l.layout.visibility=u,l.style=this._transformStyleToMapBoxGl(n,o,s);var c=e.layerID;this._addOverlayToMap(o,a,c,l),"POLYGON"===o&&n.strokeColor&&this._addStrokeLineForPoly(n,a,c+"-strokeline",u)}},{key:"_getFiterFeatures",value:function(e,t){if(!e)return t;for(var r=this._replaceFilterCharacter(e),n=[],o=0;o<t.length;o++){var i=t[o],a=!1;try{var s=i.properties,l=yG(r,Object.keys(s)),u=dG(s),c="select * from json where ("+l+")";a=window.jsonsql.query(c,{attr:u})}catch(e){continue}a&&a.length>0&&n.push(i)}return n}},{key:"_replaceFilterCharacter",value:function(e){return e=e.replace(/=/g,"==").replace(/AND|and/g,"&&").replace(/or|OR/g,"||").replace(/<==/g,"<=").replace(/>==/g,">=")}},{key:"_getRangeStyleGroup",value:function(e,t){var r,n=e.featureType,o=e.style,i=[],a=e.themeSetting,s=a.customSettings,l=a.themeField,u=a.segmentCount;t.forEach(function(e){(r=e.properties||e.get("Properties"))?r[l]&&wr.isNumber(r[l])&&i.push(parseFloat(r[l])):e.get(l)&&wr.isNumber(e.get(l))&&e.get(l)&&i.push(parseFloat(e.get(l)))},this);var c=_D.getArraySegments(i,a.segmentMethod,u);if(c){var f=u;for(var p in r&&c[0]===c[r.length-1]&&(f=1,c.length=2),c){var h=c[p];h=0==p?Math.floor(100*h)/100:Math.ceil(100*h)/100+.1,c[p]=Number(h.toFixed(2))}for(var y=a.colors,d=0;d<f;d++)d in s&&(s[d].segment.start&&(c[d]=s[d].segment.start),s[d].segment.end&&(c[d+1]=s[d].segment.end));for(var b=[],v=0;v<f;v++){var m=y[v];v in s&&s[v].color&&(m=s[v].color),"LINE"===n?o.strokeColor=m:o.fillColor=m;var g=c[v],w=c[v+1],O=JSON.parse(JSON.stringify(o));b.push({style:O,color:m,start:g,end:w})}return b}}},{key:"_formatGeoJSON",value:function(e){var t=e.features;return t.forEach(function(e,t){e.properties.index=t}),t}},{key:"_excelData2Feature",value:function(e){for(var t=e.colTitles,r=-1,n=-1,o=0,i=t.length;o<i;o++)this._isXField(t[o])&&(r=o),this._isYField(t[o])&&(n=o);for(var a=[],s=0,l=e.rows.length;s<l;s++){var u=e.rows[s],c=Number(u[r]),f=Number(u[n]),p={};for(var h in e.colTitles){p[e.colTitles[h]]=e.rows[s][h]}p.index=s+"";var y={type:"Feature",geometry:{type:"Point",coordinates:[c,f]},properties:p};a.push(y)}return a}},{key:"_sendMapToUser",value:function(e,t){e===t&&this.fire("addlayerssucceeded",{map:this.map,mapparams:this.mapParams,layers:this.layers})}},{key:"_unproject",value:function(e){for(var r,n=180/Math.PI,o=6378137,i=Math.exp(-e[1]/o),a=Math.PI/2-2*Math.atan(i),s=0,l=.1;s<15&&Math.abs(l)>1e-7;s++)r=1,a+=l=Math.PI/2-2*Math.atan(i*r)-a;return new(t().LngLat)(e[0]*n/o,a*n)}},{key:"_getParamString",value:function(e,t,r){var n=[];for(var o in e)n.push((r?o.toUpperCase():o)+"="+e[o]);return(t&&-1!==t.indexOf("?")?"&":"?")+n.join("&")}},{key:"_isXField",value:function(e){var t=e.toLowerCase();return"x"===t||"smx"===t||"jd"===t||"ç»åº¦"===t||"ä¸ç»"===t||"longitude"===t||"lot"===t||"lon"===t||"lng"===t}},{key:"_isYField",value:function(e){var t=e.toLowerCase();return"y"===t||"smy"===t||"wd"===t||"çº¬åº¦"===t||"åçº¬"===t||"latitude"===t||"lat"===t}},{key:"_transformStyleToMapBoxGl",value:function(e,t,r){var n={};"POINT"!==e.type&&"BASIC_POINT"!==e.type&&"POINT"!==t||"LINE"===t?"LINE"===t?n={strokeWidth:"line-width",strokeColor:"line-color",strokeOpacity:"line-opacity"}:"POLYGON"===t&&(n={fillColor:"fill-color",fillOpacity:"fill-opacity",strokeColor:"fill-outline-color"}):n={fillColor:"circle-color",strokeWidth:"circle-stroke-width",fillOpacity:"circle-opacity",radius:"circle-radius",strokeColor:"circle-stroke-color",strokeOpacity:"circle-stroke-opacity"};var o={};for(var i in e)n[i]&&(o[n[i]]=e[i]);return r&&(o["circle-color"]?o["circle-color"]=r:o["line-color"]?o["line-color"]=r:o["fill-color"]=r),e.lineDash&&"solid"!==e.lineDash&&"LINE"===t&&(o["line-dasharray"]=this._dashStyle(e)),o}},{key:"_dashStyle",value:function(e){if(!e)return[];var t=e.strokeDashstyle||e.lineDash;switch(t){case"solid":return[];case"dot":return[1,4];case"dash":return[4,4];case"dashdot":return[4,4,1,4];case"longdash":return[8,4];case"longdashdot":return[8,4,1,4];default:return t?j.isArray(t)?t:(t=f.trim(t).replace(/\s+/g,",")).replace(/\[|\]/gi,"").split(","):[]}}},{key:"_getCanvasFromSVG",value:function(e,t,r){var n=this,o=document.createElement("canvas");o.id="dataviz-canvas-"+wr.newGuid(8),o.style.display="none",t.appendChild(o);var i=window.canvg&&window.canvg.default?window.canvg.default:wG(),a=o.getContext("2d");i.from(a,e,{ignoreMouse:!0,ignoreAnimation:!0,forceRedraw:function(){return!1}}).then(function(e){e.start(),n._canvgsV.push(e),o.width>300||o.height>300||r(o)})}},{key:"_stopCanvg",value:function(){this._canvgsV.forEach(function(e){return e.stop()}),this._canvgsV=[]}},{key:"_addOverlayToMap",value:function(e,t,r,n){"circle"!==(e={POINT:"circle",LINE:"line",POLYGON:"fill"}[e])&&"line"!==e&&"fill"!==e||this.map.addLayer({id:r,type:e,source:t,paint:n.style,layout:n.layout||{}})}},{key:"_addBaselayer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:22,o=arguments.length>4?arguments[4]:void 0;this.map.addLayer({id:t,type:"raster",source:{type:"raster",tiles:e,tileSize:256,rasterSource:o?"iserver":"",prjCoordSys:o?{epsgCode:this.baseProjection.split(":")[1]}:""},minzoom:r,maxzoom:n})}},{key:"_addStrokeLineForPoly",value:function(e,t,r,n){var o={};o.style=this._transformStyleToMapBoxGl(e,"LINE"),o.layout={visibility:n},this._addOverlayToMap("LINE",t,r,o)}},{key:"_parseGeoJsonData2Feature",value:function(e){for(var t=e.allDatas.features,r=[],n=0,o=t.length;n<o;n++){var i=t[n],a=i.geometry.coordinates;"Point"===t[n].geometry.type&&t[n].properties&&(t[n].properties.lon=a[0],t[n].properties.lat=a[1]),i.properties.index=n+"",r.push(i)}return r}},{key:"_getFeatureBySQL",value:function(e,t,r,n){var o,i;o=new ah({name:t.join().replace(":","@"),attributeFilter:"SMID > 0"}),i=new Rh({queryParameter:o,datasetNames:t,fromIndex:0,toIndex:1e5,returnContent:!0}),new Fh(e,{eventListeners:{processCompleted:function(e){r&&r(e)},processFailed:function(e){n&&n(e)}}}).processAsync(i)}},{key:"_queryFeatureBySQL",value:function(e,t,r,n,o,i,a,s,l,u){var c,f;c=new ah({name:t,attributeFilter:r}),n&&(c.fields=n);var p={queryParams:[c]};u&&(p.queryOption=kt.ATTRIBUTE),s&&(p.startRecord=s),l&&(p.expectCount=l),o&&(p.prjCoordSys={epsgCode:o}),f=new tE(p),new CE(e).queryBySQL(f,function(e){"processCompleted"===e.type?i(e):a(e)})}},{key:"_handleMultyPolygon",value:function(e){return e.forEach(function(e){if("Polygon"===e.geometry.type){var t=e.geometry.coordinates;if(t.length>1){var r=[];t.forEach(function(e){r.push([e])}),e.geometry.coordinates=r,e.geometry.type="MultiPolygon"}}}),e}},{key:"_transformScaleToZoom",value:function(e,t){var r=295829515.2024169;"EPSG:3857"!==(t||this.map.getCRS()).epsgCode&&(r=295295895);var n=e.split(":")[1];return Math.min(24,+Math.log2(r/+n).toFixed(2))}},{key:"_getResolution",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512;return e.leftBottom&&e.rightTop?Math.max(e.rightTop.x-e.leftBottom.x,e.rightTop.y-e.leftBottom.y)/t:Math.max(e[2]-e[0],e[3]-e[1])/t}}])&&SG(r.prototype,n),o&&SG(r,o),Object.defineProperty(r,"prototype",{writable:!1}),a}();function TG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function RG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?TG(Object(r),!0).forEach(function(t){AG(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TG(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function AG(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t().supermap=RG(RG({},YA),t().supermap),t().supermap.map=t().supermap.map||{},t().supermap.LogoControl=o,t().supermap.Util=wr,t().supermap.WebMap=CG,t().supermap.Graphic=Qc,t().supermap.map.getDefaultVectorTileStyle=function(e,t){t=t||{};var r={};r.version=t.version||8,r.layers=t.layers||[],r.light=t.light||{anchor:"viewport",color:"#fcf6ef",intensity:.5,position:[1.15,201,20]};var n={version:r.version,sources:{"vector-tiles":{type:"vector",tiles:[e]}},layers:r.layers,light:r.light};return null!=t.sprite&&(n.sprite=t.sprite),null!=t.glyphs&&(n.glyphs=t.glyphs),n},t().supermap.map.setBackground=function(e,t){t&&e&&e.addLayer({id:"background",type:"background",paint:{"background-color":t}},"background")},t().supermap.map.setPaintProperty=function(e,t,r,n,o,i){if(t&&e){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);for(var a=0;a<t.length;a++){var s=i?i[a]:null,l=Kc(t[a],r,o,s,n);e.addLayer(l,t[a]),e.moveLayer(t[a])}}},t().supermap.MapvDataSet=Zc,t().supermap.GeoFeatureThemeLayer=is,t().supermap.Theme3DLayer=Rs,t().supermap.ThemeFeature=Rr,t().supermap.ThemeLayer=Mo,t().supermap.Transform=bl,t().supermap.DeckglLayer=Wl,t().supermap.GraphicLayer=pl,t().supermap.GraphThemeLayer=Jo,t().supermap.GraticuleLayer=ru,t().supermap.HeatMapLayer=Hl,t().supermap.LabelThemeLayer=hs,t().supermap.MapvLayer=Cs,t().supermap.FGBLayer=Yc,t().supermap.RangeTheme3DLayer=Fs,t().supermap.RangeThemeLayer=Hs,t().supermap.RankSymbolThemeLayer=Qs,t().supermap.ThreeLayer=Fl,t().supermap.UniqueTheme3DLayer=nl,t().supermap.UniqueThemeLayer=ul,t().supermap.AddressMatchService=jf,t().supermap.ChartService=tp,t().supermap.DataFlowService=dp,t().supermap.DatasetService=Ip,t().supermap.DatasourceService=Qp,t().supermap.FeatureService=zy,t().supermap.FieldService=Sd,t().supermap.GeoprocessingService=Qd,t().supermap.GridCellInfosService=Fd,t().supermap.ImageCollectionService=qA,t().supermap.ImageService=LA,t().supermap.LayerInfoService=tg,t().supermap.MapService=Sg,t().supermap.MeasureService=Fg,t().supermap.NetworkAnalyst3DService=b_,t().supermap.NetworkAnalystService=WO,t().supermap.ProcessingService=lx,t().supermap.QueryService=CE,t().supermap.ServiceBase=af,t().supermap.SpatialAnalystService=aR,t().supermap.ThemeService=SR,t().supermap.TrafficTransferAnalystService=rA,t().supermap.WebPrintingJobService=vA,t().supermap.CommonUtil=j}(),function(){"use strict"}()}();